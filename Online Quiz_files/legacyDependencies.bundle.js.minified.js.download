!function(e){function t(t){for(var n,o,s=t[0],l=t[1],u=t[2],c=0,h=[];c<s.length;c++)o=s[c],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(d&&d(t);h.length;)h.shift()();return r.push.apply(r,u||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,s=1;s<i.length;s++){var l=i[s];0!==a[l]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=i[0]))}return e}var n={},a={2:0},r=[];function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=l;r.push([200,1,0]),i()}({155:function(e,t){},173:function(e,t){},174:function(e,t){},175:function(e,t){},191:function(e,t){},200:function(e,t,i){"use strict";i.r(t);var n=i(18),a=i.n(n),r=i(3),o=i.n(r),s=i(4),l=i.n(s),u=i(6),d=i.n(u),c=i(2),h=i.n(c),p=i(5),_=i.n(p),g=i(10),E=i.n(g),y=i(7),f=i.n(y),m=i(0),v=i.n(m),O=i(1),T=i(15),C=i(8),N=i(11),A=i.n(N),R=i(13),I=function(){function e(t,i){o()(this,e),v()(this,"buffer",void 0),v()(this,"result",void 0),v()(this,"plugins",void 0),this.buffer=t,this.plugins=i,this.result=""}return l()(e,[{key:"parse",value:function(){if("^"===this.buffer.substr(0,1))return this.escapeHTML(this.buffer.substr(1));for(var e=String(this.buffer||"").replace(/(^[ ]{1,}|[ ]{1,}$)/g," ").replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n"),t=0,i=e.length;t<i;t++)this.result+=this.parseLine(e[t],t<i-1);return this.result}},{key:"readUntil",value:function(e,t,i){for(var n=i,a=e.length;n<a;n++)if(e[n]===t)return{result:e.substr(i,n-i),consume:n-i+1};return null}},{key:"readLink",value:function(e,t){var i,n={url:"",anchor:"",consume:0};return(i=this.readUntil(e,"]",t+1))?(n.anchor=i.result,t=t+1+i.consume,n.consume+=1+i.consume,"("!==e[t]?null:(t++,(i=this.readUntil(e,")",t))?(n.url=i.result,n.consume+=i.consume,n):null)):null}},{key:"escapeHTML",value:function(e){for(var t,i="",n=0,a=e.length;n<a;n++)switch(t=e[n]){case'"':i+="&quot;";break;case"<":i+="&lt;";break;case">":i+="&gt;";break;default:i+=t}return i}},{key:"parseLine",value:function(e,t){for(var i,n,a,r="",o=!this.plugins||(void 0===this.plugins.bold||this.plugins.bold),s=!this.plugins||(void 0===this.plugins.italic||this.plugins.italic),l=!this.plugins||(void 0===this.plugins.underline||this.plugins.underline),u=!this.plugins||(void 0===this.plugins.strike||this.plugins.strike),d=!this.plugins||(void 0===this.plugins.link||this.plugins.link),c=0,h=e.length;c<h;c++)switch(i=e.charAt(c)){case"*":o&&null!==(n=this.readUntil(e,"*",c+1))?(r+="<b>".concat(this.parseLine(n.result,!1),"</b>"),c+=n.consume):r+="*";break;case"_":s&&null!==(n=this.readUntil(e,"_",c+1))?(r+="<i>".concat(this.parseLine(n.result,!1),"</i>"),c+=n.consume):r+="_";break;case"+":l&&null!==(n=this.readUntil(e,"+",c+1))?(r+="<u>".concat(this.parseLine(n.result,!1),"</u>"),c+=n.consume):r+="+";break;case"-":u&&null!==(n=this.readUntil(e,"-",c+1))?(r+="<strike>".concat(this.parseLine(n.result,!1),"</strike>"),c+=n.consume):r+="-";break;case"[":d&&null!==(a=this.readLink(e,c))?(r+='<a href="'.concat(this.escapeHTML(a.url),'" target="_blank" rel="nofollow ugc">').concat(this.parseLine(a.anchor,!1),"</a>"),c+=a.consume):r+="[";break;case'"':r+="&quot;";break;case"<":r+="&lt;";break;case">":r+="&gt;";break;default:r+=i}return r+(t?"<br/>":"")}}],[{key:"parse",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new e(t,i).parse().replace(/%(ST|UN|PL|MI)%/g,(function(e){switch(e){case"%ST%":return"*";case"%UN%":return"_";case"%PL%":return"+";case"%MI%":return"-";default:return e}}))}},{key:"toPlainText",value:function(e){this.unescaper.innerHTML=this.parse(e);var t=this.unescaper.textContent;return this.unescaper.innerHTML="",t}}]),e}();v()(I,"unescaper",document.createElement("span"));var b=i(94),P=i.n(b),S=function(){function e(){o()(this,e)}return l()(e,null,[{key:"sanitizeHTML",value:function(e){return P()(e,{allowedTags:this.HTML_TAGS,allowedAttributes:this.ALLOWED_ATTRIBUTES})}},{key:"sanitizeHTMLUsingUserRights",value:function(e){return P()(e,{allowedTags:this.HTML_TAGS.concat(this.USER_HTML_TAGS),allowedAttributes:this.ALLOWED_ATTRIBUTES})}}]),e}();v()(S,"HTML_TAGS",["a","abbr","acronym","address","area","article","aside","b","bdi","bdo","big","blockquote","br","button","canvas","caption","center","cite","code","col","colgroup","datalist","dd","del","details","dfn","dir","div","dl","dt","em","fieldset","figcaption","font","footer","h1","h2","h3","h4","h5","h6","header","hgroup","hr","i","img","input","ins","kbd","legend","li","nav","ol","p","pre","q","rp","rt","s","samp","small","span","strike","strong","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","tt","u","ul","wbr"]),v()(S,"ALLOWED_ATTRIBUTES",{a:["href","name","target","rel","type"],iframe:["src","width","height","sandbox","allow","allowfullscreen","frameborder"],img:["src","width","height","alt"],font:["font-size"],p:["align"],table:["bgcolor","width","border","align","cellpadding","summary"],td:["align","valign","bgcolor","char","charoff","colspan","rowspan","width","height","nowrap"],tr:["align","valign","bgcolor","char","charoff"],ul:["compact","type"],"*":["style","id","class","tabindex","title"]}),v()(S,"USER_HTML_TAGS",[]);var D=function(){function e(){o()(this,e)}return l()(e,null,[{key:"addVirtualProperty",value:function(e,t,i,n,a){if("string"!==typeof e||""===e)throw new Error("Invalid argument: string expected!");var r=e.split("."),o=r[0]||"",s=r[1]||"";if(r.length>2||""===o||""===s)throw new Error('Invalid argument: propertyFQN must be in format "attributeName.propertyName"');if("string"!==typeof t||""===t)throw new Error("Invalid argument: string expected!");this.properties.push({propertyName:e,elementList:i,runtimePropertyTypeNameHint:t,get:n,set:a})}},{key:"isVirtualProperty",value:function(e,t){if(e&&t)for(var i=t.getTypeId(),n=0,a=this.properties.length;n<a;n++)if(this.properties[n].propertyName===e){if(null===this.properties[n].elementList||this.properties[n].elementList.indexOf(i)>-1)return!0;break}return!1}},{key:"isReadableProperty",value:function(e,t){if(e&&t)for(var i=t.getTypeId(),n=0,a=this.properties.length;n<a;n++)if(this.properties[n].propertyName===e&&(null===this.properties[n].elementList||this.properties[n].elementList.indexOf(i)>-1))return!!this.properties[n].get;return!1}},{key:"isWritableProperty",value:function(e,t){if(e&&t)for(var i=t.getTypeId(),n=0,a=this.properties.length;n<a;n++)if(this.properties[n].propertyName===e&&(null===this.properties[n].elementList||this.properties[n].elementList.indexOf(i)>-1))return!!this.properties[n].set;return!1}},{key:"getPropertyReadCallback",value:function(e,t){if(e&&t)for(var i=t.getTypeId(),n=0,a=this.properties.length;n<a;n++)if(this.properties[n].propertyName===e&&(null===this.properties[n].elementList||this.properties[n].elementList.indexOf(i)>-1))return this.properties[n].get||null;return null}},{key:"getPropertyWriteCallback",value:function(e,t){if(e&&t)for(var i=t.getTypeId(),n=0,a=this.properties.length;n<a;n++)if(this.properties[n].propertyName===e&&(null===this.properties[n].elementList||this.properties[n].elementList.indexOf(i)>-1))return this.properties[n].set||null;return null}},{key:"enumerateVirtualProperties",value:function(e){if(!e)return null;for(var t=e.getTypeId(),i=[],n=0,a=this.properties.length;n<a;n++)(null===this.properties[n].elementList||this.properties[n].elementList.indexOf(t)>-1)&&i.push({name:this.properties[n].propertyName,type:this.properties[n].runtimePropertyTypeNameHint,optional:!0,virtual:!0});return i}}]),e}();v()(D,"properties",[]);var L=function(){function e(t){o()(this,e),v()(this,"element",void 0),v()(this,"isContentEditable",void 0),this.element=t,this.isContentEditable=t.hasAttribute("contenteditable")&&"true"===t.getAttribute("contenteditable")}return l()(e,[{key:"position",value:function(e){if(void 0===e)return this.getCaretPosition();this.setCaretPosition(e)}},{key:"getCaretPosition",value:function(){if(document.body.contains(this.element)){if(this.isContentEditable){this.element.focus();var e=0;if(document.getSelection().rangeCount){var t=document.getSelection().getRangeAt(0),i=t.cloneRange();i.selectNodeContents(this.element),i.setEnd(t.endContainer,t.endOffset),e=i.toString().length}return e}return this.element.selectionStart||0}}},{key:"setCaretPosition",value:function(e){if(document.body.contains(this.element))if(this.isContentEditable){this.element.focus();for(var t=this.element.childNodes,i=0,n=t.length;i<n;i++){if(!(t[i].textContent.length<e)){if(t[i].nodeType!==Node.TEXT_NODE){e=0;continue}document.getSelection().collapse(t[i],e);break}e-=t[i].textContent.length}}else this.element.setSelectionRange(e,e)}}]),e}(),k=function(e){function t(e){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"div";return o()(this,t),i=d()(this,_()(t).call(this)),v()(h()(i),"elementTypeName",void 0),v()(h()(i),"rootNode",void 0),v()(h()(i),"disabled",!1),v()(h()(i),"readOnly",!1),i.elementTypeName=e,i.rootNode=document.createElement(n),i.rootNode.setAttribute("data-ui-role","ui-element"),i.rootNode.setAttribute("data-type",e),i.rootNode.tabIndex=0,i.enableSyncMode(),i}return f()(t,e),l()(t,[{key:"getElementTypeName",value:function(){return this.elementTypeName}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"isDisabled",value:function(){return this.disabled}},{key:"setDisabled",value:function(e){if((e=!!e)!==this.disabled)switch(this.disabled=e,this.disabled){case!0:this.rootNode.setAttribute("disabled","disabled"),this.rootNode.tabIndex=null;break;case!1:this.rootNode.removeAttribute("disabled"),this.rootNode.tabIndex=0}}},{key:"isReadOnly",value:function(){return this.readOnly}},{key:"setReadOnly",value:function(e){if((e=!!e)!==this.readOnly)switch(this.readOnly=e,this.readOnly){case!0:this.rootNode.setAttribute("readonly","readonly");break;case!1:this.rootNode.removeAttribute("readonly")}}},{key:"getAttribute",value:function(e){return this.rootNode.getAttribute(e)}},{key:"setAttribute",value:function(e,t){this.rootNode.setAttribute(e,t)}},{key:"hasAttribute",value:function(e){return this.rootNode.hasAttribute(e)}},{key:"removeAttribute",value:function(e){this.rootNode.removeAttribute(e)}},{key:"getId",value:function(){return this.rootNode.id}},{key:"setId",value:function(e){this.rootNode.id=String(e||"")}},{key:"append",value:function(e,i){switch(i){case t.APPEND_POSITION_BEFORE:e.insertAdjacentElement("beforebegin",this.rootNode);break;case t.APPEND_POSITION_AFTER:e.insertAdjacentElement("afterend",this.rootNode);break;case t.APPEND_POSITION_INSIDE:default:e.insertAdjacentElement("beforeend",this.rootNode)}this.trigger("append")}},{key:"replace",value:function(e){e.parentNode.replaceChild(this.rootNode,e),this.trigger("replace")}},{key:"insert",value:function(e){for(var i=e.childNodes,n=new L(e).position(),a=null,r=0,o=i.length;r<o;r++){var s=i[r].textContent.length;if(!(n>=s)){a=i[r];break}n-=s}if(null!==a){if(this.disableEvents(),a.nodeType===Node.TEXT_NODE){this.replace(a);var l=a.textContent.substr(0,n),u=a.textContent.substr(n);void 0===i[r-1]||i[r-1].nodeType!==Node.TEXT_NODE?(this.rootNode.insertAdjacentText("beforebegin",l),r++):i[r-1].nodeType===Node.TEXT_NODE&&(i[r-1].nodeValue=l+i[r-1].nodeValue),void 0===i[r+1]||i[r+1].nodeType!==Node.TEXT_NODE?this.rootNode.insertAdjacentText("afterend",u):i[r+1].nodeType===Node.TEXT_NODE&&(i[r+1].nodeValue+=u)}else this.append(a,t.APPEND_POSITION_BEFORE);this.enableEvents()}else this.append(e,t.APPEND_POSITION_INSIDE);this.trigger("insert")}},{key:"delete",value:function(){this.rootNode.parentNode&&this.rootNode.parentNode.removeChild(this.rootNode),this.trigger("delete")}}]),t}(R.a);v()(k,"APPEND_POSITION_INSIDE",0),v()(k,"APPEND_POSITION_BEFORE",1),v()(k,"APPEND_POSITION_AFTER",2),v()(k,"APPEND_POSITION_REPLACE",3),v()(k,"APPEND_POSITION_AT_CURSOR",4);var M=function(){function e(){o()(this,e)}return l()(e,[{key:"clearElementDOMNodeRoot",value:function(e){for(var t=e.getRootNode();t.childNodes.length;)t.removeChild(t.firstChild)}},{key:"getSizeAttributeValue",value:function(e){switch(e){case O.w.HALF:return"half";case O.w.QUARTER:return"quarter";case O.w.THIRD:return"third";case O.w.FILL:return"fill";case O.w.ONE_UNIT:return"1u";case O.w.TWO_UNITS:return"2u";case O.w.THREE_UNITS:return"3u";case O.w.FOUR_UNITS:return"4u";case null:return null;case O.w.FULL:default:return"full"}}},{key:"getSizeInUnits",value:function(e,t){switch(t){case O.w.FULL:return~~e;case O.w.HALF:return~~(e/2)||1;case O.w.QUARTER:return~~(e/4)||1;case O.w.THIRD:return~~(e/3)||1;case O.w.ONE_UNIT:return Math.min(e,1);case O.w.TWO_UNITS:return Math.min(e,2);case O.w.THREE_UNITS:return Math.min(e,3);case O.w.FOUR_UNITS:return Math.min(e,4);default:return 0}}},{key:"getElementLayoutSize",value:function(e){var t=~~e.getColspan(),i={labelWidthInUnits:0,inputWidthInUnits:t},n=e.hasProperty("label.widthInUnits")?e.getProperty("label.widthInUnits"):null;return i.labelWidthInUnits=null!==n&&n>0?n:e.getForm().getProperty("options.labelWidthInUnits"),i.labelWidthInUnits>t&&(i.labelWidthInUnits=t),i.inputWidthInUnits-=i.labelWidthInUnits,0===i.inputWidthInUnits&&(i.inputWidthInUnits=1,i.labelWidthInUnits--),i.labelWidthInUnits+i.inputWidthInUnits>t&&(i.inputWidthInUnits>=t&&(i.inputWidthInUnits=t-1),i.labelWidthInUnits=t-i.inputWidthInUnits),i}},{key:"isLabelSuppressed",value:function(e){return e.hasProperty("label.isRemoved")&&e.getProperty("label.isRemoved")}}],[{key:"setLabelCompactFieldState",value:function(t,i,n,a){if(null!==n&&1===n.length&&n[0]&&n[0].inputs&&1===n[0].inputs.length&&n[0].inputs[0]&&n[0].inputs[0].input){var r=e.castToDOMElement(n[0].inputs[0].input);t?r.setAttribute("placeholder",a?"":String(i||"")):r.removeAttribute("placeholder")}}},{key:"castToDOMElement",value:function(e){return e&&A()(e,k)?e.getRootNode():e}}]),e}();v()(M,"LABEL_PLACEMENT_TOP_RENDERERS",[O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD,O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD,O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD,O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL]);var x=function(){function e(){o()(this,e)}return l()(e,[{key:"updateRootNode",value:function(e){console.log("CustomControlRenderer: update: ",e.getHash())}},{key:"getRendererType",value:function(){return O.m.CUSTOM_CONTROL_RENDERER}}]),e}(),w=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),u=e.getColspan();if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>u?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","tln"),a.removeAttribute("data-label-width"),null!==r&&a.appendChild(r),null!==o&&a.appendChild(o),null!==l)for(var d=0,c=l.length;d<c;d++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===d&&t.setAttribute("data-is-first-row","1"),c-1===d&&t.setAttribute("data-is-last-row","1"),n=0;for(var h=0,p=l[d].inputs.length;h<p;h++)t.appendChild(M.castToDOMElement(l[d].inputs[h].input)),null!==(i=this.getSizeAttributeValue(l[d].inputs[h].width))?(l[d].inputs[h].input.setAttribute("data-size",i),n+=this.getSizeInUnits(u,l[d].inputs[h].width)):l[d].inputs[h].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(u-n)),a.appendChild(t)}null!==s&&a.appendChild(s),null!==r&&null!==l&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!1,r.textContent,l,!1)}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL}}]),t}(M),U=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),u=e.getColspan();if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>u?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","tfn"),a.removeAttribute("data-label-width"),null!==r&&a.appendChild(r),null!==l)for(var d=0,c=l.length;d<c;d++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===d&&t.setAttribute("data-is-first-row","1"),c-1===d&&t.setAttribute("data-is-last-row","1"),n=0;for(var h=0,p=l[d].inputs.length;h<p;h++)t.appendChild(M.castToDOMElement(l[d].inputs[h].input)),null!==(i=this.getSizeAttributeValue(l[d].inputs[h].width))?(l[d].inputs[h].input.setAttribute("data-size",i),n+=this.getSizeInUnits(u,l[d].inputs[h].width)):l[d].inputs[h].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(u-n)),a.appendChild(t)}null!==o&&a.appendChild(o),null!==s&&a.appendChild(s),null!==r&&null!==l&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!1,r.textContent,l,!1)}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD}}]),t}(M),Y=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=document.createElement("div"),o=document.createElement("div"),s=e.getLabelDOMNode(),l=e.getInstructionsDOMNode(),u=e.getErrorDOMNode(),d=e.getInputDOMNodes(),c=this.getElementLayoutSize(e),h=c.inputWidthInUnits;if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>h?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","lln"),a.setAttribute("data-label-width",String(c.labelWidthInUnits)),r.setAttribute("data-role","label-column"),r.setAttribute("data-colspan",String(c.labelWidthInUnits)),o.setAttribute("data-role","input-column"),o.setAttribute("data-colspan",String(c.inputWidthInUnits)),a.appendChild(r),a.appendChild(o),null!==s&&r.appendChild(s),null!==l&&r.appendChild(l),null!==d)for(var p=0,_=d.length;p<_;p++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===p&&t.setAttribute("data-is-first-row","1"),_-1===p&&t.setAttribute("data-is-last-row","1"),n=0;for(var g=0,E=d[p].inputs.length;g<E;g++)t.appendChild(M.castToDOMElement(d[p].inputs[g].input)),null!==(i=this.getSizeAttributeValue(d[p].inputs[g].width))?(d[p].inputs[g].input.setAttribute("data-size",i),n+=this.getSizeInUnits(h,d[p].inputs[g].width)):d[p].inputs[g].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(h-n)),o.appendChild(t)}null!==u&&o.appendChild(u),null!==s&&null!==d&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!1,s.textContent,d,!1)}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL}}]),t}(M),F=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=document.createElement("div"),o=document.createElement("div"),s=e.getLabelDOMNode(),l=e.getInstructionsDOMNode(),u=e.getErrorDOMNode(),d=e.getInputDOMNodes(),c=this.getElementLayoutSize(e),h=c.inputWidthInUnits;if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>h?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","rln"),a.setAttribute("data-label-width",String(c.inputWidthInUnits)),r.setAttribute("data-role","label-column"),r.setAttribute("data-colspan",String(c.labelWidthInUnits)),o.setAttribute("data-role","input-column"),o.setAttribute("data-colspan",String(c.inputWidthInUnits)),a.appendChild(o),a.appendChild(r),null!==s&&r.appendChild(s),null!==l&&r.appendChild(l),null!==d)for(var p=0,_=d.length;p<_;p++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===p&&t.setAttribute("data-is-first-row","1"),_-1===p&&t.setAttribute("data-is-last-row","1"),n=0;for(var g=0,E=d[p].inputs.length;g<E;g++)t.appendChild(M.castToDOMElement(d[p].inputs[g].input)),null!==(i=this.getSizeAttributeValue(d[p].inputs[g].width))?(d[p].inputs[g].input.setAttribute("data-size",i),n+=this.getSizeInUnits(h,d[p].inputs[g].width)):d[p].inputs[g].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(h-n)),o.appendChild(t)}null!==u&&o.appendChild(u),null!==s&&null!==d&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!1,s.textContent,d,!1)}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL}}]),t}(M),V=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=document.createElement("div"),o=document.createElement("div"),s=e.getLabelDOMNode(),l=e.getInstructionsDOMNode(),u=e.getErrorDOMNode(),d=e.getInputDOMNodes(),c=this.getElementLayoutSize(e),h=c.inputWidthInUnits;if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>h?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","lfn"),a.setAttribute("data-label-width",String(c.labelWidthInUnits)),r.setAttribute("data-role","label-column"),r.setAttribute("data-colspan",String(c.labelWidthInUnits)),o.setAttribute("data-role","input-column"),o.setAttribute("data-colspan",String(c.inputWidthInUnits)),a.appendChild(r),a.appendChild(o),null!==s&&r.appendChild(s),null!==d)for(var p=0,_=d.length;p<_;p++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===p&&t.setAttribute("data-is-first-row","1"),_-1===p&&t.setAttribute("data-is-last-row","1"),n=0;for(var g=0,E=d[p].inputs.length;g<E;g++)t.appendChild(M.castToDOMElement(d[p].inputs[g].input)),null!==(i=this.getSizeAttributeValue(d[p].inputs[g].width))?(d[p].inputs[g].input.setAttribute("data-size",i),n+=this.getSizeInUnits(h,d[p].inputs[g].width)):d[p].inputs[g].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(h-n)),o.appendChild(t)}null!==l&&o.appendChild(l),null!==u&&o.appendChild(u),null!==s&&null!==d&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!1,s.textContent,d,!1)}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD}}]),t}(M),B=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=document.createElement("div"),o=document.createElement("div"),s=e.getLabelDOMNode(),l=e.getInstructionsDOMNode(),u=e.getErrorDOMNode(),d=e.getInputDOMNodes(),c=this.getElementLayoutSize(e),h=c.inputWidthInUnits;if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>h?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","rfn"),a.setAttribute("data-label-width",String(c.inputWidthInUnits)),r.setAttribute("data-role","label-column"),r.setAttribute("data-colspan",String(c.labelWidthInUnits)),o.setAttribute("data-role","input-column"),o.setAttribute("data-colspan",String(c.inputWidthInUnits)),a.appendChild(o),a.appendChild(r),null!==s&&r.appendChild(s),null!==d)for(var p=0,_=d.length;p<_;p++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===p&&t.setAttribute("data-is-first-row","1"),_-1===p&&t.setAttribute("data-is-last-row","1"),n=0;for(var g=0,E=d[p].inputs.length;g<E;g++)t.appendChild(M.castToDOMElement(d[p].inputs[g].input)),null!==(i=this.getSizeAttributeValue(d[p].inputs[g].width))?(d[p].inputs[g].input.setAttribute("data-size",i),n+=this.getSizeInUnits(h,d[p].inputs[g].width)):d[p].inputs[g].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(h-n)),o.appendChild(t)}null!==l&&o.appendChild(l),null!==u&&o.appendChild(u),null!==s&&null!==d&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!1,s.textContent,d,!1)}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD}}]),t}(M),H=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),u=e.getColspan();if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>u?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","tlc"),a.removeAttribute("data-label-width"),null!==o&&a.appendChild(o),null!==l)for(var d=0,c=l.length;d<c;d++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===d&&t.setAttribute("data-is-first-row","1"),c-1===d&&t.setAttribute("data-is-last-row","1"),n=0;for(var h=0,p=l[d].inputs.length;h<p;h++)t.appendChild(M.castToDOMElement(l[d].inputs[h].input)),null!==(i=this.getSizeAttributeValue(l[d].inputs[h].width))?(l[d].inputs[h].input.setAttribute("data-size",i),n+=this.getSizeInUnits(u,l[d].inputs[h].width)):l[d].inputs[h].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(u-n)),a.appendChild(t)}null!==s&&a.appendChild(s),null!==r&&null!==l&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!0,r.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD}}]),t}(M),W=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),u=e.getColspan();if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>u?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","tfc"),a.removeAttribute("data-label-width"),null!==l)for(var d=0,c=l.length;d<c;d++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===d&&t.setAttribute("data-is-first-row","1"),c-1===d&&t.setAttribute("data-is-last-row","1"),n=0;for(var h=0,p=l[d].inputs.length;h<p;h++)t.appendChild(M.castToDOMElement(l[d].inputs[h].input)),null!==(i=this.getSizeAttributeValue(l[d].inputs[h].width))?(l[d].inputs[h].input.setAttribute("data-size",i),n+=this.getSizeInUnits(u,l[d].inputs[h].width)):l[d].inputs[h].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(u-n)),a.appendChild(t)}null!==o&&a.appendChild(o),null!==s&&a.appendChild(s),null!==r&&null!==l&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!0,r.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD}}]),t}(M),G=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),u=e.getColspan();if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>u?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","llc"),a.removeAttribute("data-label-width"),null!==o&&a.appendChild(o),null!==l)for(var d=0,c=l.length;d<c;d++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===d&&t.setAttribute("data-is-first-row","1"),c-1===d&&t.setAttribute("data-is-last-row","1"),n=0;for(var h=0,p=l[d].inputs.length;h<p;h++)t.appendChild(M.castToDOMElement(l[d].inputs[h].input)),null!==(i=this.getSizeAttributeValue(l[d].inputs[h].width))?(l[d].inputs[h].input.setAttribute("data-size",i),n+=this.getSizeInUnits(u,l[d].inputs[h].width)):l[d].inputs[h].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(u-n)),a.appendChild(t)}null!==s&&a.appendChild(s),null!==r&&null!==l&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!0,r.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD}}]),t}(M),K=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),u=e.getColspan();if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>u?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","lfc"),a.removeAttribute("data-label-width"),null!==l)for(var d=0,c=l.length;d<c;d++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===d&&t.setAttribute("data-is-first-row","1"),c-1===d&&t.setAttribute("data-is-last-row","1"),n=0;for(var h=0,p=l[d].inputs.length;h<p;h++)t.appendChild(M.castToDOMElement(l[d].inputs[h].input)),null!==(i=this.getSizeAttributeValue(l[d].inputs[h].width))?(l[d].inputs[h].input.setAttribute("data-size",i),n+=this.getSizeInUnits(u,l[d].inputs[h].width)):l[d].inputs[h].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(u-n)),a.appendChild(t)}null!==o&&a.appendChild(o),null!==s&&a.appendChild(s),null!==r&&null!==l&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!0,r.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD}}]),t}(M),z=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),u=e.getColspan();if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>u?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","rlc"),a.removeAttribute("data-label-width"),null!==o&&a.appendChild(o),null!==l)for(var d=0,c=l.length;d<c;d++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===d&&t.setAttribute("data-is-first-row","1"),c-1===d&&t.setAttribute("data-is-last-row","1"),n=0;for(var h=0,p=l[d].inputs.length;h<p;h++)t.appendChild(M.castToDOMElement(l[d].inputs[h].input)),null!==(i=this.getSizeAttributeValue(l[d].inputs[h].width))?(l[d].inputs[h].input.setAttribute("data-size",i),n+=this.getSizeInUnits(u,l[d].inputs[h].width)):l[d].inputs[h].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(u-n)),a.appendChild(t)}null!==s&&a.appendChild(s),null!==r&&null!==l&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!0,r.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD}}]),t}(M),q=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"updateRootNode",value:function(e){this.clearElementDOMNodeRoot(e);var t,i,n,a=e.getRootNode(),r=e.getLabelDOMNode(),o=e.getInstructionsDOMNode(),s=e.getErrorDOMNode(),l=e.getInputDOMNodes(),u=e.getColspan();if(e.getElementKind()===O.l.CONTROL&&(e.getMinInputRowWidth()>u?a.setAttribute("data-force-mobile-rendering","1"):a.removeAttribute("data-force-mobile-rendering")),a.setAttribute("data-renderer-type","rfc"),a.removeAttribute("data-label-width"),null!==l)for(var d=0,c=l.length;d<c;d++){(t=document.createElement("div")).setAttribute("data-role","input-row"),0===d&&t.setAttribute("data-is-first-row","1"),c-1===d&&t.setAttribute("data-is-last-row","1"),n=0;for(var h=0,p=l[d].inputs.length;h<p;h++)t.appendChild(M.castToDOMElement(l[d].inputs[h].input)),null!==(i=this.getSizeAttributeValue(l[d].inputs[h].width))?(l[d].inputs[h].input.setAttribute("data-size",i),n+=this.getSizeInUnits(u,l[d].inputs[h].width)):l[d].inputs[h].input.removeAttribute("data-size");t.setAttribute("data-fill-colspan",String(u-n)),a.appendChild(t)}null!==o&&a.appendChild(o),null!==s&&a.appendChild(s),null!==r&&null!==l&&e.isCompactFieldPlaceholderSupported()&&M.setLabelCompactFieldState(!0,r.textContent,l,this.isLabelSuppressed(e))}},{key:"getRendererType",value:function(){return O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD}}]),t}(M),X=function(){function e(){o()(this,e),v()(this,"CUSTOM_CONTROL_RENDERER",null),v()(this,"LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL",null),v()(this,"LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD",null),v()(this,"LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL",null),v()(this,"LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD",null),v()(this,"LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL",null),v()(this,"LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD",null),v()(this,"LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD",null),v()(this,"LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD",null),v()(this,"LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD",null),v()(this,"LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD",null),v()(this,"LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD",null),v()(this,"LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD",null),this.CUSTOM_CONTROL_RENDERER=new x,this.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL=new w,this.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD=new U,this.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL=new Y,this.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD=new V,this.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL=new F,this.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD=new B,this.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD=new H,this.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD=new W,this.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD=new G,this.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD=new K,this.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD=new z,this.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD=new q}return l()(e,null,[{key:"getInstance",value:function(){return void 0===e.instance?e.instance=new e:e.instance}},{key:"getRendererByType",value:function(t){switch(t){case O.m.CUSTOM_CONTROL_RENDERER:return e.getInstance().CUSTOM_CONTROL_RENDERER;case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL:return e.getInstance().LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL;case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD:return e.getInstance().LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD;case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL:return e.getInstance().LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL;case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD:return e.getInstance().LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD;case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL:return e.getInstance().LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL;case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD:return e.getInstance().LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD;case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD;case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD;case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD;case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD;case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD;case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:return e.getInstance().LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD;default:throw new Error("Renderers Factory: Unknown renderer type "+JSON.stringify(t))}}},{key:"getSuggestedRenderer",value:function(e,t,i){var n=e.hasProperty("label.isRemoved")&&e.getProperty("label.isRemoved")||e.hasProperty("label.isCompactField")&&e.getProperty("label.isCompactField");switch(t){case O.t.TOP_ALIGNED:switch(i){case O.s.BELOW_FIELD:return n?O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD;case O.s.BELOW_LABEL:default:return n?O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL}case O.t.RIGHT_ALIGNED:switch(i){case O.s.BELOW_FIELD:return n?O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD;case O.s.BELOW_LABEL:default:return n?O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL}case O.t.LEFT_ALIGNED:default:switch(i){case O.s.BELOW_FIELD:return n?O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD;case O.s.BELOW_LABEL:default:return n?O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL}}}}]),e}();v()(X,"instance",void 0);var Q,j,J,Z,ee,te=i(33);!function(e){e[e.ANDROID=0]="ANDROID",e[e.IOS=1]="IOS",e[e.MAC=2]="MAC",e[e.WINDOWS_MOBILE=3]="WINDOWS_MOBILE",e[e.WINDOWS=4]="WINDOWS",e[e.LINUX=5]="LINUX",e[e.UNIX=6]="UNIX",e[e.OTHER=7]="OTHER"}(Q||(Q={})),function(e){e[e.WIN_95=0]="WIN_95",e[e.WIN_98=1]="WIN_98",e[e.WIN_2000=2]="WIN_2000",e[e.WIN_NT=3]="WIN_NT",e[e.WIN_ME=4]="WIN_ME",e[e.WIN_XP=5]="WIN_XP",e[e.WIN_SERVER_2003=6]="WIN_SERVER_2003",e[e.WIN_VISTA=7]="WIN_VISTA",e[e.WIN_7=8]="WIN_7",e[e.WIN_8=9]="WIN_8",e[e.WIN_10=10]="WIN_10",e[e.WIN_OTHER=11]="WIN_OTHER",e[e.UNKNOWN=12]="UNKNOWN"}(j||(j={})),function(e){e[e.CHROME=0]="CHROME",e[e.FIREFOX=1]="FIREFOX",e[e.MSIE=2]="MSIE",e[e.EDGE=3]="EDGE",e[e.SAFARI=4]="SAFARI",e[e.OPERA=5]="OPERA",e[e.UNKNOWN=6]="UNKNOWN"}(J||(J={})),function(e){e[e.DESKTOP=0]="DESKTOP",e[e.MOBILE=1]="MOBILE",e[e.SMART_TV=2]="SMART_TV"}(Z||(Z={})),function(e){e[e.E_NONE=0]="E_NONE",e[e.E_SYNTAX_ERROR=1]="E_SYNTAX_ERROR",e[e.E_BAD_OS=2]="E_BAD_OS",e[e.E_MOBILE_APP=3]="E_MOBILE_APP",e[e.E_DESKTOP_APP=4]="E_DESKTOP_APP",e[e.E_BAD_CPU_CLASS=5]="E_BAD_CPU_CLASS",e[e.E_BROWSER_VERSION=6]="E_BROWSER_VERSION",e[e.E_BROWSER_TYPE=7]="E_BROWSER_TYPE",e[e.E_API_MISSING=8]="E_API_MISSING",e[e.E_UNKNOWN_ERROR=9]="E_UNKNOWN_ERROR"}(ee||(ee={}));var ie=function(){function e(){o()(this,e)}return l()(e,null,[{key:"winVersionCompare",value:function(t,i){var n=e.WIN_VERSIONS_RELEASE_ORDER.indexOf(t);return e.WIN_VERSIONS_RELEASE_ORDER.indexOf(i)-n}},{key:"isTouchDevice",value:function(){return!0}},{key:"explainMissingApis",value:function(t){if(!t||!t.length)return"An error occured while detecting your browser capabilities";var i=[],n=0,a=t.length;for(n=0;n<a;n++)e.API_NAMES[t[n]]?i.push('"'.concat(t[n].toUpperCase(),'" (').concat(e.API_NAMES[t[n]],")")):i.push('"'.concat(t[n].toUpperCase(),'"'));return i.join(" or ")}},{key:"meetsRequirements",value:function(t){var i=/^(\*|win((95|98|2k|nt4|me|xp|2k3|vista|7|8|10|other)(\+)?)?|android|ios|mac|winmobile|linux|unix|other|\*) (32|64|\*) (desktop|mobile|\*) (chrome|firefox|msie|edge|opera|safari|other|\*) ([\d\.]+(\+)?|\*)( apis\=([a-z\_\,\|\d]+))?$/i.exec(String(t||""));if(!i)return"E_SYNTAX_ERROR: Invalid requirement: ".concat(JSON.stringify(t));var n=i[1],a=~~i[5],r=i[6],o=i[7],s=parseFloat(i[8])||-1,l=!!i[4],u=(l&&n.substr(0,n.length-1),i[8]&&i[8].match(/\+$/)?"gte":"eq"),d=i[11]?String(i[11]).split(","):[];if(!(i=/^(win((95|98|2k|nt4|me|xp|2k3|vista|7|8|10|other)(\+)?)?|android|ios|mac|winmobile|linux|unix|other) (32|64|\*) (desktop|mobile) (chrome|firefox|msie|edge|opera|safari|other) (.+) apis\=([a-z\_\,\d]+)$/i.exec(e.toString)))return"E_SYNTAX_ERROR: Invalid browser information: ".concat(JSON.stringify(e.toString));var c,h,p,_,g,E,y=i[1],f=~~i[5],m=i[6],v=i[7],O=parseFloat(i[8]),T=/^win/.test(y)&&"mobile"!=m,C=i[9]?String(i[9]).split(","):null;if("*"!=n){if(l&&!T)return"E_BAD_OS: Sorry, you need Windows in order to enjoy this application";if(l){if(n=n.substr(0,n.length-1),e.winVersionCompare(n,y)<0)return"E_BAD_OS:".concat(n,": Sorry, you need at least ").concat(e.WIN_VERSIONS_NAMES[n]||"an Unknown Windows (".concat(n,") version"),", but you have ").concat(e.WIN_VERSIONS_NAMES[y]||"an Unknown Windows (".concat(y,") version")," installed on your PC")}else if(n!=y)switch(n){case"win95":case"win98":case"win2k":case"winnt4":case"winme":case"winxp":case"win2k3":case"winvista":case"win7":case"win8":case"win10":case"winother":return"E_BAD_OS: This application requires the '".concat(e.WIN_VERSIONS_NAMES[y],"' operating system in order to run properly.");case"android":return"E_BAD_OS: This applicatoin requires the Android operating system in order to run properly.";case"mac":return"E_BAD_OS: This application requires the Mac OS operating system in order to run properly.";case"ios":return"E_BAD_OS: This application requires the IOS operating system in order to run properly.";case"winmobile":return"E_BAD_OS: This application requires the Windows Mobile operating system in order to run properly.";case"linux":return"E_BAD_OS: This application requires the Linux operating system in order to run properly";case"unix":return"E_BAD_OS: This application requires a Unix operating system in order to run properly";case"other":default:return"E_BAD_OS: Your operating system is not compatible with this application"}}if(0!=a&&f!=a)return"E_BAD_CPU_CLASS: This application requires a ".concat(String(a),"bit CPU in order to run properly, and we detected that you have a ").concat(String(f),"bit CPU");if("*"!=o&&v!=o)return"E_BAD_BROWSER: Sorry, you need a ".concat(e.BROWSER_NAMES[o]||"Special"," web browser in order to run this application, but we detected that you have ").concat(e.BROWSER_NAMES[v]||"Special"," web browser");if("*"!=r&&m!=r)switch(r){case"mobile":return"E_MOBILE_APP: This application is not intended to be used on desktop computers. Please try using a mobile device";case"desktop":return"E_DESKTOP_APP: This application is not intended to be used on mobile devices. Please try using a desktop computer or a laptop"}if(s>-1&&O<s&&"gte"==u)return"E_BROWSER_VERSION: You need at least ".concat(e.BROWSER_NAMES[v]||"Special"," web browser version ").concat(s.toFixed(2)," in order to run this application, but we detected that you have a lower version (").concat(O.toFixed(2),")");if(s>-1&&~~O!=~~s&&"eq"==u)return"E_BROWSER_VERSION: You need the ".concat(e.BROWSER_NAMES[v]||"Special"," web browser version ").concat(~~s," in order to run this application, but we detected that you have a different version (").concat(~~O,"), which is ").concat(O>s?"greater":"lower"," that the designed browser version of this application");if(d&&d.length)for(c=0,p=d.length;c<p;c++)if(_=(g=d[c].split("|")).length){for(E=!1,h=0;h<_;h++)if(C.indexOf(g[h])>-1){E=!0;break}if(!E)return"E_API_MISSING: Some plugins, browser capabilities or extensions, were not detected: ".concat(e.explainMissingApis(g))}return""}},{key:"getRequirementErrorCode",value:function(e){if(""==e)return ee.E_NONE;var t=/^([A-Z\d\_]+)\:/.exec(e);if(!t)return ee.E_NONE;switch(t[1]){case"E_SYNTAX_ERROR":return ee.E_SYNTAX_ERROR;case"E_BAD_OS":return ee.E_BAD_OS;case"E_MOBILE_APP":return ee.E_MOBILE_APP;case"E_DESKTOP_APP":return ee.E_DESKTOP_APP;case"E_BAD_CPU_CLASS":return ee.E_BAD_CPU_CLASS;case"E_BROWSER_VERSION":return ee.E_BROWSER_VERSION;case"E_BROWSER_TYPE":return ee.E_BROWSER_TYPE;case"E_API_MISSING":return ee.E_API_MISSING;default:return ee.E_UNKNOWN_ERROR}}},{key:"isMobileDefaultBrowser",value:function(){return""!=e.meetsRequirements("android * mobile chrome 42+")&&""==e.meetsRequirements("android * mobile chrome *")}},{key:"isMobile",value:function(){return""===e.meetsRequirements("* * mobile * *")}},{key:"isIOS",value:function(){return""===e.meetsRequirements("* * mobile safari *")}},{key:"isMAC",value:function(){return""===e.meetsRequirements("mac * desktop safari *")}},{key:"isFirefox",value:function(){return""===e.meetsRequirements("* * firefox * *")}},{key:"isIE",value:function(){return!!window.MSInputMethodContext&&!!document.documentMode}},{key:"isIPad",get:function(){return!!navigator.userAgent.match(/iPad/i)}},{key:"isIPod",get:function(){return!!navigator.userAgent.match(/iPod/i)}},{key:"isIPhone",get:function(){return!!navigator.userAgent.match(/iPhone/i)}},{key:"isAndroid",get:function(){return!!navigator.userAgent.match(/Android/i)}},{key:"isWindowsPhone",get:function(){return!!navigator.userAgent.match(/(Windows (Phone )?8.1|Windows NT 6.3|Windows Phone [\d\.]+)/i)&&navigator.userAgent.toLowerCase().indexOf("mobile")>-1}},{key:"isChrome",get:function(){return!!window.chrome&&/google/i.test(navigator.vendor)}},{key:"isInternetExplorer",get:function(){return"Microsoft Internet Explorer"==navigator.appName&&!!/MSIE([0-9]{1,}[\.0-9]{0,})/.test(navigator.userAgent)}},{key:"cpuClass",get:function(){var t=navigator.userAgent,i=0,n=e.CPU_64_CLASSES.length;for(i=0;i<n;i++)if(t.indexOf(e.CPU_64_CLASSES[i])>-1)return 64;return 32}},{key:"operatingSystem",get:function(){return e.isWindowsPhone?Q.WINDOWS_MOBILE:e.isAndroid?Q.ANDROID:e.isIPad||e.isIPhone||e.isIPod?Q.IOS:navigator.userAgent.indexOf("Mac")>-1?Q.MAC:navigator.userAgent.indexOf("Linux")>-1?Q.LINUX:navigator.userAgent.indexOf("Windows")?Q.WINDOWS:navigator.userAgent.indexOf("X11")>-1?Q.UNIX:Q.OTHER}},{key:"operatingSystemVersion",get:function(){if(e.operatingSystem!=Q.WINDOWS)return j.UNKNOWN;switch(!0){case/(Windows 10\.0|Windows NT 10\.0)/.test(navigator.userAgent):return j.WIN_10;case/(Windows 8|Windows NT 6\.(2|3))/.test(navigator.userAgent):return j.WIN_8;case/(Windows 7|Windows NT 6\.1)/.test(navigator.userAgent):return j.WIN_7;case/Windows NT 6\.0/.test(navigator.userAgent):return j.WIN_VISTA;case/Windows NT 5\.2/.test(navigator.userAgent):return j.WIN_SERVER_2003;case/(Windows NT 5\.1|Windows XP)/.test(navigator.userAgent):return j.WIN_XP;case/(Windows NT 5\.0|Windows 2000)/.test(navigator.userAgent):return j.WIN_2000;case/(Win 9x 4\.90|Windows ME)/.test(navigator.userAgent):return j.WIN_ME;case/(Windows 98|Win98)/.test(navigator.userAgent):return j.WIN_98;case/(Windows 95|Win95|Windows_95)/.test(navigator.userAgent):return j.WIN_95;case/(Windows NT 4\.0|WinNT4\.0|WinNT|Windows NT)/.test(navigator.userAgent):return j.WIN_NT;default:return j.WIN_OTHER}}},{key:"browserType",get:function(){switch(!0){case!!navigator.userAgent.match(new RegExp("[\\s]+Edge\\/[\\d]+","i")):return J.EDGE;case navigator.userAgent.indexOf("Opera")>-1:case navigator.userAgent.indexOf("OPR")>-1:return J.OPERA;case navigator.userAgent.indexOf("MSIE")>-1:return J.MSIE;case navigator.userAgent.indexOf("Chrome")>-1:return J.CHROME;case navigator.userAgent.indexOf("Safari")>-1:return J.SAFARI;case navigator.userAgent.indexOf("Firefox")>-1:return J.FIREFOX;case navigator.userAgent.indexOf("Trident/")>-1:return J.MSIE;default:return J.UNKNOWN}}},{key:"browserVersion",get:function(){navigator.appVersion;var e,t,i,n=navigator.userAgent,a="".concat(parseFloat(navigator.appVersion));return(e=n.indexOf("Edge/"))>-1?a=n.substr(e+5):(e=n.indexOf("Opera"))>-1?(a=n.substring(e+6),-1!=(e=n.indexOf("Version"))&&(a=n.substring(e+8))):-1!=(e=n.indexOf("OPR"))?a=n.substring(e+4):-1!=(e=n.indexOf("MSIE"))?a=n.substring(e+5):-1!=(e=n.indexOf("Chrome"))?a=n.substring(e+7):-1!=(e=n.indexOf("Safari"))?(a=n.substring(e+7),-1!=(e=n.indexOf("Version"))&&(a=n.substring(e+8))):-1!=(e=n.indexOf("Firefox"))?a=n.substring(e+8):-1!=n.indexOf("Trident/")?a=n.substring(n.indexOf("rv:")+3):n.lastIndexOf(" ")+1<(e=n.lastIndexOf("/"))&&(a=n.substring(e+1)),-1!=(t=a.indexOf(";"))&&(a=a.substring(0,t)),-1!=(t=a.indexOf(" "))&&(a=a.substring(0,t)),-1!=(t=a.indexOf(")"))&&(a=a.substring(0,t)),i=parseInt("".concat(a),10),isNaN(i)&&(a="".concat(parseFloat(navigator.appVersion))),parseFloat(a)}},{key:"browserTechnologies",get:function(){var t=[],i=0,n=e.APIS_LIST.length;for(i=0;i<n;i++)try{(window[e.APIS_LIST[i]]||window["moz".concat(e.APIS_LIST[i])]||window["webkit".concat(e.APIS_LIST[i])]||window["ms".concat(e.APIS_LIST[i])]||window["o".concat(e.APIS_LIST[i])])&&t.push(e.APIS_LIST[i].toLowerCase())}catch(l){}var a=navigator.plugins||[],r=!1,o=0,s=0;for(i=0,n=a.length;i<n;i++)if(a[i].description.toString().toLowerCase().indexOf("flash")>-1)r=!0;else if("undefined"!=typeof a[i]["application/x-nmpcbrowserplugin"])t.push("nagra");else if(a[i].length)for(o=0,s=a[i].length;o<s;o++)if("application/vnd.rcsrds.secureplayer.pepper.plugin"==a[i][o].type){t.push("nagrapepper");break}return r&&t.push("flash"),t.join(",")}},{key:"toString",get:function(){if(void 0!==e.CACHED_VERSION)return e.CACHED_VERSION;var t="";switch(e.operatingSystemVersion){case j.WIN_95:t+="win95";break;case j.WIN_98:t+="win98";break;case j.WIN_2000:t+="win2k";break;case j.WIN_NT:t+="winnt4";break;case j.WIN_ME:t+="winme";break;case j.WIN_XP:t+="winxp";break;case j.WIN_SERVER_2003:t+="win2k3";break;case j.WIN_VISTA:t+="winvista";break;case j.WIN_7:t+="win7";break;case j.WIN_8:t+="win8";break;case j.WIN_10:t+="win10";break;case j.WIN_OTHER:t+="winother";break;case j.UNKNOWN:switch(e.operatingSystem){case Q.ANDROID:t+="android";break;case Q.IOS:t+="ios";break;case Q.MAC:t+="mac";break;case Q.WINDOWS_MOBILE:t+="winmobile";break;case Q.WINDOWS:t+="winother";break;case Q.LINUX:t+="linux";break;case Q.UNIX:t+="unix";break;case Q.OTHER:t+="other";break;default:t+="unknown"}break;default:t+="unknown"}switch(e.cpuClass){case 32:t+=" 32";break;case 64:t+=" 64"}switch(/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(navigator.appVersion)?t+=" mobile":t+=" desktop",e.browserType){case J.CHROME:t+=" chrome";break;case J.FIREFOX:t+=" firefox";break;case J.MSIE:t+=" msie";break;case J.EDGE:t+=" edge";break;case J.SAFARI:t+=" safari";break;case J.OPERA:t+=" opera";break;case J.UNKNOWN:t+=" other";break;default:t+=" other"}return e.CACHED_VERSION="".concat(t," ").concat(e.browserVersion.toFixed(2).replace(/[0]+$/g,"").replace(/\.$/,"")," apis=").concat(e.browserTechnologies)}}]),e}();v()(ie,"CPU_64_CLASSES",["x86_64","x86-64","Win64","x64;","amd64","amd64","AMD64","WOW64","x64_64","ia64","sparc64","ppc64","IRIX64"]),v()(ie,"WIN_VERSIONS_NAMES",{win95:"Windows 95",win98:"Windows 98",win2k:"Windows 2000",winnt4:"Windows NT 4.0",winme:"Windows Millenium",winxp:"Windows XP",win2k3:"Windows 2003 Server",winvista:"Windows Vista",win7:"Windows 7",win8:"Windows 8",win10:"Windows 10",winother:"Windows > 10",win:"Windows"}),v()(ie,"WIN_VERSIONS_RELEASE_ORDER",["win","win95","win98","winnt4","winme","win2k","winxp","win2k3","winvista","win7","win8","win10","winother"]),v()(ie,"BROWSER_NAMES",{chrome:"Google Chrome",firefox:"Mozilla Firefox",msie:"Microsoft Internet Explorer",edge:"Microsoft Edge",opera:"Opera",safari:"Safari",other:"Non Standard"}),v()(ie,"APIS_LIST",["ArrayBuffer","Audio","localStorage","sessionStorage","DataView","Crypto","CryptoKey","File","FileReader","Blob","Int16Array","Int32Array","Int8Array","HTMLCanvasElement","HTMLVideoElement","HTMLAudioElement","HTMLShadowElement","CanvasRenderingContext2D","URL","MediaSource","MediaStream","AudioBuffer","Promise","Worker","postMessage","XMLHttpRequest"]),v()(ie,"API_NAMES",{arraybuffer:"HTML5 ArrayBuffer API ( fixed length, raw binary data buffer )",audio:"HTML5 Audio element API ( support for playing audio )",localStorage:"HTML5 Local Storage API ( support for storing data on your browser )",sessionStorage:"HTML5 Session Storage API ( support for storing data on your browser )",dataview:"HTML5 DataView API ( low-level interface for reading data from and writing it to an ArrayBuffer )",crypto:"HTML5 Crpytography functions",cryptokey:"HTML5 Cryptography functions",file:"HTML5 File API ( provides information about files and allows to access their contents )",filereader:"HTML5 FileReader API ( lets web applications asynchronously read the contents of files / raw data buffers stored on your device or computer, using File or Blob objects to specify the file or data to read )",blob:"HTML5 Blob API ( a file-like object of immutable, raw data )",int16array:"HTML5 Int16Array API ( an array of twos-complement 16-bit signed integers in the platform byte order )",int8array:"HTML5 Int8Array API ( an array of twos-complement 8-bit signed integers )",int32array:"HTML5 Int32Array API ( an array of twos-complement 32-bit signed integers )",htmlcanvaselement:"HTML5 Canvas API ( allows application to draw 2D or 3D graphics using accelerated techniques / and your video card's hardware )",htmlvideoelement:"HTML5 Video Element API ( allows playing videos on your web browser, without the need of using external plugins )",htmlaudioelement:"HTML5 Audio Element API ( allows playing sounds on your web browser, without the need of using external plugins )",htmlshadowelement:"HTML5 Shadow DOM API ( provides encapsulation for the JavaScript, CSS and HTML support for web developers, in order to create high speed web pages )",canvasrenderingcontext2d:"HTML5 Canvas element 2D drawing routines API",url:"HTML5 URL API ( allows functions related with URL's and in-memory URL's for your web browser, including Video Streaming and Audio Streaming related ones )",mediasource:"HTLM5 MediaSource API ( technology that provides video and audio streaming for your web browser )",audiobuffer:"HTML5 AudioBuffer API ( technology that provides audio streaming and buffer for your web browser )",flash:"Adobe Flash plugin",nagra:"Encrypted video streaming support Player",nagrapepper:"Encrypted video streaming support Player Google Chrome browser extension",promise:"Asynchronous data types, which make your browser run smoothly",worker:"HTML5 Web Worker API",postmessage:"A technology used for inter-frame communication",xmlhttprequest:"HTML async transport inside browser (AJAX)"}),v()(ie,"CACHED_VERSION",void 0);var ne=i(37),ae=i(56),re=function(){function e(t,i,n){o()(this,e),v()(this,"config",void 0),v()(this,"i18n",void 0),v()(this,"phoneUtils",void 0),v()(this,"capabilities",void 0),v()(this,"userService",void 0),this.i18n=t,this.capabilities=i,this.phoneUtils=n,this.userService=ae.a.getInstance()}return l()(e,[{key:"enumerateValidators",value:function(){return void 0===this.config&&(this.config=[{name:"none",id:"",isSupported:!0,i18n:"edt_UI_validator_type_none"},{name:"email",id:e.VALIDATOR_TYPE_EMAIL,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_EMAIL),i18n:"edt_UI_validator_type_email"},{name:"password",id:e.VALIDATOR_TYPE_PASSWORD,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD),i18n:"edt_UI_validator_type_password"},{name:"integer",id:e.VALIDATOR_TYPE_UNSIGNED_INTEGER,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_UNSIGNED_INTEGER),i18n:"edt_UI_validator_type_unsigned_integer"},{name:"alpha",id:e.VALIDATOR_TYPE_ALPHA,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_ALPHA),i18n:"edt_UI_validator_type_alpha"},{name:"alpha numeric",id:e.VALIDATOR_TYPE_ALPHANUMERIC,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_ALPHANUMERIC),i18n:"edt_UI_validator_type_alphanumeric"},{name:"alpha space",id:e.VALIDATOR_TYPE_ALPHASPACE,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_ALPHASPACE),i18n:"edt_UI_validator_type_alphaspace"},{name:"alpha numeric space",id:e.VALIDATOR_TYPE_ALPHANUMERICSPACE,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_ALPHANUMERICSPACE),i18n:"edt_UI_validator_type_alphanumericspace"},{name:"numeric",id:e.VALIDATOR_TYPE_NUMERIC,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_NUMERIC),i18n:"edt_UI_validator_type_numeric"},{name:"numeric plus",id:e.VALIDATOR_TYPE_NUMERICPLUS,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_NUMERICPLUS),i18n:"edt_UI_validator_type_numericplus"},{name:"Url Web Page",id:e.VALIDATOR_TYPE_URL_WEB_PAGE,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_URL_WEB_PAGE),i18n:"edt_UI_validator_type_web_page"},{name:"Url Image",id:e.VALIDATOR_TYPE_URL_IMAGE,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_URL_IMAGE),i18n:"edt_UI_validator_type_url_image"},{name:"yy/mm/dd",id:e.VALIDATOR_TYPE_DATE_YYYYMMDD,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_DATE_YYYYMMDD),i18n:"edt_UI_validator_type_date_yyyymmdd"},{name:"dd/mm/yyyy",id:e.VALIDATOR_TYPE_DATE_DDMMYYYY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_DATE_DDMMYYYY),i18n:"edt_UI_validator_type_date_ddmmyyyy"},{name:"mm/dd/yyyy",id:e.VALIDATOR_TYPE_DATE_MMDDYYYY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_DATE_MMDDYYYY),i18n:"edt_UI_validator_type_date_mmddyyyy"},{name:"mm/yyyy",id:e.VALIDATOR_TYPE_DATE_MMYYYY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_DATE_MMYYYY),i18n:"edt_UI_validator_type_date_mmyyyy"},{name:"Time",id:e.VALIDATOR_TYPE_TIME,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_TIME),i18n:"edt_UI_validator_type_time"},{name:"Time AM/PM",id:e.VALIDATOR_TYPE_TIME_AMPM,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_TIME_AMPM),i18n:"edt_UI_validator_type_time_ampm"},{name:"full name",id:e.VALIDATOR_TYPE_FULL_NAME,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_FULL_NAME),i18n:"edt_UI_validator_type_full_name"},{name:"regular expression",id:e.VALIDATOR_TYPE_REGEX,isSupported:this.userService.canUseValidator(e.VALIDATOR_TYPE_REGEX),i18n:"edt_UI_validator_type_regex"},{name:"custom",id:e.VALIDATOR_TYPE_CUSTOM,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_CUSTOM),i18n:"edt_UI_validator_type_custom"},{name:"blank",id:e.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY_INCLUDING_BLANK_PASSWORDS,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY_INCLUDING_BLANK_PASSWORDS),i18n:"edt_UI_validator_type_password_any_complexity_including_blank"},{name:"any",id:e.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY),i18n:"edt_UI_validator_type_password_any_complexity"},{name:"minimal",id:e.VALIDATOR_TYPE_PASSWORD_MIN_COMPLEXITY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD_MIN_COMPLEXITY),i18n:"edt_UI_validator_type_password_min_complexity"},{name:"medium",id:e.VALIDATOR_TYPE_PASSWORD_MED_COMPLEXITY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD_MED_COMPLEXITY),i18n:"edt_UI_validator_type_password_med_complexity"},{name:"corporate",id:e.VALIDATOR_TYPE_PASSWORD_CORPORATE_COMPLEXITY,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PASSWORD_CORPORATE_COMPLEXITY),i18n:"edt_UI_validator_type_password_corporate_complexity"},{name:"extra-low",id:e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_EXTRA_LOW,isSupported:this.isValidatorSupported(String(e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_EXTRA_LOW)),i18n:"edt_UI_validator_type_signature_complexity_extra_low"},{name:"low",id:e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_LOW,isSupported:this.isValidatorSupported(String(e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_LOW)),i18n:"edt_UI_validator_type_signature_complexity_low"},{name:"medium",id:e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_AVERAGE,isSupported:this.isValidatorSupported(String(e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_AVERAGE)),i18n:"edt_UI_validator_type_signature_complexity_average"},{name:"high",id:e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_HIGH,isSupported:this.isValidatorSupported(String(e.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_HIGH)),i18n:"edt_UI_validator_type_signature_complexity_high"},{name:"2-2-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_2_2_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_2_2_4),i18n:""},{name:"2-3-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_4),i18n:""},{name:"2-3-8",id:e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_8,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_8),i18n:""},{name:"2-4-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_2_4_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_2_4_4),i18n:""},{name:"2-5-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_2_5_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_2_5_4),i18n:""},{name:"3-3-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_4),i18n:""},{name:"3-3-3",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_3,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_3),i18n:""},{name:"3-3-7",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_7,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_7),i18n:""},{name:"3-4-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_4_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_4_4),i18n:""},{name:"3-2-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_4),i18n:""},{name:"3-2-6",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_6,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_6),i18n:""},{name:"3-2-7",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_7,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_7),i18n:""},{name:"3-5-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_3_5_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_3_5_4),i18n:""},{name:"4-3-3",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3),i18n:""},{name:"4-3-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_4),i18n:""},{name:"4-3-6",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_6,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_6),i18n:""},{name:"4-3-7",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_7,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_7),i18n:""},{name:"4-2-8",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_2_8,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_2_8),i18n:""},{name:"4-4-6",id:e.VALIDATOR_TYPE_PHONE_FORMAT_4_4_6,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_4_4_6),i18n:""},{name:"5-3-3",id:e.VALIDATOR_TYPE_PHONE_FORMAT_5_3_3,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_5_3_3),i18n:""},{name:"5-4-4",id:e.VALIDATOR_TYPE_PHONE_FORMAT_5_4_4,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_5_4_4),i18n:""},{name:"5-6",id:e.VALIDATOR_TYPE_PHONE_FORMAT_5_6,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_FORMAT_5_6),i18n:""},{name:"phone-any-format",id:e.VALIDATOR_TYPE_PHONE_ANY_FORMAT,isSupported:this.isValidatorSupported(e.VALIDATOR_TYPE_PHONE_ANY_FORMAT),i18n:""}],this.config.sort((function(e,t){var i=e.name.toLowerCase(),n=t.name.toLowerCase();return i===n?0:i<n?-1:1}))),this.config.slice(0)}},{key:"isValidatorSupported",value:function(e){for(var t=String(e),i=0,n=this.capabilities.factory.supportedValidationTypes.length;i<n;i++)if(String(this.capabilities.factory.supportedValidationTypes[i])===t)return!0;return!1}},{key:"getValidatorById",value:function(e){void 0===this.config&&this.enumerateValidators();for(var t=0,i=this.config.length;t<i;t++)if(this.config[t].id===e||null===e&&""===this.config[t].id)return this.config[t];return null}},{key:"validate",value:function(t,i){if(!i)return!0;switch(i){case e.VALIDATOR_TYPE_EMAIL:return this.validateEmailAddress(t);case e.VALIDATOR_TYPE_URL_WEB_PAGE:return this.validateWebAddress(t);case e.VALIDATOR_TYPE_PHONE_FORMAT_2_2_4:return this.validatePhoneNumberFormat(t,[2,2,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_4:return this.validatePhoneNumberFormat(t,[2,3,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_2_3_8:return this.validatePhoneNumberFormat(t,[2,3,8]);case e.VALIDATOR_TYPE_PHONE_FORMAT_2_4_4:return this.validatePhoneNumberFormat(t,[2,4,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_2_5_4:return this.validatePhoneNumberFormat(t,[2,5,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_4:return this.validatePhoneNumberFormat(t,[3,3,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_3:return this.validatePhoneNumberFormat(t,[3,3,3]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_3_7:return this.validatePhoneNumberFormat(t,[3,3,7]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_4_4:return this.validatePhoneNumberFormat(t,[3,4,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_4:return this.validatePhoneNumberFormat(t,[3,2,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_6:return this.validatePhoneNumberFormat(t,[3,2,6]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_2_7:return this.validatePhoneNumberFormat(t,[3,2,7]);case e.VALIDATOR_TYPE_PHONE_FORMAT_3_5_4:return this.validatePhoneNumberFormat(t,[3,5,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3:return this.validatePhoneNumberFormat(t,[4,3,3]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_4:return this.validatePhoneNumberFormat(t,[4,3,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_6:return this.validatePhoneNumberFormat(t,[4,3,6]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_3_7:return this.validatePhoneNumberFormat(t,[4,3,7]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_2_8:return this.validatePhoneNumberFormat(t,[4,2,8]);case e.VALIDATOR_TYPE_PHONE_FORMAT_4_4_6:return this.validatePhoneNumberFormat(t,[4,4,6]);case e.VALIDATOR_TYPE_PHONE_FORMAT_5_3_3:return this.validatePhoneNumberFormat(t,[5,3,3]);case e.VALIDATOR_TYPE_PHONE_FORMAT_5_4_4:return this.validatePhoneNumberFormat(t,[5,4,4]);case e.VALIDATOR_TYPE_PHONE_FORMAT_5_6:return this.validatePhoneNumberFormat(t,[5,6]);case e.VALIDATOR_TYPE_PHONE_ANY_FORMAT:return this.validatePhoneNumberWithAnyFormat(t);case e.VALIDATOR_TYPE_YOUTUBE_URL:return!!this.validateYoutubeVideoURL(t);case e.VALIDATOR_TYPE_VIMEO_URL:return!!this.validateVimeoVideoURL(t);case e.VALIDATOR_TYPE_WORDPRESS_TV_URL:return!!this.validateWordpressTVVideoUrl(t);case e.VALIDATOR_TYPE_TED_TALKS_URL:return!!this.validateTedTalksVideoURL(t);case e.VALIDATOR_TYPE_DAILYMOTION_URL:return!!this.validateDailyMotionVideoURL(t);case e.VALIDATOR_TYPE_MIXCLOUD_URL:return!!this.validateMixCloudAudioURL(t);case e.VALIDATOR_TYPE_SOUNDCLOUD_URL:return!!this.validateSoundCloudAudioURL(t);case e.VALIDATOR_TYPE_NFB_URL:return!!this.validateNFBVideoURL(t);case e.VALIDATOR_TYPE_KICKSTARTER_URL:return!!this.validateKickstarterVideoURL(t);case e.VALIDATOR_TYPE_TWITCH_URL:return!!this.validateTwitchVideoURL(t);case e.VALIDATOR_TYPE_PDF_URL:return!!this.validatePDFFileUrl(t);case e.FACEBOOK_POST_URL:return!!this.validateFacebookPostURL(t);case e.FACEBOOK_PAGE_URL:return!!this.validateFacebookPageURL(t);case e.VALIDATOR_TYPE_EMBEDDABLE_URL:return!!this.validateEmbeddableURL(t);case e.VALIDATOR_TYPE_EMBEDDABLE_FACEBOOK_URL:return!!this.validateEmbeddableFacebookURL(t);case e.VALIDATOR_TYPE_EMBEDDABLE_PDF_URL:return!!this.validateEmbeddablePdfURL(t);case e.VALIDATOR_TYPE_EMBEDDABLE_VIDEO_URL:return!!this.validateEmbeddableVideoURL(t);default:return!1}}},{key:"validateEmailAddress",value:function(e){return"string"===typeof e&&(""!==e&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e))}},{key:"validatePhoneNumberWithAnyFormat",value:function(e){return""!==e&&(!(e.toString().replace(/\D+/g,"").length<4)&&/^\+?([0-9. \- \( \)]+)$/.test(e))}},{key:"validatePhoneNumberFormat",value:function(e,t){if("string"!==typeof e)return!1;if(""===e)return!1;var i=this.phoneUtils.parsePhoneNumber(e);if(null==i)return!0;if(null==i.localPhoneNumber)return!0;var n="";return n=void 0!==t[2]?"^[0-9]{".concat(t[0]+t[1]+t[2],"}$"):"^[0-9]{".concat(t[0]+t[1],"}$"),new RegExp(n).test(i.localPhoneNumber)}},{key:"getSupportedUserPlanValidators",value:function(e){for(var t=[],i=0,n=e||[],a=n.length;i<a;i++)n[i].isSupported&&t.push(n[i]);return t.length?t:null}},{key:"validateWebAddress",value:function(e){return"string"===typeof e&&(""!==e&&/^(?:http(s)?:\/\/)[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/i.test(e))}},{key:"validateYoutubeVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:y2u\.be\/|youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=|v=)?)((\w|-){11})(?:\S+)?$/)&&(t={type:O.O.YOUTUBE_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateVimeoVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:player\.)?(?:vimeo\.com\/(?:video\/)?)((\w|-){9})(?:\S+)?$/)&&(t={type:O.O.VIMEO_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateWordpressTVVideoUrl",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:videopress\.com)(?:\/embed)?\/((\w|-){8,})(?:\S+)?$/)&&(t={type:O.O.WORDPRESS_TV_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateTedTalksVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:embed\.)?(?:ted\.com\/talks\/)(.+)$/)&&(t={type:O.O.TED_TALKS_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateDailyMotionVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:dailymotion\.com)\/(?:embed\/)?(?:video\/)(.+)$/)&&(t={type:O.O.DAILYMOTION_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateMixCloudAudioURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:mixcloud\.com)\/(?:widget\/iframe\/)?(?:\?feed=)(?:https?:\/\/)?(?:www\.)?(?:mixcloud\.com)\/(.+)$/)&&(t={type:O.O.MIXCLOUD_AUDIO,identifier:RegExp.$1,url:e}),t}},{key:"validateSoundCloudAudioURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:api\.)(?:soundcloud\.com)\/(?:tracks\/)(.+)$/)&&(t={type:O.O.SOUNDCLOUD_AUDIO,identifier:RegExp.$1,url:e}),t}},{key:"validateNFBVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:nfb\.ca\/film\/)(.+)(?:\/embed\/player\/)$/)&&(t={type:O.O.NFB_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateKickstarterVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:kickstarter\.com\/)(?:projects\/)?(.+)(?:\/widget\/video\.html)$/)&&(t={type:O.O.KICKSTARTER_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validateTwitchVideoURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:player\.)?(?:twitch\.tv\/)(?:\?video=|videos\/)(.+)$/)&&(t={type:O.O.TWITCH_VIDEO,identifier:RegExp.$1,url:e}),t}},{key:"validatePDFFileUrl",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(.*)(?:\.pdf)$/)&&(t={type:O.O.PDF_FILE,identifier:RegExp.$1,url:e}),t}},{key:"validateFacebookPostURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:facebook\.com\/)(.*\/posts\/.*)$/)&&(t={type:O.O.FACEBOOK_POST,identifier:RegExp.$1,url:e}),t}},{key:"validateFacebookPageURL",value:function(e){var t=null;if("string"!==typeof e)return null;if(""===e)return null;return e.match(/^(?:https?:\/\/)?(?:(?:[a-z]{2})-(?:[a-z]{2})\.|(?:www)\.)?(?:facebook\.com\/)(.+)(?:\/)?$/)&&(t={type:O.O.FACEBOOK_PAGE,identifier:RegExp.$1,url:e}),t}},{key:"validateEmbeddableURL",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.N.ANY;if(i===O.N.VIDEO_OR_AUDIO){if(t=this.validateYoutubeVideoURL(e))return t;if(t=this.validateVimeoVideoURL(e))return t;if(t=this.validateWordpressTVVideoUrl(e))return t;if(t=this.validateTedTalksVideoURL(e))return t;if(t=this.validateDailyMotionVideoURL(e))return t;if(t=this.validateMixCloudAudioURL(e))return t;if(t=this.validateSoundCloudAudioURL(e))return t;if(t=this.validateNFBVideoURL(e))return t;if(t=this.validateKickstarterVideoURL(e))return t;if(t=this.validateTwitchVideoURL(e))return t}if(i===O.N.PDF&&(t=this.validatePDFFileUrl(e)))return t;if(i===O.N.FACEBOOK){if(t=this.validateFacebookPostURL(e))return t;if(t=this.validateFacebookPageURL(e))return t}return null}},{key:"validateEmbeddableVideoURL",value:function(e){return this.validateEmbeddableURL(e,O.N.VIDEO_OR_AUDIO)}},{key:"validateEmbeddableFacebookURL",value:function(e){return this.validateEmbeddableURL(e,O.N.FACEBOOK)}},{key:"validateEmbeddablePdfURL",value:function(e){return this.validateEmbeddableURL(e,O.N.PDF)}}]),e}();v()(re,"VALIDATOR_TYPE_NONE",null),v()(re,"VALIDATOR_TYPE_EMAIL","email"),v()(re,"VALIDATOR_TYPE_PASSWORD","password"),v()(re,"VALIDATOR_TYPE_UNSIGNED_INTEGER","integer"),v()(re,"VALIDATOR_TYPE_ALPHA","alpha"),v()(re,"VALIDATOR_TYPE_ALPHANUMERIC","alphanumeric"),v()(re,"VALIDATOR_TYPE_ALPHASPACE","alphaspace"),v()(re,"VALIDATOR_TYPE_ALPHANUMERICSPACE","alphanumericspace"),v()(re,"VALIDATOR_TYPE_NUMERIC","numeric"),v()(re,"VALIDATOR_TYPE_NUMERICPLUS","numericplus"),v()(re,"VALIDATOR_TYPE_URL_WEB_PAGE","url"),v()(re,"VALIDATOR_TYPE_URL_IMAGE","url-image"),v()(re,"VALIDATOR_TYPE_DATE_YYYYMMDD","dateyyyymmdd"),v()(re,"VALIDATOR_TYPE_DATE_DDMMYYYY","dateddmmyyyy"),v()(re,"VALIDATOR_TYPE_DATE_MMDDYYYY","datemmddyyyy"),v()(re,"VALIDATOR_TYPE_DATE_MMYYYY","datemmyyyy"),v()(re,"VALIDATOR_TYPE_TIME","time"),v()(re,"VALIDATOR_TYPE_TIME_AMPM","time_ampm"),v()(re,"VALIDATOR_TYPE_FULL_NAME","full_name"),v()(re,"VALIDATOR_TYPE_REGEX","regex"),v()(re,"VALIDATOR_TYPE_CUSTOM","custom"),v()(re,"VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY_INCLUDING_BLANK_PASSWORDS","password-complexity-any-inluding-blank-passwords"),v()(re,"VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY","password-complexity-any"),v()(re,"VALIDATOR_TYPE_PASSWORD_MIN_COMPLEXITY","password-complexity-minimum"),v()(re,"VALIDATOR_TYPE_PASSWORD_MED_COMPLEXITY","password-complexity-medium"),v()(re,"VALIDATOR_TYPE_PASSWORD_CORPORATE_COMPLEXITY","password-complexity-master"),v()(re,"VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_EXTRA_LOW",0),v()(re,"VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_LOW",1),v()(re,"VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_AVERAGE",2),v()(re,"VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_HIGH",3),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_2_2_4","2-2-4"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_2_3_4","2-3-4"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_2_3_8","2-3-8"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_2_4_4","2-4-4"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_2_5_4","2-5-4"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_3_3_4","3-3-4"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_3_3_3","3-3-3"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_3_3_7","3-3-7"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_3_4_4","3-4-4"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_3_2_4","3-2-4"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_3_2_6","3-2-6"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_3_2_7","3-2-7"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_3_5_4","3-5-4"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_4_3_3","4-3-3"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_4_3_4","4-3-4"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_4_3_6","4-3-6"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_4_3_7","4-3-7"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_4_2_8","4-2-8"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_4_4_6","4-4-6"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_5_3_3","5-3-3"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_5_4_4","5-4-4"),v()(re,"VALIDATOR_TYPE_PHONE_FORMAT_5_6","5-6"),v()(re,"VALIDATOR_TYPE_PHONE_ANY_FORMAT","phone-any-format"),v()(re,"VALIDATOR_TYPE_YOUTUBE_URL","youtube-url"),v()(re,"VALIDATOR_TYPE_VIMEO_URL","vimeo-url"),v()(re,"VALIDATOR_TYPE_WORDPRESS_TV_URL","wordpress-tv-url"),v()(re,"VALIDATOR_TYPE_TED_TALKS_URL","ted-talks-url"),v()(re,"VALIDATOR_TYPE_DAILYMOTION_URL","dailymotion-url"),v()(re,"VALIDATOR_TYPE_MIXCLOUD_URL","mixcloud-url"),v()(re,"VALIDATOR_TYPE_SOUNDCLOUD_URL","soundcloud-url"),v()(re,"VALIDATOR_TYPE_NFB_URL","nfb-url"),v()(re,"VALIDATOR_TYPE_KICKSTARTER_URL","kickstarter-url"),v()(re,"VALIDATOR_TYPE_TWITCH_URL","twitch-url"),v()(re,"VALIDATOR_TYPE_PDF_URL","pdf-url"),v()(re,"FACEBOOK_POST_URL","facebook-post-url"),v()(re,"FACEBOOK_PAGE_URL","facebook-page-url"),v()(re,"VALIDATOR_TYPE_EMBEDDABLE_URL","embeddable-url"),v()(re,"VALIDATOR_TYPE_EMBEDDABLE_VIDEO_URL","embeddable-video-url"),v()(re,"VALIDATOR_TYPE_EMBEDDABLE_PDF_URL","embeddable-pdf-url"),v()(re,"VALIDATOR_TYPE_EMBEDDABLE_FACEBOOK_URL","embeddable-facebook-url");var oe=function(e){function t(e){var i;return o()(this,t),(i=d()(this,_()(t).call(this,e.componentName,"span"))).rootNode.setAttribute("contenteditable","false"),i.rootNode.innerText=e.caption,i.rootNode.dataset.value=e.value,!0===e.isVariable&&i.rootNode.classList.add("is-variable"),e.isDeleted&&i.rootNode.setAttribute("data-is-deleted-field","".concat(e.isDeleted)),i.rootNode.addEventListener("click",(function(e){if(!i.rootNode.parentElement.hasAttribute("data-fully-disabled")){var t=i.rootNode.nextSibling;null!==t&&t.nodeType===Node.TEXT_NODE&&(0===t.textContent.trim().length?i.rootNode.parentNode.removeChild(i.rootNode.nextSibling):t.nodeValue=t.textContent.trim()),i.delete()}})),i.on("append",(function(){i.appendSpacesBeforeAndAfter()})),i.on("replace",(function(){i.appendSpacesBeforeAndAfter()})),i.on("insert",(function(){i.appendSpacesBeforeAndAfter()})),i}return f()(t,e),l()(t,[{key:"getValue",value:function(){return this.rootNode.dataset.value}},{key:"setValue",value:function(e){}},{key:"appendSpacesBeforeAndAfter",value:function(){for(var e=this.rootNode.parentNode.childNodes,i=0,n=e.length;i<n;i++)if(e[i]===this.rootNode){i>0&&e[i-1].nodeType!==Node.TEXT_NODE?this.rootNode.insertAdjacentText("beforebegin",String.fromCharCode(t.THIN_SPACE_CHAR_CODE)):i>0&&e[i-1].nodeType===Node.TEXT_NODE&&e[i-1].nodeValue.charCodeAt(e[i-1].nodeValue.length-1)!==t.THIN_SPACE_CHAR_CODE&&(e[i-1].nodeValue=e[i-1].nodeValue+String.fromCharCode(t.THIN_SPACE_CHAR_CODE)),e[i+1]&&e[i+1].nodeType===Node.TEXT_NODE?e[i+1].nodeType===Node.TEXT_NODE&&e[i+1].nodeValue.charCodeAt(0)!==t.THIN_SPACE_CHAR_CODE&&(e[i+1].nodeValue=String.fromCharCode(t.THIN_SPACE_CHAR_CODE)+e[i+1].nodeValue):this.rootNode.insertAdjacentHTML("afterend",String.fromCharCode(t.THIN_SPACE_CHAR_CODE));break}0===n&&this.rootNode.insertAdjacentHTML("afterend",String.fromCharCode(t.THIN_SPACE_CHAR_CODE))}}]),t}(k);v()(oe,"THIN_SPACE_CHAR_CODE",8201);var se=function(){function e(){o()(this,e)}return l()(e,null,[{key:"HSVtoRGB",value:function(e){var t,i,n,a,r,o,s,l,u=e[1],d=e[2],c=e[0];switch(o=d*(1-u),s=d*(1-(r=6*c-(a=6*c|0))*u),l=d*(1-(1-r)*u),a%6){case 0:t=d,i=l,n=o;break;case 1:t=s,i=d,n=o;break;case 2:t=o,i=d,n=l;break;case 3:t=o,i=s,n=d;break;case 4:t=l,i=o,n=d;break;case 5:t=d,i=o,n=s}return[255*t|0,255*i|0,255*n|0,void 0===e[3]?1:e[3]]}},{key:"diffc",value:function(e,t,i){return(t-e)/6/i+.5}},{key:"RGBtoHSV",value:function(e){var t,i,n,a,r,o=e[0]/255,s=e[1]/255,l=e[2]/255,u=Math.max(o,s,l),d=u-Math.min(o,s,l);return 0==d?a=r=0:(r=d/u,t=this.diffc(o,u,d),i=this.diffc(s,u,d),n=this.diffc(l,u,d),o===u?a=n-i:s===u?a=1/3+t-n:l===u&&(a=2/3+i-t),a<0?a+=1:a>1&&(a-=1)),[a,r,u,void 0===e[3]?1:e[3]]}},{key:"strPad",value:function(e){return e.length<2?"0".concat(e):e}},{key:"RGBToString",value:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===t[3]||t[3]>.99){var n="#".concat(this.strPad(t[0].toString(16))).concat(e.strPad(t[1].toString(16))).concat(e.strPad(t[2].toString(16)));if(i)for(var a in this.standardHTMLColors)if(this.standardHTMLColors[a]===n)return a;return n}return 0===t[3]?"transparent":"rgba(".concat(t[0],",").concat(t[1],",").concat(t[2],",").concat(t[3].toFixed(2).replace(/^0\./,".").replace(/\.00$/,"").replace(/[0]+$/,"").replace(/^\.$/,"")||"0",")")}},{key:"HSVToString",value:function(t){return e.RGBToString(e.HSVtoRGB(t))}},{key:"stringToRGB",value:function(t){var i,n=[0,0,0,1],a=String(t||"").toLowerCase();switch(!0){case"transparent"===a:n[3]=0;break;case void 0!==e.standardHTMLColors[a]:return e.stringToRGB(e.standardHTMLColors[a]);case!!(i=/^#[a-f0-9]{3}$/.exec(a)):n[0]=parseInt(a[1]+a[1],16),n[1]=parseInt(a[2]+a[2],16),n[2]=parseInt(a[3]+a[3],16);break;case!!(i=/^#[a-f0-9]{6}$/.exec(a)):n[0]=parseInt(a[1]+a[2],16),n[1]=parseInt(a[3]+a[4],16),n[2]=parseInt(a[5]+a[6],16);break;case!!(i=/^rgb\(([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?\)$/.exec(a)):if(n[0]=parseInt(i[2]),n[1]=parseInt(i[5]),n[2]=parseInt(i[8]),n[0]>255||n[1]>255||n[2]>255)return null;break;case!!(i=/^rgba\(([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d\.]+)([\s]+)?\)$/.exec(a)):if(n[0]=parseInt(i[2]),n[1]=parseInt(i[5]),n[2]=parseInt(i[8]),n[3]=parseFloat(i[11]),n[0]>255||n[1]>255||n[2]>255||isNaN(n[3])||!isFinite(n[3])||n[3]>1)return null;break;default:return null}return n}},{key:"areEqualRGBColors",value:function(e,t){return!(!e||!t)&&(e===t||e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3])}},{key:"removeAlpha",value:function(e){var t=e.slice(0,3);return t.push(1),t}}]),e}();v()(se,"standardHTMLColors",{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred  ":"#cd5c5c","indigo   ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});var le=function e(){o()(this,e)};v()(le,"ELEMENT_NOT_SUPPORTED",-2),v()(le,"ELEMENT_TYPE_FORM",-1),v()(le,"CONTAINER_TYPE_ROW",0),v()(le,"CONTROL_TYPE_ADDRESS",1),v()(le,"CONTROL_TYPE_CHECKBOX",2),v()(le,"CONTROL_TYPE_DATE",3),v()(le,"CONTROL_TYPE_DROPDOWN",4),v()(le,"CONTROL_TYPE_EMAIL",5),v()(le,"CONTROL_TYPE_FILE",6),v()(le,"CONTROL_TYPE_HEADING",7),v()(le,"CONTROL_TYPE_HTML_BLOCK",8),v()(le,"CONTROL_TYPE_IMAGE",9),v()(le,"CONTROL_TYPE_LIKERT_SCALE",10),v()(le,"CONTROL_TYPE_MAP",11),v()(le,"CONTROL_TYPE_NAME",12),v()(le,"CONTROL_TYPE_NUMBER",13),v()(le,"CONTROL_TYPE_PAGE_BREAK",14),v()(le,"CONTROL_TYPE_PASSWORD",15),v()(le,"CONTROL_TYPE_PHONE",16),v()(le,"CONTROL_TYPE_PRICE",17),v()(le,"CONTROL_TYPE_RADIO",18),v()(le,"CONTROL_TYPE_SIGNATURE",19),v()(le,"CONTROL_TYPE_SOCIAL",20),v()(le,"CONTROL_TYPE_STAR_RATING",21),v()(le,"CONTROL_TYPE_TERMS_OF_SERVICE",22),v()(le,"CONTROL_TYPE_TEXT",23),v()(le,"CONTROL_TYPE_TEXTAREA",24),v()(le,"CONTROL_TYPE_TIME",25),v()(le,"CONTROL_TYPE_WEBSITE",26),v()(le,"CONTROL_TYPE_FORM_HEADER",27),v()(le,"CONTROL_TYPE_CAPTCHA",28),v()(le,"CONTROL_TYPE_ACTION_BAR",29),v()(le,"CONTROL_TYPE_WIDGET_VIDEO",30),v()(le,"CONTROL_TYPE_WIDGET_FACEBOOK",31),v()(le,"CONTROL_TYPE_WIDGET_PDF",32),v()(le,"CONTROL_TYPE_FORMULA",33),v()(le,"CONTROL_TYPE_FEE",34),v()(le,"CONTROL_TYPE_COUPON",100),v()(le,"CONTROL_TYPE_SEPARATOR",9999),v()(le,"VIRTUAL_SELECTION_CONTROL",1e4),v()(le,"CONTAINER_TYPE_DIV",9e4),v()(le,"CONTAINER_TYPE_PAGE",90001),v()(le,"CONTAINER_TYPE_LIKERT_WRAPPER",90002),v()(le,"CONTAINER_TYPE_REPEATABLE",90003),v()(le,"CONTAINER_TYPE_REPEATABLE_GROUP",90004),v()(le,"CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE",91001),v()(le,"LAYOUT_TYPE_FIELDSET",null);var ue,de=function(){function e(){o()(this,e)}return l()(e,null,[{key:"getLanguagesList",value:function(){return this.LANGUAGES_LIST}},{key:"getLanguageObjectByCode",value:function(e){var t=!0,i=!1,n=void 0;try{for(var a,r=this.LANGUAGES_LIST[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var o=a.value;if(o.code2===e||o.code3===e)return o}}catch(s){i=!0,n=s}finally{try{t||null==r.return||r.return()}finally{if(i)throw n}}return null}}]),e}();v()(de,"LANGUAGES_LIST",[{code3:"afr",code2:"af",name:"Afrikaans",native_name:"Afrikaans"},{code3:"alb",code2:"al",name:"Albanian",native_name:"Shqip"},{code3:"anp",code2:null,name:"Angika",native_name:"Angika"},{code3:"ara",code2:"sa",name:"Arabic",native_name:"\u0627\u0644\u0639\u064e\u0631\u064e\u0628\u0650\u064a\u064e\u0651\u0629"},{code3:"arm",code2:"am",name:"Armenian",native_name:" \u0540\u0561\u0575\u0565\u0580\u0565\u0576"},{code3:"asm",code2:"as",name:"Assamese",native_name:"\u0985\u09b8\u09ae\u09c0\u09af\u09bc\u09be"},{code3:"ast",code2:null,name:"Asturian",native_name:"Asturianu"},{code3:"ave",code2:"ae",name:"Avestan",native_name:"Avestan"},{code3:"awa",code2:null,name:"Awadhi",native_name:"\u0905\u0935\u0927\u0940"},{code3:"aym",code2:"ay",name:"Aymara",native_name:"Aymar aru"},{code3:"aze",code2:"az",name:"Azerbaijani",native_name:"Az\u0259rbaycan dil"},{code3:"bam",code2:"bm",name:"Bambara",native_name:"Bambara"},{code3:"bas",code2:null,name:"Basa",native_name:"Mbene; \u0181asa\xe1"},{code3:"bak",code2:"ba",name:"Bashkir",native_name:"\u0411\u0430\u0448\u04a1\u043e\u0440\u0442 \u0442\u0435\u043b\u0435"},{code3:"baq",code2:"eu",name:"Basque",native_name:"euskara"},{code3:"bel",code2:"by",name:"Belarusian",native_name:"\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u043a\u0430\u044f \u043c\u043e\u0432\u0430"},{code3:"ben",code2:"bn",name:"Bengali",native_name:"\u09ac\u09be\u0982\u09b2\u09be"},{code3:"bho",code2:null,name:"Bhojpuri",native_name:"\u092d\u094b\u091c\u092a\u0941\u0930\u0940"},{code3:"bih",code2:"bh",name:"Bihari languages",native_name:"Bihari languages"},{code3:"bis",code2:"bi",name:"Bislama",native_name:"Bislama"},{code3:"bos",code2:"bs",name:"Bosnian",native_name:"\u0431\u043e\u0441\u0430\u043d\u0441\u043a\u0438"},{code3:"bre",code2:"br",name:"Breton",native_name:"Brezhoneg"},{code3:"bul",code2:"bg",name:"Bulgarian",native_name:"\u0431\u044a\u043b\u0433\u0430\u0440\u0441\u043a\u0438 \u0435\u0437\u0438\u043a"},{code3:"bur",code2:null,name:"Burmese",native_name:"Burmese"},{code3:"cas",code2:null,name:"Castilian",native_name:"Castellano"},{code3:"cat",code2:"ca",name:"Catalan",native_name:"Catal\xe0"},{code3:"khm",code2:"km",name:"Central Khmer",native_name:"\u1797\u17b6\u179f\u17b6\u1781\u17d2\u1798\u17c2\u179a"},{code3:"che",code2:"ce",name:"Chechen",native_name:"\u041d\u043e\u0445\u0447\u0438\u0439\u043d \u043c\u043e\u0442\u0442"},{code3:"chi",code2:"cn",name:"Chinese",native_name:"\u4e2d\u6587"},{code3:"chv",code2:"cv",name:"Chuvash",native_name:"\u0427\u04d1\u0432\u0430\u0448\u043b\u0430"},{code3:"cor",code2:"kw",name:"Cornish",native_name:"Kernowek"},{code3:"cos",code2:"co",name:"Corsican",native_name:"Corsu"},{code3:"cre",code2:"cr",name:"Cree",native_name:"Cree"},{code3:"cro",code2:"hr",name:"Croatian",native_name:"Croatian"},{code3:"ces",code2:"cz",name:"Czech",native_name:"\u010de\u0161tina"},{code3:"dan",code2:"dk",name:"Danish",native_name:"Dansk"},{code3:"dut",code2:"nl",name:"Dutch",native_name:"Nederlands"},{code3:"dzo",code2:"dz",name:"Dzongkha",native_name:"Dzongkha"},{code3:"eng",code2:"en",name:"English",native_name:"English"},{code3:"epo",code2:"eo",name:"Esperanto",native_name:"Esperanto"},{code3:"est",code2:"ee",name:"Estonian",native_name:"Eesti keel"},{code3:"ewe",code2:null,name:"Ewe",native_name:"\xc8\u028begbe"},{code3:"fao",code2:"fo",name:"Faroese",native_name:"f\xf8royskt"},{code3:"fij",code2:"fj",name:"Fijian",native_name:"Na Vosa Vakaviti"},{code3:"fil",code2:"ph",name:"Filipino",native_name:"Wikang Filipino"},{code3:"fin",code2:"fi",name:"Finnish",native_name:"Suomen kieli"},{code3:"fle",code2:"be",name:"Flemish",native_name:"Flemish"},{code3:"fra",code2:"fr",name:"French",native_name:"Fran\xe7ais"},{code3:"gla",code2:"gd",name:"Gaelic; Scottish Gaelic",native_name:"G\xe0idhlig"},{code3:"glg",code2:"gl",name:"Galician",native_name:"galego"},{code3:"lug",code2:"lg",name:"Ganda",native_name:"Luganda"},{code3:"geo",code2:"ka",name:"Georgian",native_name:"\u10e5\u10d0\u10e0\u10d7\u10e3\u10da\u10d8"},{code3:"deu",code2:"de",name:"German",native_name:"Deutsch"},{code3:"grc",code2:"gr",name:"Greek",native_name:"\u0395\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac"},{code3:"grn",code2:"gn",name:"Guarani",native_name:"Ava\xf1e'\u1ebd"},{code3:"guj",code2:"gu",name:"Gujarati",native_name:"\u0a97\u0ac1\u0a9c\u0ab0\u0abe\u0aa4\u0ac0"},{code3:"hat",code2:"ht",name:"Haitian; Haitian Creole",native_name:"Krey\xf2l ayisyen"},{code3:"hau",code2:"ha",name:"Hausa",native_name:" \u0647\u064e\u0631\u0652\u0634\u064e\u0646"},{code3:"heb",code2:"il",name:"Hebrew",native_name:"\u05e2\u05d1\u05e8\u05d9\u05ea\u200e"},{code3:"her",code2:"hz",name:"Herero",native_name:"Otjiherero"},{code3:"hil",code2:null,name:"Hiligaynon",native_name:"Ilonggo"},{code3:"hin",code2:null,name:"Hindi-Urdu",native_name:"\u0939\u093f\u0928\u094d\u0926\u0940"},{code3:"hmo",code2:"ho",name:"Hiri Motu",native_name:"Hiri Motu"},{code3:"hun",code2:"hu",name:"Hungarian",native_name:"Magyar"},{code3:"ice",code2:"is",name:"Icelandic",native_name:"\xedslenska"},{code3:"ido",code2:"io",name:"Ido",native_name:"Ido"},{code3:"ibo",code2:"ig",name:"Igbo",native_name:"As\u1ee5s\u1ee5 Igbo"},{code3:"ind",code2:"id",name:"Indonesian",native_name:"Bahasa Indonesia"},{code3:"iku",code2:"iu",name:"Inuktitut",native_name:"Inuktitut"},{code3:"ipk",code2:"ik",name:"Inupiaq",native_name:"I\xf1upiaq"},{code3:"gle",code2:"ie",name:"Irish",native_name:"Gaeilge"},{code3:"ita",code2:"it",name:"Italian",native_name:"Italiano"},{code3:"jpn",code2:"jp",name:"Japanese",native_name:"\u65e5\u672c\u8a9e"},{code3:"jav",code2:"jv",name:"Javanese",native_name:"Javanese"},{code3:"kan",code2:"kn",name:"Kannada",native_name:"\u0c95\u0ca8\u0ccd\u0ca8\u0ca1"},{code3:"kau",code2:null,name:"Kanuri",native_name:"Kanuri"},{code3:"kas",code2:"ks",name:"Kashmiri",native_name:"\u0915\u0949\u0936\u0941\u0930 / \u0643\u0623\u0634\u064f\u0631"},{code3:"kaz",code2:"kk",name:"Kazakh",native_name:"\u049b\u0430\u0437\u0430\u049b \u0442\u0456\u043b\u0456"},{code3:"kon",code2:"kg",name:"Kongo",native_name:"Kongo"},{code3:"kor",code2:"kr",name:"Korean",native_name:"\ud55c\uad6d\uc5b4"},{code3:"kos",code2:null,name:"Kosraean",native_name:"Kosraean"},{code3:"kua",code2:"kj",name:"Kuanyama; Kwanyama",native_name:"Kuanyama"},{code3:"kur",code2:"ku",name:"Kurdish",native_name:"Kurd\xee / \u06a9\u0648\u0631\u062f\u06cc\u200e"},{code3:"lao",code2:"lo",name:"Lao",native_name:"\u0e9e\u0eb2\u0eaa\u0eb2\u0ea5\u0eb2\u0ea7"},{code3:"lat",code2:"la",name:"Latin",native_name:"Lingua lat\u012bna"},{code3:"lav",code2:"lv",name:"Latvian",native_name:"Latvie\u0161u"},{code3:"lin",code2:"ln",name:"Lingala",native_name:"Lingala"},{code3:"lit",code2:"lt",name:"Lithuanian",native_name:"lietuvi\u0173 kalba"},{code3:"ltz",code2:"lu",name:"Luxembourgish; Letzeburgesch",native_name:"L\xebtzebuergesch"},{code3:"mac",code2:"mk",name:"Macedonian",native_name:"\u043c\u0430\u043a\u0435\u0434\u043e\u043d\u0441\u043a\u0438 \u0458\u0430\u0437\u0438\u043a"},{code3:"mlg",code2:"mg",name:"Malagasy",native_name:"Malagasy"},{code3:"may",code2:"my",name:"Malay",native_name:"Bahasa Melayu"},{code3:"mlt",code2:"mt",name:"Maltese",native_name:"Malti"},{code3:"glv",code2:"gv",name:"Manx",native_name:"Gaelg; Gailck"},{code3:"mao",code2:"mi",name:"Maori",native_name:"Te Reo M\u0101ori"},{code3:"mar",code2:null,name:"Marathi",native_name:"\u092e\u0930\u093e\u0920\u0940"},{code3:"mah",code2:"mh",name:"Marshallese",native_name:"Kajin M\u0327aje\u013c"},{code3:"mon",code2:"mn",name:"Mongolian",native_name:"\u043c\u043e\u043d\u0433\u043e\u043b \u0445\u044d\u043b"},{code3:"cnr",code2:"me",name:"Montenegrin",native_name:"c\u0446\u0440\u043d\u043e\u0433\u043e\u0440\u0441\u043a\u0438"},{code3:"nep",code2:null,name:"Nepali",native_name:"\u0928\u0947\u092a\u093e\u0932\u0940 \u092d\u093e\u0937\u093e"},{code3:"nor",code2:"no",name:"Norwegian",native_name:"Norsk"},{code3:"nob",code2:"nb",name:"Norwegian Bokm\xe5l",native_name:"Bokm\xe5l"},{code3:"nno",code2:"nn",name:"Norwegian Nynorsk",native_name:"Nynorsk"},{code3:"oji",code2:"oj",name:"Ojibwa",native_name:"Ojibwa"},{code3:"ori",code2:"or",name:"Oriya",native_name:"\u0b13\u0b21\u0b3c\u0b3f\u0b06"},{code3:"orm",code2:"om",name:"Oromo",native_name:"Afaan Oromoo"},{code3:"oss",code2:"os",name:"Ossetian; Ossetic",native_name:"\u0418\u0440\u043e\u043d \xe6\u0432\u0437\u0430\u0433"},{code3:"pli",code2:"pi",name:"Pali",native_name:"P\u0101li"},{code3:"pas",code2:null,name:"Pashto",native_name:"\u067e\u069a\u062a\u0648"},{code3:"fas",code2:"fa",name:"Persian",native_name:"\u0641\u0627\u0631\u0633\u06cc"},{code3:"pol",code2:"pl",name:"Polish",native_name:"Polski"},{code3:"por",code2:"pt",name:"Portuguese",native_name:"Portugu\xeas"},{code3:"pun",code2:null,name:"Punjabi",native_name:"\u0a2a\u0a70\u0a1c\u0a3e\u0a2c\u0a40 / \u067e\u0646\u062c\u0627\u0628\u06cc\u200e"},{code3:"que",code2:"qu",name:"Quechua",native_name:"kichwa simii"},{code3:"ron",code2:"ro",name:"Romanian",native_name:"Rom\xe2n\u0103"},{code3:"run",code2:"rn",name:"Rundi",native_name:"Ikirundi"},{code3:"rus",code2:"ru",name:"Russian",native_name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"},{code3:"smo",code2:"sm",name:"Samoan",native_name:"Gagana fa\u02bba S\u0101moa"},{code3:"sag",code2:"sg",name:"Sango",native_name:"Y\xe2ng\xe2 t\xee s\xe4ng\xf6"},{code3:"san",code2:null,name:"Sanskrit",native_name:"\u0938\u0902\u0938\u094d\u0915\u0943\u0924\u092e\u094d"},{code3:"srd",code2:"sc",name:"Sardinian",native_name:"Sardu"},{code3:"srp",code2:"cs",name:"Serbo/Croatian",native_name:"Serbo/Croatian"},{code3:"sna",code2:"sn",name:"Shona",native_name:"ChiShona"},{code3:"iii",code2:"ii",name:"Sichuan Yi",native_name:"Sichuan Yi"},{code3:"bla",code2:null,name:"Siksika",native_name:"Siksika"},{code3:"snd",code2:"sd",name:"Sindhi",native_name:"\u0633\u0646\u068c\u064a / \u0938\u093f\u0928\u094d\u0927\u0940 / \u0a38\u0a3f\u0a70\u0a27\u0a40"},{code3:"sin",code2:null,name:"Sinhala; Sinhalese",native_name:"\u0dc3\u0dd2\u0d82\u0dc4\u0dbd"},{code3:"slo",code2:"sk",name:"Slovak",native_name:"Sloven\u010dina"},{code3:"slv",code2:"si",name:"Slovenian",native_name:"Slovenski jezik"},{code3:"som",code2:"so",name:"Somali",native_name:"af Soomaali"},{code3:"sot",code2:"st",name:"Southern Sotho",native_name:"Sesotho [southern]"},{code3:"spa",code2:"es",name:"Spanish",native_name:"Espa\xf1ol"},{code3:"sun",code2:"su",name:"Sundanese",native_name:"Basa Sunda"},{code3:"swa",code2:"sw",name:"Swahili",native_name:"Kiswahili"},{code3:"ssw",code2:"ss",name:"Swati",native_name:"SiSwati"},{code3:"swe",code2:"se",name:"Swedish",native_name:"Svenska"},{code3:"gsw",code2:null,name:"Swiss German",native_name:"Schwiizerd\xfctsch"},{code3:"tgl",code2:"tl",name:"Tagalog",native_name:"Wikang Tagalog"},{code3:"tah",code2:"ty",name:"Tahitian",native_name:"Reo Tahiti"},{code3:"tam",code2:null,name:"Tamil",native_name:"\u0ba4\u0bae\u0bbf\u0bb4\u0bcd"},{code3:"tel",code2:null,name:"Telugu",native_name:"\u0c24\u0c46\u0c32\u0c41\u0c17\u0c41"},{code3:"tha",code2:"th",name:"Thai",native_name:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},{code3:"bod",code2:"bo",name:"Tibetan",native_name:"Tibetan"},{code3:"tir",code2:"ti",name:"Tigrinya",native_name:"Tigrinya"},{code3:"ton",code2:"to",name:"Tonga (Tonga Islands)",native_name:"lea faka-Tonga"},{code3:"tso",code2:"ts",name:"Tsonga",native_name:"Xitsonga"},{code3:"tsn",code2:"tn",name:"Tswana",native_name:"Setswana"},{code3:"tur",code2:"tr",name:"Turkish",native_name:"T\xfcrk\xe7e"},{code3:"tuk",code2:"tk",name:"Turkmen",native_name:"T\xfcrkmen\xe7e"},{code3:"twi",code2:"tw",name:"Twi",native_name:"Twi"},{code3:"uig",code2:"ug",name:"Uighur; Uyghur",native_name:"\u0626\u06c7\u064a\u063a\u06c7\u0631\u0686\u06d5  ; \u0626\u06c7\u064a\u063a\u06c7\u0631 \u062a\u0649\u0644\u0649"},{code3:"ukr",code2:"ua",name:"Ukrainian",native_name:"\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430 \u043c\u043e\u0432\u0430"},{code3:"urd",code2:"ur",name:"Urdu",native_name:"\u0627\u064f\u0631\u062f\u064f\u0648\u200e"},{code3:"uzb",code2:"uz",name:"Uzbek",native_name:"\u0626\u0648\u0628\u06d0\u06a9 "},{code3:"val",code2:null,name:"Valencian",native_name:"Valenci\xe0"},{code3:"ven",code2:"ve",name:"Venda",native_name:"Tshiven\u1e13a"},{code3:"vie",code2:"vn",name:"Vietnamese",native_name:"Ti\u1ebfng Vi\u1ec7t"},{code3:"vol",code2:"vo",name:"Volap\xfck",native_name:"Volap\xfck"},{code3:"wak",code2:null,name:"Wakashan languages",native_name:"Wakashan languages"},{code3:"wln",code2:"wa",name:"Walloon",native_name:"Walon"},{code3:"cym",code2:"cy",name:"Welsh",native_name:"Cymraeg"},{code3:"wol",code2:"wo",name:"Wolof",native_name:"Wolof"},{code3:"wuu",code2:"wu",name:"Wu",native_name:"Wu"},{code3:"xho",code2:"xh",name:"Xhosa",native_name:"isiXhosa"},{code3:"yor",code2:"yo",name:"Yoruba",native_name:"\xe8d\xe8 Yor\xf9b\xe1"},{code3:"yue",code2:null,name:"Yue",native_name:"Yue"},{code3:"zha",code2:"za",name:"Zhuang; Chuang",native_name:"Vahcuengh / \u8a71\u50ee"}]),function(e){e.TEXT="text",e.TAG="tag"}(ue||(ue={}));var ce,he,pe=i(209),_e=i(206),ge=function(){function e(){o()(this,e),v()(this,"rootNode",void 0),v()(this,"dropdown",void 0),this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","dropdown-component"),this.dropdown=document.createElement("select"),this.rootNode.appendChild(this.dropdown),this.rootNode.appendChild(document.createElement("div"))}return l()(e,[{key:"getRoot",value:function(){return this.rootNode}},{key:"getSelectedIndex",value:function(){return this.dropdown.selectedIndex}},{key:"setSelectedIndex",value:function(e){return this.dropdown.selectedIndex=e,this}},{key:"addGroup",value:function(e,t){var i=document.createElement("optgroup");return i.setAttribute("data-id",e),i.setAttribute("label",t),this.dropdown.appendChild(i),this}},{key:"addOption",value:function(e,t,i,n){var a=document.createElement("option");if(a.text=e.text,a.value=e.value,a.disabled=!!e.isSeparator||!!e.disabled,a.hidden=!!e.hidden,a.setAttribute("data-is-default",e.isDefault),n)this.dropdown.add(a,n.previousSibling);else if(t)this.dropdown.add(a,t.nextSibling);else if(i){var r=this.dropdown.querySelector('optgroup[data-id="'.concat(i,'"]'));r&&r.appendChild(a)}else this.dropdown.add(a);return this}},{key:"getOptionByValue",value:function(e){return Object(pe.a)(this.dropdown.options,(function(t){return t.value===e}))}},{key:"getOptionAt",value:function(e){return this.dropdown.options.item(e)}},{key:"removeOption",value:function(e){return this.dropdown.remove(e),this}},{key:"getValue",value:function(){return this.dropdown.value}},{key:"setValue",value:function(e){return this.dropdown.value=e,this}},{key:"hasValue",value:function(e){return Object(_e.a)(this.dropdown.options,(function(t){return t.value===e}))}},{key:"getValues",value:function(){for(var e=[],t=0,i=this.dropdown.options.length;t<i;t++)e.push(this.dropdown.options[t].value);return e}},{key:"getTexts",value:function(){for(var e=[],t=0,i=this.dropdown.options.length;t<i;t++)e.push(this.dropdown.options[t].text);return e}},{key:"setValueByText",value:function(e){for(var t=0,i=this.dropdown.options.length;t<i;t++)if(this.dropdown.options[t].text===e){this.dropdown.selectedIndex=t;break}}},{key:"getText",value:function(){return this.dropdown.options[this.dropdown.selectedIndex].text}},{key:"clear",value:function(){for(;this.dropdown.options.length;)this.dropdown.remove(0);for(var e=this.dropdown.getElementsByTagName("optgroup");e.length;)this.dropdown.removeChild(e[0]);return this}},{key:"setOptions",value:function(e){this.clear();for(var t=0,i=e.length;t<i;t++)this.addOption(e[t]);return this}},{key:"setSelectedOptionByValue",value:function(e){this.dropdown.value=e}}]),e}();function Ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}!function(e){e[e.AND=0]="AND",e[e.OR=1]="OR"}(ce||(ce={})),function(e){e[e.and=ce.AND]="and",e[e.or=ce.OR]="or"}(he||(he={}));var ye,fe,me,ve,Oe=function(){function e(t,i){o()(this,e),v()(this,"CONFIGURATION",void 0),v()(this,"rootNode",void 0),v()(this,"statementNode",void 0),v()(this,"statementComponent",void 0),v()(this,"i18n",void 0),v()(this,"statementPosition",void 0),t>e.MAX_NR_OF_STATEMENTS?console.error("reached MAX_NR_OF_STATEMENTS"):(this.statementPosition=t,this.CONFIGURATION=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(i),!0).forEach((function(t){v()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ee(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e.createDefaultConfiguration(),{},i),this.rootNode=document.createElement("div"),this.statementNode=document.createElement("div"),this.statementComponent=new ge,this.statementNode.setAttribute("data-role","rules-statement-component"),this.statementNode.appendChild(this.statementComponent.getRoot()),this.statementComponent.getRoot().onclick=function(e){e.stopPropagation()},this.getRootNode().setAttribute("data-role","rules-statement"),this.getRootNode().appendChild(this.statementNode))}return l()(e,[{key:"getStatementPosition",get:function(){return this.statementPosition}}]),l()(e,[{key:"withI18n",value:function(e){return this.i18n=e,this}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"initialize",value:function(){var e=this,t=function(t,i){return e.i18n.translateTextDefault(t,i)},i=[{value:ce.AND,text:t("notifications_rule_statement_and","and")},{value:ce.OR,text:t("notifications_rule_statement_or","or")}];this.statementComponent.setOptions(i);var n=this.CONFIGURATION.selectedStatement;null!==n&&this.statementComponent.setValue(String(n))}},{key:"updateStatementPosition",value:function(e){this.statementPosition=e}},{key:"getSelectedStatement",value:function(){return parseInt(this.statementComponent.getValue(),10)}}],[{key:"createDefaultConfiguration",value:function(){return{selectedStatement:null}}}]),e}();function Te(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}v()(Oe,"MAX_NR_OF_STATEMENTS",9),function(e){e[e.IS=0]="IS",e[e.IS_NOT=1]="IS_NOT",e[e.CONTAINS=2]="CONTAINS",e[e.DOES_NOT_CONTAIN=3]="DOES_NOT_CONTAIN",e[e.BEGINS_WITH=4]="BEGINS_WITH",e[e.ENDS_WITH=5]="ENDS_WITH",e[e.IS_GREATER_THAN=6]="IS_GREATER_THAN",e[e.IS_LESS_THAN=7]="IS_LESS_THAN",e[e.IS_CHECKED=8]="IS_CHECKED",e[e.IS_NOT_CHECKED=9]="IS_NOT_CHECKED",e[e.IS_SELECTED=10]="IS_SELECTED",e[e.IS_NOT_SELECTED=11]="IS_NOT_SELECTED"}(ye||(ye={})),function(e){e[e.is=ye.IS]="is",e[e.is_not=ye.IS_NOT]="is_not",e[e.contains=ye.CONTAINS]="contains",e[e.does_not_contain=ye.DOES_NOT_CONTAIN]="does_not_contain",e[e.begins_with=ye.BEGINS_WITH]="begins_with",e[e.ends_with=ye.ENDS_WITH]="ends_with",e[e.is_greater_than=ye.IS_GREATER_THAN]="is_greater_than",e[e.is_less_than=ye.IS_LESS_THAN]="is_less_than",e[e.is_checked=ye.IS_CHECKED]="is_checked",e[e.is_not_checked=ye.IS_NOT_CHECKED]="is_not_checked",e[e.is_selected=ye.IS_SELECTED]="is_selected",e[e.is_not_selected=ye.IS_NOT_SELECTED]="is_not_selected"}(fe||(fe={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.CHECKABLE=1]="CHECKABLE",e[e.SELECTABLE=2]="SELECTABLE",e[e.COMPARABLE=3]="COMPARABLE",e[e.MISSING=4]="MISSING"}(me||(me={})),function(e){e.ADD="add",e.REMOVE="remove",e.BOTH="both",e.NONE="none"}(ve||(ve={}));var Ce=function(e){function t(e,i,n){var a;o()(this,t),a=d()(this,_()(t).call(this)),v()(h()(a),"CONFIGURATION",void 0),v()(h()(a),"variableValueToConfigurationMap",void 0),v()(h()(a),"rootNode",void 0),v()(h()(a),"variableNode",void 0),v()(h()(a),"operatorNode",void 0),v()(h()(a),"valueNode",void 0),v()(h()(a),"optionNode",void 0),v()(h()(a),"variableComponent",void 0),v()(h()(a),"operatorComponent",void 0),v()(h()(a),"valueComponent",void 0),v()(h()(a),"valueInput",void 0),v()(h()(a),"i18n",void 0),v()(h()(a),"onVariableChanged",void 0),v()(h()(a),"onVariableBeforeChange",void 0),v()(h()(a),"onConditionAdded",void 0),v()(h()(a),"onConditionRemoved",void 0),v()(h()(a),"canAddCondition",void 0),v()(h()(a),"canRemoveCondition",void 0),v()(h()(a),"conditionPosition",void 0),v()(h()(a),"lastSelectedVariable",void 0),v()(h()(a),"onStatementAdded",void 0),v()(h()(a),"onStatementRemoved",void 0),a.conditionPosition=e,a.onVariableChanged=i,a.CONFIGURATION=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(i),!0).forEach((function(t){v()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Te(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t.createDefaultConfiguration(),{},n),a.variableValueToConfigurationMap={},a.canAddCondition=!1,a.canRemoveCondition=!1,a.rootNode=document.createElement("div"),a.variableNode=document.createElement("div"),a.operatorNode=document.createElement("div"),a.valueNode=document.createElement("div"),a.optionNode=document.createElement("div"),a.variableComponent=new ge,a.operatorComponent=new ge,a.valueComponent=new ge,a.valueInput=document.createElement("input"),a.variableNode.setAttribute("data-role","rules-condition-variable"),a.variableNode.onclick=function(e){e.stopPropagation()},a.variableNode.appendChild(a.variableComponent.getRoot()),a.operatorNode.setAttribute("data-role","rules-condition-operator"),a.operatorNode.onclick=function(e){e.stopPropagation()},a.operatorNode.appendChild(a.operatorComponent.getRoot()),a.valueNode.setAttribute("data-role","rules-condition-value"),a.valueNode.onclick=function(e){e.stopPropagation()},a.valueNode.appendChild(a.valueComponent.getRoot()),a.valueNode.appendChild(a.valueInput),a.optionNode.setAttribute("data-role","rules-condition-option");var r=document.createElement("span");r.setAttribute("class","i123-close"),r.setAttribute("data-role","rules-condition-remove"),r.onclick=function(e){e.stopPropagation(),a.removeCondition()};var s=document.createElement("span");return s.setAttribute("class","i123-add"),s.setAttribute("data-role","rules-condition-add"),s.onclick=function(e){e.stopPropagation(),a.addCondition()},a.optionNode.appendChild(r),a.optionNode.appendChild(s),a.updateOptionVisibility(ve.NONE,!0),a.getRootNode().setAttribute("data-role","rules-condition"),a.getRootNode().appendChild(a.variableNode),a.getRootNode().appendChild(a.operatorNode),a.getRootNode().appendChild(a.valueNode),a.getRootNode().appendChild(a.optionNode),a}return f()(t,e),l()(t,[{key:"setCanAddCondition",set:function(e){this.canAddCondition=e}},{key:"setCanRemoveCondition",set:function(e){this.canRemoveCondition=e}},{key:"getConditionPosition",get:function(){return this.conditionPosition}}]),l()(t,[{key:"withI18n",value:function(e){return this.i18n=e,this}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"initialize",value:function(){var e=this;this.updateVariableComponentOptions();var i=function(){var t=e.getVariable();t.type===me.MISSING?e.variableNode.setAttribute("data-missing","true"):e.variableNode.removeAttribute("data-missing"),t.skipConditions?e.getRootNode().setAttribute("data-skip","operator"):t.type===me.CHECKABLE||t.type===me.SELECTABLE?e.getRootNode().setAttribute("data-skip","value"):e.getRootNode().setAttribute("data-skip","")},n=this.variableComponent.getSelectedIndex();if(this.variableComponent.getRoot().addEventListener("focus",(function(){n=e.variableComponent.getSelectedIndex()})),this.variableComponent.getRoot().addEventListener("change",(function(){if(!e.onVariableBeforeChange)throw new Error("onVariableBeforeChange must be assigned!");if(!e.onVariableBeforeChange())return e.variableComponent.setSelectedIndex(n),void e.trigger("count-email-rules-not-supported");i(),e.updateOperator()&&e.updateValue();var t=e.getVariable(),a=e.lastSelectedVariable.value!==t.value&&t.skipConditions||e.lastSelectedVariable.skipConditions&&e.lastSelectedVariable.value!==t.value;e.onVariableChanged&&a&&e.onVariableChanged(t.skipConditions),t.skipConditions||1!==e.conditionPosition||e.autoUpdateOptionVisibility(),e.lastSelectedVariable=t})),this.operatorComponent.getRoot().addEventListener("change",(function(){e.updateValue(!0)})),this.valueComponent.getRoot().addEventListener("change",(function(){e.valueNode.hasAttribute("data-missing")&&e.valueNode.removeAttribute("data-missing")})),i(),this.updateOperator()){var a=this.CONFIGURATION.selectedOperator;if(null!==a&&this.operatorComponent.setValue(String(a)),this.updateValue()){var r=this.CONFIGURATION.selectedValue;null!==r&&(this.getValueType()===t.VALUE_TYPE_SELECT?-1!==this.valueComponent.getValues().indexOf(r)?this.valueComponent.setValue(r):-1!==this.valueComponent.getTexts().indexOf(r)?this.valueComponent.setValueByText(r):(this.valueComponent.addOption({value:r,text:this.i18n.translateText("payments_deletedField"),isSeparator:!0,hidden:!0}),this.valueComponent.setValue(r),this.valueNode.setAttribute("data-missing","true")):this.valueInput.value=r)}}this.initEventListeners(),this.lastSelectedVariable=this.getVariable()}},{key:"initEventListeners",value:function(){var e=this;if(!ie.isMobile()){var t=!1;this.getRootNode().onmouseenter=function(){e.getVariable().skipConditions||(t="none"===e.getRootNode().getAttribute("data-option-type"))&&e.autoUpdateOptionVisibility()},this.getRootNode().onmouseleave=function(){t&&!e.getVariable().skipConditions&&e.updateOptionVisibility(ve.NONE)}}}},{key:"getOperator",value:function(){return parseInt(this.operatorComponent.getValue(),10)}},{key:"getValue",value:function(){return this.getValueType()===t.VALUE_TYPE_SELECT?this.valueComponent.getValue():this.valueInput.value}},{key:"getValueType",value:function(){return parseInt(this.getRootNode().getAttribute("data-value-type"),10)}},{key:"setValueType",value:function(e){this.getRootNode().setAttribute("data-value-type",String(e))}},{key:"updateOperator",value:function(){var e=this;if("operator"===this.getRootNode().getAttribute("data-skip"))return!1;var t=[],i=function(t,i){return e.i18n.translateTextDefault(t,i)};switch(this.getVariable().type){case me.CHECKABLE:t=[{value:ye.IS_CHECKED,text:i("notifications_ROPischecked","is checked")},{value:ye.IS_NOT_CHECKED,text:i("notifications_ROPisnotchecked","is not checked")}];break;case me.SELECTABLE:t=[{value:ye.IS_SELECTED,text:i("notifications_ROPisselected","is selected")},{value:ye.IS_NOT_SELECTED,text:i("notifications_ROPisnotselected","is not selected")}];break;case me.COMPARABLE:t=[{value:ye.IS,text:i("notifications_ROPis","is")},{value:ye.IS_GREATER_THAN,text:i("reports_rulesGreaterThan","is greater than")},{value:ye.IS_LESS_THAN,text:i("reports_rulesLessThan","is less than")}];break;default:t=[{value:ye.IS,text:i("notifications_ROPis","is")},{value:ye.IS_NOT,text:i("notifications_ROPisnot","is not")},{value:ye.CONTAINS,text:i("notifications_ROPcontains","contains")},{value:ye.DOES_NOT_CONTAIN,text:i("notifications_ROPdoesntcontain","does not contain")},{value:ye.BEGINS_WITH,text:i("notifications_ROPbeginswith","begins with")},{value:ye.ENDS_WITH,text:i("notifications_ROPendswith","ends with")},{value:ye.IS_GREATER_THAN,text:i("reports_rulesGreaterThan","is greater than")},{value:ye.IS_LESS_THAN,text:i("reports_rulesLessThan","is less than")}]}return this.operatorComponent.setOptions(t),!0}},{key:"updateValue",value:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(""!==this.getRootNode().getAttribute("data-skip"))return!1;var n=this.getVariable(),a=this.getOperator(),r=this.getValueType();return n.values?i?a!==ye.IS&&a!==ye.IS_NOT?r!==t.VALUE_TYPE_INPUT&&this.setValueType(t.VALUE_TYPE_INPUT):r!==t.VALUE_TYPE_SELECT&&this.setValueType(t.VALUE_TYPE_SELECT):(r!==t.VALUE_TYPE_SELECT&&this.setValueType(t.VALUE_TYPE_SELECT),this.valueComponent.clear(),this.valueInput.value="",n.values.forEach((function(t,i){e.valueComponent.addOption({value:i,text:t,isDefault:0===i})}))):i||(r!==t.VALUE_TYPE_INPUT&&this.setValueType(t.VALUE_TYPE_INPUT),this.valueInput.placeholder=n.placeholder||"",this.valueInput.value=""),!0}},{key:"selectedVariableHasGroup",value:function(){return void 0!=this.variableValueToConfigurationMap[this.getSelectedVariable()].group}},{key:"isSelectedVariableControlTypeOf",value:function(e){return this.getVariable().controlType&&this.getVariable().controlType===e}},{key:"updateVariableComponentOptions",value:function(){var e=this;this.variableComponent.clear();var t={};this.CONFIGURATION.variables.forEach((function(i){i.group?("undefined"===typeof t[i.group.id]&&(t[i.group.id]=!0,e.variableComponent.addGroup(i.group.id,i.group.name)),e.variableComponent.addOption({value:i.value,text:i.text},null,i.group.id)):e.variableComponent.addOption({value:i.value,text:i.text}),e.variableValueToConfigurationMap[i.value]=i}));var i=this.CONFIGURATION.selectedVariable;if(null!==i)if(this.variableValueToConfigurationMap.hasOwnProperty(i))this.variableComponent.getOptionByValue(i)?this.variableComponent.setValue(i):(this.variableComponent.addOption({value:this.variableValueToConfigurationMap[i].value,text:this.variableValueToConfigurationMap[i].text,isSeparator:!0}),this.variableComponent.setValue(this.variableValueToConfigurationMap[i].value));else{var n={value:i,text:this.i18n.translateText("payments_deletedField"),type:me.MISSING};this.variableValueToConfigurationMap[n.value]=n,this.variableComponent.addOption({value:n.value,text:n.text,isSeparator:!0}),this.variableComponent.setValue(n.value)}}},{key:"getVariable",value:function(){return this.variableValueToConfigurationMap[this.getSelectedVariable()]}},{key:"getVariables",value:function(){return this.CONFIGURATION.variables}},{key:"getSelectedVariable",value:function(){return this.variableComponent.getValue()}},{key:"getSelectedGroup",value:function(){return this.selectedVariableHasGroup()?this.variableValueToConfigurationMap[this.getSelectedVariable()].group.id:""}},{key:"getSelectedVariableControlType",value:function(){return this.getVariable().controlType}},{key:"isSelectedVariableAnyControlTypeOf",value:function(e){for(var t=0,i=e.length;t<i;t++)if(this.isSelectedVariableControlTypeOf(e[t]))return!0;return!1}},{key:"getNotificationSelectedVariable",value:function(){return this.variableValueToConfigurationMap[this.getSelectedVariable()].value===this.getSelectedVariable()?this.variableValueToConfigurationMap[this.getSelectedVariable()].text:this.getSelectedValue()}},{key:"getNotificationSelectedValue",value:function(){return this.getValueType()===t.VALUE_TYPE_SELECT?this.valueComponent.getText():this.getSelectedValue()}},{key:"updateVariables",value:function(e){this.CONFIGURATION.variables=e,this.updateVariableComponentOptions()}},{key:"getSelectedOperator",value:function(){return this.getOperator()}},{key:"getSelectedValue",value:function(){return this.getValue()}},{key:"updateConditionPosition",value:function(e){this.conditionPosition=e}},{key:"addCondition",value:function(){if(this.canAddCondition){ie.isMobile()||this.updateOptionVisibility(ve.NONE),this.addStatement();var e=this.getVariables().filter((function(e){return!e.skipConditions})),i=this.conditionPosition<e.length?this.conditionPosition:e.length-1,n=new t(this.conditionPosition+1,this.onVariableChanged,{variables:e,selectedVariable:e[i].value,selectedOperator:null,selectedValue:null}).withI18n(this.i18n);n.onConditionAdded=this.onConditionAdded,n.onConditionRemoved=this.onConditionRemoved,n.onStatementAdded=this.onStatementAdded,n.onStatementRemoved=this.onStatementRemoved,n.onVariableBeforeChange=this.onVariableBeforeChange,n.initialize(),this.onConditionAdded&&this.onConditionAdded(n),ie.isMobile()&&this.autoUpdateOptionVisibility()}}},{key:"removeCondition",value:function(){this.canRemoveCondition&&(ie.isMobile()||this.updateOptionVisibility(ve.NONE),this.removeStatement(),this.onConditionRemoved&&this.onConditionRemoved(this),ie.isMobile()&&this.autoUpdateOptionVisibility())}},{key:"autoUpdateOptionVisibility",value:function(){this.canAddCondition&&this.canRemoveCondition?this.updateOptionVisibility(ve.BOTH):this.canAddCondition?this.updateOptionVisibility(ve.ADD):this.canRemoveCondition?this.updateOptionVisibility(ve.REMOVE):this.updateOptionVisibility(ve.NONE,!0)}},{key:"updateOptionVisibility",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!t&&ie.isMobile()&&e===ve.NONE||this.getRootNode().setAttribute("data-option-type",e)}},{key:"addStatement",value:function(e){var t=new Oe(this.conditionPosition,e).withI18n(this.i18n);t.initialize(),this.onStatementAdded&&this.onStatementAdded(t)}},{key:"removeStatement",value:function(){if(this.onStatementRemoved){var e=this.getConditionPosition>1?this.getConditionPosition-2:0;this.onStatementRemoved(e)}}}],[{key:"createDefaultConfiguration",value:function(){return{variables:[],selectedVariable:null,selectedOperator:null,selectedValue:null}}}]),t}(R.a);v()(Ce,"MAX_NR_OF_CONDITIONS",10),v()(Ce,"VALUE_TYPE_INPUT",1),v()(Ce,"VALUE_TYPE_SELECT",2);var Ne,Ae=i(17),Re=i.n(Ae);!function(e){e.LANGUAGE="language",e.COUPON_CODE="couponCode",e.QUIZ_SCORE="quizScore"}(Ne||(Ne={}));var Ie=function(e){function t(e,i){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o()(this,t),n=d()(this,_()(t).call(this)),v()(h()(n),"cloneDivRuleContainer",void 0),v()(h()(n),"rootNode",void 0),v()(h()(n),"ruleConditionConfigurations",void 0),v()(h()(n),"ruleStatementConfigurations",void 0),v()(h()(n),"i18n",void 0),v()(h()(n),"divRuleContent",void 0),v()(h()(n),"divRuleCondition",void 0),v()(h()(n),"divRuleStatement",void 0),v()(h()(n),"ruleConditionList",void 0),v()(h()(n),"nrOfConditions",void 0),v()(h()(n),"ruleStatementList",void 0),v()(h()(n),"nrOfStatements",void 0),v()(h()(n),"rulePosition",void 0),v()(h()(n),"isRuleSelected",void 0),v()(h()(n),"ruleDuplicateBtn",void 0),v()(h()(n),"ruleDeleteBtn",void 0),v()(h()(n),"canTrackMetrics",!0),v()(h()(n),"onRuleConditionVariableChanged",void 0),v()(h()(n),"onRuleSelected",void 0),v()(h()(n),"onRuleDeselected",void 0),v()(h()(n),"onDeselectAllRules",void 0),v()(h()(n),"onRuleDuplicated",void 0),v()(h()(n),"onRuleDeleted",void 0),v()(h()(n),"onStatementChanged",void 0),v()(h()(n),"onSendToFocus",void 0),v()(h()(n),"onSendToVariableOpen",void 0),v()(h()(n),"onSendToVariableInsert",void 0),n.cloneDivRuleContainer=e,n.rootNode=n.cloneDivRuleContainer.cloneNode(!0),n.rulePosition=i,a.ruleConditionConfigurations&&a.ruleConditionConfigurations.length>0?n.ruleConditionConfigurations=Re()(a.ruleConditionConfigurations):n.ruleConditionConfigurations=[],a.ruleStatementConfigurations&&a.ruleStatementConfigurations.length>0?n.ruleStatementConfigurations=Re()(a.ruleStatementConfigurations):n.ruleStatementConfigurations=[],n}return f()(t,e),l()(t,[{key:"getRootNode",value:function(){return this.rootNode}},{key:"getRuleConditionList",value:function(){return this.ruleConditionList}},{key:"getRuleStatementList",value:function(){return this.ruleStatementList}},{key:"getCanTrackMetrics",value:function(){return this.canTrackMetrics}},{key:"getNrOfConditions",get:function(){return this.nrOfConditions}},{key:"getRulePosition",get:function(){return this.rulePosition}},{key:"getIsRuleSelected",get:function(){return this.isRuleSelected}}]),l()(t,[{key:"withI18n",value:function(e){return this.i18n=e,this}},{key:"initialize",value:function(){this.initVars(),this.initRuleComponent(),this.initEventListeners()}},{key:"initVars",value:function(){this.isRuleSelected=!1,this.ruleConditionList=[],this.nrOfConditions=0,this.ruleStatementList=[],this.nrOfStatements=0,this.divRuleContent=this.getRootNode().querySelector(t.QUERY_SELECTOR_RULE_CONTENT),this.ruleDuplicateBtn=this.getRootNode().querySelector(t.QUERY_SELECTOR_RULE_DUPLICATE),this.ruleDeleteBtn=this.getRootNode().querySelector(t.QUERY_SELECTOR_RULE_DELETE),this.divRuleCondition=this.divRuleContent.querySelector(t.QUERY_SELECTOR_RULE_CONDITION),this.divRuleStatement=this.divRuleContent.querySelector(t.QUERY_SELECTOR_RULE_STATEMENT),this.divRuleContent.removeChild(this.divRuleCondition),this.divRuleContent.removeChild(this.divRuleStatement)}},{key:"initRuleComponent",value:function(){var e=this;if(this.getRootNode().querySelector(t.QUERY_SELECTOR_RULE_POSITION).textContent="#".concat(this.rulePosition.toString()),this.getRootNode().setAttribute("data-rule-position",this.rulePosition.toString()),this.initCustomRuleComponent(),0===this.ruleConditionConfigurations.length){var i={variables:this.getRuleConditionConfigVariables(!0)};this.rulePosition>1&&(i.selectedVariable=i.variables[1].value),this.ruleConditionConfigurations.push(i)}this.ruleConditionConfigurations.forEach((function(t,i){t.variables||(t.variables=e.getRuleConditionConfigVariables(!0),e.rulePosition>1&&(t.selectedVariable=t.variables[1].value)),e.nrOfConditions++;var n=new Ce(e.nrOfConditions,e.onConditionVariableChanged.bind(e),t).withI18n(e.i18n);e.ruleConditionList.push(n),n.onConditionAdded=e.onConditionAdded.bind(e),n.onConditionRemoved=e.onConditionRemoved.bind(e),n.onStatementAdded=e.onStatementAdded.bind(e),n.onStatementRemoved=e.onStatementRemoved.bind(e),n.onVariableBeforeChange=e.onVariableBeforeChange.bind(e),n.initialize(),e.onConditionVariableChanged(!0);var a=e.divRuleCondition.cloneNode(!0);a.appendChild(n.getRootNode()),e.divRuleContent.appendChild(a),n.on("count-email-rules-not-supported",(function(){e.trigger("count-email-rules-not-supported")})),n.updateOptionVisibility(O.F.NONE),e.ruleStatementConfigurations[i]&&n.addStatement(e.ruleStatementConfigurations[i])})),this.updateRuleConditionOptions(),1===this.getRuleConditionList()[0].getVariables().length&&this.getRuleConditionList()[0].getVariable().skipConditions&&(this.ruleDuplicateBtn.style.pointerEvents="none",this.ruleDuplicateBtn.style.color="rgba(170, 170, 170, 0.5)")}},{key:"initCustomRuleComponent",value:function(){}},{key:"initEventListeners",value:function(){var e=this;ie.isMobile()?(this.ruleDuplicateBtn.ontouchend=this.ruleDuplicateBtn.ontouchcancel=function(){setTimeout((function(){e.ruleDuplicateBtn.classList.remove("ruleHasHover")}),300)},this.ruleDuplicateBtn.ontouchstart=function(){e.ruleDuplicateBtn.classList.add("ruleHasHover")}):(this.getRootNode().onmouseenter=function(){e.divRuleContent.setAttribute("data-role-hover","rule-content"),[e.ruleDuplicateBtn,e.ruleDeleteBtn].forEach((function(e){e.style.display="block"}))},this.getRootNode().onmouseleave=function(){e.divRuleContent.removeAttribute("data-role-hover"),[e.ruleDuplicateBtn,e.ruleDeleteBtn].forEach((function(e){e.style.display="none"}))}),this.ruleDuplicateBtn.onclick=function(t){t.stopPropagation(),e.onDuplicateBtnClick()},this.ruleDeleteBtn.onclick=function(t){t.stopPropagation(),e.deleteRule()}}},{key:"onDuplicateBtnClick",value:function(){this.duplicateRule()}},{key:"getRuleConditionConfigVariables",value:function(e){return[{value:"test",text:"Test",type:me.DEFAULT}]}},{key:"getRuleContainerInstance",value:function(e,i){return new t(this.cloneDivRuleContainer,this.rulePosition,{ruleConditionConfigurations:e,ruleStatementConfigurations:i}).withI18n(this.i18n)}},{key:"onConditionVariableChanged",value:function(e){this.onRuleConditionVariableChanged&&this.onRuleConditionVariableChanged(!e,this.getRulePosition),this.updateRuleConditionOptions()}},{key:"onConditionAdded",value:function(e){this.nrOfConditions++;var t=this.divRuleCondition.cloneNode(!0);t.appendChild(e.getRootNode()),e.getConditionPosition===this.nrOfConditions?(this.divRuleContent.appendChild(t),this.ruleConditionList.push(e)):(this.divRuleContent.insertBefore(t,this.ruleStatementList[e.getConditionPosition-1].getRootNode().parentElement),this.ruleConditionList.splice(e.getConditionPosition-1,0,e)),this.updateConditionsPosition(),2===this.nrOfConditions&&this.ruleConditionList[0].getVariables()[0].skipConditions&&this.updateRuleConditionVariables(!1),this.updateRuleConditionOptions()}},{key:"onConditionRemoved",value:function(e){this.nrOfConditions--,this.divRuleContent.removeChild(e.getRootNode().parentElement),this.ruleConditionList.splice(e.getConditionPosition-1,1),this.updateConditionsPosition(),1===this.nrOfConditions&&this.ruleConditionList[0].onVariableChanged(!1),this.updateRuleConditionOptions()}},{key:"onStatementAdded",value:function(e){this.nrOfStatements++;var t=this.divRuleStatement.cloneNode(!0);t.appendChild(e.getRootNode()),e.getStatementPosition===this.nrOfStatements?(this.divRuleContent.appendChild(t),this.ruleStatementList.push(e)):(this.divRuleContent.insertBefore(t,this.ruleStatementList[e.getStatementPosition-1].getRootNode().parentElement),this.ruleStatementList.splice(e.getStatementPosition-1,0,e)),this.updateStatementsPosition(),this.onStatementChanged&&this.onStatementChanged()}},{key:"onStatementRemoved",value:function(e){this.nrOfStatements--,this.divRuleContent.removeChild(this.ruleStatementList[e].getRootNode().parentElement),this.ruleStatementList.splice(e,1),this.updateStatementsPosition(),this.onStatementChanged&&this.onStatementChanged()}},{key:"updateRuleConditionOptions",value:function(){if(this.ruleConditionList[0].getVariable().skipConditions)this.ruleConditionList[0].setCanAddCondition=!1,this.ruleConditionList[0].setCanRemoveCondition=!1;else for(var e=0;e<this.nrOfConditions;e++)this.nrOfConditions<2?(this.ruleConditionList[e].setCanAddCondition=!0,this.ruleConditionList[e].setCanRemoveCondition=!1):this.nrOfConditions<Ce.MAX_NR_OF_CONDITIONS?(this.ruleConditionList[e].setCanAddCondition=!0,this.ruleConditionList[e].setCanRemoveCondition=!0):(this.ruleConditionList[e].setCanAddCondition=!1,this.ruleConditionList[e].setCanRemoveCondition=!0),ie.isMobile()&&this.ruleConditionList[e].autoUpdateOptionVisibility();ie.isMobile()||(this.nrOfConditions<Ce.MAX_NR_OF_CONDITIONS?this.ruleConditionList[this.nrOfConditions-1].autoUpdateOptionVisibility():this.ruleConditionList[this.nrOfConditions-1].updateOptionVisibility(O.F.NONE))}},{key:"updateConditionsPosition",value:function(){for(var e=0;e<this.nrOfConditions;e++)this.ruleConditionList[e].updateConditionPosition(e+1)}},{key:"updateStatementsPosition",value:function(){for(var e=0;e<this.nrOfStatements;e++)this.ruleStatementList[e].updateStatementPosition(e+1)}},{key:"getRuleConditionAt",value:function(e){return this.ruleConditionList[e]}},{key:"updateRuleConditionVariables",value:function(e){this.ruleConditionList[0].updateVariables(this.getRuleConditionConfigVariables(e))}},{key:"updateRulePosition",value:function(e){this.rulePosition=e,this.getRootNode().querySelector(t.QUERY_SELECTOR_RULE_POSITION).textContent="#".concat(this.rulePosition.toString()),this.getRootNode().setAttribute("data-rule-position",this.rulePosition.toString())}},{key:"selectRule",value:function(){this.isRuleSelected||(this.divRuleContent.classList.add("ruleContentSelected"),this.isRuleSelected=!0,this.onRuleSelected&&this.onRuleSelected(this))}},{key:"deselectRule",value:function(){this.isRuleSelected&&(this.divRuleContent.classList.remove("ruleContentSelected"),this.isRuleSelected=!1,this.onRuleDeselected&&this.onRuleDeselected(this))}},{key:"duplicateRule",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.canTrackMetrics=e;var t=[];this.ruleConditionList.forEach((function(e){var i=e.getVariable().skipConditions?e.getVariables()[1].value:e.getSelectedVariable(),n=e.getVariable().skipConditions?null:e.getSelectedOperator(),a=e.getVariable().skipConditions?null:e.getSelectedValue();t.push({variables:e.getVariables(),selectedVariable:i,selectedOperator:n,selectedValue:a})}));var i=[];this.ruleStatementList.forEach((function(e){i.push({selectedStatement:e.getSelectedStatement()})}));var n=this.getRuleContainerInstance(t,i);n.initialize(),n.onRuleConditionVariableChanged=this.onRuleConditionVariableChanged,n.onRuleSelected=this.onRuleSelected,n.onRuleDeselected=this.onRuleDeselected,n.onDeselectAllRules=this.onDeselectAllRules,n.onRuleDuplicated=this.onRuleDuplicated,n.onRuleDeleted=this.onRuleDeleted,n.onStatementChanged=this.onStatementChanged,this.deselectRule(),this.onRuleDuplicated&&this.onRuleDuplicated(n),this.onConditionVariableChanged(!0)}},{key:"deleteRule",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.canTrackMetrics=e,this.deselectRule(),this.onRuleDeleted&&this.onRuleDeleted(this),this.onConditionVariableChanged(!1)}},{key:"onVariableBeforeChange",value:function(){return!0}}]),t}(R.a);v()(Ie,"RULE_ALLOWED_CONTROL_TYPES",[C.a.CONTROL_TYPE_TEXT,C.a.CONTROL_TYPE_TEXTAREA,C.a.CONTROL_TYPE_DROPDOWN,C.a.CONTROL_TYPE_RADIO,C.a.CONTROL_TYPE_CHECKBOX,C.a.CONTROL_TYPE_NUMBER,C.a.CONTROL_TYPE_FORMULA,C.a.CONTROL_TYPE_EMAIL,C.a.CONTROL_TYPE_LIKERT_SCALE,C.a.CONTROL_TYPE_NAME,C.a.CONTROL_TYPE_ADDRESS,C.a.CONTROL_TYPE_PHONE,C.a.CONTROL_TYPE_DATE,C.a.CONTROL_TYPE_TIME,C.a.CONTROL_TYPE_PRICE,C.a.CONTROL_TYPE_WEBSITE,C.a.CONTROL_TYPE_PASSWORD,C.a.CONTROL_TYPE_STAR_RATING,C.a.CONTROL_TYPE_TERMS_OF_SERVICE,C.a.CONTROL_TYPE_COUPON]),v()(Ie,"RULE_EXTRA_VARIABLES",[Ne.LANGUAGE,Ne.COUPON_CODE,Ne.QUIZ_SCORE]),v()(Ie,"RULE_ALLOWED_EXTRA",[O.Q.LANGUAGE,O.Q.PAYMENT_COUPON,O.Q.QUIZ_SCORE]),v()(Ie,"QUERY_SELECTOR_RULE_CONTENT",'div[data-role="rule-content"]'),v()(Ie,"QUERY_SELECTOR_RULE_POSITION",'div[data-role="rule-position"]'),v()(Ie,"QUERY_SELECTOR_RULE_DUPLICATE",'div[data-role="rule-duplicate"]'),v()(Ie,"QUERY_SELECTOR_RULE_DELETE",'div[data-role="rule-delete"]'),v()(Ie,"QUERY_SELECTOR_RULE_CONDITION",'div[data-role="placeholder"][data-control-name="rule-condition"]'),v()(Ie,"QUERY_SELECTOR_RULE_STATEMENT",'div[data-role="placeholder"][data-control-name="rule-statement"]');var be=i(9),Pe=i(42),Se=(Pe.a,Pe.a,function(){function e(){o()(this,e),v()(this,"tracker",void 0),v()(this,"isDebugOn",!1),window.CFTracker?(this.tracker=window.CFTracker,this.checkDebugger()):(this.tracker={track:function(){return!1}},console.error("CFTracker is not defined"))}return l()(e,[{key:"track",value:function(e,t,i){this.tracker.track(e,t,i),this.debugEvent(e,t,i)}},{key:"checkDebugger",value:function(){"local.123contactform.com"===location.hostname&&(this.isDebugOn=!0)}},{key:"debugEvent",value:function(e,t,i){this.isDebugOn&&(console.warn("Tracking event: ".concat(e)),t&&console.warn("Event has value: ".concat(JSON.stringify(t))),i&&console.warn("Event has tags: ".concat(JSON.stringify(i))))}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}());v()(Se,"instance",void 0);var De;i(25),i(203);!function(e){e.NEW_SMS="notifications_new_sms",e.NEW_EMAIL="notifications_new_email",e.COUNT_EMAIL_RECIPIENTS="notifications_count_email_recipients",e.COUNT_EMAIL_RULES="notifications_count_email_rules",e.ADD_FILE_ATTACHMENTS="notifications_add_file_attachments",e.ADD_SUBMISSION_PDF_ATTACHMENTS="notifications_add_submission_pdf_attachments",e.ADD_FORM_LAYOUT_ATTACHMENTS="notifications_add_form_layout_attachments",e.CUSTOMIZE_EMAIL_TEMPLATES="notifications_customize_email_templates",e.USE_SMTP="notifications_use_smtp"}(De||(De={}));var Le;!function(e){e.TRIGGER_SEND_TO="SEND_TO",e.TRIGGER_ONLY_SEND_TO="ONLY_SEND_TO"}(Le||(Le={}));var ke=function(){function e(){o()(this,e),v()(this,"root",void 0),v()(this,"sendToComponentValue",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","notification-to-who-hook-type-config"),this.sendToComponentValue={hookType:Le.TRIGGER_SEND_TO}}return l()(e,[{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){return this.sendToComponentValue}},{key:"setValue",value:function(e){this.sendToComponentValue=e}}]),e}(),Me=function(){function e(){o()(this,e),v()(this,"root",void 0),v()(this,"onlySendToComponentValue",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","notification-to-who-hook-type-config"),this.onlySendToComponentValue={hookType:Le.TRIGGER_ONLY_SEND_TO}}return l()(e,[{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){return this.onlySendToComponentValue}},{key:"setValue",value:function(e){this.onlySendToComponentValue=e}}]),e}(),xe=function(){function e(){o()(this,e),v()(this,"root",void 0),v()(this,"dropDown",void 0),v()(this,"value",void 0),this.root=document.createElement("div"),this.root.setAttribute("data-role","to-who-component"),this.dropDown=document.createElement("select"),this.dropDown.setAttribute("data-role","hook-type"),this.addDropDownEvents(),this.addDropDownOptions(),this.root.appendChild(this.dropDown),this.root.appendChild(document.createElement("div")),this.value=e.createValue(Le.TRIGGER_SEND_TO),this.getRoot().appendChild(this.value.getRoot())}return l()(e,[{key:"getRoot",value:function(){return this.root}},{key:"getValue",value:function(){return this.value.getValue()}},{key:"setValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{hookType:Le.TRIGGER_SEND_TO};t.hookType!==this.value.getValue().hookType&&(this.value.getRoot().parentNode.removeChild(this.value.getRoot()),this.value=e.createValue(t.hookType),this.root.appendChild(this.value.getRoot())),this.value.setValue(t),this.dropDown.value=t.hookType}},{key:"addDropDownEvents",value:function(){var t=this;this.dropDown.onchange=function(){t.value.getRoot().parentNode.removeChild(t.value.getRoot()),t.value=e.createValue(t.dropDown.value),t.getRoot().appendChild(t.value.getRoot())}}},{key:"addDropDownOptions",value:function(){for(var e=[{text:"Send to",value:Le.TRIGGER_SEND_TO,intlKey:"edt_notification_rules_send_to"},{text:"Only send to",value:Le.TRIGGER_ONLY_SEND_TO,intlKey:"edt_notification_rules_only_send_to"}],t=0;t<e.length;t++){var i=document.createElement("option");i.text=e[t].text,i.value=e[t].value,i.setAttribute("data-i18n-text",e[t].intlKey),this.dropDown.add(i)}}}],[{key:"createValue",value:function(e){switch(e){case Le.TRIGGER_SEND_TO:return new ke;case Le.TRIGGER_ONLY_SEND_TO:return new Me;default:throw new Error("Unknown hook type")}}}]),e}(),we=function e(){o()(this,e)};v()(we,"NOTIFICATIONS_PANEL_ID","notifications"),v()(we,"NOTIFICATIONS_EDITOR_EMPTY_ID","notifications-editor-empty");var Ue=function e(){o()(this,e)};v()(Ue,"COMPONENT_TYPE_SEND_TO","send-to"),v()(Ue,"COMPONENT_TYPE_WHEN","when"),v()(Ue,"COMPONENT_TYPE_FROM_NAME","from-name"),v()(Ue,"COMPONENT_TYPE_FROM_EMAIL","from-email"),v()(Ue,"COMPONENT_TYPE_REPLY_TO_EMAIL","reply-to-email"),v()(Ue,"COMPONENT_TYPE_SUBJECT","subject"),v()(Ue,"COMPONENT_TYPE_BODY","body"),v()(Ue,"COMPONENT_TYPE_ADD_ATTACHMENT","add-attachment"),v()(Ue,"COMPONENT_TYPE_PDF_NAME","pdf-name"),v()(Ue,"COMPONENT_TYPE_ADD_RULES_BUTTON","add-rule-button"),v()(Ue,"COMPONENT_TYPE_HIDE_EMPTY_FIELDS","hide-empty-fields");var Ye=function e(){o()(this,e)};v()(Ye,"KEY_0",48),v()(Ye,"KEY_1",49),v()(Ye,"KEY_2",50),v()(Ye,"KEY_3",51),v()(Ye,"KEY_4",52),v()(Ye,"KEY_5",53),v()(Ye,"KEY_6",54),v()(Ye,"KEY_7",55),v()(Ye,"KEY_8",56),v()(Ye,"KEY_9",57),v()(Ye,"KEY_PAD_0",96),v()(Ye,"KEY_PAD_1",97),v()(Ye,"KEY_PAD_2",98),v()(Ye,"KEY_PAD_3",99),v()(Ye,"KEY_PAD_4",100),v()(Ye,"KEY_PAD_5",101),v()(Ye,"KEY_PAD_6",102),v()(Ye,"KEY_PAD_7",103),v()(Ye,"KEY_PAD_8",104),v()(Ye,"KEY_PAD_9",105),v()(Ye,"KEY_DOT",190),v()(Ye,"KEY_PAD_DOT",110),v()(Ye,"KEY_BACKSPACE",8),v()(Ye,"KEY_DELETE",46),v()(Ye,"KEY_LEFT",37),v()(Ye,"KEY_RIGHT",39),v()(Ye,"KEY_UP",38),v()(Ye,"KEY_DOWN",40),v()(Ye,"KEY_SPACE",32),v()(Ye,"KEY_HOME",36),v()(Ye,"KEY_END",35),v()(Ye,"KEY_TAB",9),v()(Ye,"KEY_ENTER",13),v()(Ye,"KEY_ESC",27);var Fe=i(95),Ve=function(){function e(){o()(this,e)}return l()(e,null,[{key:"isElementASpace",value:function(t){return t.textContent===String.fromCharCode(e.THIN_SPACE_CHAR_CODE)}},{key:"addNoFollowOnLinks",value:function(e){var t=document.createElement("div"),i=t.getElementsByTagName("a");return t.innerHTML=e,Array.prototype.forEach.call(i,(function(e){return e.setAttribute("rel","nofollow ugc")})),t.innerHTML}}]),e}();v()(Ve,"THIN_SPACE_CHAR_CODE",8201);var Be=function(e){function t(e){var i;if(o()(this,t),i=d()(this,_()(t).call(this,e.componentName)),v()(h()(i),"isSingleTagsList",!1),v()(h()(i),"configuration",void 0),v()(h()(i),"valuesSection",void 0),v()(h()(i),"nativeDropdown",void 0),i.configuration=e,i.valuesSection=document.createElement("div"),i.valuesSection.dataset.role="values",i.valuesSection.setAttribute("contenteditable","true"),i.rootNode.dataset.name=e.componentName,i.rootNode.dataset.type=lt.ELEMENT_TYPE_TAGS,i.rootNode.appendChild(i.valuesSection),e.placeholder){var n=document.createElement("span");n.dataset.role="tag-placeholder",n.appendChild(document.createTextNode(e.placeholder)),i.rootNode.appendChild(n)}return i.configuration.allowKeywords&&i.initializeNativeDropdown(),i.valuesSection.onfocus=function(){i.trigger("focus")},i.nativeDropdown.onchange=function(){i.trigger("ui_tags_container_variable_insert")},$(i.valuesSection).on("keydown",(function(e){var t,n=window.getSelection().anchorNode;switch(i.valuesSection.hasChildNodes()&&(t=i.valuesSection.childNodes),e.keyCode){case Ye.KEY_ENTER:e.preventDefault();break;case Ye.KEY_BACKSPACE:if(t&&t.length>=2){if(Ve.isElementASpace(n))for(var a=0,r=t.length;a<r;a++)t[a]===n&&t[a-1]&&i.isElementATag(t[a-1])&&i.valuesSection.removeChild(t[a-1]);if(i.isElementATag(n))for(var o=0,s=t.length;o<s;o++)t[o]===n&&t[o-1]&&Ve.isElementASpace(t[o-1])&&i.valuesSection.removeChild(t[o-1])}break;case Ye.KEY_DELETE:if(t&&t.length>=2){if(Ve.isElementASpace(n))for(var l=0,u=t.length;l<u;l++)t[l]===n&&t[l+1]&&i.isElementATag(t[l+1])&&i.valuesSection.removeChild(t[l+1]);if(i.isElementATag(n))for(var d=0,c=t.length;d<c;d++)t[d]===n&&t[d+1]&&Ve.isElementASpace(t[d+1])&&i.valuesSection.removeChild(t[d+1]);Ve.isElementASpace(n)&&n===t[t.length-1]&&e.preventDefault()}}1===i.valuesSection.childNodes.length&&i.valuesSection.childNodes[0].nodeName===O.A.BR&&i.valuesSection.removeChild(i.valuesSection.childNodes[0]),i.trigger("keydown")})),i.valuesSection.addEventListener("paste",(function(e){var t=(e.clipboardData||window.clipboardData).getData("text/plain"),i=window.getSelection();if(!i.rangeCount)return!1;i.deleteFromDocument(),i.getRangeAt(0).insertNode(document.createTextNode(t.replace(/\r\n|\r|\n/g," "))),e.preventDefault()})),i.valuesSection.addEventListener("blur",(function(){for(var e=0,t=i.valuesSection.childNodes.length;e<t;e++)i.valuesSection.childNodes[e].nodeName===O.A.BR&&i.valuesSection.removeChild(i.valuesSection.childNodes[e])})),i.valuesSection.addEventListener("mscontrolselect",(function(e){e.preventDefault()})),i}return f()(t,e),l()(t,[{key:"resetNativeDropdown",value:function(){var e=this.rootNode.querySelector('[data-role="dropdown"]');e&&this.rootNode.removeChild(e),this.configuration.allowKeywords&&this.initializeNativeDropdown()}},{key:"isElementATag",value:function(e){return e.nodeName===O.A.SPAN&&"ui-element"===e.dataset.uiRole&&"tag"===e.dataset.type}},{key:"initializeNativeDropdown",value:function(){var e=this,t=document.createElement("div");if(t.setAttribute("data-role","dropdown"),this.rootNode.setAttribute("data-expandable","1"),this.nativeDropdown=document.createElement("select"),t.appendChild(this.nativeDropdown),this.configuration.createValuesCallback){for(var i=this.configuration.createValuesCallback(),n=0,a=i.length;n<a;n++){var r=document.createElement("option");r.text=i[n].text||i[n].value,r.value=i[n].value,r.disabled=!!i[n].disabled&&i[n].disabled,this.nativeDropdown.add(r)}var o=document.createElement("span");o.className="i123-add",t.appendChild(o)}this.nativeDropdown.value=null,this.nativeDropdown.selectedIndex=-1,this.nativeDropdown.addEventListener("change",(function(t){var i=e.nativeDropdown.value,n=e.nativeDropdown.options[e.nativeDropdown.selectedIndex].text;e.nativeDropdown.value=null,e.nativeDropdown.selectedIndex=-1,e.addTag(n,i,!1,i!==n,k.APPEND_POSITION_AT_CURSOR)}),!0),this.nativeDropdown.onmouseover=function(){e.nativeDropdown.value=null},this.rootNode.appendChild(t),t.onclick=function(t){t.clientX&&t.clientY&&e.trigger("dropdown-open")}}},{key:"addTag",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:k.APPEND_POSITION_INSIDE,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.valuesSection,s=function(){for(var e=i.valuesSection.childNodes,n=0,a=e.length;n<a;n++)if(e[n].nodeValue&&e[n].nodeValue.trim()===t)return void(ie.isFirefox()&&1===e.length?i.valuesSection.removeChild(e[n]):e[n].nodeValue=e[n].nodeValue.replace(t,""))};if(!1===a&&!1===this.configuration.textValidationCallback(t))return this.addError(this.configuration.customErrorMessage),s();if(this.configuration.tagsLimit&&this.configuration.tagsLimit<=this.getNumberOfTagValues())return this.trigger("tags-limit-reached"),s();var l=new oe({componentName:lt.ELEMENT_TYPE_TAG,caption:e,value:t,isVariable:a,isDeleted:n}),u=new L(this.valuesSection),d=u.position();switch(l.on("append",(function(){i.isSingleTagsList||u.position(d+1)})),l.on("replace",(function(){i.isSingleTagsList||u.position(d+1)})),l.on("insert",(function(){i.isSingleTagsList||u.position(d+e.length+1)})),0===this.valuesSection.childNodes.length&&(o=this.valuesSection,r=k.APPEND_POSITION_INSIDE),r){case k.APPEND_POSITION_REPLACE:l.replace(o);break;case k.APPEND_POSITION_AT_CURSOR:l.insert(o);break;default:l.append(o,r)}this.trigger("tag-add",l)}},{key:"getValue",value:function(){for(var e=[],t=this.valuesSection.childNodes,i=0,n=t.length;i<n;i++){var a=t[i],r=void 0;if(a.nodeType===Node.TEXT_NODE){if(1===a.nodeValue.length&&a.nodeValue.charCodeAt(0)===oe.THIN_SPACE_CHAR_CODE)continue;r={type:ue.TEXT,value:a.nodeValue,caption:a.nodeValue}}else a.nodeType!==Node.TEXT_NODE&&a.textContent&&0!==a.textContent.trim().length&&(r={type:ue.TAG,value:a.dataset.value,caption:a.textContent});void 0!==r&&e.push(r)}return e}},{key:"setValue",value:function(e){this.clearValues();for(var t=0,i=e.length;t<i;t++)if(e[t].type===ue.TAG){var n=!e[t].isRegularTag;this.addTag(e[t].caption,e[t].value,e[t].isDeleted,n)}else this.valuesSection.appendChild(document.createTextNode(e[t].value))}},{key:"clearValues",value:function(){for(;this.valuesSection.hasChildNodes();)this.valuesSection.removeChild(this.valuesSection.lastChild)}},{key:"addError",value:function(e){var t=this;if(null===this.rootNode.querySelector('[data-role="error"]')){var i=document.createElement("div");i.dataset.role="error",i.appendChild(document.createTextNode(e)),this.rootNode.appendChild(i),setTimeout((function(){t.rootNode.removeChild(i)}),5e3)}}},{key:"setState",value:function(e){switch(e){case O.M.FULLY_DISABLED:this.valuesSection.removeAttribute("contenteditable"),this.nativeDropdown.setAttribute("disabled","disabled"),this.valuesSection.setAttribute("data-fully-disabled","");break;case O.M.DISABLED:this.valuesSection.removeAttribute("contenteditable"),this.nativeDropdown.setAttribute("disabled","disabled"),this.valuesSection.hasAttribute("data-fully-disabled")&&this.valuesSection.removeAttribute("data-fully-disabled");break;case O.M.ENABLED:default:this.valuesSection.setAttribute("contenteditable","true"),this.nativeDropdown.removeAttribute("disabled"),this.valuesSection.hasAttribute("data-fully-disabled")&&this.valuesSection.removeAttribute("data-fully-disabled")}}},{key:"getState",value:function(){return this.nativeDropdown.hasAttribute("disabled")&&this.valuesSection.hasAttribute("data-fully-disabled")?O.M.FULLY_DISABLED:this.nativeDropdown.hasAttribute("disabled")?O.M.DISABLED:O.M.ENABLED}},{key:"getNumberOfTagValues",value:function(){var e=this.getValue(),t=0;return Object(Fe.a)(e,(function(e){e.type===ue.TAG&&t++})),t}},{key:"getDropdownContainer",value:function(){return this.rootNode.querySelector('[data-role="dropdown"]')}}]),t}(k),He=function(e){function t(e){var i;return o()(this,t),i=d()(this,_()(t).call(this,e)),$(i.valuesSection).on("keydown",(function(e){e.keyCode!==Ye.KEY_SPACE&&e.keyCode!==Ye.KEY_ENTER||(i.replaceFirstTextNodeWithTag(),e.preventDefault())})),i.valuesSection.addEventListener("blur",(function(e){i.replaceFirstTextNodeWithTag(),i.valuesSection.blur()})),i}return f()(t,e),l()(t,[{key:"replaceFirstTextNodeWithTag",value:function(){for(var e=this.valuesSection.childNodes,t=null,i=0,n=e.length;i<n;i++)if(e[i].nodeType===Node.TEXT_NODE&&e[i].textContent.trim().length>0){t=e[i];break}null!==t&&this.addTag(t.textContent.trim(),t.textContent.trim(),!1,!1,k.APPEND_POSITION_REPLACE,t)}}]),t}(Be),We=function(e){function t(e){var i;return o()(this,t),(i=d()(this,_()(t).call(this,e))).isSingleTagsList=!0,i.on("tag-add",(function(t){var n=i.getDropdownContainer();i.setState(O.M.DISABLED),n.setAttribute("title",e.disabledTitle||""),t.on("delete",(function(){i.setState(O.M.ENABLED),n.setAttribute("title",e.title||"")}))})),i}return f()(t,e),t}(He),Ge=function(){function e(t,i,n){o()(this,e),v()(this,"attrs",{text:"",value:""}),v()(this,"host",void 0),this.host=t,this.attrs.text=n,this.attrs.value=i}return l()(e,[{key:"setAttribute",value:function(e,t){this.attrs[e]=t}},{key:"getAttribute",value:function(e){return void 0===this.attrs[e]?null:this.attrs[e]}},{key:"removeAttribute",value:function(e){delete this.attrs[e]}},{key:"hasAttribute",value:function(e){return void 0!==this.attrs[e]}},{key:"convertToHTMLOptionElement",value:function(){var e=document.createElement("option");for(var t in e.text=this.attrs.text,e.value=this.attrs.value,this.attrs)"text"!==t&&"value"!==t&&this.attrs.hasOwnProperty(t)&&this.attrs.propertyIsEnumerable(t)&&e.setAttribute(t,this.attrs[t]);return e}},{key:"text",get:function(){return this.attrs.text},set:function(e){this.attrs.text=String(e||"")}},{key:"value",get:function(){return this.attrs.value},set:function(e){this.attrs.value=String(e||"")}}],[{key:"create",value:function(t,i,n){return new e(t,i,n)}},{key:"createFromHTMLOptionElement",value:function(t,i){for(var n=e.create(t,i.value,i.text),a=i.attributes,r=a.length,o=0;o<r;o++)n.setAttribute(a[o].name,a[o].value);return n}}]),e}(),Ke=function(){function e(){o()(this,e)}return l()(e,null,[{key:"canAnchorElementToTargetBottomRight",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=document.body.getBoundingClientRect();return e.right+i+t.width<=n.width&&e.top+t.height<=window.innerHeight}},{key:"canAnchorElementToTargetTopRight",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=document.body.getBoundingClientRect();return e.right+i+t.width<=n.width&&e.top-t.height>=0}},{key:"canAnchorElementToTargetTopLeft",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.left-i+t.width>=0&&e.bottom-t.height>=0}},{key:"canAnchorElementToTargetBottomLeft",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.left-i+t.width>=0&&e.top+t.height<=window.innerHeight}},{key:"canAnchorElementToTargetCenterTop",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.left+e.width/2-t.width/2>=0&&e.top-i-t.height>=0}},{key:"canAnchorElementToTargetCenterBottom",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=window.scrollY||0;return e.left+e.width/2-t.width/2>=0&&e.bottom+i+n+t.height<=window.innerHeight}},{key:"canAnchorElementToTargetCenterLeft",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.left-i-t.width>=0&&e.top+e.height/2-t.height>=0}},{key:"canAnchorElementToTargetCenterRight",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=document.body.getBoundingClientRect();return e.right+i+t.width<=n.width&&e.top+e.height/2-t.height>=0}},{key:"getAnchorPosition",value:function(t,i){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0,r=0,o=a.length;r<o;r++)switch(a[r]){case"center-top":if(e.canAnchorElementToTargetCenterTop(t,i,n))return{left:t.left+t.width/2-i.width/2,top:t.top-i.height-n,mode:"center-top"};break;case"center-bottom":if(e.canAnchorElementToTargetCenterBottom(t,i,n))return{left:t.left+t.width/2-i.width/2,top:t.bottom+n,mode:"center-bottom"};break;case"center-right":if(e.canAnchorElementToTargetCenterRight(t,i,n))return{left:t.right+n,top:t.top+t.height/2-i.height/2,mode:"center-right"};break;case"center-left":if(e.canAnchorElementToTargetCenterLeft(t,i,n))return{left:t.left-n-i.width,top:t.top+t.height/2-i.height/2,mode:"center-left"};break;default:throw new Error("Positioning mode ".concat(JSON.stringify(a[r])," is not implemented"))}switch(a[0]){case"center-top":return{left:t.left+t.width/2-i.width/2,top:t.top-i.height-n,mode:"center-top"};case"center-bottom":return{left:t.left+t.width/2-i.width/2,top:t.bottom+n,mode:"center-bottom"};case"center-right":return{left:t.right+n,top:t.top+t.height/2-i.height/2,mode:"center-right"};case"center-left":return{left:t.left-n-i.width,top:t.top+t.height/2-i.height/2,mode:"center-left"};default:throw new Error("Positioning mode ".concat(JSON.stringify(a[0])," is not implemented"))}}}]),e}(),ze=function(e){function t(){var e;return o()(this,t),e=d()(this,_()(t).call(this,lt.ELEMENT_TYPE_SEARCHABLE_DROPDOWN)),v()(h()(e),"options",[]),v()(h()(e),"selectedIndex",-1),v()(h()(e),"opened",!1),v()(h()(e),"overlay",void 0),v()(h()(e),"overlayModal",void 0),v()(h()(e),"caption",void 0),v()(h()(e),"expander",void 0),v()(h()(e),"bodyMouseDownEventListener",void 0),v()(h()(e),"userFilter",null),v()(h()(e),"selectedIndexBeforeOpen",-1),e.caption=document.createElement("input"),e.caption.setAttribute("type","text"),e.caption.setAttribute("autocomplete","none"),e.expander=document.createElement("button"),e.rootNode.appendChild(e.caption),e.rootNode.appendChild(e.expander),e.overlay=document.createElement("div"),e.overlay.setAttribute("data-role","dropdown-overlay"),e.overlayModal=document.createElement("div"),e.overlayModal.className="ui-modal",e.overlayModal.setAttribute("data-transparent","1"),e.init(),e}return f()(t,e),l()(t,[{key:"getSelectedIndex",value:function(){return this.selectedIndex}},{key:"add",value:function(e,t){if(!e)throw new Error("Invalid argument: option: IUIOption expected!");var i=A()(e,HTMLOptionElement)?Ge.createFromHTMLOptionElement(this,e):e;if(void 0===t)this.options.push(i);else{if(t<0||t>this.options.length)throw new Error("Invalid argument: index: int >= 0 <= ".concat(this.options.length," expected"));this.options.splice(t,0,i)}this.isOpened()?(this.userFilter=null,this.refreshOptions(),this.setSelectedIndex(-1)):-1===this.selectedIndex&&this.setSelectedIndex(0)}},{key:"remove",value:function(e){if(null===e||e<0||e>=this.options.length)throw new Error("Invalid argument index: int >= 0 < ".concat(this.options.length," expected!"));this.options.splice(e,1),this.isOpened()?(this.userFilter=null,this.refreshOptions(),this.selectedIndex=void 0,this.setSelectedIndex(Math.max(-1,this.options.length?0:-1))):(this.selectedIndex=void 0,this.setSelectedIndex(Math.max(-1,this.options.length?0:-1)))}},{key:"getValue",value:function(){return-1===this.selectedIndex?null:this.options[this.selectedIndex].value}},{key:"setValue",value:function(e){for(var t=-1,i=0,n=this.options.length;i<n;i++)if(e===this.options[i].value){t=i;break}this.setSelectedIndex(t)}},{key:"setSelectedIndex",value:function(e){if((e=~~e)<-1&&(e=-1),e>=this.options.length&&(e=this.options.length-1),this.options[e]&&!this.options[e].hasAttribute("disabled")||(e=-1),e!==this.selectedIndex){if(this.selectedIndex=this.selectedIndexBeforeOpen=e,this.userFilter=null,this.caption.value=String(-1===this.selectedIndex?"":this.options[this.selectedIndex].text),this.options[this.selectedIndex])if(this.selectedIndex||this.options[this.selectedIndex].value||!this.caption.hasAttribute("placeholder")){if(this.options[this.selectedIndex].hasAttribute("data-i18n-text")&&lt.getI18n()){var t=this.options[this.selectedIndex].getAttribute("data-i18n-text"),i=lt.getI18n().translateText(t);i&&i!==t&&(this.caption.value=i)}}else this.caption.value="";this.updateSelectedIndexInOverlay(),this.trigger("change"),lt.getJQuery()(this.rootNode).trigger("change")}}},{key:"isOpened",value:function(){return this.opened}},{key:"refreshOptions",value:function(){var e;this.overlay.innerHTML="";for(var t=0,i=this.options.length;t<i;t++)(e=document.createElement("div")).setAttribute("data-index",String(t)),e.textContent=this.options[t].text,this.options[t].hasAttribute("disabled")&&e.setAttribute("data-is-disabled","true"),this.options[t].hasAttribute("data-i18n-text")&&e.setAttribute("data-i18n-text",this.options[t].getAttribute("data-i18n-text")),this.options[t].hasAttribute("data-i18n-placeholder")&&e.setAttribute("data-i18n-placeholder",this.options[t].getAttribute("data-i18n-placeholder")),this.overlay.appendChild(e);lt.getI18n()&&lt.getI18n().translateDOMNode(this.overlay),document.body.appendChild(this.overlayModal)}},{key:"setOpened",value:function(e){if((e=!!e)!==this.opened){switch(this.opened=e,this.opened&&(this.selectedIndexBeforeOpen=this.selectedIndex),this.areAllOptionsHiddenByUserFilter()&&(this.userFilter=null,this.removeHiddenAttributeFromAllDOMOptions(),this.overlay.removeAttribute("empty"),this.setSelectedIndex(this.opened?this.selectedIndex:this.selectedIndexBeforeOpen)),this.opened){case!0:this.rootNode.setAttribute("data-is-opened","1");var t=yt.getComputedStyle(this.caption);t&&"rtl"===t.direction?this.overlay.style.direction="rtl":this.overlay.style.direction="",this.caption.value="",lt.getI18n()&&lt.getI18n().translateDOMNode(this.overlay);break;case!1:if(this.rootNode.removeAttribute("data-is-opened"),this.caption.value=-1===this.selectedIndex?"":this.options[this.selectedIndex].text,this.options[this.selectedIndex])if(this.selectedIndex||this.options[this.selectedIndex].value||!this.caption.hasAttribute("placeholder")){if(this.options[this.selectedIndex].hasAttribute("data-i18n-text")&&lt.getI18n()){var i=this.options[this.selectedIndex].getAttribute("data-i18n-text"),n=lt.getI18n().translateText(i);n&&n!==i&&(this.caption.value=n)}}else this.caption.value=""}if(!this.opened)return this.overlay.parentNode.removeChild(this.overlay),this.overlayModal.parentNode.removeChild(this.overlayModal),this.overlay.innerHTML="",void document.body.removeEventListener("mousedown",this.bodyMouseDownEventListener,!0);this.refreshOptions(),document.body.appendChild(this.overlay),this.reanchorOverlayElement(),document.body.addEventListener("mousedown",this.bodyMouseDownEventListener,!0),this.updateSelectedIndexInOverlay()}}},{key:"reanchorOverlayElement",value:function(){var e=this.rootNode.getBoundingClientRect();this.overlay.style.width="".concat(e.width,"px");var t=this.overlay.getBoundingClientRect(),i=Ke.getAnchorPosition(e,t,0,["center-bottom","center-top"]);this.overlay.style.left="".concat(i.left,"px"),this.overlay.style.top="".concat(i.top,"px")}},{key:"updateSelectedIndexInOverlay",value:function(){if(this.opened)for(var e=0,i=this.overlay.childNodes,n=i.length;e<n;e++)e===this.selectedIndex?(i[e].setAttribute("selected","selected"),t.scrollOptionIntoView(i[e])):i[e].removeAttribute("selected")}},{key:"removeHiddenAttributeFromAllDOMOptions",value:function(){for(var e=0,t=this.overlay.childNodes.length;e<t;e++)this.overlay.childNodes[e].removeAttribute("hidden")}},{key:"filterOptionsInOverlay",value:function(){this.isOpened()||this.setOpened(!0);for(var e=!1,i=!1,n=!1,a=!0,r=0,o=this.overlay.childNodes,s=o.length;r<s;r++)this.overlay.childNodes[r]!==this.overlayModal&&(null===this.userFilter||""===this.userFilter?(a=!1,o[r].removeAttribute("hidden"),e?o[r].removeAttribute("selected"):e=i=!0):String(this.options[r].text||"").toLowerCase().indexOf(this.userFilter)>-1?(a=!1,o[r].removeAttribute("hidden"),e?o[r].removeAttribute("selected"):e=i=!0):(o[r].setAttribute("hidden","hidden"),o[r].removeAttribute("selected")),i&&(this.selectedIndex=r,o[r].setAttribute("selected","selected"),n=!0,i=!1,t.scrollOptionIntoView(o[r])),a?this.overlay.setAttribute("empty","empty"):this.overlay.removeAttribute("empty"));n||(this.selectedIndex=-1),this.reanchorOverlayElement()}},{key:"cycleSelectedOption",value:function(e){this.isOpened()||this.setOpened(!0);var t,i=0,n=this.options.length,a=this.overlay.childNodes,r=null;if(0!==n){var o,s;t=-1===this.selectedIndex?-1===e?0:n-1:this.selectedIndex;do{(t+=e)<0?t=n-1:t>=n&&(t=0),i++,this.options[t]&&(o=this.options[t].hasAttribute("disabled"),s=a[t].hasAttribute("hidden"),o||s||(r=t))}while(i<=n&&(o||s));null!==r&&this.setSelectedIndex(r)}}},{key:"areAllOptionsHiddenByUserFilter",value:function(){if(null===this.userFilter||""===this.userFilter)return!1;for(var e=0,t=this.options||[],i=t.length;e<i;e++)if(String(t[e].text||"").toLowerCase().indexOf(this.userFilter)>-1)return!1;return!0}},{key:"init",value:function(){!function(e,t){t.on("update",(function(){t.caption.value=String(-1===t.selectedIndex?"":t.options[t.selectedIndex].text)})),e(t.caption).on("focus",(function(){e(t.rootNode).attr("data-is-focused-child-element","1")})),e(t.caption).on("blur",(function(){e(t.rootNode).removeAttr("data-is-focused-child-element")})),Object.defineProperty(t.rootNode,"selectedIndex",{get:function(){return t.getSelectedIndex()},set:function(e){t.setSelectedIndex(e)}}),Object.defineProperty(t.rootNode,"value",{get:function(){return t.getValue()},set:function(e){t.setValue(String(e||""))}}),Object.defineProperty(t.rootNode,"disabled",{get:function(){return t.isDisabled()},set:function(e){t.setDisabled(!!e)}}),Object.defineProperty(t.rootNode,"readOnly",{get:function(){return t.isReadOnly()},set:function(e){t.setReadOnly(!!e)}}),Object.defineProperty(t.rootNode,"add",{get:function(){return function(){t.add.apply(t,arguments)}}}),Object.defineProperty(t.rootNode,"remove",{get:function(){return function(){t.remove.apply(t,arguments)}}}),Object.defineProperty(t.rootNode,"placeholder",{get:function(){return function(){t.getPlaceholder.apply(t,arguments)}},set:function(e){return function(){t.setPlaceholder.apply(t,arguments)}}}),t.expander.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t.isDisabled()||t.isReadOnly()||void 0!==e.pageX&&void 0!==e.pageY&&0===e.pageX&&0===e.pageY||(t.caption&&t.caption.focus(),t.setOpened(!t.isOpened()))}),!0),e(t.caption).on("click",(function(){t.isDisabled()||t.isReadOnly()||t.setOpened(!0)})),e(t.caption).on("blur",(function(){t.isDisabled()||t.isReadOnly()||t.setOpened(!1)})),e(t.caption).on("keydown",(function(e){if(!t.isDisabled()&&!t.isReadOnly()){var i=null;switch(e.keyCode||e.charCode){case Ye.KEY_DOWN:i=1,e.preventDefault(),e.stopPropagation();break;case Ye.KEY_UP:i=-1,e.preventDefault(),e.stopPropagation();break;case Ye.KEY_ESC:return t.isOpened()&&t.setOpened(!1),e.preventDefault(),void e.stopPropagation();case Ye.KEY_ENTER:if(t.isOpened()){var n=t.getSelectedIndex();t.optionIsDisabled(t.overlay.childNodes[n])||(t.setOpened(!1),t.selectedIndex=void 0,t.setSelectedIndex(n))}else t.setOpened(!0);return e.preventDefault(),void e.stopPropagation();case Ye.KEY_HOME:t.selectedIndex=-1,i=1,t.userFilter=null,e.preventDefault(),e.stopPropagation();break;case Ye.KEY_END:t.selectedIndex=-1,i=-1,t.userFilter=null,e.preventDefault(),e.stopPropagation()}null!==i&&(e.preventDefault(),e.stopPropagation(),t.cycleSelectedOption(i))}})),e(t.overlay).on("click","> div[data-index]",(function(e){t.isDisabled()||t.isReadOnly()||t.optionIsDisabled(this)||t.setOpened(!1)})),e(t.caption).on("input",(function(e){if(!t.isDisabled()&&!t.isReadOnly()){try{if(document.activeElement!==t.caption)return}catch(e){}t.userFilter=this.value.toLowerCase(),t.filterOptionsInOverlay()}})),t.bodyMouseDownEventListener=function(i){if(!t.isDisabled()&&!t.isReadOnly()){var n=i.target||i.srcElement;if(e(n).is("body > [data-role=dropdown-overlay] > div[data-index]")||n===t.caption||n===t.expander){i.preventDefault(),i.stopPropagation();var a=~~e(n).attr("data-index");if(t.options[a]&&t.options[a].hasAttribute("disabled"))return;t.setSelectedIndex(a),t.setOpened(!1)}else e(n).is("body > [data-role=dropdown-overlay]")?(i.preventDefault(),i.stopPropagation()):t.setOpened(!1)}},e(window).on("scroll",(function(){t.isOpened()&&t.setOpened(!1)}))}(lt.getJQuery(),this)}},{key:"setDisabled",value:function(e){E()(_()(t.prototype),"setDisabled",this).call(this,e),this.caption.disabled=this.expander.disabled=this.isDisabled(),this.isDisabled()&&this.isOpened()&&this.setOpened(!1)}},{key:"setReadOnly",value:function(e){E()(_()(t.prototype),"setReadOnly",this).call(this,e),this.caption.readOnly=this.isReadOnly(),this.isReadOnly()&&this.isOpened()&&this.setOpened(!1)}},{key:"getOptions",value:function(){return this.options}},{key:"setPlaceholder",value:function(e){this.caption.placeholder=String(e||"")}},{key:"getPlaceholder",value:function(){return this.caption.placeholder||null}},{key:"setAttribute",value:function(e,i){switch(e){case"data-i18n-placeholder":case"placeholder":this.caption.setAttribute(e,i);break;default:E()(_()(t.prototype),"setAttribute",this).call(this,e,i)}}},{key:"optionIsDisabled",value:function(e){var t=e.getAttribute("data-index");return this.options[t].hasAttribute("disabled")}}],[{key:"scrollOptionIntoView",value:function(e){e.parentNode.scrollTop=e.offsetTop}}]),t}(k),qe=function(e){function t(){var e;return o()(this,t),e=d()(this,_()(t).call(this,lt.ELEMENT_TYPE_DROPDOWN)),v()(h()(e),"nativeDropDown",void 0),v()(h()(e),"selectedOption",void 0),v()(h()(e),"updateSelectedOptionThrottled",void 0),v()(h()(e),"initSelectedIndex",null),e.nativeDropDown=document.createElement("select"),e.rootNode.appendChild(e.nativeDropDown),e.selectedOption=document.createElement("div"),e.selectedOption.setAttribute("data-role","dropdown-skin"),e.rootNode.appendChild(e.selectedOption),e.updateSelectedOptionThrottled=T.a.create((function(){e.updateSelectedOption()}),0),e.rootNode.removeAttribute("tabindex"),e.init(),e}return f()(t,e),l()(t,[{key:"getValue",value:function(){return this.nativeDropDown.value}},{key:"setValue",value:function(e){var t=this.nativeDropDown.selectedIndex;this.nativeDropDown.value=e,this.updateSelectedOptionThrottled(),t!==this.nativeDropDown.selectedIndex&&lt.getJQuery()(this.rootNode).trigger("change")}},{key:"getSelectedIndex",value:function(){return this.nativeDropDown.selectedIndex}},{key:"setSelectedIndex",value:function(e){this.nativeDropDown.selectedIndex=e,this.updateSelectedOptionThrottled()}},{key:"add",value:function(e,t){if(!e)throw new Error("Invalid argument: option: IUIOption|HTMLOptionElement expected!");var i=A()(e,HTMLOptionElement)?e:e.convertToHTMLOptionElement();i!==e&&(i.text=e.text,i.value=e.value),this.nativeDropDown.add(i,t),i.hasAttribute("selected")&&(this.initSelectedIndex=void 0===t?this.nativeDropDown.options.length-1:t),this.updateSelectedOptionThrottled()}},{key:"getOptions",value:function(){return this.nativeDropDown.options}},{key:"remove",value:function(e){this.nativeDropDown.remove(e),this.updateSelectedOptionThrottled()}},{key:"updateSelectedOption",value:function(){if(null!==this.initSelectedIndex&&(this.nativeDropDown.selectedIndex=this.initSelectedIndex,this.initSelectedIndex=null),-1!==this.nativeDropDown.selectedIndex){var e=this.nativeDropDown.options[this.nativeDropDown.selectedIndex];this.selectedOption.textContent=e.text}else this.selectedOption.textContent=""}},{key:"init",value:function(){!function(e,t){t.on("update",(function(){t.updateSelectedOption()})),e(t.nativeDropDown).on("change",(function(i){t.updateSelectedOptionThrottled(),e(t.rootNode).trigger("change"),i.stopPropagation()})),e(t.nativeDropDown).on("focus",(function(){e(t.rootNode).attr("data-is-focused-child-element","1")})).on("blur",(function(){e(t.rootNode).removeAttr("data-is-focused-child-element")})),Object.defineProperty(t.rootNode,"selectedIndex",{get:function(){return t.getSelectedIndex()},set:function(e){t.setSelectedIndex(e)}}),Object.defineProperty(t.rootNode,"value",{get:function(){return t.getValue()},set:function(e){t.setValue(String(e||""))}}),Object.defineProperty(t.rootNode,"disabled",{get:function(){return t.isDisabled()},set:function(e){t.setDisabled(!!e)}}),Object.defineProperty(t.rootNode,"readOnly",{get:function(){return t.isReadOnly()},set:function(e){t.setReadOnly(!!e)}}),Object.defineProperty(t.rootNode,"add",{get:function(){return function(){t.add.apply(t,arguments)}}}),Object.defineProperty(t.rootNode,"remove",{get:function(){return function(){t.remove.apply(t,arguments)}}}),Object.defineProperty(t.rootNode,"options",{get:function(){return t.getOptions()}})}(lt.getJQuery(),this)}},{key:"setDisabled",value:function(e){E()(_()(t.prototype),"setDisabled",this).call(this,e),this.nativeDropDown.disabled=this.isDisabled()}},{key:"setReadOnly",value:function(e){E()(_()(t.prototype),"setReadOnly",this).call(this,e),this.nativeDropDown.readOnly=this.isReadOnly()}},{key:"setAttribute",value:function(e,i){switch(e){case"json-options":try{for(var n=JSON.parse(i);this.getOptions().length;)this.remove(0);if(!n||!n.length)return;for(var a=0,r=n.length;a<r;a++){var o=Ge.create(this,String(n[a].id||""),String(n[a].name||n[a].id||""));this.add(o)}}catch(l){console.warn('Failed to set UIDropdown attribute "json-options": ',l)}break;case"json-value":try{var s=JSON.parse(i||"");this.setValue(s)}catch(l){console.warn('Failed to set UIDropdown attribute "json-value": ',l)}break;default:E()(_()(t.prototype),"setAttribute",this).call(this,e,i)}}}],[{key:"upgradeDropdown",value:function(e){for(var i,n=new t,a=0,r=e.options.length;a<r;a++)i=Ge.create(n,e.options[a].value,e.options[a].text),n.add(i);return n.setValue(e.value),e.parentNode&&(e.parentNode.insertBefore(n.getRootNode(),e),e.parentNode.removeChild(e)),n}}]),t}(k),Xe=function(e){function t(){var e;return o()(this,t),e=d()(this,_()(t).call(this,"color")),v()(h()(e),"value",[0,0,0,1]),v()(h()(e),"rollbackColor",[0,0,0,1]),v()(h()(e),"expanded",!1),v()(h()(e),"colorDiv",void 0),t.initializeOverlay(),e.colorDiv=document.createElement("div"),e.rootNode.appendChild(e.colorDiv),e.updateInputColor(),e.init(),e}return f()(t,e),l()(t,[{key:"getValue",value:function(){return se.RGBToString(this.value)}},{key:"getRGB",value:function(){return this.value}},{key:"getHSL",value:function(){return se.RGBtoHSV(this.value)}},{key:"updateInputColor",value:function(){this.colorDiv.style.backgroundColor=se.RGBToString(this.value)}},{key:"setValue",value:function(e){var i=se.stringToRGB(e);null===i&&(i=[0,0,0,1]),se.areEqualRGBColors(this.value,i)||(this.value=i,this.updateInputColor(),this.expanded&&t.expandedInstance===this&&(t.overlayColor=se.RGBtoHSV(this.value),t.repaint()))}},{key:"rollback",value:function(){this.setValue(se.RGBToString(this.rollbackColor))}},{key:"reanchorOverlayElement",value:function(){var e=t.overlay.getBoundingClientRect(),i=this.rootNode.parentElement.getBoundingClientRect(),n=document.documentElement.clientHeight||window.innerHeight;t.overlay.style.left="".concat((i.width-e.width)/2+i.left,"px"),t.overlay.style.top=t.overlay.style.top="".concat(i.top+i.height,"px"),e.height>n-i.top&&(t.overlay.style.top="".concat(i.top-e.height,"px"))}},{key:"setExpanded",value:function(e){(e=!!e)!==this.expanded&&(e&&null!==t.expandedInstance&&t.expandedInstance.setExpanded(!1),e?(this.rollbackColor[0]=this.value[0],this.rollbackColor[1]=this.value[1],this.rollbackColor[2]=this.value[2],this.rollbackColor[3]=this.value[3],t.expandedInstance&&t.expandedInstance!==this&&t.expandedInstance.setExpanded(!1),t.expandedInstance=this,t.overlayColor=se.RGBtoHSV(this.value),document.body.appendChild(t.overlay),this.reanchorOverlayElement(),this.expanded&&t.expandedInstance===this&&(t.overlayColor=se.RGBtoHSV(this.value),t.repaint()),t.repaint()):(t.expandedInstance&&t.expandedInstance===this&&(t.expandedInstance=null),t.overlay.parentNode&&t.overlay.parentNode.removeChild(t.overlay)),this.expanded=e)}},{key:"isExpanded",value:function(){return this.expanded}},{key:"setChangeCallback",value:function(e){t.changeCallback=e}},{key:"init",value:function(){!function(e,i){i(e.rootNode).on("click",(function(){e.isDisabled()||e.isReadOnly()||(e.setExpanded(!0),t.tryFocusColorTextInput())})),Object.defineProperty(e.getRootNode(),"value",{get:function(){return e.getValue()},set:function(t){e.setValue(t)}}),Object.defineProperty(e.getRootNode(),"disabled",{get:function(){return e.isDisabled()},set:function(t){e.setDisabled(!!t)}}),Object.defineProperty(e.getRootNode(),"readOnly",{get:function(){return e.isReadOnly()},set:function(t){e.setReadOnly(!!t)}})}(this,lt.getJQuery())}}],[{key:"paintHueOverlay",value:function(){for(var e,t=1/this.OVERLAY_WIDTH,i=this.hueCanvas.getContext("2d"),n=0;n<this.OVERLAY_WIDTH;n++)e=n*t,i.fillStyle=se.HSVToString([e,.5,.66,1]),i.fillRect(n,0,1,this.HORIZONTAL_SLIDER_HEIGHT);if(this.sliderSpriteLoaded){var a=~~(this.overlayColor[0]*this.OVERLAY_WIDTH);i.drawImage(this.sliderSprite,a+this.sliderSpritePaintTranslateX,this.sliderSpritePaintTranslateY)}}},{key:"paintSaturationOverlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=1/this.OVERLAY_WIDTH,a=1/this.COLOR_CANVAS_HEIGHT,r=this.saturationCanvas.getContext("2d");if(t&&this.saturationCanvasCacheReady)r.drawImage(this.saturationCanvasCache,0,0);else{for(var o=0;o<this.OVERLAY_WIDTH;o++)for(var s=0;s<this.COLOR_CANVAS_HEIGHT;s++)r.fillStyle=se.RGBToString(se.HSVtoRGB([e,1-s*a,o*n,1]),!1),r.fillRect(o,s,1,1);i&&(this.saturationCanvasCacheReady=!1,this.saturationCanvasCache.src=this.saturationCanvas.toDataURL("image/png"))}if(this.crossSpriteLoaded){var l={top:~~(this.COLOR_CANVAS_HEIGHT*(1-this.overlayColor[1])),left:~~(this.OVERLAY_WIDTH*this.overlayColor[2])};r.drawImage(this.crossSprite,l.left+this.crossSpritePaintTranslateX,l.top+this.crossSpritePaintTranslateY)}}},{key:"paintLightOverlay",value:function(e,t){for(var i=1/this.OVERLAY_WIDTH,n=this.lightCanvas.getContext("2d"),a=0;a<this.OVERLAY_WIDTH;a++)n.fillStyle=se.HSVToString([e,t,a*i,1]),n.fillRect(a,0,1,this.HORIZONTAL_SLIDER_HEIGHT);if(this.sliderSpriteLoaded){var r=~~(this.overlayColor[2]*this.OVERLAY_WIDTH);n.drawImage(this.sliderSprite,r+this.sliderSpritePaintTranslateX,this.sliderSpritePaintTranslateY)}}},{key:"paintAlphaOverlay",value:function(e,t,i){var n=1/this.OVERLAY_WIDTH,a=this.alphaCanvas.getContext("2d"),r=[e,t,i,1];if(a.fillStyle="white",a.fillRect(0,0,this.OVERLAY_WIDTH,this.HORIZONTAL_SLIDER_HEIGHT),this.patternLoaded){var o=a.createPattern(this.transparencyPattern,"repeat");a.rect(0,0,this.OVERLAY_WIDTH,this.HORIZONTAL_SLIDER_HEIGHT),a.fillStyle=o,a.fill()}else a.fillStyle="#ffffff",a.fillRect(0,0,this.OVERLAY_WIDTH,this.HORIZONTAL_SLIDER_HEIGHT);for(var s=0;s<this.OVERLAY_WIDTH;s++)r[3]=s*n,a.fillStyle=se.HSVToString(r),a.fillRect(s,0,1,this.HORIZONTAL_SLIDER_HEIGHT);if(this.sliderSpriteLoaded){var l=~~(this.overlayColor[3]*this.OVERLAY_WIDTH);a.drawImage(this.sliderSprite,l+this.sliderSpritePaintTranslateX,this.sliderSpritePaintTranslateY)}}},{key:"updateColorText",value:function(){if(this.setOpaque.style.backgroundColor=se.HSVToString(se.removeAlpha(this.overlayColor)),this.updateColorModel)switch(this.colorModel){case O.f.RGBA:this.colorTextInput.value=se.RGBToString(se.HSVtoRGB(this.overlayColor));break;case O.f.HSLA:this.colorTextInput.value=se.HSVToString(this.overlayColor);break;default:console.warn("Don't know how to update the color text")}}},{key:"forcePointInClientRect",value:function(e,t){return e.left<0&&(e.left=0),e.left>=t.width&&(e.left=t.width-1),e.top<0&&(e.top=0),e.top>=t.height&&(e.top=t.height-1),e}},{key:"initializeOverlay",value:function(){var e;this.initialized||(this.overlay=document.createElement("div"),this.overlay.setAttribute("data-role","color-overlay"),this.overlayModal=document.createElement("div"),this.overlayModal.className="ui-modal",this.overlayModal.setAttribute("data-transparent","1"),this.overlay.appendChild(this.overlayModal),this.hueCanvas=document.createElement("canvas"),this.hueCanvas.setAttribute("data-role","hue"),this.saturationCanvas=document.createElement("canvas"),this.saturationCanvas.setAttribute("data-role","saturation"),this.lightCanvas=document.createElement("canvas"),this.lightCanvas.setAttribute("data-role","light"),this.alphaCanvas=document.createElement("canvas"),this.alphaCanvas.setAttribute("data-role","transparency"),this.transparencyPattern=document.createElement("img"),this.sliderSprite=document.createElement("img"),this.crossSprite=document.createElement("img"),this.colorTextInput=document.createElement("input"),this.colorTextInput.setAttribute("type","text"),this.colorTextInput.setAttribute("data-role","color-text"),this.colorTextInput.setAttribute("placeholder","Type a color..."),this.setTransparent=document.createElement("button"),this.setTransparent.setAttribute("data-role","set-transparent"),this.setOpaque=document.createElement("button"),this.setOpaque.title="Set opaque color",this.setOpaque.setAttribute("data-role","set-opaque"),this.setTransparent.title="Set full transparent",this.saturationCanvasCache=document.createElement("img"),(e=this).saveColorToTargetInputThrottle=T.a.create((function(){if(e.setColorToTargetInput(),null!==e.changeCallback)try{e.changeCallback()}catch(t){console.error(t)}}),50),e.transparencyPattern.addEventListener("load",(function(){e.patternLoaded=!0})),e.sliderSprite.addEventListener("load",(function(){e.sliderSpriteLoaded=!0})),e.crossSprite.addEventListener("load",(function(){e.crossSpriteLoaded=!0})),e.saturationCanvasCache.addEventListener("load",(function(){e.saturationCanvasCacheReady=!0})),this.transparencyPattern.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAAAAACo4kLRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QkbEgM2YPFhLAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAAP0lEQVQY02P8zwADp+EsJgZkwMjA8P8fAwMLiuB/BgZGRnSVWLXTW5AF4Q9TZJX//jMwMKKqhJjwfxA5HqsgAFYwCPaivXxiAAAAAElFTkSuQmCC",this.sliderSprite.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHVSURBVCiRldIxaBNxFAbw995d+//uSlxKS4TiUBM4sSLdwoGrDhZBQoPQDLbQQoe0FEqLW3DpKlQ7qDWSzbTqUFRcnZNARRKwKW6CTjWDd/euSZ1SurS13/SG78d7w2M6kXfl8jBcd6HfmLsukDYAAfjuGPPBdd31ZCr1u9fl3lDa2Jg0xmw6wIEBXjuOUwfQRX//GICHAJJ9tj0z4nnbx/DJ2tqkA7wB8NIZHFzM5XLByUuq1WpfQuQxgFVLJDfiedtcXF4eHkgkWgb4VFhZecDMR3RK9nZ3n8GYvG1ZKekSLaiqCYJg6SxERERB8EhVu51OpyBRFE2o6pfVYvHnmYiI0plMW1U/xoeHE6Kqo6q6fx7qJVZtaRSlbFUlEXH/F4ZRNMAiR7aq7ouIf4GNvmVZLYmiaEdVry7Ozt47D33e2vI1jjMaRTsSMK+rajtWfb40Pz96GqqUSskwjsuq2g7D8KnVaDT+jqXTeyQyzURTt3z/143x8UatVusSEVUqFeu2798n5rfCfIWJpu5ks/Xjl8tns1kHeAXgEoADB/hmgC6AazBmCMAfA0zn5+beExFZPfi12Wze9LxNJgpZZIiZrzPRZWH+QcwvbOb8TKFQ7/X/AQl6styfo0m+AAAAAElFTkSuQmCC",this.crossSprite.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHVSURBVCiRldIxaBNxFAbw995d+//uSlxKS4TiUBM4sSLdwoGrDhZBQoPQDLbQQoe0FEqLW3DpKlQ7qDWSzbTqUFRcnZNARRKwKW6CTjWDd/euSZ1SurS13/SG78d7w2M6kXfl8jBcd6HfmLsukDYAAfjuGPPBdd31ZCr1u9fl3lDa2Jg0xmw6wIEBXjuOUwfQRX//GICHAJJ9tj0z4nnbx/DJ2tqkA7wB8NIZHFzM5XLByUuq1WpfQuQxgFVLJDfiedtcXF4eHkgkWgb4VFhZecDMR3RK9nZ3n8GYvG1ZKekSLaiqCYJg6SxERERB8EhVu51OpyBRFE2o6pfVYvHnmYiI0plMW1U/xoeHE6Kqo6q6fx7qJVZtaRSlbFUlEXH/F4ZRNMAiR7aq7ouIf4GNvmVZLYmiaEdVry7Ozt47D33e2vI1jjMaRTsSMK+rajtWfb40Pz96GqqUSskwjsuq2g7D8KnVaDT+jqXTeyQyzURTt3z/143x8UatVusSEVUqFeu2798n5rfCfIWJpu5ks/Xjl8tns1kHeAXgEoADB/hmgC6AazBmCMAfA0zn5+beExFZPfi12Wze9LxNJgpZZIiZrzPRZWH+QcwvbOb8TKFQ7/X/AQl6styfo0m+AAAAAElFTkSuQmCC",this.overlay.appendChild(this.hueCanvas),this.overlay.appendChild(this.saturationCanvas),this.overlay.appendChild(this.lightCanvas),this.overlay.appendChild(this.alphaCanvas),this.overlay.appendChild(this.colorTextInput),this.overlay.appendChild(this.setTransparent),this.overlay.appendChild(this.setOpaque),this.hueCanvas.width=t.lightCanvas.width=t.saturationCanvas.width=t.alphaCanvas.width=this.OVERLAY_WIDTH,this.hueCanvas.height=t.lightCanvas.height=t.alphaCanvas.height=this.HORIZONTAL_SLIDER_HEIGHT,this.saturationCanvas.height=this.COLOR_CANVAS_HEIGHT,this.paintHueOverlay(),this.updateColorText(),function(e,t){var i=O.g.NONE;t(document.body).on("mousedown",(function(a){if(1===a.which){var r=a.target||a.srcElement;if(e.expandedInstance){if((!t.contains(e.overlay,r)||r===e.overlayModal)&&!t.contains(e.expandedInstance.getRootNode(),r)&&r!==e.expandedInstance.getRootNode()&&r!==e.overlay)return void e.expandedInstance.setExpanded(!1);switch(r){case e.hueCanvas:i=O.g.HUE,e.hueCanvas.getBoundingClientRect(),n(a);break;case e.saturationCanvas:i=O.g.SATURATION,e.saturationCanvas.getBoundingClientRect(),n(a);break;case e.lightCanvas:i=O.g.LIGHT,e.lightCanvas.getBoundingClientRect(),n(a);break;case e.alphaCanvas:i=O.g.ALPHA,e.alphaCanvas.getBoundingClientRect(),n(a);break;default:i=O.g.NONE,null}}}})),t(document.body).on("mouseup",(function(e){i=O.g.NONE,null}));var n=function(t){if(i!==O.g.NONE){var n=null,a=null;switch(i){case O.g.HUE:a=e.hueCanvas.getBoundingClientRect(),n=e.forcePointInClientRect({left:t.clientX-a.left,top:t.clientY-a.top},a),e.setHueByPixels(n),t.preventDefault(),t.stopPropagation();break;case O.g.SATURATION:a=e.saturationCanvas.getBoundingClientRect(),n=e.forcePointInClientRect({left:t.clientX-a.left,top:t.clientY-a.top},a),e.setSaturationByPixels(n),t.preventDefault(),t.stopPropagation();break;case O.g.LIGHT:a=e.lightCanvas.getBoundingClientRect(),n=e.forcePointInClientRect({left:t.clientX-a.left,top:t.clientY-a.top},a),e.setLightByPixels(n),t.preventDefault(),t.stopPropagation();break;case O.g.ALPHA:a=e.alphaCanvas.getBoundingClientRect(),n=e.forcePointInClientRect({left:t.clientX-a.left,top:t.clientY-a.top},a),e.setAlphaByPixels(n),t.preventDefault(),t.stopPropagation()}}};document.body.addEventListener("mousemove",n,!0),t(e.overlay).on("click","button[data-role]",(function(i){var n=t(this).attr("data-role");e.execButtonCommand(n)})),t(e.colorTextInput).on("input",(function(t){var i=se.stringToRGB(this.value);null!==i&&(e.updateColorModel=!1,e.overlayColor=se.RGBtoHSV(i),e.repaint(),e.updateColorModel=!0,e.saveColorToTargetInputThrottle())})).on("keyup",(function(t){switch(t.keyCode||t.charCode){case 13:e.expandedInstance&&(setTimeout(e.expandedInstance.getRootNode().focus,1),e.expandedInstance.setExpanded(!1));break;case 27:e.expandedInstance&&(e.expandedInstance.rollback(),setTimeout(function(e){return e.getRootNode().focus}(e.expandedInstance),1),e.expandedInstance.setExpanded(!1))}}))}(this,lt.getJQuery()),this.initialized=!0)}},{key:"setHueByPixels",value:function(e){var i=e.left*(1/this.OVERLAY_WIDTH);this.overlayColor[0]=i,this.paintHueOverlay(),this.paintSaturationOverlay(this.overlayColor[0],!1,!0),this.paintLightOverlay(this.overlayColor[0],this.overlayColor[1]),this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),t.tryFocusColorTextInput()}},{key:"setSaturationByPixels",value:function(e){var i=e.left*(1/this.OVERLAY_WIDTH),n=1-e.top*(1/this.COLOR_CANVAS_HEIGHT);this.overlayColor[2]=i,this.overlayColor[1]=n,this.paintSaturationOverlay(this.overlayColor[0],!0),this.paintLightOverlay(this.overlayColor[0],this.overlayColor[1]),this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),t.tryFocusColorTextInput()}},{key:"setLightByPixels",value:function(e){var i=e.left*(1/this.OVERLAY_WIDTH);this.overlayColor[2]=i,this.paintLightOverlay(this.overlayColor[0],this.overlayColor[1]),this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),t.tryFocusColorTextInput()}},{key:"setAlphaByPixels",value:function(e){var i=e.left*(1/this.OVERLAY_WIDTH);this.overlayColor[3]=i,this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),t.tryFocusColorTextInput()}},{key:"repaint",value:function(){this.paintHueOverlay(),this.paintSaturationOverlay(this.overlayColor[0],!1,!0),this.paintLightOverlay(this.overlayColor[0],this.overlayColor[1]),this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),t.tryFocusColorTextInput()}},{key:"execButtonCommand",value:function(e){switch(e){case"set-transparent":this.overlayColor[3]=0,this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),t.tryFocusColorTextInput();break;case"set-opaque":this.overlayColor[3]=1,this.paintAlphaOverlay(this.overlayColor[0],this.overlayColor[1],this.overlayColor[2]),this.updateColorText(),this.saveColorToTargetInputThrottle(),t.tryFocusColorTextInput();break;default:console.warn("UIColorPicker.execButtonCommand: command ".concat(JSON.stringify(e)," is not implemented or unknown"))}}},{key:"setColorToTargetInput",value:function(){null!==this.expandedInstance&&(this.expandedInstance.value=se.HSVtoRGB(this.overlayColor),this.expandedInstance.updateInputColor(),lt.getJQuery()(this.expandedInstance.getRootNode()).trigger("change"))}},{key:"tryFocusColorTextInput",value:function(){ie.isMobile()||t.colorTextInput.focus()}}]),t}(k);v()(Xe,"HORIZONTAL_SLIDER_HEIGHT",20),v()(Xe,"OVERLAY_WIDTH",220),v()(Xe,"COLOR_CANVAS_HEIGHT",160),v()(Xe,"initialized",!1),v()(Xe,"overlay",void 0),v()(Xe,"overlayModal",void 0),v()(Xe,"hueCanvas",void 0),v()(Xe,"saturationCanvas",void 0),v()(Xe,"lightCanvas",void 0),v()(Xe,"alphaCanvas",void 0),v()(Xe,"expandedInstance",null),v()(Xe,"transparencyPattern",void 0),v()(Xe,"patternLoaded",!1),v()(Xe,"sliderSprite",void 0),v()(Xe,"sliderSpriteLoaded",!1),v()(Xe,"sliderSpritePaintTranslateX",-5),v()(Xe,"sliderSpritePaintTranslateY",3),v()(Xe,"crossSprite",void 0),v()(Xe,"crossSpriteLoaded",!1),v()(Xe,"crossSpritePaintTranslateX",-6),v()(Xe,"crossSpritePaintTranslateY",-7),v()(Xe,"colorTextInput",void 0),v()(Xe,"colorModel",O.f.RGBA),v()(Xe,"setTransparent",void 0),v()(Xe,"setOpaque",void 0),v()(Xe,"updateColorModel",!0),v()(Xe,"overlayColor",[0,0,0,1]),v()(Xe,"saturationCanvasCache",void 0),v()(Xe,"saturationCanvasCacheReady",!1),v()(Xe,"saveColorToTargetInputThrottle",void 0),v()(Xe,"changeCallback",null);var Qe=i(32),$e=function(){function e(t,i){switch(o()(this,e),v()(this,"min",void 0),v()(this,"max",void 0),v()(this,"padLength",void 0),v()(this,"role",void 0),v()(this,"input",void 0),v()(this,"root",void 0),v()(this,"disabled",void 0),v()(this,"readOnly",void 0),v()(this,"value",void 0),this.role=t,this.input=i,this.root=document.createElement("div"),this.root.setAttribute("data-role","date-part"),this.root.setAttribute("data-part",this.getDatePartRoleName(t)),this.root.setAttribute("aria-labelledby","date-".concat(this.input.getHash(),"-").concat(this.getDatePartRoleName(t))),this.disabled=!1,this.readOnly=!1,t){case O.h.DAY:this.min=1,this.max=31,this.padLength=2;break;case O.h.MONTH:this.min=1,this.max=12,this.padLength=2;break;case O.h.YEAR:this.min=0,this.max=9999,this.padLength=4;break;case O.h.HOUR_24:this.min=0,this.max=23,this.padLength=2;break;case O.h.HOUR_12:this.min=0,this.max=12,this.padLength=2;break;case O.h.MINUTE:case O.h.SECOND:this.min=0,this.max=59,this.padLength=2;break;case O.h.MILLISECOND:this.min=0,this.max=999,this.padLength=3;break;case O.h.AM_PM:this.min=0,this.max=1,this.padLength=1}}return l()(e,[{key:"withDisabled",value:function(e){return this.disabled=!!e,this.disabled?this.root.setAttribute("disabled",""):this.root.removeAttribute("disabled"),this}},{key:"isDisabled",value:function(){return this.disabled}},{key:"withReadOnly",value:function(e){return this.readOnly=!!e,this.readOnly?this.root.setAttribute("readonly",""):this.root.removeAttribute("readonly"),this}},{key:"extractDatePartFrom",value:function(e){if(null===e)this.value=null;else switch(this.role){case O.h.DAY:this.value=e.getDate();break;case O.h.MONTH:this.value=e.getMonth()+1;break;case O.h.YEAR:this.value=e.getFullYear();break;case O.h.HOUR_24:this.value=e.getHours();break;case O.h.HOUR_12:this.value=e.getHours()>12?e.getHours()-12:e.getHours();break;case O.h.MINUTE:this.value=e.getMinutes();break;case O.h.SECOND:this.value=e.getSeconds();break;case O.h.MILLISECOND:this.value=e.getMilliseconds();break;case O.h.AM_PM:this.value=e.getHours()>=12?1:0}return this.render(),this}},{key:"render",value:function(){if(null===this.value){this.root.setAttribute("data-is-null","");var e=this.getPlaceholder();this.root.textContent=e.text,e.intlKey&&this.root.setAttribute("data-i18n-text",e.intlKey)}else if(this.root.removeAttribute("data-is-null"),this.root.removeAttribute("data-i18n-text"),this.role===O.h.AM_PM)this.root.textContent=0===this.value?"AM":"PM";else{for(var t=String(this.value);t.length<this.padLength;)t="0".concat(t);this.root.textContent=t}}},{key:"getPlaceholder",value:function(){var e,t;switch(this.role){case O.h.DAY:e="dd",t="textdef_63";break;case O.h.MONTH:e="mm",t="textdef_62";break;case O.h.YEAR:e="yyyy",t="textdef_64";break;case O.h.HOUR_24:case O.h.HOUR_12:e="hh",t="textdef_65";break;case O.h.MINUTE:e="mm",t="textdef_66";break;case O.h.SECOND:e="ss";break;case O.h.MILLISECOND:e="ms";break;case O.h.AM_PM:e="AM"}return t?{text:lt.getI18n()?lt.getI18n().translateText(t):e,intlKey:t}:{text:e,intlKey:""}}},{key:"getDatePartRoleName",value:function(e){switch(e){case O.h.DAY:return"day";case O.h.MONTH:return"month";case O.h.YEAR:return"year";case O.h.HOUR_24:return"hour-24";case O.h.HOUR_12:return"hour-12";case O.h.MINUTE:return"minute";case O.h.SECOND:return"second";case O.h.MILLISECOND:return"millisecond";case O.h.AM_PM:return"am-pm";default:return"invalid"}}},{key:"addDigit",value:function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===e)t=null;else if(null===this.value?t=e:(t=10*this.value+e)>this.max&&(t=e),String(t).length>this.padLength&&(t=~~String(t).substr(1)),t<this.min||t>this.max)return;this.value=t,this.input.rebuildDateFromParts(),this.input.trigger("date-part-changed"),this.render()}},{key:"incDec",value:function(e){var t=this.value;null===t?t=1===e?this.min:this.max:(t+=e)>this.max?t=this.min:t<this.min&&(t=this.max),this.value=t,this.input.rebuildDateFromParts(),this.input.trigger("date-part-changed"),this.render()}},{key:"handleKeyEvent",value:function(e){if(!this.disabled&&!this.readOnly){var t=0|(e.keyCode||e.charCode),i=this.input.getDateValue(),n=!1;switch(0|t){case 37:this.input.focusPreviousDatePartGroup(),e.preventDefault(),e.stopPropagation();break;case 38:this.incDec(1),n=!0,e.preventDefault(),e.stopPropagation();break;case 39:this.input.focusNextDatePartGroup(),e.preventDefault(),e.stopPropagation();break;case 40:this.incDec(-1),n=!0,e.preventDefault(),e.stopPropagation();break;case 8:case 46:this.addDigit(null),n=!0,e.preventDefault(),e.stopPropagation();break;case 48:case 96:this.addDigit(0),n=!0,e.preventDefault(),e.stopPropagation();break;case 49:case 97:this.role!==O.h.AM_PM&&(this.addDigit(1),n=!0,e.preventDefault(),e.stopPropagation());break;case 50:case 98:this.role!==O.h.AM_PM&&(this.addDigit(2),n=!0,e.preventDefault(),e.stopPropagation());break;case 51:case 99:this.role!==O.h.AM_PM&&(this.addDigit(3),n=!0,e.preventDefault(),e.stopPropagation());break;case 52:case 100:this.role!==O.h.AM_PM&&(this.addDigit(4),n=!0,e.preventDefault(),e.stopPropagation());break;case 53:case 101:this.role!==O.h.AM_PM&&(this.addDigit(5),n=!0,e.preventDefault(),e.stopPropagation());break;case 54:case 102:this.role!==O.h.AM_PM&&(this.addDigit(6),n=!0,e.preventDefault(),e.stopPropagation());break;case 55:case 103:this.role!==O.h.AM_PM&&(this.addDigit(7),n=!0,e.preventDefault(),e.stopPropagation());break;case 56:case 104:this.role!==O.h.AM_PM&&(this.addDigit(8),n=!0,e.preventDefault(),e.stopPropagation());break;case 57:case 105:this.role!==O.h.AM_PM&&(this.addDigit(9),n=!0,e.preventDefault(),e.stopPropagation());break;case 65:this.role===O.h.AM_PM&&(this.addDigit(0),n=!0,e.preventDefault(),e.stopPropagation());break;case 80:this.role===O.h.AM_PM&&(this.addDigit(1),n=!0,e.preventDefault(),e.stopPropagation());break;case 9:e.shiftKey?this.input.focusPreviousDatePartGroup():this.input.focusNextDatePartGroup(),this.getRootNode().hasAttribute("data-is-focused")||(e.preventDefault(),e.stopPropagation())}if(n){var a;try{a=this.input.getDateValue()}catch(e){a=null}Qe.a.dateEquals(a,i)||lt.getJQuery()(this.input.getRootNode()).trigger("input")}}}},{key:"getRootNode",value:function(){return this.root}},{key:"getRole",value:function(){return this.role}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){this.value=e,this.input.rebuildDateFromParts(),this.render()}}]),e}(),je=function(){function e(){o()(this,e)}return l()(e,null,[{key:"getMouseButtonFromEvent",value:function(e){return this.isSafariOnMac?e.which:e.buttons}},{key:"init",value:function(){this.isSafariOnMac=""===ie.meetsRequirements("mac * desktop safari *"),this.mobileOnAndroid=""===ie.meetsRequirements("android * * * *"),""===ie.meetsRequirements("* * mobile * *")?this.mobile=!0:this.mobile=!1}},{key:"isMobile",value:function(){return this.mobile}},{key:"isAndroid",value:function(){return this.mobileOnAndroid}},{key:"setCanMakeResize",value:function(e){this._canMakeResize=e}},{key:"canMakeResize",get:function(){return this._canMakeResize}}]),e}();v()(je,"isSafariOnMac",void 0),v()(je,"mobile",void 0),v()(je,"mobileOnAndroid",void 0),v()(je,"_canMakeResize",!0),je.init();var Je=function(e){function t(){var e;return o()(this,t),e=d()(this,_()(t).call(this,lt.ELEMENT_TYPE_DATE)),v()(h()(e),"dateGroups",[]),v()(h()(e),"format",void 0),v()(h()(e),"currentDateGroup",void 0),v()(h()(e),"value",null),v()(h()(e),"expander",void 0),v()(h()(e),"expanded",!1),v()(h()(e),"weekStart",O.j.SUNDAY),v()(h()(e),"acceptedDaysOfWeek",null),v()(h()(e),"hash",void 0),v()(h()(e),"hasAccessibilityEnabled",void 0),v()(h()(e),"i18n",void 0),v()(h()(e),"hiddenInput",void 0),e.expander=document.createElement("div"),e.expander.setAttribute("data-role","expander"),e.expander.setAttribute("role","application"),je.isMobile()&&(e.hiddenInput=document.createElement("input"),e.hiddenInput.style.display="block",e.hiddenInput.style.border="none",e.hiddenInput.style.width="1px",e.hiddenInput.style.height="1px",e.hiddenInput.style.opacity=".1",e.hiddenInput.style.position="absolute",e.hiddenInput.style.right=e.hiddenInput.style.top="0",e.rootNode.appendChild(e.hiddenInput)),e.init(),e}return f()(t,e),l()(t,[{key:"padNumber",value:function(e,t){for(var i=String(e||0);i.length<t;)i="0".concat(i);return i}},{key:"withWeekStart",value:function(e){return this.weekStart=~~e||O.j.SUNDAY,this}},{key:"getWeekStart",value:function(){return this.weekStart}},{key:"withAcceptedDaysOfWeek",value:function(e){return this.acceptedDaysOfWeek=e,this}},{key:"getAcceptedDaysOfWeek",value:function(){return this.acceptedDaysOfWeek}},{key:"getValue",value:function(){if(null===this.value)return"";switch(this.format){case re.VALIDATOR_TYPE_DATE_MMYYYY:return"".concat(this.padNumber(this.value.getMonth()+1,2),"/").concat(this.padNumber(this.value.getFullYear(),4));case re.VALIDATOR_TYPE_DATE_YYYYMMDD:return"".concat(this.padNumber(this.value.getFullYear(),4),"/").concat(this.padNumber(this.value.getMonth()+1,2),"/").concat(this.padNumber(this.value.getDate(),2));case re.VALIDATOR_TYPE_DATE_DDMMYYYY:return"".concat(this.padNumber(this.value.getDate(),2),"/").concat(this.padNumber(this.value.getMonth()+1,2),"/").concat(this.padNumber(this.value.getFullYear(),4));case re.VALIDATOR_TYPE_DATE_MMDDYYYY:default:return"".concat(this.padNumber(this.value.getMonth()+1,2),"/").concat(this.padNumber(this.value.getDate(),2),"/").concat(this.padNumber(this.value.getFullYear(),4))}}},{key:"setValue",value:function(e){var t;if("string"!==typeof e)t=null,console.warn("Invalid date: ",e);else{var i,n=1,a=null,r=null;switch(this.format){case re.VALIDATOR_TYPE_DATE_DDMMYYYY:(i=/^([\d]{2})[\/\-\.]{1}([\d]{2})[\/\-\.]{1}([\d]{4})$/.exec(e))&&(n=parseInt(i[1]),a=parseInt(i[2]),r=parseInt(i[3]));break;case re.VALIDATOR_TYPE_DATE_MMYYYY:(i=/^([\d]{2})[\/\-\.]{1}([\d]{4})$/.exec(e))&&(a=parseInt(i[1]),r=parseInt(i[2]));break;case re.VALIDATOR_TYPE_DATE_YYYYMMDD:(i=/^([\d]{4})[\/\-\.]{1}([\d]{2})[\/\-\.]{1}([\d]{2})$/.exec(e))&&(r=parseInt(i[1]),a=parseInt(i[2]),n=parseInt(i[3]));break;case re.VALIDATOR_TYPE_DATE_MMDDYYYY:default:(i=/^([\d]{2})[\/\-\.]{1}([\d]{2})[\/\-\.]{1}([\d]{4})$/.exec(e))&&(a=parseInt(i[1]),n=parseInt(i[2]),r=parseInt(i[3]))}if(null==a||null==r?(t=null,console.warn("Invalid date: ",e)):((t=new Date).setHours(12),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t.setMonth(a-1),t.setDate(n),t.setFullYear(r)),Qe.a.dateEquals(this.value,t))return;this.value=t;for(var o=0,s=this.dateGroups.length;o<s;o++)this.dateGroups[o].extractDatePartFrom(this.value)}}},{key:"withHash",value:function(e){return this.hash=e,this}},{key:"getHash",value:function(){return this.hash}},{key:"setAccessibilityEnabled",value:function(e){this.hasAccessibilityEnabled=e}},{key:"setFormat",value:function(e){var t;this.format=e,this.dateGroups=this.getFormatDateGroups(e),this.rootNode.textContent="";var i=document.createElement("div");i.setAttribute("data-role","date-wrapper");for(var n=0,a=this.dateGroups.length;n<a;n++){var r=this.getDateGroupAttribute(this.dateGroups[n].getRole(),this.hash);this.dateGroups[n].getRootNode().setAttribute("id",r),this.dateGroups[n].withDisabled(this.disabled).withReadOnly(this.readOnly),this.dateGroups[n].extractDatePartFrom(this.value),i.appendChild(this.dateGroups[n].getRootNode()),n<a-1&&((t=i.appendChild(document.createElement("span"))).setAttribute("data-delimiter","1"),t.textContent="/")}this.updateAccessibilityFeature(),this.rootNode.appendChild(i),this.rootNode.appendChild(this.expander),this.setCurrentDateGroup(this.dateGroups[0]||null),this.hiddenInput&&this.rootNode.appendChild(this.hiddenInput)}},{key:"getDateGroupAttribute",value:function(e,t){switch(e){case O.h.DAY:return"date-".concat(t,"-day");case O.h.MONTH:return"date-".concat(t,"-month");case O.h.YEAR:return"date-".concat(t,"-year")}return""}},{key:"getFormatDateGroups",value:function(e){var t;switch(e){case re.VALIDATOR_TYPE_DATE_DDMMYYYY:t=[new $e(O.h.DAY,this),new $e(O.h.MONTH,this),new $e(O.h.YEAR,this)];break;case re.VALIDATOR_TYPE_DATE_MMDDYYYY:t=[new $e(O.h.MONTH,this),new $e(O.h.DAY,this),new $e(O.h.YEAR,this)];break;case re.VALIDATOR_TYPE_DATE_MMYYYY:t=[new $e(O.h.MONTH,this),new $e(O.h.YEAR,this)];break;case re.VALIDATOR_TYPE_DATE_YYYYMMDD:t=[new $e(O.h.YEAR,this),new $e(O.h.MONTH,this),new $e(O.h.DAY,this)];break;default:throw new Error("Invalid date format! Expected DDMMYYYY, MMDDYYYY, MMYYYY, YYYYMMDD")}return t}},{key:"updateAccessibilityFeature",value:function(){if(this.hasAccessibilityEnabled){var e=document.createElement("div");e.setAttribute("id","date-expander-text-acc"),e.appendChild(document.createTextNode("Click to choose time")),e.style.display="none",this.expander.tabIndex=0,this.expander.appendChild(e),this.expander.setAttribute("aria-labelledby","date-expander-text-acc")}else this.expander.removeAttribute("tabindex")}},{key:"getFormat",value:function(){return this.format}},{key:"getDateValue",value:function(){return this.value}},{key:"setDateValue",value:function(e){if(null!==e&&!A()(e,Date))throw new Error("Invalid argument: Expected Date|null");this.value=e;for(var t=0,i=this.dateGroups.length;t<i;t++)this.dateGroups[t].extractDatePartFrom(this.value)}},{key:"setCurrentDateGroup",value:function(e){this.currentDateGroup&&this.currentDateGroup.getRootNode().removeAttribute("data-is-focused"),this.currentDateGroup=e||null,this.currentDateGroup&&this.currentDateGroup.getRootNode().setAttribute("data-is-focused","data-is-focused")}},{key:"isDateValidIfDatePartIs",value:function(e,t){if(e===O.h.AM_PM)return 0===t||1===t;for(var i=new Date,n=new Date,a=1,r=0,o=0,s=0,l=this.dateGroups.length;s<l;s++)switch(this.dateGroups[s].getRole()){case 0:a=this.dateGroups[s].getValue();break;case 1:r=this.dateGroups[s].getValue();break;case 2:o=this.dateGroups[s].getValue()}if(!r&&!o)return!0;switch(i.setFullYear(o,r-1,a),n.setFullYear(o,r-1,a),e){case O.h.DAY:return i.setDate(t),i.getMonth()===n.getMonth()&&i.getFullYear()===n.getFullYear();case O.h.MONTH:return i.setMonth(t-1),i.getDate()===n.getDate()&&i.getFullYear()===n.getFullYear();case O.h.YEAR:return i.setFullYear(t),i.getDate()===n.getDate()&&i.getMonth()===n.getMonth();default:return!0}}},{key:"rebuildDateFromParts",value:function(){for(var e=1,t=null,i=null,n=0,a=this.dateGroups.length;n<a;n++)switch(this.dateGroups[n].getRole()){case O.h.YEAR:i=this.dateGroups[n].getValue();break;case O.h.MONTH:t=this.dateGroups[n].getValue();break;case O.h.DAY:e=this.dateGroups[n].getValue()}if(null===t||null===i)this.value=null;else{var r=new Date;r.setFullYear(i),r.setMonth(t-1,e),r.setDate(e),r.getDate()===e&&r.getMonth()===t-1&&r.getFullYear()===i?(this.value=new Date,this.value.setTime(r.getTime())):this.value=null}}},{key:"setExpanded",value:function(e){if(!this.isReadOnly()){if((e=!!e)===this.expanded)return;this.expanded=e,t.initOverlay(e?this:null),e?this.expander.setAttribute("data-expanded","1"):this.expander.removeAttribute("data-expanded")}}},{key:"init",value:function(){!function(e,i){e.expander.addEventListener("keydown",(function(i){var n=!1,a=i.keyCode||i.charCode;switch(a){case Ye.KEY_TAB:if(!e.expanded)return e.expander.removeAttribute("tabindex"),void setTimeout((function(){e.expander.tabIndex=0}),1e3);t.focusNextOverlayElement(i),n=!0;break;case Ye.KEY_UP:case Ye.KEY_DOWN:case Ye.KEY_LEFT:case Ye.KEY_RIGHT:t.handleKeyboardPressButtonOnCurrentFocusedElement(i,a),n=!0;break;case Ye.KEY_ENTER:e.setExpanded(!0),n=!0;break;case Ye.KEY_ESC:e.setExpanded(!1),n=!0;break;default:n=!1}n&&(i.preventDefault(),i.stopPropagation())}),!0),i(e.rootNode).on("keydown",(function(t){if(null!==e.currentDateGroup){if(je.isMobile())for(var i=0,n=e.dateGroups.length;i<n;i++)if(document.activeElement===e.dateGroups[i].getRootNode()&&e.dateGroups[i]!==e.currentDateGroup){e.setCurrentDateGroup(e.dateGroups[i]);break}e.currentDateGroup.handleKeyEvent(t)}})),i(e.rootNode).on("blur",(function(){e.setCurrentDateGroup(e.dateGroups[0])})),i(e.hiddenInput).on("focus",(function(){setTimeout((function(){i(e.rootNode).focus().click(),e.setExpanded(!0)}),100)})),i(e.rootNode).on("mousedown",(function(t){var i=t.target||t.srcElement;if(je.isMobile())e.setExpanded(!0);else if(i===e.expander)setTimeout((function(){e.setExpanded(!0)}),50);else for(var n=0,a=e.dateGroups.length;n<a;n++)if(e.dateGroups[n].getRootNode()===i)return void e.setCurrentDateGroup(e.dateGroups[n])})),Object.defineProperty(e.rootNode,"value",{get:function(){return e.getValue()},set:function(t){t&&A()(t,Date)?e.setDateValue(t):e.setValue(t)}}),Object.defineProperty(e.rootNode,"disabled",{get:function(){return e.isDisabled()},set:function(t){e.setDisabled(t)}}),Object.defineProperty(e.rootNode,"readOnly",{get:function(){return e.isReadOnly()},set:function(t){e.setReadOnly(t)}})}(this,lt.getJQuery())}},{key:"focusPreviousDatePartGroup",value:function(){for(var e=null,t=0,i=this.dateGroups.length;t<i;t++)if(this.dateGroups[t]===this.currentDateGroup){e=t;break}this.setCurrentDateGroup(this.dateGroups[(e||0)-1]||this.dateGroups[0]||null)}},{key:"focusNextDatePartGroup",value:function(){for(var e=null,t=0,i=this.dateGroups.length;t<i;t++)if(this.dateGroups[t]===this.currentDateGroup){e=t;break}this.setCurrentDateGroup(this.dateGroups[(e||0)+1]||this.dateGroups[this.dateGroups.length-1]||null)}},{key:"setDisabled",value:function(e){E()(_()(t.prototype),"setDisabled",this).call(this,e);for(var i=0,n=this.dateGroups.length;i<n;i++)this.dateGroups[i].withDisabled(this.disabled)}},{key:"setReadOnly",value:function(e){E()(_()(t.prototype),"setReadOnly",this).call(this,e);for(var i=0,n=this.dateGroups.length;i<n;i++)this.dateGroups[i].withReadOnly(this.readOnly)}},{key:"setI18n",value:function(e){return this.i18n=e||null,this}},{key:"getI18n",value:function(){return this.i18n||null}},{key:"isDateFieldEmpty",value:function(){for(var e=!0,t=0,i=this.dateGroups.length;t<i;t++)if(this.dateGroups[t].getValue()){e=!1;break}return e}}],[{key:"emulateBlurOnOverlayActiveElement",value:function(){null!==this.overlayFocusedElement&&this.overlayFocusedElement.removeAttribute("data-soft-focused")}},{key:"emulateFocusOnOverlayActiveElement",value:function(){null!==this.overlayFocusedElement&&this.overlayFocusedElement.setAttribute("data-soft-focused","1")}},{key:"focusNextOverlayElement",value:function(e){if(this.expandedInstance){if(this.emulateBlurOnOverlayActiveElement(),e.shiftKey)switch(this.overlayFocusedElement){case this.overlayHeader:this.overlayFocusedElement=this.dateLayerDaysHolder;break;case this.dateLayerDaysHolder:this.overlayFocusedElement=this.dateLayerNavigation;break;case this.dateLayerNavigation:default:this.overlayFocusedElement=this.overlayHeader}else switch(this.overlayFocusedElement){case this.overlayHeader:this.overlayFocusedElement=this.dateLayerNavigation;break;case this.dateLayerNavigation:this.overlayFocusedElement=this.dateLayerDaysHolder;break;case this.dateLayerDaysHolder:default:this.overlayFocusedElement=this.overlayHeader}this.emulateFocusOnOverlayActiveElement()}}},{key:"handleKeyboardPressButtonOnCurrentFocusedElement",value:function(e,t){if(this.expandedInstance)switch(this.overlayFocusedElement){case this.overlayHeader:break;case this.dateLayerNavigation:switch(t){case Ye.KEY_LEFT:this.incrementDatePart("months",-1);break;case Ye.KEY_RIGHT:this.incrementDatePart("months",1)}break;case this.dateLayerDaysHolder:switch(t){case Ye.KEY_UP:this.incrementDatePart("days",-7);break;case Ye.KEY_DOWN:this.incrementDatePart("days",7);break;case Ye.KEY_LEFT:this.incrementDatePart("days",-1);break;case Ye.KEY_RIGHT:this.incrementDatePart("days",1)}}}},{key:"incrementDatePart",value:function(e,t){var i=this.localDate.getDate();switch(e){case"months":this.localDate.setMonth(this.localDate.getMonth()+t),this.localDate.setFullYear(this.localDate.getFullYear()),this.localDate.setDate(i);break;case"days":this.localDate.setDate(this.localDate.getDate()+t),this.localDate.setFullYear(this.localDate.getFullYear()),this.localDate.setMonth(this.localDate.getMonth())}this.expandedInstance.setDateValue(this.localDate),this.paintMonthOverlay(),this.paintDateOverlay(),lt.getJQuery()(this.expandedInstance.getRootNode()).trigger("input");var n=this.expandedInstance.expander.querySelector("div");n&&(n.textContent=this.expandedInstance.getValue()),this.expandedInstance.expander.focus()}},{key:"initOverlayElements",value:function(){var e;this.overlay=document.createElement("div"),this.overlay.setAttribute("data-role","date-overlay"),this.overlayModal=document.createElement("div"),this.overlayModal.className="ui-modal",this.overlayModal.setAttribute("data-transparent","1"),je.isMobile()||this.overlay.appendChild(this.overlayModal),this.overlayHeader=document.createElement("div"),this.overlayHeader.setAttribute("data-component","header"),this.overlay.appendChild(this.overlayHeader),this.dateLayer=document.createElement("div"),this.dateLayer.setAttribute("data-component","date"),this.dateLayerNavigation=document.createElement("div"),this.dateLayerNavigation.setAttribute("data-role","navigation"),this.dateLayerNavigationBTNPrevMonth=document.createElement("div"),this.dateLayerNavigationBTNPrevMonth.setAttribute("data-action","btn-prev-month"),this.dateLayerNavigationBTNNextMonth=document.createElement("div"),this.dateLayerNavigationBTNNextMonth.setAttribute("data-action","btn-next-month"),this.dateLayerNavigationLABELCurrentMonth=document.createElement("div"),this.dateLayerNavigationLABELCurrentMonth.setAttribute("data-action","select-year"),this.dateLayerDaysHolder=document.createElement("div"),this.dateLayerDaysHolder.setAttribute("data-role","calendar"),this.dateLayerNavigation.appendChild(this.dateLayerNavigationBTNPrevMonth),this.dateLayerNavigation.appendChild(this.dateLayerNavigationLABELCurrentMonth),this.dateLayerNavigation.appendChild(this.dateLayerNavigationBTNNextMonth),this.dateLayer.appendChild(this.dateLayerNavigation),this.dateLayer.appendChild(this.dateLayerDaysHolder),this.weekDays=this.weekDaysI18n||this.weekDays;for(var t=0;t<7;t++)this.dateLayerDaysHolder.appendChild(this.dayOfWeekColumns[String(t)]),this.dayOfWeekColumns[String(t)].setAttribute("data-role","day-of-week"),(e=document.createElement("div")).setAttribute("data-role","week-day-header"),e.textContent=this.weekDays[t],this.dayOfWeekColumns[String(t)].appendChild(e);this.monthLayer=document.createElement("div"),this.monthLayer.setAttribute("data-component","month"),this.yearLayer=document.createElement("div"),this.yearLayer.setAttribute("data-component","year"),this.overlay.appendChild(this.dateLayer),this.overlay.appendChild(this.monthLayer),this.overlay.appendChild(this.yearLayer)}},{key:"initListeners",value:function(){!function(e,t){t.bodyMouseDownListener=function(i){var n=i.target||i.srcElement;(n===t.overlayModal||!e.contains(t.overlay,n)&&n!==t.overlay)&&null!==t.expandedInstance&&t.expandedInstance.setExpanded(!1)},t.bodyClickListener=function(i){var n=i.target||i.srcElement,a=!1;if(e.contains(t.overlay,n)||n===t.overlay)switch(n){case t.dateLayerNavigationBTNPrevMonth:t.monthNavigate(-1),a=!0;break;case t.dateLayerNavigationBTNNextMonth:t.monthNavigate(1),a=!0;break;case t.dateLayerNavigationLABELCurrentMonth:t.setPickerDateSelectionPhase(O.i.YEAR),a=!0;break;default:e(n).is("div[data-role=day][data-day][data-month]")?(t.onDayCellClicked(parseInt(n.getAttribute("data-day")),parseInt(n.getAttribute("data-month"))-1),a=!0):e(n).is("div[data-component=year] > [data-year]")?(t.onYearRowClicked(parseInt(n.getAttribute("data-year"))),a=!0):e(n).is("div[data-component=month] > [data-month]")&&(t.onMonthRowClicked(parseInt(n.getAttribute("data-month"))-1),a=!0)}a&&(i.preventDefault(),i.stopPropagation())},t.touchMoveListener=function(i){var n=i.target||i.srcElement;(e.contains(t.overlay,n)||n===t.overlay)&&i.preventDefault(),t.clickStarted=!1},t.touchStartListener=function(i){var n=i.target||i.srcElement;(e.contains(t.overlay,n)||n===t.overlay)&&(t.lastTouchPosition.left=i.touches[0].pageX,t.lastTouchPosition.top=i.touches[0].pageY),t.clickStarted=!0},t.touchEndListener=function(e){t.clickStarted&&t.bodyClickListener(e)},window.addEventListener("scroll",(function(){t.expandedInstance&&!je.isMobile()&&t.expandedInstance.setExpanded(!1)}),!0),window.addEventListener("resize",(function(e){t.expandedInstance&&t.expandedInstance.setExpanded(!1)}),!0),e(t.yearLayer).on("mousewheel wheel touchmove",(function(e){if("mousewheel"==e.type||"wheel"==e.type)t.yearScroll(e.originalEvent.deltaY<0?-1:1);else{var i=t.getVerticalScrollDirection(e.originalEvent);if(0===i)return;t.yearScroll(i)}e.preventDefault()})),e(t.monthLayer).on("mousewheel wheel touchmove",(function(e){if("mousewheel"===e.type||"wheel"==e.type)t.monthScroll(e.originalEvent.deltaY<0?-1:1);else{var i=t.getVerticalScrollDirection(e.originalEvent);if(0===i)return;t.monthScroll(i)}e.preventDefault()}))}(lt.getJQuery(),this)}},{key:"initOverlay",value:function(e){if(this.firstTime=!0,this.expandedInstance&&this.expandedInstance.setExpanded(!1),this.timeUtils||(this.timeUtils=Qe.a.createInstanceInNonSingletonModeWithoutInternationalizationSupport()),e&&e.getI18n()&&(this.timeUtils.setI18nService(),this.weekDaysI18n=e&&e.getI18n().translateText("edt_date_picker_week_days")&&"edt_date_picker_week_days"!==e.getI18n().translateText("edt_date_picker_week_days")&&e.getI18n().translateText("edt_date_picker_week_days").split(",")),null!==e&&this.initOverlayElements(),this.expandedInstance=e||null,this.expandedInstance){this.initListeners(),document.body.addEventListener("mousedown",this.bodyMouseDownListener,!0),je.isMobile()?(document.body.addEventListener("touchstart",this.touchStartListener,!0),document.body.addEventListener("touchmove",this.touchMoveListener,{passive:!1}),document.body.addEventListener("touchend",this.touchEndListener,!0)):document.body.addEventListener("click",this.bodyClickListener,!0),document.body.appendChild(this.overlay);var i=this.expandedInstance.rootNode.getBoundingClientRect(),n=this.overlay.getBoundingClientRect(),a=Ke.getAnchorPosition(i,n,t.DISTANCE_BETWEEN_THE_OVERLAY_AND_THE_INPUT,["center-bottom","center-top"]);this.overlay.style.top="".concat(a.top,"px"),this.overlay.style.left="".concat(a.left,"px"),je.isMobile()?(screen.height-i.bottom-t.DISTANCE_BETWEEN_THE_OVERLAY_AND_THE_INPUT-n.height-100<0&&"center-top"!==a.mode&&(document.body.offsetHeight>screen.height?(this.overlay.style.top="".concat(~~i.top+~~(i.height/2)-~~(n.width/2),"px"),yt.allBrowsersCompatibleScrollIntoView(this.expandedInstance.rootNode,{block:"center"})):(this.overlay.style.top="".concat(~~(screen.height/2)-~~(n.height/2),"px"),this.overlay.style.left="".concat(~~(screen.width/2)-~~(n.width/2),"px"))),document.body.hasAttribute("data-is-wix-embedded")&&(this.overlay.style.top="".concat(~~a.top,"px"),this.overlay.style.left="".concat(~~(i.left/2),"px"))):(this.overlay.style.top="".concat(a.top,"px"),this.overlay.style.left="".concat(i.left+(i.width-n.width),"px")),this.resetOverlay()}else document.body.removeEventListener("mousedown",this.bodyMouseDownListener,!0),je.isMobile()?(document.body.removeEventListener("touchstart",this.touchStartListener,!0),document.body.removeEventListener("touchmove",this.touchMoveListener,!0),document.body.removeEventListener("touchend",this.touchEndListener,!0)):document.body.removeEventListener("click",this.bodyClickListener,!0),this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)}},{key:"getVerticalScrollDirection",value:function(e){var t={left:e.touches[0].screenX,top:e.touches[0].screenY},i=t.top-this.lastTouchPosition.top;return Math.abs(i)>10?(this.lastTouchPosition.top=t.top,i>0?1:-1):0}},{key:"monthNavigate",value:function(e){this.localDate.setMonth(this.localDate.getMonth()+e),this.paintDateOverlay()}},{key:"yearScroll",value:function(e){this.localDate.setFullYear(this.localDate.getFullYear()+e),this.paintYearOverlay()}},{key:"monthScroll",value:function(e){this.localDate.setMonth(this.localDate.getMonth()+e),this.paintMonthOverlay()}},{key:"onMonthRowClicked",value:function(e){this.firstTime=!0,this.localDate.setMonth(e),this.expandedInstance.getFormat()!==re.VALIDATOR_TYPE_DATE_MMYYYY?this.setPickerDateSelectionPhase(O.i.DAY):(this.localDate.setDate(1),this.expandedInstance.setDateValue(this.localDate),lt.getJQuery()(this.expandedInstance.getRootNode()).trigger("input"),this.expandedInstance.setExpanded(!1))}},{key:"onYearRowClicked",value:function(e){this.firstTime=!0,this.localDate.setFullYear(e),this.setPickerDateSelectionPhase(O.i.MONTH)}},{key:"onDayCellClicked",value:function(e,t){this.localDate.setMonth(t),this.localDate.setDate(e),this.paintDateOverlay();var i=!0,n=this.expandedInstance.getAcceptedDaysOfWeek();null!==n&&-1===n.indexOf(this.localDate.getDay())&&(i=!1),i&&(this.expandedInstance.setDateValue(this.localDate),lt.getJQuery()(this.expandedInstance.getRootNode()).trigger("input"),this.expandedInstance.setExpanded(!1))}},{key:"setPickerDateSelectionPhase",value:function(e){switch(this.selectionPhase=e,e){case O.i.DAY:this.overlay.setAttribute("data-selection-phase","day"),this.paintDateOverlay();break;case O.i.MONTH:this.overlay.setAttribute("data-selection-phase","month"),this.paintMonthOverlay();break;case O.i.YEAR:this.overlay.setAttribute("data-selection-phase","year"),this.paintYearOverlay();break;case O.i.TIME:this.overlay.setAttribute("data-selection-phase","time")}}},{key:"updateOverlayHeaderText",value:function(){var e=this.expandedInstance.getDateValue()||new Date,t=this.expandedInstance.getFormat()!==re.VALIDATOR_TYPE_DATE_MMYYYY;this.overlayHeader.textContent=this.timeUtils.formatTime(Math.floor(e.getTime()/1e3),t?"%a, %b %e, %Y":"%b %Y")}},{key:"paintDateOverlay",value:function(){for(var e=0;e<7;e++)for(;this.dayOfWeekColumns[String(e)].childNodes.length>1;)this.dayOfWeekColumns[String(e)].childNodes[0].textContent!==this.weekDays[e]&&(this.dayOfWeekColumns[String(e)].childNodes[0].textContent=this.weekDays[e]),this.dayOfWeekColumns[String(e)].removeChild(this.dayOfWeekColumns[String(e)].childNodes[1]);var t,i,n,a,r=new Date,o=new Date,s=this.expandedInstance.getDateValue();for(r.setTime(this.localDate.getTime()),r.setDate(1),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0),i=r.getMonth(),n=r.getFullYear(),this.dateLayerNavigationLABELCurrentMonth.textContent=this.timeUtils.formatTime(Math.round(r.getTime()/1e3),"%M %Y");r.getDay()!=this.expandedInstance.getWeekStart();)r.setDate(r.getDate()-1);for(;r.getMonth()<=i&&r.getFullYear()===n||r.getMonth()>i&&r.getFullYear()<n;)(t=document.createElement("div")).setAttribute("data-role","day"),a=r.getDay(),r.getMonth()===i&&(t.textContent=String(r.getDate()),t.setAttribute("data-day",String(r.getDate())),t.setAttribute("data-month",String(i+1)),r.getDate()===o.getDate()&&r.getMonth()===o.getMonth()&&r.getFullYear()===o.getFullYear()&&(t.className="".concat(t.className||"","today ")),null!==s&&r.getDate()===s.getDate()&&r.getMonth()===s.getMonth()&&r.getFullYear()===s.getFullYear()&&(t.className="".concat(t.className||"","selected "))),this.dayOfWeekColumns[String(a)].appendChild(t),r.setDate(r.getDate()+1)}},{key:"paintMonthOverlay",value:function(){var e,t=new Date;t.setTime(this.localDate.getTime()),t.setDate(1),t.setMonth(t.getMonth()-6);for(var i=0;i<12;i++)(e=this.firstTime?document.createElement("div"):this.monthLayer.children.item(i)).classList.remove("current"),e.setAttribute("data-month",String(t.getMonth()+1)),e.textContent=this.timeUtils.formatTime(Math.round(t.getTime()/1e3),"%M"),t.getMonth()===this.localDate.getMonth()&&(e.className="current"),!0===this.firstTime&&this.monthLayer.appendChild(e),t.setMonth(t.getMonth()+1);this.firstTime=!1}},{key:"paintYearOverlay",value:function(){var e,t=new Date;t.setTime(this.localDate.getTime()),t.setDate(1),t.setFullYear(t.getFullYear()-6);for(var i=0;i<12;i++)(e=this.firstTime?document.createElement("div"):this.yearLayer.children.item(i)).classList.remove("current"),e.setAttribute("data-year",String(t.getFullYear())),e.textContent=this.timeUtils.formatTime(Math.round(t.getTime()/1e3),"%Y"),t.getFullYear()===this.localDate.getFullYear()&&(e.className="current"),this.firstTime&&this.yearLayer.appendChild(e),t.setFullYear(t.getFullYear()+1);this.firstTime=!1}},{key:"paintCurrentOverlay",value:function(){switch(this.selectionPhase){case O.i.DAY:this.paintDateOverlay();break;case O.i.MONTH:this.paintMonthOverlay();break;case O.i.YEAR:this.paintYearOverlay();break;case O.i.TIME:}}},{key:"resetOverlay",value:function(){var e=this.expandedInstance.getFormat()!==re.VALIDATOR_TYPE_DATE_MMYYYY,t=this.expandedInstance.getWeekStart(),i=this.expandedInstance.getAcceptedDaysOfWeek();this.dayOfWeekColumns[0].parentNode.removeChild(this.dayOfWeekColumns[0]),t===O.j.MONDAY?this.dateLayerDaysHolder.appendChild(this.dayOfWeekColumns[0]):this.dateLayerDaysHolder.insertBefore(this.dayOfWeekColumns[0],this.dateLayerDaysHolder.firstChild);for(var n=0;n<7;n++)null===i||i.indexOf(n)>-1?this.dayOfWeekColumns[String(n)].removeAttribute("data-forbidden-week-day"):this.dayOfWeekColumns[String(n)].setAttribute("data-forbidden-week-day","");this.localDate=this.expandedInstance.getDateValue()||new Date,this.setPickerDateSelectionPhase(e?O.i.DAY:O.i.YEAR),this.updateOverlayHeaderText(),this.paintCurrentOverlay()}}]),t}(k);v()(Je,"DISTANCE_BETWEEN_THE_OVERLAY_AND_THE_INPUT",5),v()(Je,"overlay",void 0),v()(Je,"overlayModal",void 0),v()(Je,"overlayHeader",void 0),v()(Je,"dateLayer",void 0),v()(Je,"dateLayerNavigation",void 0),v()(Je,"dateLayerNavigationBTNPrevMonth",void 0),v()(Je,"dateLayerNavigationBTNNextMonth",void 0),v()(Je,"dateLayerNavigationLABELCurrentMonth",void 0),v()(Je,"dateLayerDaysHolder",void 0),v()(Je,"monthLayer",void 0),v()(Je,"yearLayer",void 0),v()(Je,"expandedInstance",void 0),v()(Je,"bodyMouseDownListener",void 0),v()(Je,"bodyClickListener",void 0),v()(Je,"touchMoveListener",void 0),v()(Je,"touchStartListener",void 0),v()(Je,"touchEndListener",void 0),v()(Je,"selectionPhase",void 0),v()(Je,"timeUtils",void 0),v()(Je,"localDate",void 0),v()(Je,"lastTouchPosition",{left:0,top:0}),v()(Je,"overlayFocusedElement",null),v()(Je,"dayOfWeekColumns",{0:document.createElement("div"),1:document.createElement("div"),2:document.createElement("div"),3:document.createElement("div"),4:document.createElement("div"),5:document.createElement("div"),6:document.createElement("div")}),v()(Je,"weekDaysI18n",null),v()(Je,"weekDays",["S","M","T","W","T","F","S"]),v()(Je,"clickStarted",!1),v()(Je,"firstTime",!0);var Ze=function e(){o()(this,e)};v()(Ze,"ALLOW_I18N_DROPDOWN_SELECTOR",!0),v()(Ze,"ALLOW_QUIZ_TIMER",!0),v()(Ze,"ENABLE_SUBMISSION_PREVENTION_ON_QUIZ_TIMER_EXPIRATION",!0),v()(Ze,"ALLOW_PAYMENTS_SELECTOR",!0),v()(Ze,"ALLOW_THEME_ADVANCED_SETTINGS",!1),v()(Ze,"ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL",!1),v()(Ze,"ALLOW_COUPON_CODES_ON_LAST_PAGE_FOOTER",!0),v()(Ze,"ALLOW_REAL_TIME_CALCULATIONS",!0),v()(Ze,"ALLOW_PAYMENTS_SUMMARY",!0),v()(Ze,"VERBOSE_CONSOLE",!1),v()(Ze,"ALLOW_CSS_OPTIMIZATIONS",!0);var et=function(e){function t(){var e;return o()(this,t),e=d()(this,_()(t).call(this,lt.ELEMENT_TYPE_TIME)),v()(h()(e),"dateGroups",[]),v()(h()(e),"format",void 0),v()(h()(e),"currentDateGroup",void 0),v()(h()(e),"value",null),v()(h()(e),"expander",void 0),v()(h()(e),"expanded",!1),v()(h()(e),"hash",void 0),v()(h()(e),"hasAccessibilityEnabled",void 0),v()(h()(e),"inputErrorState",O.v.FILLED),v()(h()(e),"hiddenInput",void 0),e.expander=document.createElement("div"),e.expander.setAttribute("data-role","expander"),e.expander.setAttribute("role","application"),je.isMobile()&&(e.hiddenInput=document.createElement("input"),e.hiddenInput.style.display="block",e.hiddenInput.style.border="none",e.hiddenInput.style.width="1px",e.hiddenInput.style.height="1px",e.hiddenInput.style.opacity=".1",e.hiddenInput.style.position="absolute",e.hiddenInput.style.right=e.hiddenInput.style.top="0",e.rootNode.appendChild(e.hiddenInput)),e.init(),e}return f()(t,e),l()(t,[{key:"padNumber",value:function(e,t){for(var i=String(e||0);i.length<t;)i="0".concat(i);return i}},{key:"getAMPMHourPart",value:function(e){return e<12?e:e-12}},{key:"getValue",value:function(){if(null===this.value)return"";switch(this.format){case re.VALIDATOR_TYPE_TIME_AMPM:return"".concat(this.padNumber(this.getAMPMHourPart(this.value.getHours()),2),":").concat(this.padNumber(this.value.getMinutes(),2)).concat(Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?":".concat(this.padNumber(this.value.getSeconds(),2)):""," ").concat(this.value.getHours()<12?"AM":"PM");case re.VALIDATOR_TYPE_TIME:default:return"".concat(this.padNumber(this.value.getHours(),2),":").concat(this.padNumber(this.value.getMinutes(),2),":").concat(this.padNumber(this.value.getSeconds(),2))}}},{key:"hasDatePart",value:function(e){for(var t=0,i=this.dateGroups.length;t<i;t++)if(this.dateGroups[t].getRole()===e)return!0;return!1}},{key:"setValue",value:function(e){var t;if("string"!==typeof e)t=null,console.warn("Invalid date: ",e);else{e=e.trim();var i,n=null,a=null,r=null,o=null;switch(this.format){case re.VALIDATOR_TYPE_TIME_AMPM:(i=/^([\d]{2}):([\d]{2})(:([\d]{2}))? (am|pm)$/i.exec(e))&&(n=parseInt(i[1]),a=parseInt(i[2]),r=parseInt(i[4]||"0"),o=~~("pm"===i[5].toLowerCase()),n>12||a>59||r>59?n=a=r=null:0===n&&1===o?n=12:12===n&&0===o?n=0:1===o&&12!==n&&(n+=12));break;case re.VALIDATOR_TYPE_TIME:default:(i=/^([\d]{2}):([\d]{2})(:([\d]{2}))?$/.exec(e))&&(n=parseInt(i[1]),a=parseInt(i[2]),r=parseInt(i[4]||"0"),(n>23||a>59||r>59)&&(n=a=r=null))}if(null===n||null===a||null===r?(t=null,console.warn("Invalid date: ",e)):((t=new Date).setHours(n),t.setMinutes(a),t.setSeconds(r),t.setMilliseconds(0),t.setDate(1),t.setMonth(1),t.setFullYear(1970)),Qe.a.dateEquals(this.value,t))return;this.value=t;for(var s=0,l=this.dateGroups.length;s<l;s++)this.dateGroups[s].extractDatePartFrom(this.value)}}},{key:"withHash",value:function(e){return this.hash=e,this}},{key:"getHash",value:function(){return this.hash}},{key:"setAccessibilityEnabled",value:function(e){this.hasAccessibilityEnabled=e}},{key:"setFormat",value:function(e){switch(e){case re.VALIDATOR_TYPE_TIME_AMPM:this.dateGroups=Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?[new $e(O.h.HOUR_12,this),new $e(O.h.MINUTE,this),new $e(O.h.SECOND,this),new $e(O.h.AM_PM,this)]:[new $e(O.h.HOUR_12,this),new $e(O.h.MINUTE,this),new $e(O.h.AM_PM,this)];break;case re.VALIDATOR_TYPE_TIME:this.dateGroups=Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?[new $e(O.h.HOUR_24,this),new $e(O.h.MINUTE,this),new $e(O.h.SECOND,this)]:[new $e(O.h.HOUR_24,this),new $e(O.h.MINUTE,this)];break;default:throw new Error("Invalid date format! Expected time, time_ampm!")}this.format=e,this.rootNode.textContent="";var t=document.createElement("div");t.setAttribute("data-role","time-wrapper");for(var i=0,n=this.dateGroups.length;i<n;i++){switch(this.dateGroups[i].withDisabled(this.disabled).withReadOnly(this.readOnly),this.dateGroups[i].extractDatePartFrom(this.value),t.appendChild(this.dateGroups[i].getRootNode()),this.dateGroups[i].getRole()){case O.h.HOUR_12:case O.h.HOUR_24:this.dateGroups[i].getRootNode().setAttribute("id","time-".concat(this.hash,"-hour"));break;case O.h.MINUTE:this.dateGroups[i].getRootNode().setAttribute("id","time-".concat(this.hash,"-minute"));break;case O.h.SECOND:this.dateGroups[i].getRootNode().setAttribute("id","time-".concat(this.hash,"-second"));break;case O.h.AM_PM:this.dateGroups[i].getRootNode().setAttribute("id","time-".concat(this.hash,"-am-pm"))}t.appendChild(this.dateGroups[i].getRootNode()),i<n-1&&t.appendChild(document.createTextNode(i===n-2&&re.VALIDATOR_TYPE_TIME_AMPM===this.format?" ":":"))}this.updateAccessibilityFeature(),this.rootNode.appendChild(t),this.rootNode.appendChild(this.expander),this.setCurrentDateGroup(this.dateGroups[0]||null),this.hiddenInput&&this.rootNode.appendChild(this.hiddenInput)}},{key:"updateAccessibilityFeature",value:function(){if(this.hasAccessibilityEnabled){var e=document.createElement("div");e.setAttribute("id","time-expander-text-acc"),e.appendChild(document.createTextNode("Click to choose time")),e.style.display="none",this.expander.tabIndex=0,this.expander.appendChild(e),this.expander.setAttribute("aria-labelledby","time-expander-text-acc")}else this.expander.removeAttribute("tabindex")}},{key:"getFormat",value:function(){return this.format}},{key:"getDateValue",value:function(){return this.value}},{key:"setDateValue",value:function(e){if(null!==e&&!A()(e,Date))throw new Error("Invalid argument: Expected Date|null");this.value=e,this.inputErrorState=null===e?O.v.UNFILLED:O.v.FILLED;for(var t=0,i=this.dateGroups.length;t<i;t++)this.dateGroups[t].extractDatePartFrom(this.value)}},{key:"setCurrentDateGroup",value:function(e){this.currentDateGroup&&this.currentDateGroup.getRootNode().removeAttribute("data-is-focused"),this.currentDateGroup=e||null,this.currentDateGroup&&this.currentDateGroup.getRootNode().setAttribute("data-is-focused","data-is-focused")}},{key:"queryDatePart",value:function(e){for(var t=0,i=this.dateGroups.length;t<i;t++)if(this.dateGroups[t].getRole()===e)return this.dateGroups[t].getValue();return null}},{key:"setDatePart",value:function(e,t){for(var i=0,n=this.dateGroups.length;i<n;i++)this.dateGroups[i].getRole()===e&&this.dateGroups[i].setValue(t)}},{key:"isDateValidIfDatePartIs",value:function(e,t){return!0}},{key:"rebuildDateFromParts",value:function(){for(var e,t=null,i=null,n=null,a=0,r=0,o=this.dateGroups.length;r<o;r++)switch(this.dateGroups[r].getRole()){case O.h.HOUR_12:case O.h.HOUR_24:t=this.dateGroups[r].getValue();break;case O.h.MINUTE:i=this.dateGroups[r].getValue();break;case O.h.SECOND:n=this.dateGroups[r].getValue();break;case O.h.AM_PM:a=null===this.dateGroups[r].getValue()?O.K.AM:this.dateGroups[r].getValue()}switch(!0){case null===t&&null===i:this.inputErrorState=O.v.UNFILLED,this.value=null;break;case null===t||null===i:this.inputErrorState=O.v.ERROR;break;default:(e=new Date).setDate(1),e.setMonth(0),e.setFullYear(1970),e.setHours(t+12*a),e.setMinutes(i),e.setSeconds(n),e.setMilliseconds(0),this.value=e,this.inputErrorState=O.v.FILLED}}},{key:"setExpanded",value:function(e){if(!this.isReadOnly()){if(e=!!e,this.expander.querySelector("div")&&(this.expander.querySelector("div").textContent="Click to expand"),e===this.expanded)return;this.expanded=e;var i=this.getValue();t.initOverlay(e?this:null),i!==this.getValue()&&lt.getJQuery()(this.rootNode).trigger("input"),e?this.expander.setAttribute("data-expanded","1"):this.expander.removeAttribute("data-expanded")}}},{key:"init",value:function(){!function(e,i){e.expander.addEventListener("keydown",(function(i){var n=!1,a=i.keyCode||i.charCode;switch(a){case Ye.KEY_TAB:if(!e.expanded)return e.expander.removeAttribute("tabindex"),void setTimeout((function(){e.expander.tabIndex=0}),1e3);t.focusNextOverlayElement(i),n=!0;break;case Ye.KEY_UP:case Ye.KEY_DOWN:case Ye.KEY_LEFT:case Ye.KEY_RIGHT:t.handleKeyboardPressButtonOnCurrentFocusedElement(i,a),n=!0;break;case Ye.KEY_ENTER:e.setExpanded(!0),n=!0;break;case Ye.KEY_ESC:e.setExpanded(!1),n=!0;break;default:n=!1}n&&(i.preventDefault(),i.stopPropagation())}),!0),i(e.rootNode).on("keydown",(function(t){if(!e.expanded){if(null!==e.currentDateGroup){if(je.isMobile())for(var i=0,n=e.dateGroups.length;i<n;i++)if(document.activeElement===e.dateGroups[i].getRootNode()&&e.dateGroups[i]!==e.currentDateGroup){e.setCurrentDateGroup(e.dateGroups[i]);break}e.currentDateGroup.handleKeyEvent(t)}e.trigger("keydown")}})),i(e.rootNode).on("blur",(function(){e.setCurrentDateGroup(e.dateGroups[0])})),i(e.hiddenInput).on("focus",(function(t){setTimeout((function(){i(e.rootNode).focus().click(),e.setExpanded(!0)}),100)})),i(e.rootNode).on("mousedown",(function(t){var i=t.target||t.srcElement;if(je.isMobile())e.setExpanded(!0);else if(i===e.expander)e.setExpanded(!0);else for(var n=0,a=e.dateGroups.length;n<a;n++)if(e.dateGroups[n].getRootNode()===i)return void e.setCurrentDateGroup(e.dateGroups[n])})),Object.defineProperty(e.rootNode,"value",{get:function(){return e.getValue()},set:function(t){t&&A()(t,Date)?e.setDateValue(t):e.setValue(t)}}),Object.defineProperty(e.rootNode,"dateValue",{get:function(){return e.getDateValue()},set:function(t){t&&A()(t,Date)?this.setDateValue(t):e.setDateValue(null)}}),Object.defineProperty(e.rootNode,"disabled",{get:function(){return e.isDisabled()},set:function(t){e.setDisabled(t)}}),Object.defineProperty(e.rootNode,"readOnly",{get:function(){return e.isReadOnly()},set:function(t){e.setReadOnly(t)}})}(this,lt.getJQuery())}},{key:"focusPreviousDatePartGroup",value:function(){for(var e=null,t=0,i=this.dateGroups.length;t<i;t++)if(this.dateGroups[t]===this.currentDateGroup){e=t;break}this.setCurrentDateGroup(this.dateGroups[(e||0)-1]||this.dateGroups[0]||null)}},{key:"focusNextDatePartGroup",value:function(){for(var e=null,t=0,i=this.dateGroups.length;t<i;t++)if(this.dateGroups[t]===this.currentDateGroup){e=t;break}this.setCurrentDateGroup(this.dateGroups[(e||0)+1]||this.dateGroups[this.dateGroups.length-1]||null)}},{key:"setDisabled",value:function(e){E()(_()(t.prototype),"setDisabled",this).call(this,e);for(var i=0,n=this.dateGroups.length;i<n;i++)this.dateGroups[i].withDisabled(this.disabled)}},{key:"setReadOnly",value:function(e){E()(_()(t.prototype),"setReadOnly",this).call(this,e);for(var i=0,n=this.dateGroups.length;i<n;i++)this.dateGroups[i].withReadOnly(this.readOnly)}},{key:"getInputErrorState",value:function(){return this.inputErrorState}}],[{key:"getVerticalScrollDirection",value:function(e){var t,i={left:e.touches[0].screenX,top:e.touches[0].screenY};return Math.abs(t=i.top-this.lastTouchPosition.top)>10?(this.lastTouchPosition.top=i.top,t>0?1:-1):0}},{key:"emulateFocusOnOverlayActiveElement",value:function(){null!==this.overlayFocusedElement&&this.overlayFocusedElement.setAttribute("data-soft-focused","1")}},{key:"emulateBlurOnOverlayActiveElement",value:function(){null!==this.overlayFocusedElement&&this.overlayFocusedElement.removeAttribute("data-soft-focused")}},{key:"focusNextOverlayElement",value:function(e){if(this.expandedInstance){if(this.emulateBlurOnOverlayActiveElement(),e.shiftKey)switch(this.overlayFocusedElement){case this.overlayHeader:this.overlayFocusedElement=this.timeMinutesColumn;break;case this.timeMinutesColumn:this.overlayFocusedElement=this.timeHoursColumn;break;case this.timeHoursColumn:default:this.overlayFocusedElement=this.overlayHeader}else switch(this.overlayFocusedElement){case this.overlayHeader:this.overlayFocusedElement=this.timeHoursColumn;break;case this.timeHoursColumn:this.overlayFocusedElement=this.timeMinutesColumn;break;case this.timeMinutesColumn:default:this.overlayFocusedElement=this.overlayHeader}this.emulateFocusOnOverlayActiveElement()}}},{key:"handleKeyboardPressButtonOnCurrentFocusedElement",value:function(e,t){if(this.expandedInstance)switch(this.overlayFocusedElement){case this.overlayHeader:switch(t){case Ye.KEY_LEFT:case Ye.KEY_RIGHT:this.incrementDatePart("hours",12)}break;case this.timeHoursColumn:switch(t){case Ye.KEY_UP:this.incrementDatePart("hours",-1);break;case Ye.KEY_DOWN:this.incrementDatePart("hours",1)}break;case this.timeMinutesColumn:switch(t){case Ye.KEY_UP:this.incrementDatePart("minutes",-1);break;case Ye.KEY_DOWN:this.incrementDatePart("minutes",1)}}}},{key:"initOverlay",value:function(e){if(this.expandedInstance&&this.expandedInstance.setExpanded(!1),this.overlayFocusedElement=null,this.timeUtils||(this.timeUtils=Qe.a.createInstanceInNonSingletonModeWithoutInternationalizationSupport()),this.overlay||null===e||(this.overlay=document.createElement("div"),this.overlay.setAttribute("data-role","date-overlay"),this.overlay.setAttribute("data-selection-phase","time"),this.overlayModal=document.createElement("div"),this.overlayModal.className="ui-modal",this.overlayModal.setAttribute("data-transparent","1"),je.isMobile()||this.overlay.appendChild(this.overlayModal),this.overlayHeader=document.createElement("div"),this.overlayHeader.setAttribute("data-component","header"),this.overlay.appendChild(this.overlayHeader),this.overlayHeaderAMButton=document.createElement("div"),this.overlayHeaderAMButton.textContent="AM",this.overlayHeaderAMButton.setAttribute("data-role","button"),this.overlayHeaderAMButton.setAttribute("data-value","0"),this.overlayHeaderPMButton=document.createElement("div"),this.overlayHeaderPMButton.textContent="PM",this.overlayHeaderPMButton.setAttribute("data-role","button"),this.overlayHeaderPMButton.setAttribute("data-value","1"),this.overlayHeader.appendChild(this.overlayHeaderAMButton),this.overlayHeader.appendChild(this.overlayHeaderPMButton),this.timeLayer=document.createElement("div"),this.timeLayer.setAttribute("data-component","time"),this.timeHoursColumn=document.createElement("div"),this.timeHoursColumn.setAttribute("data-role","hours"),this.timeMinutesColumn=document.createElement("div"),this.timeMinutesColumn.setAttribute("data-role","minutes"),Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL&&(this.timeSecondsColumn=document.createElement("div"),this.timeSecondsColumn.setAttribute("data-role","seconds")),this.timeLayer.appendChild(this.timeHoursColumn),this.timeLayer.appendChild(this.timeMinutesColumn),Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL&&this.timeLayer.appendChild(this.timeSecondsColumn),this.overlay.appendChild(this.timeLayer)),this.bodyMouseDownListener||function(e,t){t.bodyMouseDownListener=function(i){var n=i.target||i.srcElement;(n===t.overlayModal||!e.contains(t.overlay,n)&&n!==t.overlay)&&null!==t.expandedInstance&&t.expandedInstance.setExpanded(!1)},t.bodyClickListener=function(i){var n=i.target||i.srcElement;e.contains(t.overlay,n)||t.overlay},t.touchMoveListener=function(i){var n=i.target||i.srcElement;(e.contains(t.overlay,n)||n===t.overlay)&&i.preventDefault()},t.touchStartListener=function(i){var n=i.target||i.srcElement;(e.contains(t.overlay,n)||n===t.overlay)&&(t.lastTouchPosition.left=i.touches[0].pageX,t.lastTouchPosition.top=i.touches[0].pageY)},window.addEventListener("scroll",(function(e){t.expandedInstance&&t.expandedInstance.setExpanded(!1)}),!0),window.addEventListener("resize",(function(e){t.expandedInstance&&t.expandedInstance.setExpanded(!1)}),!0),e(t.timeLayer).on("mousewheel wheel touchmove","[data-role=hours], [data-role=minutes], [data-role=seconds]",(function(e){var i,n=this.getAttribute("data-role");if("mousewheel"===e.type||"wheel"==e.type)i=e.originalEvent.deltaY<0?-1:1;else if(0===(i=t.getVerticalScrollDirection(e.originalEvent)))return;t.incrementDatePart(n,i),e.preventDefault()})),e(t.overlayHeader).on("click","[data-role=button][data-value]",(function(e){switch(~~this.getAttribute("data-value")){case 0:t.localDate.getHours()>=12&&(t.localDate.setHours(t.localDate.getHours()-12),t.paintHours(),t.expandedInstance.setDateValue(t.localDate),lt.getJQuery()(t.expandedInstance.getRootNode()).trigger("input"));break;case 1:t.localDate.getHours()<12&&(t.localDate.setHours(t.localDate.getHours()+12),t.paintHours(),t.expandedInstance.setDateValue(t.localDate),lt.getJQuery()(t.expandedInstance.getRootNode()).trigger("input"))}})),e(t.timeLayer).on("click","[data-role=hours] > div, [data-role=minutes] > div, [data-role=seconds] > div",(function(e){var i;switch(!0){case this.hasAttribute("data-hour"):"hours",i=~~this.getAttribute("data-hour"),t.localDate.setHours(i),t.paintHours();break;case this.hasAttribute("data-minute"):"minutes",i=~~this.getAttribute("data-minute"),t.localDate.setMinutes(i),t.paintMinutes();break;case this.hasAttribute("data-second"):"seconds",i=~~this.getAttribute("data-second"),t.localDate.setSeconds(i),t.paintSeconds()}t.expandedInstance.setDateValue(t.localDate),lt.getJQuery()(t.expandedInstance.getRootNode()).trigger("input")}))}(lt.getJQuery(),this),this.expandedInstance=e||null,this.expandedInstance){document.body.addEventListener("mousedown",this.bodyMouseDownListener,!0),document.body.addEventListener("click",this.bodyClickListener,!0),document.body.addEventListener("touchstart",this.touchStartListener,!0),document.body.addEventListener("touchmove",this.touchMoveListener,{passive:!1}),document.body.appendChild(this.overlay);var i=this.expandedInstance.rootNode.getBoundingClientRect(),n=this.overlay.getBoundingClientRect(),a=Ke.getAnchorPosition(i,n,t.DISTANCE_BETWEEN_OVERLAY_AND_INPUT,["center-bottom","center-top"]);this.overlay.style.top="".concat(a.top,"px"),this.overlay.style.left="".concat(a.left,"px"),je.isMobile()?(screen.height-i.bottom-t.DISTANCE_BETWEEN_OVERLAY_AND_INPUT-n.height-100<0&&"center-top"!==a.mode&&(document.body.offsetHeight>screen.height?(this.overlay.style.top="".concat(~~i.top+~~(i.height/2)-~~(n.width/2),"px"),yt.allBrowsersCompatibleScrollIntoView(this.expandedInstance.rootNode,{block:"center"})):(this.overlay.style.top="".concat(~~(screen.height/2)-~~(n.height/2),"px"),this.overlay.style.left="".concat(~~(screen.width/2)-~~(n.width/2),"px"))),document.body.hasAttribute("data-is-wix-embedded")&&(this.overlay.style.top="".concat(~~a.top,"px"),this.overlay.style.left="".concat(~~(i.left/2),"px"))):(this.overlay.style.top="".concat(a.top,"px"),screen.width-i.left+(i.width-n.width)>0&&(this.overlay.style.left="".concat(i.left+(i.width-n.width),"px"))),this.resetOverlay()}else document.body.removeEventListener("mousedown",this.bodyMouseDownListener,!0),document.body.removeEventListener("click",this.bodyClickListener,!0),document.body.removeEventListener("touchmove",this.touchMoveListener,!0),document.body.removeEventListener("touchstart",this.touchStartListener,!0),this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)}},{key:"incrementDatePart",value:function(e,t){var i=this.localDate.getMinutes(),n=this.localDate.getSeconds(),a=this.localDate.getHours();switch(e){case"hours":this.localDate.setHours(this.localDate.getHours()+t),this.localDate.setMinutes(i),this.localDate.setSeconds(n),this.paintHours();break;case"minutes":this.localDate.setMinutes(this.localDate.getMinutes()+t),this.localDate.setHours(a),this.localDate.setSeconds(n),this.paintMinutes();break;case"seconds":this.localDate.setSeconds(this.localDate.getSeconds()+t),this.localDate.setMinutes(i),this.localDate.setHours(a),this.paintSeconds()}this.expandedInstance.setDateValue(this.localDate),lt.getJQuery()(this.expandedInstance.getRootNode()).trigger("input");var r=this.expandedInstance.expander.querySelector("div");r&&(r.textContent=this.expandedInstance.getValue()),this.expandedInstance.expander.focus()}},{key:"paintHours",value:function(){var e,t=this.expandedInstance.hasDatePart(O.h.AM_PM),i=new Date;this.localDate&&i.setTime(this.localDate.getTime()),i.getHours()<12?(this.overlayHeaderAMButton.setAttribute("data-is-active",""),this.overlayHeaderPMButton.removeAttribute("data-is-active")):(this.overlayHeaderPMButton.setAttribute("data-is-active",""),this.overlayHeaderAMButton.removeAttribute("data-is-active")),i.setHours(i.getHours()-5);for(var n=0;n<11;n++)(e=this.firstTimeHours?document.createElement("div"):this.timeHoursColumn.children.item(n)).setAttribute("data-hour",String(i.getHours())),e.textContent=t?i.getHours()<13?String(i.getHours()):String(i.getHours()-12):String(i.getHours()),5===n&&e.setAttribute("data-is-current",""),this.firstTimeHours&&this.timeHoursColumn.appendChild(e),i.setHours(i.getHours()+1);this.firstTimeHours=!1}},{key:"paintMinutes",value:function(){var e,t=new Date;this.localDate&&t.setTime(this.localDate.getTime()),t.setMinutes(t.getMinutes()-5);for(var i=0;i<11;i++){(e=this.firstTimeMinutes?document.createElement("div"):this.timeMinutesColumn.children.item(i)).setAttribute("data-minute",String(t.getMinutes()));var n=String(t.getMinutes());parseInt(n)<10&&(n="0".concat(n)),e.textContent=n,5===i&&e.setAttribute("data-is-current",""),this.firstTimeMinutes&&this.timeMinutesColumn.appendChild(e),t.setMinutes(t.getMinutes()+1)}this.firstTimeMinutes=!1}},{key:"paintSeconds",value:function(){if(Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL){var e,t=new Date;for(this.localDate&&t.setTime(this.localDate.getTime()),t.setSeconds(t.getSeconds()-5);this.timeSecondsColumn.firstChild;)this.timeSecondsColumn.removeChild(this.timeSecondsColumn.firstChild);for(var i=0;i<11;i++)(e=document.createElement("div")).setAttribute("data-second",String(t.getSeconds())),e.textContent=String(t.getSeconds()),5===i&&e.setAttribute("data-is-current",""),this.timeSecondsColumn.appendChild(e),t.setSeconds(t.getSeconds()+1)}}},{key:"resetOverlay",value:function(){var e;this.localDate=this.expandedInstance.getDateValue()||((e=new Date).setDate(1),e.setMonth(0),e.setFullYear(1970),e),this.expandedInstance.hasDatePart(O.h.AM_PM)?(this.overlayHeader.setAttribute("data-format","12"),this.overlay.setAttribute("time-overlay-data-format","12")):(this.overlayHeader.setAttribute("data-format","24"),this.overlay.setAttribute("time-overlay-data-format","24"));var t=[];(this.expandedInstance.hasDatePart(O.h.HOUR_12)||this.expandedInstance.hasDatePart(O.h.HOUR_24))&&(t.push("has-hours"),this.paintHours()),this.expandedInstance.hasDatePart(O.h.MINUTE)&&(t.push("has-minutes"),this.paintMinutes()),this.expandedInstance.hasDatePart(O.h.SECOND)&&(t.push("has-seconds"),this.paintSeconds()),this.timeLayer.className=t.join(" "),this.timeLayer.setAttribute("data-num-groups",String(t.length)),this.expandedInstance.setDateValue(this.localDate)}}]),t}(k);v()(et,"DISTANCE_BETWEEN_OVERLAY_AND_INPUT",5),v()(et,"overlay",void 0),v()(et,"overlayModal",void 0),v()(et,"overlayHeader",void 0),v()(et,"overlayHeaderAMButton",void 0),v()(et,"overlayHeaderPMButton",void 0),v()(et,"timeLayer",void 0),v()(et,"timeHoursColumn",void 0),v()(et,"timeMinutesColumn",void 0),v()(et,"timeSecondsColumn",void 0),v()(et,"expandedInstance",void 0),v()(et,"bodyMouseDownListener",void 0),v()(et,"bodyClickListener",void 0),v()(et,"touchMoveListener",void 0),v()(et,"touchStartListener",void 0),v()(et,"selectionPhase",void 0),v()(et,"timeUtils",void 0),v()(et,"localDate",void 0),v()(et,"lastTouchPosition",{left:0,top:0}),v()(et,"overlayFocusedElement",null),v()(et,"firstTimeHours",!0),v()(et,"firstTimeMinutes",!0);var tt=function(){function e(){o()(this,e)}return l()(e,null,[{key:"init",value:function(){var t=0,i=0,n="";Object.defineProperty(e,"nextNumber",{get:function(){return t++,i=t},configurable:!1}),Object.defineProperty(e,"nextString",{get:function(){return t++,n=String(t)},configurable:!1}),Object.defineProperty(e,"lastNumber",{get:function(){return i}}),Object.defineProperty(e,"lastString",{get:function(){return n}})}}]),e}();v()(tt,"nextNumber",void 0),v()(tt,"nextString",void 0),v()(tt,"lastNumber",void 0),v()(tt,"lastString",void 0),tt.init();var it=function e(){o()(this,e)};v()(it,"ERR_TOO_FEW_CHOICES_SELECTED",100),v()(it,"ERR_TOO_MANY_CHOICES_SELECTED",101),v()(it,"ERR_TOO_MANY_CHARACTERS",102),v()(it,"ERR_TOO_FEW_CHARACTERS",103),v()(it,"ERR_TOO_MANY_WORDS",104),v()(it,"ERR_TOO_FEW_WORDS",105),v()(it,"ERR_INVALID_EMAIL",106),v()(it,"ERR_NUMBER_TOO_LONG",107),v()(it,"ERR_NUMBER_TOO_SHORT",108),v()(it,"ERR_NUMBER_TOO_BIG",109),v()(it,"ERR_NUMBER_TOO_SMALL",110),v()(it,"ERR_PRICE_TOO_MANY_DECIMALS",111),v()(it,"ERR_INVALID_URL",113),v()(it,"ERR_DATE_TOO_BIG",114),v()(it,"ERR_DATE_TOO_SMALL",115),v()(it,"ERR_TIME_NOT_COMPLETE",116),v()(it,"ERR_INVALID_PHONE_FORMAT",117),v()(it,"ERR_INTEGER_VALUE_EXPECTED",118),v()(it,"ERR_NEGATIVE_PRICE",119),v()(it,"ERR_NUMBER_EXPECTED",120),v()(it,"ERR_FILE_UPLOAD",121),v()(it,"ERR_CONTROL_VALUES_DONT_MATCH",122),v()(it,"ERR_MAX_ACCEPTED_VALUE_EXCEEDED",123),v()(it,"ERR_INVALID_DATE",124),v()(it,"ERR_INVALID_NUMBER",125),v()(it,"ERR_NOT_NUMERIC",126);var nt=function(){function e(){o()(this,e),v()(this,"allowedUserFileExtensions",void 0),v()(this,"forbiddenUserFileExtensions",void 0),v()(this,"ui",void 0),v()(this,"resourceManager",void 0)}return l()(e,[{key:"getAllowedUserFileExtensions",value:function(){return this.allowedUserFileExtensions}},{key:"getForbiddenUserFileExtensions",value:function(){return this.forbiddenUserFileExtensions}},{key:"withAllowedUserFileExtensions",value:function(e){return this.allowedUserFileExtensions=(e||[]).sort(),this}},{key:"withForbiddenUserFileExtensions",value:function(e){return this.forbiddenUserFileExtensions=(e||[]).sort(),this}},{key:"withUI",value:function(e){return this.ui=e,this}},{key:"withResourceManager",value:function(e){return this.resourceManager=e,this}},{key:"createExtensionDialog",value:function(e,t,i,n){return function(a,r){return r.Deferred((function(r){a.resourceManager.get(t).then((function(t){var o=a.ui.createDialog(e,[{type:be.c.OK,callback:function(){i(o)}},{type:be.c.CANCEL,callback:function(){n(o)}}],{width:"500px",onCloseButtonClick:function(){n(o)}});o.body.innerHTML=t,r.resolve(o)}))})).promise()}(this,lt.getJQuery())}},{key:"isValidExtensionName",value:function(e){return/^[a-z0-9\-]{1,10}$/.test(e)}},{key:"canAddFileExtension",value:function(e){return!(this.forbiddenUserFileExtensions.indexOf(e)>-1)&&!(this.allowedUserFileExtensions.indexOf(e)>-1)}},{key:"addUserFileExtension",value:function(){return function(e,t){return e.Deferred((function(i){var n=function(t,i){var n=document.createElement("span");n.setAttribute("data-role","error"),n.textContent=i,e(t.body).find("input[name=extension]").after(n)},a=function(t){e(t.body).find("span[data-role=error]").remove()};t.createExtensionDialog("Add user file extension","/modules/Typescript/Form/resources/add-allowed-file-extension-dialog.html",(function(r){a(r);var o=e(r.body).find("input[name=extension]").val().toLowerCase();o?t.isValidExtensionName(o)?t.canAddFileExtension(o)?e.post("/modules/FormEditor/ajax-user-extension-service.php",{do:"add-user-extension",extension:o}).then((function(){r.close(),t.allowedUserFileExtensions.push(o),t.allowedUserFileExtensions.sort(),i.resolve(o)})).fail((function(){t.ui.alert("Error adding extension",'Failed to add extension "'.concat(o,'" on server!'))})):n(r,"".concat(JSON.stringify(o)," extension cannot be added. Check if the extension is not already added in your supported extensions list, and if the extension is supported")):n(r,"".concat(JSON.stringify(o)," is not a supported file extension!")):n(r,"Please specify a non-empty file extension!")}),(function(e){e.close(),i.reject(new Error("User aborted operation"))})).then((function(t){t.body.setAttribute("data-dialog-type","add-file-extension"),e(t.body).on("input","input[name=extension]",(function(){a(t)}))}))})).promise()}(lt.getJQuery(),this)}}],[{key:"getInstance",value:function(){return window.UserFileExtensionsService?window.UserFileExtensionsService.getInstance():void 0===this.instance?this.instance=new e:this.instance}}]),e}();v()(nt,"instance",void 0);var at=function(){function e(){o()(this,e),v()(this,"rootNode",void 0),v()(this,"fileNameContainer",void 0),v()(this,"fileSizeContainer",void 0),v()(this,"progressBarOuter",void 0),v()(this,"progressBarInner",void 0),v()(this,"removeButton",void 0),v()(this,"upload",void 0),v()(this,"uploadDetails",void 0),v()(this,"errorNode",void 0),v()(this,"fileUtils",void 0),v()(this,"fileSize",void 0),v()(this,"fileData",void 0),v()(this,"error",null),this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","upload"),this.fileNameContainer=document.createElement("div"),this.fileNameContainer.setAttribute("data-role","name"),this.rootNode.appendChild(this.fileNameContainer),this.fileSizeContainer=document.createElement("span"),this.fileSizeContainer.setAttribute("data-role","size"),this.rootNode.appendChild(this.fileSizeContainer),this.progressBarOuter=document.createElement("div"),this.progressBarOuter.setAttribute("data-role","progress-bar"),this.progressBarInner=document.createElement("div"),this.progressBarInner.setAttribute("data-role","progress"),this.progressBarOuter.appendChild(this.progressBarInner),this.removeButton=document.createElement("div"),this.removeButton.setAttribute("data-role","button-remove"),this.removeButton.setAttribute("aria-labelledby","file-control-remove-button-acc"),this.rootNode.appendChild(this.removeButton)}return l()(e,[{key:"withFileUtils",value:function(e){return this.fileUtils=e,this}},{key:"updateAccessibilityAttributes",value:function(e,t){if(this.rootNode.setAttribute("aria-labelledby","fileupload-name-".concat(e,"-acc fileupload-size-").concat(e,"-acc file-control-error-").concat(e,"-acc")),this.rootNode.setAttribute("index",e),t){var i=document.createElement("span");i.setAttribute("id","file-control-remove-button-acc"),i.appendChild(document.createTextNode("Remove Button")),i.style.display="none",this.removeButton.appendChild(i),this.rootNode.setAttribute("tabindex","0"),this.removeButton.setAttribute("tabindex","0")}else this.rootNode.removeAttribute("tabindex"),this.removeButton.removeAttribute("tabindex"),this.removeButton.textContent="";this.fileNameContainer.setAttribute("id","fileupload-name-".concat(e,"-acc")),this.fileSizeContainer.setAttribute("id","fileupload-size-".concat(e,"-acc")),this.getError()&&this.errorNode.setAttribute("id","file-control-error-".concat(e,"-acc"))}},{key:"withError",value:function(e){return this.error=e,null===e?(this.errorNode&&(this.errorNode.parentNode&&this.errorNode.removeChild(this.errorNode),this.errorNode=void 0),this.rootNode.removeAttribute("data-has-error")):(this.errorNode||(this.errorNode=document.createElement("div"),this.errorNode.setAttribute("data-role","error")),this.errorNode.textContent=String(e||"Error").replace(/^Error\: /g,""),this.rootNode.appendChild(this.errorNode),this.rootNode.setAttribute("data-has-error","")),this}},{key:"getError",value:function(){return null===this.error?null:String(this.error).replace(/^Error: /,"")}},{key:"withName",value:function(e){return this.fileNameContainer.textContent=String(e||"File"),this.uploadDetails=this.uploadDetails||{name:"",progress:0,size:0},this.uploadDetails.name=e,this}},{key:"getName",value:function(){return this.uploadDetails?this.uploadDetails.name:null}},{key:"withData",value:function(e){return this.fileData=e,this}},{key:"getData",value:function(){return this.fileData}},{key:"withUrlLinkToDownload",value:function(e,t){if(e&&t&&null!==t.getTable("session").getRowAt(0)[0]){var i=document.createElement("a");i.setAttribute("class","download-url"),i.href=e,i.textContent=this.getName()||"File",i.target="_blank",this.fileNameContainer.textContent="",this.fileNameContainer.appendChild(i)}return this}},{key:"withProgress",value:function(e){return(e=~~e)<0&&(e=0),e>100&&(e=100),this.progressBarInner.style.width="".concat(e,"%"),this.uploadDetails=this.uploadDetails||{name:"",progress:0,size:0},this.uploadDetails.progress=e,this}},{key:"withUpload",value:function(e){var t=this;return this.upload=e||null,this.upload?(this.withFileSize(this.upload.getSize()).withName(this.upload.getStoredFileNameOnServer()||this.upload.getName()).withProgress(0),this.upload.on("start",(function(){t.withError(null),t.progressBarOuter.parentNode||t.rootNode.appendChild(t.progressBarOuter)})),this.upload.on("progress",(function(e){return t.withProgress(e)})),this.upload.on("success",(function(){t.progressBarOuter.parentNode&&t.progressBarOuter.parentNode.removeChild(t.progressBarOuter),t.withName(t.upload.getStoredFileNameOnServer()||t.upload.getName())})),this.upload.on("error",(function(e){return t.withError(e)})),this.upload.on("got-file-data",(function(e){return t.withData(e)}))):this.uploadDetails&&this.withFileSize(this.uploadDetails.size||null).withName(this.uploadDetails.name).withProgress(100),this}},{key:"getUploadStatus",value:function(){return this.upload?this.upload.getState():O.P.SUCCESS}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"getSize",value:function(){return this.upload?this.upload.getSize():null}},{key:"cancel",value:function(){return function(e,t){return t.Deferred((function(t){e.upload?e.upload.remove().always((function(){t.resolve(!0)})):t.resolve(!0)})).promise()}(this,lt.getJQuery())}},{key:"withFileSize",value:function(e){return this.fileSize=Math.max(0,~~e),this.fileUtils&&null!==this.fileSize&&void 0!==this.fileSize&&0<this.fileSize?this.fileSizeContainer.textContent="(".concat(this.fileUtils.convertFileSizeToString(this.fileSize),")"):this.fileSizeContainer.textContent="",this}},{key:"getTransferType",value:function(){return O.r.UPLOAD}},{key:"getHash",value:function(){return null}}]),e}(),rt=function(e){function t(e){var i;return o()(this,t),i=d()(this,_()(t).call(this)),v()(h()(i),"downloadURL",void 0),v()(h()(i),"submissionId",void 0),v()(h()(i),"uploaderInstanceIndex",void 0),v()(h()(i),"sessionId",void 0),v()(h()(i),"uploadsService",void 0),v()(h()(i),"fileControl",void 0),i.fileControl=e,i.rootNode.setAttribute("data-role","download"),i}return f()(t,e),l()(t,[{key:"withDownloadURL",value:function(e){return this.downloadURL=e,this}},{key:"withSubmissionId",value:function(e){return this.submissionId=e,this}},{key:"withUploaderInstanceIndex",value:function(e){return this.uploaderInstanceIndex=e,this}},{key:"withSessionId",value:function(e){return this.sessionId=e,this}},{key:"withUploadsService",value:function(e){return this.uploadsService=e,this}},{key:"getTransferType",value:function(){return O.r.DOWNLOAD}},{key:"getDownloadURL",value:function(){return this.downloadURL}},{key:"cancel",value:function(){var e=this;return this.uploadsService.removeSubmittedUpload(this.sessionId,this.submissionId,this.uploaderInstanceIndex).then((function(){e.fileControl.setDownloadInfo(null)}))}},{key:"getUploadStatus",value:function(){return O.P.SUCCESS}},{key:"getHash",value:function(){return this.downloadURL&&(/fileid=([a-f\d]+)/i.exec(this.downloadURL)||[])[1]||null}}]),t}(at),ot=function(e){function t(){var e;return o()(this,t),e=d()(this,_()(t).call(this,lt.ELEMENT_TYPE_FILE)),v()(h()(e),"instanceId",void 0),v()(h()(e),"files",[]),v()(h()(e),"uploadOverlay",void 0),v()(h()(e),"uploadInput",void 0),v()(h()(e),"placeholder",void 0),v()(h()(e),"control",void 0),v()(h()(e),"multiple",void 0),v()(h()(e),"minUploadSizeInBytes",null),v()(h()(e),"maxUploadSizeInBytes",null),v()(h()(e),"uploadsContainer",void 0),v()(h()(e),"dropFiles",void 0),v()(h()(e),"dropFilesThrottler",void 0),v()(h()(e),"allowedExtensions",null),v()(h()(e),"forbiddenExtensions",null),v()(h()(e),"abortAllUploadsButton",void 0),v()(h()(e),"hasAccessibilityEnabled",void 0),v()(h()(e),"fileUtils",void 0),e.instanceId=t.INSTANCE_ID,t.INSTANCE_ID++,e.uploadOverlay=document.createElement("div"),e.uploadOverlay.setAttribute("data-role","upload-overlay"),e.uploadInput=document.createElement("input"),e.uploadInput.setAttribute("type","file"),e.placeholder=document.createElement("div"),e.placeholder.setAttribute("data-role","placeholder"),e.placeholder.textContent="Choose files or drag here",e.placeholder.setAttribute("data-i18n-text","textdef_216"),e.uploadsContainer=document.createElement("div"),e.uploadsContainer.setAttribute("data-role","files-container"),e.rootNode.appendChild(e.uploadsContainer),e.abortAllUploadsButton=document.createElement("div"),e.abortAllUploadsButton.setAttribute("data-role","abort-all-uploads"),e.abortAllUploadsButton.textContent="Delete all uploads",e.abortAllUploadsButton.setAttribute("data-i18n-text","textdef_217"),e.rootNode.appendChild(e.abortAllUploadsButton),e.rootNode.appendChild(e.uploadOverlay),e.uploadOverlay.appendChild(e.uploadInput),e.uploadOverlay.appendChild(e.placeholder),e.hasAccessibilityEnabled?e.uploadOverlay.setAttribute("tabindex","0"):e.uploadOverlay.removeAttribute("tabindex"),e.rootNode.removeAttribute("tabindex"),e.onUploadNumberChanged(),e.init(),e}return f()(t,e),l()(t,[{key:"withControl",value:function(e){return this.control=e,this.updateAccessibilityAttributes(),this}},{key:"setAccessibility",value:function(e){this.hasAccessibilityEnabled=e}},{key:"getFilesList",value:function(){for(var e=[],t=0,i=this.files.length;t<i;t++)this.files[t].getUploadStatus()===O.P.SUCCESS&&e.push({id:0,name:this.files[t].getName(),mimeType:this.control.getForm().getEngine().getUploadsService().getMimeType(this.files[t].getName()),size:this.files[t].getSize(),hash:this.files[t].getHash(),data:this.files[t].getData()||""});return e.length?e:null}},{key:"getValue",value:function(){for(var e=[],t=0,i=this.getFilesList()||[],n=i.length;t<n;t++)e.push(i[t].name.indexOf(" ")>-1?'"'.concat(i[t].name,'"'):i[t].name);return e.length?e.join(" "):""}},{key:"setValue",value:function(e){var t,i=[],n=!1,a="";if(""!==(e=String(e||""))){for(var r=0,o=e.length;r<o;r++)switch(t=e.charAt(r)){case'"':if(!(n=!n)){if(""===a)throw new Error("Invalid value: Empty file name not allowed!");i.push(a),a=""}break;case" ":if(n)a+=" ";else{if(""===a)throw new Error("Invalid value: Empty file name not allowed!");i.push(a),a=""}break;default:a=a.concat(t)}""!==a&&i.push(a)}if(i.length>1&&!this.isMultiple())throw new Error("Too many files!");!function(e,t){e.when.apply(e,function(){for(var e=[],i=0,n=t.files.length;i<n;i++)e.push(t.files[i].cancel());return e||!0}()).then((function(){for(t.files=[];t.uploadsContainer.firstChild;)t.uploadsContainer.removeChild(t.uploadsContainer.firstChild);for(var e,n=0,a=i.length;n<a;n++)(e=new at).updateAccessibilityAttributes(tt.nextString,this.hasAccessibilityEnabled),e.withName(i[n]).withFileUtils(this.fileUtils),t.files.push(e),t.uploadsContainer.appendChild(e.getRootNode());t.onUploadNumberChanged()}))}(lt.getJQuery(),this)}},{key:"onUploadNumberChanged",value:function(){var e=this.files.length;this.rootNode.setAttribute("data-num-files",String(e)),e<t.MIN_NUMBER_OF_CONTROLS_IN_ORDER_TO_DISPLAY_THE_ABORT_ALL_DOWNLOADS_BUTTON?this.rootNode.removeAttribute("data-has-abort-all-uploads"):this.rootNode.setAttribute("data-has-abort-all-uploads",""),yt.refreshFrameHeightOnWix()}},{key:"addFile",value:function(e){var t=this;if(this.control&&this.control.isAttached())if(this.isMultiple()){var i=new at;this.files.push(i),i.withName(e.file.name).withFileUtils(this.fileUtils),i.updateAccessibilityAttributes(tt.nextString,this.hasAccessibilityEnabled),this.uploadsContainer.appendChild(i.getRootNode()),i.withUpload(this.control.getForm().getEngine().getUploadsService().addToQOS(this.control.getForm().getEngine().getUploadsService().createUpload(e.file).withUploaderInstanceIndex(this.instanceId).withControlId(this.control.getId()).withArchivePacking(this.isMultiple()).on("success",(function(){t.onChange()})))),this.onUploadNumberChanged()}else(function(e,t){return 0===t.files.length?e.Deferred((function(e){e.resolve(!0)})).promise():e.Deferred((function(e){t.files[0].cancel().then((function(){t.uploadsContainer.removeChild(t.files[0].getRootNode()),t.files.splice(0,1),t.onUploadNumberChanged(),e.resolve(!0)}))})).promise()})(lt.getJQuery(),this).then((function(){var i=new at;t.files.push(i),i.withName(e.file.name).withFileUtils(t.fileUtils),i.updateAccessibilityAttributes(tt.nextString,t.hasAccessibilityEnabled),t.uploadsContainer.appendChild(i.getRootNode()),i.withUpload(t.control.getForm().getEngine().getUploadsService().addToQOS(t.control.getForm().getEngine().getUploadsService().createUpload(e.file).withUploaderInstanceIndex(t.instanceId).withControlId(t.control.getId()).withArchivePacking(t.isMultiple()).on("success",(function(){t.onChange()})))),t.onUploadNumberChanged()}))}},{key:"removeUpload",value:function(e){for(var t=this,i=null,n=0,a=this.files.length;n<a;n++)if(this.files[n].getRootNode()===e){i=this.files[n];break}null!==i&&i.cancel().then((function(){t.uploadsContainer.removeChild(e),t.files.splice(t.files.indexOf(i),1),t.onUploadNumberChanged(),t.onChange()}))}},{key:"addFilesList",value:function(e){if(e.length){var t=[];if(!this.isMultiple()&&e.length>1)t.push("Only a single file is accepted!");else for(var i=0,n=e.length;i<n;i++)switch(!0){case null!==this.getMinUploadSizeInBytes()&&e[i].file.size<this.getMinUploadSizeInBytes():t.push(this.control.getForm().getEngine().getI18n().translateText("textdef_234",e[i].file.name,this.control.getForm().getEngine().getFileUtils().convertFileSizeToString(this.getMinUploadSizeInBytes()))||'File "'.concat(e[i].file.name,'" is too small, ')+"min accepted file size is ".concat(this.control.getForm().getEngine().getFileUtils().convertFileSizeToString(this.getMinUploadSizeInBytes())));break;case null!==this.getMaxUploadSizeInBytes()&&e[i].file.size>this.getMaxUploadSizeInBytes():t.push(this.control.getForm().getEngine().getI18n().translateText("textdef_226",e[i].file.name,this.control.getForm().getEngine().getFileUtils().convertFileSizeToString(this.getMaxUploadSizeInBytes()))||'File "'.concat(e[i].file.name,'" is too large, ')+"max accepted file size is ".concat(this.control.getForm().getEngine().getFileUtils().convertFileSizeToString(this.getMaxUploadSizeInBytes())));break;case!this.isFileNamePermitted(e[i].file.name):t.push(this.control.getForm().getEngine().getI18n().translateText("textdef_227")||'File "'.concat(e[i].file.name,'" is not allowed'))}if(t.length>0){if(t.length>3){var a="+ ".concat(t.length-3," more errors...");(t=t.slice(0,3)).push(a)}this.control.getForm().getEngine().getLoader().getUI().alert("Error",t.join("\n"))}else for(var r=0,o=e.length;r<o;r++)this.addFile(e[r])}}},{key:"handleDragEnter",value:function(){console.warn("drag enter")}},{key:"handleDragLeave",value:function(){console.warn("drag leave")}},{key:"extractFiles",value:function(e){for(var t=[],i=0,n=e.length;i<n;i++)(""!==e[i].type||e[i].size)&&t.push({path:"",file:e[i]});return t}},{key:"handleDropEvent",value:function(e){this.dropFiles=[];var t=this,i=function e(i,n){if(i.isFile)i.file((function(e){t.dropFiles.push({path:n,file:e}),t.dropFilesThrottler()}));else if(i.isDirectory){i.createReader().readEntries((function(t){for(var a=0;a<t.length;a++)e(t[a],"".concat(n).concat(i.name,"/"))}))}},n=e.dataTransfer.items;if("undefined"!==typeof n)for(var a=0;a<n.length;a++){if(!n[a].webkitGetAsEntry)return;var r=n[a].webkitGetAsEntry();r&&i(r,"")}else t.addFilesList(t.extractFiles(e.dataTransfer.files))}},{key:"init",value:function(){!function(e,t){e.uploadInput.addEventListener("change",(function(t){e.addFilesList(e.extractFiles(e.uploadInput.files)),setTimeout((function(){e.uploadInput.value=null}),0)}),!0),t(e.uploadsContainer).on("click","> div[data-role=upload] > [data-role=button-remove], > div[data-role=download] > [data-role=button-remove]",(function(i){t(this).closest("[data-role=upload], [data-role=download]").each((function(){e.removeUpload(this)}))})),t(e.abortAllUploadsButton).on("click",(function(){e.abortAllFiles()})),e.uploadInput.addEventListener("dragenter",(function(){e.handleDragEnter()}),!0),e.uploadInput.addEventListener("dragleave",(function(){e.handleDragLeave()}),!0),e.uploadInput.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}),!0),e.uploadInput.addEventListener("drop",(function(t){e.handleDropEvent(t),t.preventDefault()}),!0),t(document).on({dragover:function(){return!1},drop:function(){return!1}}),t(e.uploadInput).on("focus",(function(){t(e.rootNode).attr("data-file-tab-focus-state","1")})).on("blur",(function(){t(e.rootNode).removeAttr("data-file-tab-focus-state")})),e.dropFilesThrottler=T.a.create((function(){e.addDroppedFiles()}),500)}(this,lt.getJQuery())}},{key:"addDroppedFiles",value:function(){this.addFilesList(this.dropFiles),this.dropFiles=void 0}},{key:"isMultiple",value:function(){return!!this.multiple}},{key:"withMultiple",value:function(e){return this.multiple=!!e,this.multiple?(this.rootNode.setAttribute("data-is-multiple",""),this.uploadInput.setAttribute("multiple","")):(this.rootNode.removeAttribute("data-is-multiple"),this.uploadInput.removeAttribute("multiple")),this}},{key:"withMinUploadSizeInBytes",value:function(e){return this.minUploadSizeInBytes=e,this}},{key:"getMinUploadSizeInBytes",value:function(){return this.minUploadSizeInBytes}},{key:"withMaxUploadSizeInBytes",value:function(e){return this.maxUploadSizeInBytes=e,this}},{key:"withAllowedFileExtensions",value:function(e){return this.allowedExtensions=e&&e.length?e:null,this}},{key:"withForbiddenFileExtensions",value:function(e){return this.forbiddenExtensions=e&&e.length?e:null,this}},{key:"getMaxUploadSizeInBytes",value:function(){return this.maxUploadSizeInBytes}},{key:"onChange",value:function(){lt.getJQuery()(this.rootNode).trigger("change")}},{key:"isFileNamePermitted",value:function(e){if(!e)return!1;if("string"!==typeof e)return!1;var t=((/\.([^\.]+)$/.exec(e)||[])[1]||"").toLowerCase();return""!==t&&(!(3>t.length&&"ai"!==t)&&(!(nt.getInstance().getForbiddenUserFileExtensions().indexOf(t)>-1)&&(null!==this.allowedExtensions?this.allowedExtensions.indexOf(t)>-1:null===this.forbiddenExtensions||-1===this.forbiddenExtensions.indexOf(t))))}},{key:"withFileUtils",value:function(e){return this.fileUtils=e,this}},{key:"abortAllFiles",value:function(){return function(e,t){for(var i=[],n=0,a=t.files.length;n<a;n++)i.push(t.files[n].cancel());return e.when.apply(t,i).then((function(){for(t.files=[];t.uploadsContainer.firstChild;)t.uploadsContainer.removeChild(t.uploadsContainer.firstChild);t.onUploadNumberChanged(),t.onChange()}))}(lt.getJQuery(),this)}},{key:"setDownloadInfo",value:function(e){for(var t=0,i=this.files.length;t<i;t++)if(this.files[t].getTransferType()===O.r.UPLOAD){this.uploadsContainer.removeChild(this.files[t].getRootNode()),this.files.slice(t,1);break}if(null!==e){for(var n=new rt(this),a=0,r=this.files.length;a<r;a++)if(this.files[a].getDownloadURL()===e.url)return;this.files.push(n),n.withFileUtils(this.fileUtils).withName(e.name).withFileSize(e.size).withDownloadURL(e.url).withUrlLinkToDownload(e.url,this.control.getForm().getEngine().getLoader().getRules().getDatabase()).withProgress(100).withSubmissionId(this.control.getForm().getEngine().getLoader().getLoaderDependency(O.x.SUBMISSION_ID)).withUploaderInstanceIndex(this.instanceId).withSessionId(this.control.getForm().getEngine().getLoader().getLoaderDependency(O.x.SESSION_ID)).withUploadsService(this.control.getForm().getEngine().getUploadsService()),this.uploadsContainer.appendChild(n.getRootNode()),this.rootNode.setAttribute("data-is-download","")}else this.rootNode.removeAttribute("data-is-download");this.onUploadNumberChanged()}},{key:"getDownloadInfo",value:function(){for(var e=0,t=this.files.length;e<t;e++)if(this.files[e].getTransferType()===O.r.UPLOAD)return{url:this.files[e].getDownloadURL(),name:this.files[e].getName(),size:this.files[e].getSize()};return null}},{key:"withAllowDirectoryUpload",value:function(e){return e?""===ie.meetsRequirements("* * * firefox *")?this.uploadInput.setAttribute("allowdirs",""):""!==ie.meetsRequirements("android * * chrome *")&&this.uploadInput.setAttribute("webkitdirectory",""):""===ie.meetsRequirements("* * * firefox *")?this.uploadInput.removeAttribute("allowdirs"):this.uploadInput.removeAttribute("webkitdirectory"),this}},{key:"getErrors",value:function(){for(var e,t=[],i={},n=0,a=this.files.length;n<a;n++)null!==(e=this.files[n].getError())&&void 0===i[e]&&(t.push({code:it.ERR_FILE_UPLOAD,message:e}),i[e]="1");return t}},{key:"updateAccessibilityAttributes",value:function(){var e=this.control.getHash();this.uploadOverlay.setAttribute("aria-labelledby","file-placeholder-".concat(e,"-acc")),this.placeholder.setAttribute("id","file-placeholder-".concat(e,"-acc"))}},{key:"clearFiles",value:function(){!function(e,t){t(e.uploadsContainer).find("[data-role=upload], [data-role=download]").each((function(){e.removeUpload(this)}))}(this,lt.getJQuery())}}]),t}(k);v()(ot,"MIN_NUMBER_OF_CONTROLS_IN_ORDER_TO_DISPLAY_THE_ABORT_ALL_DOWNLOADS_BUTTON",6),v()(ot,"INSTANCE_ID",1);var st=function(e){function t(){var e;return o()(this,t),e=d()(this,_()(t).call(this,lt.ELEMENT_TYPE_STAR_RATING)),v()(h()(e),"value",0),v()(h()(e),"minValue",0),v()(h()(e),"maxValue",10),v()(h()(e),"stars",[]),v()(h()(e),"starShapeType","stars"),v()(h()(e),"hash",void 0),e.withMaxValue(e.maxValue),e.setValue(e.value),e.init(),e.rootNode.removeAttribute("tabindex"),e}return f()(t,e),l()(t,[{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){if((e=~~e)<this.minValue)throw new Error("Illegal value: Expected values >= ".concat(this.minValue));if(e>this.maxValue)throw new Error("Illegal value: Expected values <= ".concat(this.maxValue));this.value=e;for(var t=0,i=this.stars.length;t<i;t++){t+1<=this.value?this.stars[t].setAttribute("data-is-checked","1"):this.stars[t].removeAttribute("data-is-checked");var n=this.rootNode.querySelector("span[id='starrating-".concat(this.hash,"-").concat(t,"']"));n&&(n.textContent="".concat(t+1," of ").concat(this.maxValue)),this.stars[t].removeAttribute("aria-label")}var a=this.rootNode.querySelector("span[id='starrating-".concat(this.hash,"-").concat(this.value-1,"']"));a&&(a.setAttribute("role","alert"),a.textContent="Selected ".concat(this.value," of ").concat(this.maxValue));var r=this.value-1;this.stars[r]&&this.stars[r].setAttribute("aria-label","Selected ".concat(this.value," of ").concat(this.maxValue))}},{key:"getMinValue",value:function(){return this.minValue}},{key:"withMinValue",value:function(e){if((e=~~e)<0)throw new Error("Invalid argument: Min value should be >= 0");if(e>this.maxValue)throw new Error("Invalid argument: Min value should not be greater than maxValue");return this.minValue=e,this}},{key:"getMaxValue",value:function(){return this.maxValue}},{key:"withHash",value:function(e){return this.hash=e,this}},{key:"withMaxValue",value:function(e){var t,i;if((e=~~e)<this.minValue)throw new Error("Invalid argument: Max value should be >= MinValue");for(this.maxValue=e,t=this.stars.length;t!==this.maxValue;)t>this.maxValue?(t--,this.rootNode.removeChild(this.stars[t]),this.stars.splice(t,1)):(t++,(i=document.createElement("div")).setAttribute("data-role","star"),i.setAttribute("data-star-index",String(t)),i.tabIndex=0,this.rootNode.appendChild(i),this.stars.push(i));return this.value>this.maxValue&&this.setValue(this.maxValue),this.onAccessibilitySettingsChanged(),this}},{key:"onAccessibilitySettingsChanged",value:function(){for(var e=0,t=this.stars.length;e<t;e++)if(this.hash){var i=document.createElement("span");i.setAttribute("id","starrating-".concat(this.hash,"-").concat(e)),i.appendChild(document.createTextNode("".concat(String(e+1)," of ").concat(this.maxValue))),i.style.display="none",this.stars[e].appendChild(i),this.stars[e].setAttribute("aria-labelledby","starrating-".concat(this.hash,"-").concat(e))}else this.stars[e].textContent=""}},{key:"init",value:function(){!function(e,t,i){e.rootNode.setAttribute("data-star-shape-type",e.starShapeType),Object.defineProperty(i,"value",{get:function(){return e.getValue()},set:function(t){e.setValue(t)}}),Object.defineProperty(i,"minValue",{get:function(){return e.getMinValue()},set:function(t){e.withMinValue(t)}}),Object.defineProperty(i,"maxValue",{get:function(){return e.getMaxValue()},set:function(t){e.withMaxValue(t)}}),Object.defineProperty(i,"starShapeType",{get:function(){return e.getStarShapeType()},set:function(t){e.withStarShapeType(t)}}),t(i).on("click","div[data-role=star]",(function(n){if(!e.isReadOnly()){var a=~~t(this).attr("data-star-index");e.setValue(a),t(i).trigger("input")}})),t(i).on("mouseover","div[data-role=star]",(function(t){if(!e.isReadOnly())for(var i=!0,n=0,a=e.stars.length;n<a;n++)i?e.stars[n].setAttribute("data-is-hover","1"):e.stars[n].removeAttribute("data-is-hover"),e.stars[n]===this&&(i=!1)})),t(i).on("mouseout","div[data-role=star]",(function(t){if(!e.isReadOnly())for(var i=0,n=e.stars.length;i<n;i++)e.stars[i].removeAttribute("data-is-hover")})).on("focus","div[data-role=star]",(function(){t(this).attr("data-rating-tab-focus-state","1")})).on("blur","div[data-role=star]",(function(){t(this).removeAttr("data-rating-tab-focus-state")}))}(this,lt.getJQuery(),this.rootNode)}},{key:"withStarShapeType",value:function(e){switch(e){case"adults":case"children":case"stars":this.starShapeType=e;break;default:this.starShapeType="stars",console.warn("UIStarRating: Invalid star shape type: ".concat(JSON.stringify(e)))}return this.rootNode.setAttribute("data-star-shape-type",this.starShapeType),this}},{key:"getStarShapeType",value:function(){return this.starShapeType}}]),t}(k),lt=function(){function e(){o()(this,e)}return l()(e,null,[{key:"createElement",value:function(t,i){switch(t){case e.ELEMENT_TYPE_TAGS:return new Be(i);case e.ELEMENT_TYPE_TAGS_LIST:return new He(i);case e.ELEMENT_TYPE_SINGLE_TAGS_LIST:return new We(i);case e.ELEMENT_TYPE_SEARCHABLE_DROPDOWN:return""===ie.meetsRequirements("* * desktop * *")?new ze:new qe;case e.ELEMENT_TYPE_DROPDOWN:return new qe;case e.ELEMENT_TYPE_COLOR:return new Xe;case e.ELEMENT_TYPE_DATE:return new Je;case e.ELEMENT_TYPE_TIME:return new et;case e.ELEMENT_TYPE_FILE:return new ot;case e.ELEMENT_TYPE_STAR_RATING:return new st;default:throw new Error("Unrecognized UI element type: ".concat(JSON.stringify(t)))}}},{key:"withJQuery",value:function(t){e.jq=t}},{key:"getJQuery",value:function(){return window.UI.jq}},{key:"withI18n",value:function(t){e.i18n=t}},{key:"getI18n",value:function(){return e.i18n}},{key:"withResourceManager",value:function(e){this.resourceManager=e}},{key:"getResourceManager",value:function(){return this.resourceManager}},{key:"upgradeDOMNodeFromForm",value:function(t){e.jq(t).find("select").each((function(){var t=e.createElement(e.ELEMENT_TYPE_DROPDOWN),i=this.options;t.setAttribute("data-role","i123-input");for(var n=0,a=i.length;n<a;n++)t.add(i[n].cloneNode(!0));this.parentNode.insertBefore(t.getRootNode(),this),this.parentNode.removeChild(this);for(var r=t.getRootNode().querySelector("select"),o=0,s=this.attributes.length;o<s;o++)r.setAttribute(this.attributes[o].name,this.attributes[o].value);r.setAttribute("data-secondary","")}))}}]),e}();function ut(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}v()(lt,"ELEMENT_TYPE_SEARCHABLE_DROPDOWN","searchable-dropdown"),v()(lt,"ELEMENT_TYPE_DROPDOWN","dropdown"),v()(lt,"ELEMENT_TYPE_COLOR","color"),v()(lt,"ELEMENT_TYPE_DATE","date"),v()(lt,"ELEMENT_TYPE_TIME","time"),v()(lt,"ELEMENT_TYPE_FILE","file"),v()(lt,"ELEMENT_TYPE_STAR_RATING","star-rating"),v()(lt,"ELEMENT_TYPE_TAGS","tags"),v()(lt,"ELEMENT_TYPE_TAGS_LIST","tags-list"),v()(lt,"ELEMENT_TYPE_SINGLE_TAGS_LIST","single-tags-list"),v()(lt,"ELEMENT_TYPE_TAG","tag"),v()(lt,"ELEMENT_TYPE_COLLECTION",[lt.ELEMENT_TYPE_SEARCHABLE_DROPDOWN,lt.ELEMENT_TYPE_DROPDOWN,lt.ELEMENT_TYPE_COLOR,lt.ELEMENT_TYPE_DATE,lt.ELEMENT_TYPE_TIME,lt.ELEMENT_TYPE_FILE,lt.ELEMENT_TYPE_STAR_RATING,lt.ELEMENT_TYPE_TAGS,lt.ELEMENT_TYPE_TAGS_LIST,lt.ELEMENT_TYPE_SINGLE_TAGS_LIST,lt.ELEMENT_TYPE_TAG]),v()(lt,"jq",void 0),v()(lt,"i18n",void 0),v()(lt,"resourceManager",void 0);var dt=function(){function e(t){o()(this,e),v()(this,"CONFIGURATION",void 0),v()(this,"rootNode",void 0),v()(this,"toWhoComponent",void 0),v()(this,"toWhoEmailComponent",void 0),v()(this,"i18n",void 0),v()(this,"recipientEmailValidator",void 0),v()(this,"setTagsLimit",void 0),v()(this,"triggerRecipientPaywall",void 0),v()(this,"onSendToFocus",void 0),v()(this,"onSendToVariableOpen",void 0),v()(this,"onSendToVariableInsert",void 0),this.CONFIGURATION=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(i),!0).forEach((function(t){v()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ut(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e.createDefaultConfiguration(),{},t)}return l()(e,[{key:"getRootNode",value:function(){return this.rootNode}}]),l()(e,[{key:"withI18n",value:function(e){return this.i18n=e,this}},{key:"withRecipientEmailValidator",value:function(e){return this.recipientEmailValidator=e,this}},{key:"initialize",value:function(){var e=this;this.rootNode=document.createElement("div"),this.getRootNode().setAttribute("data-role","rule-recipient"),this.toWhoComponent=new xe,this.toWhoComponent.getRoot().setAttribute("data-name","to-who"),this.toWhoComponent.getRoot().onclick=function(e){e.stopPropagation()},this.toWhoComponent.setValue(this.CONFIGURATION.selectedValue),this.i18n.translateDOMNode(this.toWhoComponent.getRoot()),this.toWhoEmailComponent=lt.createElement(lt.ELEMENT_TYPE_TAGS_LIST,{componentName:Ue.COMPONENT_TYPE_SEND_TO,allowText:!0,allowKeywords:!0,customErrorMessage:"Please provide a valid email address",textValidationCallback:this.recipientEmailValidator,createValuesCallback:function(){return e.CONFIGURATION.emailValuesList},placeholder:"Type an email",tagsLimit:this.setTagsLimit?this.setTagsLimit():0}),this.toWhoEmailComponent.getDropdownContainer().setAttribute("title",yt.getUiTranslatedString("notifications_tooltip_add_fields","Add fields from the form and variables")),this.toWhoEmailComponent.getRootNode().setAttribute("data-name","to-who-email"),this.toWhoEmailComponent.on("tags-limit-reached",(function(){e.triggerRecipientPaywall()})),this.toWhoEmailComponent.on("focus",(function(){e.onSendToFocus&&e.onSendToFocus()})),this.toWhoEmailComponent.on("dropdown-open",(function(){e.onSendToVariableOpen&&e.onSendToVariableOpen()})),this.toWhoEmailComponent.on("ui_tags_container_variable_insert",(function(){e.onSendToVariableInsert&&e.onSendToVariableInsert()})),this.setTagValues(this.CONFIGURATION.defaultTagValues),this.getRootNode().appendChild(this.toWhoComponent.getRoot()),this.getRootNode().appendChild(this.toWhoEmailComponent.getRootNode())}},{key:"getEmailValuesList",value:function(){return this.CONFIGURATION.emailValuesList}},{key:"getTagValues",value:function(){for(var e=this.toWhoEmailComponent.getValue(),t=0,i=e.length;t<i;t++)e[t].value===e[t].caption&&(e[t].isRegularTag=!0);return e}},{key:"setTagValues",value:function(e){this.toWhoEmailComponent.setValue(e)}},{key:"getSelectedValue",value:function(){return this.toWhoComponent.getValue()}}],[{key:"createDefaultConfiguration",value:function(){return{emailValuesList:[],defaultTagValues:[]}}}]),e}();function ct(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var ht=function(e){function t(e,i,n,a,r){var s;return o()(this,t),s=d()(this,_()(t).call(this,e,i,n)),v()(h()(s),"formDocument",void 0),v()(h()(s),"abilityService",void 0),v()(h()(s),"ruleRecipientConfiguration",void 0),v()(h()(s),"divRuleRecipient",void 0),v()(h()(s),"ruleRecipient",void 0),v()(h()(s),"currentModel",void 0),s.abilityService=a,s.currentModel=r,s.ruleRecipientConfiguration=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(i),!0).forEach((function(t){v()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ct(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},n.ruleRecipientConfiguration),s}return f()(t,e),l()(t,[{key:"withFormDocument",value:function(e){return this.formDocument=e,this}},{key:"initVars",value:function(){E()(_()(t.prototype),"initVars",this).call(this),this.divRuleRecipient=this.divRuleContent.querySelector(t.QUERY_SELECTOR_RULE_RECIPIENT)}},{key:"initCustomRuleComponent",value:function(){this.ruleRecipient=new dt(this.ruleRecipientConfiguration).withI18n(this.i18n).withRecipientEmailValidator(this.getRecipientEmailValidator.bind(this)),this.ruleRecipient.setTagsLimit=this.setTagsLimitToRecipients.bind(this),this.ruleRecipient.triggerRecipientPaywall=this.triggerRecipientsPaywall.bind(this),this.ruleRecipient.onSendToFocus=this.onSendToFocus,this.ruleRecipient.onSendToVariableOpen=this.onSendToVariableOpen,this.ruleRecipient.onSendToVariableInsert=this.onSendToVariableInsert,this.ruleRecipient.initialize(),this.divRuleRecipient.appendChild(this.ruleRecipient.getRootNode())}},{key:"onDuplicateBtnClick",value:function(){this.abilityService.can(De.COUNT_EMAIL_RULES,this.currentModel)&&E()(_()(t.prototype),"onDuplicateBtnClick",this).call(this)}},{key:"getRuleConditionConfigVariables",value:function(e){return _t(e,this.formDocument,this.i18n)}},{key:"getRuleContainerInstance",value:function(e,i){return new t(this.cloneDivRuleContainer,this.rulePosition,{ruleRecipientConfiguration:{emailValuesList:this.ruleRecipient.getEmailValuesList(),defaultTagValues:this.ruleRecipient.getTagValues(),selectedValue:this.ruleRecipient.getSelectedValue()},ruleConditionConfigurations:e,ruleStatementConfigurations:i},this.abilityService).withFormDocument(this.formDocument).withI18n(this.i18n)}},{key:"onVariableBeforeChange",value:function(){return this.abilityService.can(De.COUNT_EMAIL_RULES,this.currentModel)}},{key:"getRecipientEmailValidator",value:function(e){return this.formDocument.getEngine().getValidator().validate(e,re.VALIDATOR_TYPE_EMAIL)}},{key:"setTagsLimitToRecipients",value:function(){return this.abilityService.getTotalLimit(De.COUNT_EMAIL_RULES)}},{key:"triggerRecipientsPaywall",value:function(){this.abilityService.can(De.COUNT_EMAIL_RECIPIENTS,this.currentModel)||this.trigger("count-email-recipients-not-supported")}},{key:"getSendToOnly",value:function(){return this.ruleRecipient.getSelectedValue().hookType===Le.TRIGGER_ONLY_SEND_TO}},{key:"getRuleRecipients",value:function(){return this.ruleRecipient.getTagValues()}},{key:"updateRuleRecipients",value:function(e){this.ruleRecipient.setTagValues(e)}}]),t}(Ie);v()(ht,"QUERY_SELECTOR_RULE_RECIPIENT",'div[data-role="placeholder"][data-control-name="rule-recipient"]');i(12),i(121);var pt=function e(){o()(this,e)};v()(pt,"CONTROL_VARIABLE_PREFIX","controlId:"),v()(pt,"COMPANY_NAME","123FormBuilder"),v()(pt,"NO_REPLAY_EMAIL","noreply@123formbuilder.com"),v()(pt,"DELETED_FIELD","Deleted field"),v()(pt,"PROTECTED_FIELD","Protected field"),v()(pt,"CONTROL_HIPAA_POSTFIX","(HIPAA)");var _t=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,n=[];e&&n.push({value:"0",text:i.translateText("notifications_allSubmissions"),type:me.DEFAULT,skipConditions:!0});for(var a=gt(ht.RULE_ALLOWED_EXTRA,yt.getExtraVariables()),r=t.flatten(),o=function(e,t){var a=r[e],o=a.getTypeId();if(!a.getLabelDOMNode()||-1==ht.RULE_ALLOWED_CONTROL_TYPES.indexOf(o)||yt.getRepeatableContainerParent(a))return"continue";var s=String(a.getId()),l=a.getLabelDOMNode().innerText,u=a.getInputDOMNodes();switch(o){case le.CONTROL_TYPE_NAME:case le.CONTROL_TYPE_ADDRESS:for(var d=0,c=u.length;d<c;d++)for(var h=u[d].inputs,p=0,_=h.length;p<_;p++){var g=h[p],E=A()(g.input,HTMLElement)?g.input:g.input.getRootNode(),y=E.hasAttribute("data-i18n-placeholder")?E.getAttribute("data-i18n-placeholder"):$("input[data-i18n-placeholder]",E).attr("data-i18n-placeholder");n.push({value:"".concat(s,"-").concat(E.getAttribute("data-index")),text:i.translateText(y),type:me.DEFAULT,controlType:o,group:{id:s,name:l}})}break;case le.CONTROL_TYPE_RADIO:case le.CONTROL_TYPE_CHECKBOX:case le.CONTROL_TYPE_TERMS_OF_SERVICE:for(var f=0,m=u.length;f<m;f++)for(var v=u[f].inputs,O=0,T=v.length;O<T;O++){var C=v[O],N=C.input.querySelector("input[data-index]"),R=!!Number(N.getAttribute("data-is-other"));n.push({value:"".concat(s,"-").concat(N.getAttribute("data-index")),text:C.input.textContent,type:R?me.DEFAULT:me.CHECKABLE,controlType:o,group:{id:s,name:l}})}break;case le.CONTROL_TYPE_LIKERT_SCALE:for(var I=0,b=u.length;I<b;I++)for(var P=u[I].inputs,S=0,D=P.length;S<D;S++){var L=P[S];[].slice.call(L.input.querySelectorAll("input[data-index]")).forEach((function(e){n.push({value:"".concat(s,"-").concat(e.getAttribute("data-index")),text:e.getAttribute("value"),type:me.CHECKABLE,controlType:o,group:{id:s,name:l}})}))}break;default:var k={value:s,text:l,type:me.DEFAULT,controlType:o};o===le.CONTROL_TYPE_DROPDOWN?(k.values=[],[].slice.call(a.getRootNode().querySelectorAll("option[data-index]")).forEach((function(e){k.values.push(e.textContent)}))):o===le.CONTROL_TYPE_DATE?k.placeholder="mm/dd/yyyy":o===le.CONTROL_TYPE_TIME&&(k.placeholder="hh:mm"),n.push(k)}},s=0,l=r.length;s<l;s++)o(s,l);for(var u=0,d=a.length;u<d;u++){var c=a[u],h=c.value.substr(1,c.value.length-2);switch(c.value){case O.Q.LANGUAGE:var p=t.getEngine().getLoader().getLoaderDependency(O.x.TRANSLATIONS_LANGUAGE_CODES);p&&function(){var e=yt.getUiTranslatedString("applications_locale","Language");p.forEach((function(t){var i=de.getLanguageObjectByCode(t);i&&n.push({value:i.code2?i.code2:i.code3,text:i.name,type:me.SELECTABLE,controlType:Ne.LANGUAGE,group:{id:e,name:e}})}))}();break;case O.Q.PAYMENT_COUPON:n.push({value:Ne.COUPON_CODE,text:c.text,type:me.DEFAULT,controlType:Ne.COUPON_CODE});break;case O.Q.QUIZ_SCORE:n.push({value:Ne.QUIZ_SCORE,text:c.text,type:me.COMPARABLE,controlType:Ne.QUIZ_SCORE});break;default:n.push({value:h,text:c.text,type:me.DEFAULT,controlType:h})}}return n},gt=function(e,t){for(var i=[],n=0,a=t.length;n<a;n++)e.indexOf(t[n].value)>-1&&i.push(t[n]);return i},Et=function(e){return{type:ue.TAG,value:e,caption:yt.getUiTranslatedString("edt_notifications_deleted_field",pt.DELETED_FIELD),isDeleted:!0,isRegularTag:!1}},yt=function(){function e(){o()(this,e)}return l()(e,null,[{key:"isImageURL",value:function(e){return/^((http(s)?:)?\/\/([^\/]+))?([^:]+)([^\/.]+)(\.(png|gif|jpg|jpeg|tiff|bmp))(\?(.*)?|#(.*)?)?$/i.test(String(e||""))}},{key:"getNormalizedCSSColorNotationFromString",value:function(e){if(!e||"string"!==typeof e)return null;if(/^#[0-9a-f]{3}$/i.test(e))return"#".concat(e.charAt(1)).concat(e.charAt(1)).concat(e.charAt(2)).concat(e.charAt(2)).concat(e.charAt(3)).concat(e.charAt(3));if(e.match(/^(#(?:[0-9a-f]{2}){2,4}|#[0-9a-f]{3}|(?:rgba?|hsla?)\((?:\d+%?(?:deg|rad|grad|turn)?(?:,|\s)+){2,3}[\s\/]*[\d\.]+%?\))$/i))return e;var t=e.toLowerCase();return"undefined"!==typeof se.standardHTMLColors[t]?se.standardHTMLColors[t]:null}},{key:"shuffle",value:function(e,t){for(var i,n,a=void 0===t?e.length:Math.min(t,e.length);0!==a;)n=Math.floor(Math.random()*a),i=e[--a],e[a]=e[n],e[n]=i;return e}},{key:"computeDistance",value:function(e,t){return~~Math.sqrt(Math.pow(t.left-e.left,2)+Math.pow(t.top-e.top,2))}},{key:"rectangleIntersects",value:function(e,t){return!(e.left+e.width<t.left||e.left>t.left+t.width||e.top+e.height<t.top||e.top>t.top+t.height)}},{key:"nullFunction",value:function(){return null}},{key:"padString",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O.C.RIGHT,a=String(e||""),r=a.length,o=String(t||""),s=o.length,l=~~i;if(0===s)return e;for(;r<l;)a=n===O.C.RIGHT?a.concat(o):o.concat(a),r+=s;return a}},{key:"scrollIntoView",value:function(e){e&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.scrollIntoView&&e.scrollIntoView())}},{key:"synchronizeControlValue",value:function(e,t){var i,n,a,r=(n=A()(e,k))?e.getValue():(i="input"===e.nodeName.toLowerCase()&&["radio","checkbox"].indexOf(e.type)>-1)?e.checked:String(e.value);(a=!0===r||!1===r?!!t:0===t?"0":String(t||""))!==r&&(n?e.setValue(a):e[i?"checked":"value"]=a)}},{key:"getComputedStyle",value:function(e){try{return window.getComputedStyle(e)}catch(t){return null}}},{key:"areTheSame",value:function(e,t){if(e===t)return!0;var i,n;if((i=a()(e))===a()(t)){if("object"===i){if(A()(e,Array)){if(A()(t,Array)){if((n=e.length)===t.length){for(var r=0;r<n;r++)if(!this.areTheSame(e[r],t[r]))return!1;return!0}return!1}return!1}if(e){if(t){var o=[];for(var s in e)if(e.hasOwnProperty(s)&&(o.push(s),!this.areTheSame(e[s],t[s])))return!1;for(var l in t)if(t.hasOwnProperty(l)&&-1===o.indexOf(l))return!1;return!0}return!1}}return!1}return!1}},{key:"getImageURLAntiCache",value:function(e){return e?"string"!==typeof e?e:/^data\:/.test(e)?e:-1===e.indexOf("?")?"".concat(e,"?_=").concat(+new Date):"".concat(e,"&_=").concat(+new Date):e}},{key:"getTextNumberOfWords",value:function(e){var t=String(e||"").replace(/(^[\s]+|[\s]+$)/g,"");return""===t?0:t.split(/[\s]+/).length}},{key:"getURLEmbedIframeSource",value:function(e){switch(e.type){case O.O.YOUTUBE_VIDEO:return"https://www.youtube.com/embed/".concat(e.identifier,"?enablejsapi=1");case O.O.VIMEO_VIDEO:return"https://player.vimeo.com/video/".concat(e.identifier);case O.O.WORDPRESS_TV_VIDEO:return"https://videopress.com/embed/".concat(e.identifier);case O.O.TED_TALKS_VIDEO:return"https://embed.ted.com/talks/".concat(e.identifier);case O.O.DAILYMOTION_VIDEO:return"https://www.dailymotion.com/embed/video/".concat(e.identifier);case O.O.MIXCLOUD_AUDIO:return"https://www.mixcloud.com/widget/iframe/?feed=https://www.mixcloud.com/".concat(e.identifier);case O.O.SOUNDCLOUD_AUDIO:return"https://w.soundcloud.com/player/?url=https://api.soundcloud.com/tracks/".concat(e.identifier,"&auto_play=false&visual=true");case O.O.NFB_VIDEO:return"https://www.nfb.ca/film/".concat(e.identifier,"/embed/player/");case O.O.KICKSTARTER_VIDEO:return"https://www.kickstarter.com/projects/".concat(e.identifier,"/widget/video.html");case O.O.TWITCH_VIDEO:return"https://player.twitch.tv/?video=".concat(e.identifier);case O.O.PDF_FILE:return e.url;case O.O.FACEBOOK_POST:return"https://www.facebook.com/plugins/post.php?href=https://www.facebook.com/".concat(e.identifier);case O.O.FACEBOOK_PAGE:return"https://www.facebook.com/plugins/page.php?href=https://www.facebook.com/".concat(e.identifier,"&tabs=timeline&small_header=false&adapt_container_width=true&show_facepile=true&width=500px");case O.O.MOBILE_EMBED:return"https://docs.google.com/gview?url=".concat(e.url,"&embedded=true");default:return null}}},{key:"getFormTotalPoints",value:function(e){for(var t=0,i=e.flatten(),n=0,a=i.length;n<a;n++)if(i[n].hasProperty("choices.values"))for(var r=i[n].getProperty("choices.values"),o=0,s=r.length;o<s;o++)if(r[o].isCorrect){t+=r[o].quizPoints;break}return t}},{key:"getFormPointsWithoutElements",value:function(e,t){for(var i=0,n=e.flatten(),a=0,r=n.length;a<r;a++)if(n[a].hasProperty("choices.values")&&-1==t.indexOf(n[a].getHash()))for(var o=n[a].getProperty("choices.values"),s=0,l=o.length;s<l;s++)if(o[s].isCorrect){i+=o[s].quizPoints;break}return i}},{key:"scrollElementIntoView",value:function(t,i){setTimeout((function(){try{if(ie.isIE()){var n=t.getBoundingClientRect(),a=n.top,r=n.height;document.documentElement.scrollTop=a-r}else t.scrollIntoView(i)}catch(s){}try{if(void 0===e.iframeID){var o=Object(ne.b)(window.location.search.substr(1));e.iframeID=o&&o._iframeID_?o._iframeID_:null}}catch(s){}}),10),setTimeout((function(){try{null!==e.iframeID&&window.parent.postMessage({command:"scroll-into-view",iframeId:e.iframeID,top:t.getBoundingClientRect().top},"*")}catch(i){}}),100)}},{key:"refreshFrameHeightOnWix",value:function(){if(window.Wix){var e=document.getElementById("form"),t=void 0!==e?e.offsetHeight:document.body.offsetHeight;window.Wix.setHeight(t)}}},{key:"getUserSessionTokenForWix",value:function(){window.Wix&&te.Wix.Activities.getUserSessionToken((function(e){document.body.setAttribute("data-wix-user-token",e)}))}},{key:"addEditorModeChangeEventListenerForWix",value:function(t){window.Wix&&(te.Wix.addEventListener(te.Wix.Events.EDIT_MODE_CHANGE,(function(t){t&&void 0!==t.editMode&&(document.body.setAttribute("data-wix-edit-mode",t.editMode),e.refreshFrameHeightOnWix())})),te.Wix.addEventListener(te.Wix.Events.COMPONENT_DELETED,(function(){t.ajax({type:"POST",url:"/ajax_call.php",data:{module:"modules/wixNew/class.WixFunctions.php",class:"wixFunctions",function:"deleteWixInstance",iframeInstance:te.Wix.Utils.getInstanceId(),iframeInstanceCompid:te.Wix.Utils.getCompId(),iframeInstanceUserID:te.Wix.Utils.getUid(),iframeInstanceSiteOwnerId:te.Wix.Utils.getSiteOwnerId()}})})))}},{key:"isRealCSSUrl",value:function(e,t){return function(t,i){return e?t.validate(e,re.VALIDATOR_TYPE_URL_WEB_PAGE)?i.Deferred((function(t){var i=window.document.createElement("link"),n=document.createElement("iframe");n.setAttribute("contenteditable","true"),n.style.width=n.style.height="1px",i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),i.addEventListener("load",(function(){document.body.removeChild(n),t.resolve(!0)})),i.addEventListener("error",(function(){document.body.removeChild(n),t.resolve(!1)})),document.body.appendChild(n),(n.contentWindow.document||n.contentDocument).getElementsByTagName("head")[0].appendChild(i)})).promise():i.Deferred((function(e){e.resolve(!1)})).promise():i.Deferred((function(e){e.resolve(!1)}))}(t.getValidator(),t.getJQuery())}},{key:"clone",value:function(e){var t;if(null===e)return null;switch(a()(e)){case"boolean":case"number":case"string":case"function":return e;case"object":if(Array.isArray(e)){t=[];for(var i=0,n=e.length;i<n;i++)t.push(this.clone(e[i]))}else{if(!e)return null;for(var r in t={},e)e.hasOwnProperty(r)&&e.propertyIsEnumerable(r)&&(t[r]=this.clone(e[r]))}return t}}},{key:"merge",value:function(e,t){var i=[];if(Array.isArray(e))for(var n=0,a=e.length;n<a;n++)i.push(e[n]);if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++)i.push(t[r]);return i}},{key:"scrollElementIntoViewOnWix",value:function(){window.Wix&&window.Wix.getBoundingRectAndOffsets((function(e){window.Wix.scrollTo(e.offsets.x,e.offsets.y)}))}},{key:"getRepeatableContainerParent",value:function(t){return t.getParent()?t.getParent().getTypeId()!==C.a.CONTAINER_TYPE_REPEATABLE?e.getRepeatableContainerParent(t.getParent()):t.getParent():null}},{key:"htmlEntities",value:function(e){this.escaper.textContent=String(0===e?"0":e||"");var t=this.escaper.innerHTML;return this.escaper.textContent="",t}},{key:"htmlEntitiesWithBR",value:function(e){for(var t=String(0===e?"0":e||"").split("\n"),i=0,n=t.length;i<n;i++)t[i]=this.htmlEntities(t[i]);return t.join("<br />")}},{key:"getRootPanelComponent",value:function(t){return t.getParent()?e.getRootPanelComponent(t.getParent()):t}},{key:"getIframeID",value:function(){try{if(void 0===e.iframeID){var t=Object(ne.b)(window.location.search.substr(1));e.iframeID=t&&t._iframeID_?t._iframeID_:null}}catch(i){}return e.iframeID||null}},{key:"scrollToTopOfFormWhenFormIsEmbeddedUnderIOS",value:function(){try{window.parent&&this.getIframeID()&&ie.isIOS()&&window.parent.postMessage({iframeId:e.getIframeID(),top:10,command:"scroll-into-view"},"*")}catch(t){}}},{key:"getDefaultLabelValue",value:function(t){if(!t)return"";switch(t.getTypeId()){case C.a.CONTROL_TYPE_LIKERT_SCALE:return e.getUiTranslatedString("edt_notifications_undefined_statement","Undefined statement");default:return e.getUiTranslatedString("edt_notifications_undefined_label","Undefined label")}}},{key:"getLabelOfFormControl",value:function(t){var i=t.getProperty("label.labelText")?t.getProperty("label.labelText"):e.getDefaultLabelValue(t);return t?this.getUiTranslatedString(t.getProperty("label.i18nLabelKey"),I.toPlainText(i)):e.getUiTranslatedString("edt_notifications_deleted_field",pt.DELETED_FIELD)}},{key:"getUiTranslatedString",value:function(e,t){for(var i,n,a=arguments.length,r=new Array(a>2?a-2:0),o=2;o<a;o++)r[o-2]=arguments[o];return n=(i=window.UI.getI18n()).translateText.apply(i,[e].concat(r)),e&&n&&n!==e?n:t}},{key:"allBrowsersCompatibleScrollIntoView",value:function(t,i){var n=t.getBoundingClientRect(),a=n.top,r=n.height;(ie.isIOS()||ie.isMAC())&&window.Wix?window.Wix.getBoundingRectAndOffsets((function(e){window.Wix.scrollTo(e.offsets.x,e.offsets.y+a-r)})):ie.isMAC()&&window.parentIFrame?window.parentIFrame.scrollToOffset(0,a-r):ie.isIE()?document.documentElement.scrollTop=a-r:(setTimeout((function(){i?t.scrollIntoView(i):t.scrollIntoView();try{if(void 0===e.iframeID){var n=Object(ne.b)(window.location.search.substr(1));e.iframeID=n&&n._iframeID_?n._iframeID_:null}}catch(a){}}),10),setTimeout((function(){try{null!==e.iframeID&&window.parent.postMessage({command:"scroll-into-view",iframeId:e.iframeID,top:t.getBoundingClientRect().top},"*")}catch(i){}}),100))}},{key:"addNoFollowOnLinks",value:function(e){var t=document.createElement("div"),i=t.getElementsByTagName("a");return t.innerHTML=e,Array.prototype.forEach.call(i,(function(e){return e.setAttribute("rel","nofollow ugc")})),t.innerHTML}},{key:"getVariablesFromText",value:function(t,i,n){var a=t.match(/(\:([a-zA-Z0-9_\-]+)\:|(controlId:repeatable:)([0-9]+)|(controlId:)([0-9]+)(:[a-zA-Z0-9]+)?)/gm),r=n?e.generateFormVariables(i,void 0,void 0,!0):e.generateFormVariables(i),o=[];if(a)for(var s=0,l=a.length;s<l;s++){var u=e.getVariableInfoByCode(r,a[s]),d=t.split(a[s])[0].trim();if(d&&o.push({type:ue.TEXT,value:d,caption:d,isRegularTag:!0}),u){var c={type:ue.TAG,value:u.value,caption:u.text};u.id&&(c.id=u.id),o.push(c)}else o.push(Et(a[s]));t=t.slice(t.indexOf(a[s])+a[s].length)}return t&&o.push({type:ue.TEXT,value:t,caption:t,isRegularTag:!0}),o}},{key:"generateFormVariables",value:function(t,i,n,a){var r=this,o=0;i||(i=[C.a.CONTROL_TYPE_TEXT,C.a.CONTROL_TYPE_TEXTAREA,C.a.CONTROL_TYPE_DROPDOWN,C.a.CONTROL_TYPE_NAME,C.a.CONTROL_TYPE_RADIO,C.a.CONTROL_TYPE_CHECKBOX,C.a.CONTROL_TYPE_FILE,C.a.CONTROL_TYPE_NUMBER,C.a.CONTROL_TYPE_EMAIL,C.a.CONTROL_TYPE_LIKERT_SCALE,C.a.CONTROL_TYPE_ADDRESS,C.a.CONTROL_TYPE_PHONE,C.a.CONTROL_TYPE_DATE,C.a.CONTROL_TYPE_TIME,C.a.CONTROL_TYPE_PRICE,C.a.CONTROL_TYPE_WEBSITE,C.a.CONTROL_TYPE_PASSWORD,C.a.CONTROL_TYPE_SIGNATURE,C.a.CONTROL_TYPE_STAR_RATING,C.a.CONTROL_TYPE_TERMS_OF_SERVICE,C.a.CONTROL_TYPE_FORMULA,C.a.CONTROL_TYPE_COUPON,C.a.CONTROL_TYPE_FEE,C.a.CONTAINER_TYPE_REPEATABLE]);var s=[],l=void 0!==n?n:e.getExtraVariables();return t.forEach((function(t){var n=[];if(i.indexOf(t.getTypeId())>-1&&(!e.getRepeatableContainerParent(t)||a&&e.getRepeatableContainerParent(t))){switch(t.getTypeId()){case C.a.CONTROL_TYPE_NAME:n=r.nameControlFields(t);break;case C.a.CONTROL_TYPE_ADDRESS:n=e.addressControlFields(t);break;case C.a.CONTROL_TYPE_RADIO:n=e.singleChoiceControlFields(t);break;case C.a.CONTROL_TYPE_CHECKBOX:n=e.multipleChoiceControlFields(t);break;default:t.getId()?s.push({text:e.getLabelOfFormControl(t),value:"controlId:".concat(t.getId()),id:t.getId()}):t.getTypeId()===C.a.CONTAINER_TYPE_REPEATABLE&&s.push({text:e.getLabelOfFormControl(t),value:"controlId:repeatable:".concat(o++)})}n.length&&(s=s.concat(n))}})),l.forEach((function(e){s.push(e)})),s}},{key:"nameControlFields",value:function(t){var i=[],n=e.getLabelOfFormControl(t);return i.push({text:n,value:"controlId:".concat(t.getId()),id:t.getId()}),i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_first","First")),value:"controlId:".concat(t.getId(),":first"),id:t.getId()}),i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_last","Last")),value:"controlId:".concat(t.getId(),":last"),id:t.getId()}),t.hasProperty("configuration.fieldMiddleName")&&t.getProperty("configuration.fieldMiddleName")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_middle","Middle")),value:"controlId:".concat(t.getId(),":middle"),id:t.getId()}),t.hasProperty("configuration.fieldInitials")&&t.getProperty("configuration.fieldInitials")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_initials","Initials")),value:"controlId:".concat(t.getId(),":initials"),id:t.getId()}),t.hasProperty("configuration.fieldTitle")&&t.getProperty("configuration.fieldTitle")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_title","Title")),value:"controlId:".concat(t.getId(),":title"),id:t.getId()}),i}},{key:"addressControlFields",value:function(t){var i=[],n=e.getLabelOfFormControl(t);return i.push({text:n,value:"controlId:".concat(t.getId()),id:t.getId()}),t.hasProperty("configuration.fieldAddress1")&&t.getProperty("configuration.fieldAddress1")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_street_address","Street Address")),value:"controlId:".concat(t.getId(),":fieldAddress1"),id:t.getId()}),t.hasProperty("configuration.fieldAddress2")&&t.getProperty("configuration.fieldAddress2")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_street_address_line2","Street Address Line 2")),value:"controlId:".concat(t.getId(),":fieldAddress2"),id:t.getId()}),t.hasProperty("configuration.fieldCity")&&t.getProperty("configuration.fieldCity")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_city","City")),value:"controlId:".concat(t.getId(),":city"),id:t.getId()}),t.hasProperty("configuration.fieldZone")&&t.getProperty("configuration.fieldZone")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_region_state","Region/State")),value:"controlId:".concat(t.getId(),":region"),id:t.getId()}),t.hasProperty("configuration.fieldZipCode")&&t.getProperty("configuration.fieldZipCode")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_zip_code","Zip code")),value:"controlId:".concat(t.getId(),":zipcode"),id:t.getId()}),t.hasProperty("configuration.fieldCountry")&&t.getProperty("configuration.fieldCountry")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_country","Country")),value:"controlId:".concat(t.getId(),":country"),id:t.getId()}),i}},{key:"singleChoiceControlFields",value:function(t){var i=[],n=e.getLabelOfFormControl(t);return i.push({text:n,value:"controlId:".concat(t.getId()),id:t.getId()}),t.hasProperty("choices.allowOther")&&t.getProperty("choices.allowOther")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_other","Other")),value:"controlId:".concat(t.getId(),":other"),id:t.getId()}),i}},{key:"multipleChoiceControlFields",value:function(t){var i=[],n=e.getLabelOfFormControl(t);(i.push({text:n,value:"controlId:".concat(t.getId()),id:t.getId()}),t.hasProperty("choices.values")&&t.getProperty("choices.values").length)&&t.getProperty("choices.values").forEach((function(a,r){i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString(a.i18nLabel,a.text)),value:"controlId:".concat(t.getId(),":").concat(r),id:t.getId()})}));return t.hasProperty("choices.allowOther")&&t.getProperty("choices.allowOther")&&i.push({text:"".concat(n," - ").concat(e.getUiTranslatedString("notifications_other","Other")),value:"controlId:".concat(t.getId(),":other"),id:t.getId()}),i}},{key:"getExtraVariables",value:function(){return[{text:e.getUiTranslatedString("notifications_entry_id","Entry ID"),value:O.Q.ENTRY_ID},{text:e.getUiTranslatedString("notifications_ip","IP"),value:O.Q.IP},{text:e.getUiTranslatedString("notifications_country","Country"),value:O.Q.COUNTRY_CODE},{text:e.getUiTranslatedString("notifications_browser","Browser"),value:O.Q.BROWSER},{text:e.getUiTranslatedString("notifications_device_type","Device type"),value:O.Q.DEVICE_TYPE},{text:e.getUiTranslatedString("notifications_referrer","Referrer"),value:O.Q.REFERRER},{text:e.getUiTranslatedString("notifications_form_host","Form Host"),value:O.Q.FORM_HOST},{text:e.getUiTranslatedString("notifications_reference_id","Reference ID"),value:O.Q.REFERENCE_ID},{text:e.getUiTranslatedString("notifications_edit_submission_link","Edit submission link"),value:O.Q.EDIT_SUBMISSION_LINK},{text:e.getUiTranslatedString("notifications_quiz_score","Quiz score"),value:O.Q.QUIZ_SCORE},{text:e.getUiTranslatedString("notifications_approval_link","Approval Link"),value:O.Q.APPROVAL_LINK},{text:e.getUiTranslatedString("notifications_approval_history","Approval History"),value:O.Q.APPROVAL_HISTORY},{text:e.getUiTranslatedString("notifications_payment_summary","Payment Summary"),value:O.Q.PAYMENT_SUMMARY},{text:e.getUiTranslatedString("notifications_payment_link","Payment Link"),value:O.Q.PAYMENT_LINK},{text:e.getUiTranslatedString("notifications_payment_amount","Payment Amount"),value:O.Q.PAYMENT_AMOUNT},{text:e.getUiTranslatedString("notifications_payment_currency","Payment Currency"),value:O.Q.PAYMENT_CURRENCY},{text:e.getUiTranslatedString("notifications_payment_status","Payment Status"),value:O.Q.PAYMENT_STATUS},{text:e.getUiTranslatedString("notifications_payment_processor_name","Payment Processor Name"),value:O.Q.PAYMENT_PROCESSOR_NAME},{text:e.getUiTranslatedString("notifications_coupon_codes","Coupon codes"),value:O.Q.PAYMENT_COUPON},{text:e.getUiTranslatedString("notifications_submission_status","Submission Status"),value:O.Q.SUBMISSION_STATUS},{text:e.getUiTranslatedString("notifications_submission_summary","Submission Summary"),value:O.Q.SUBMISSION_SUMMARY},{text:e.getUiTranslatedString("notifications_submission_language","Submission Language"),value:O.Q.LANGUAGE},{text:e.getUiTranslatedString("notifications_quiz_summary","Quiz Summary"),value:O.Q.QUIZ_SUMMARY},{text:e.getUiTranslatedString("notifications_submission_date","Submission Date"),value:O.Q.SUBMISSION_DATE},{text:e.getUiTranslatedString("notifications_submission_date_time","Submission Date and Time"),value:O.Q.SUBMISSION_DATE_TIME},{text:e.getUiTranslatedString("notifications_submission_time","Submission Time"),value:O.Q.SUBMISSION_TIME},{text:e.getUiTranslatedString("notifications_form_name","Form Name"),value:O.Q.FORM_NAME}]}},{key:"getVariableInfoByCode",value:function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i].value===t)return e[i];return null}},{key:"setAndRemoveMessageOnElement",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.L.SUCCESS;e.textContent=t,e.setAttribute("data-is-".concat(i,"-message"),""),e.setAttribute("data-show-message",""),e.setAttribute("data-is-visible",""),setTimeout((function(){e.removeAttribute("data-show-message"),setTimeout((function(){e.removeAttribute("data-is-".concat(i,"-message")),e.removeAttribute("data-is-visible"),e.textContent=""}),500)}),5e3)}},{key:"isMobileInteractionActive",value:function(){return document.body.hasAttribute("data-mobile-interactions")}},{key:"isElementASpace",value:function(e){return e.textContent===String.fromCharCode(oe.THIN_SPACE_CHAR_CODE)}},{key:"getRandomID",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=Math.floor(Math.random()*i)+t;return 1e3===e.randomGeneratedIDs.length?NaN:-1!==e.randomGeneratedIDs.indexOf(n)?e.getRandomID():(e.randomGeneratedIDs.push(n),n)}},{key:"removeRandomID",value:function(t){-1!==e.randomGeneratedIDs.indexOf(t)&&e.randomGeneratedIDs.splice(t,1)}},{key:"removeAllRandomIDs",value:function(){for(;e.randomGeneratedIDs.length>0;)e.randomGeneratedIDs.pop()}},{key:"isInputTextSelected",value:function(e){if("number"==typeof e.selectionStart)return 0==e.selectionStart&&e.selectionEnd==e.value.length}},{key:"trimChoices",value:function(e){var t=[];return Object(Fe.a)(e,(function(e){e.text=e.text.trim(),t.push(e)})),t}}]),e}();v()(yt,"iframeID",void 0),v()(yt,"randomGeneratedIDs",[]),v()(yt,"escaper",document.createElement("div"));var ft=function(e){function t(e,i){var n;if(o()(this,t),n=d()(this,_()(t).call(this)),v()(h()(n),"store",void 0),v()(h()(n),"height",void 0),v()(h()(n),"colspan",void 0),v()(h()(n),"form",void 0),v()(h()(n),"parent",void 0),v()(h()(n),"id",void 0),v()(h()(n),"hash",void 0),v()(h()(n),"attached",void 0),v()(h()(n),"properties",{}),v()(h()(n),"rootNode",void 0),v()(h()(n),"errors",void 0),v()(h()(n),"rendererType",void 0),v()(h()(n),"labelDOMNode",void 0),v()(h()(n),"errorDOMNode",void 0),v()(h()(n),"instructionsDOMNode",void 0),n.form=e,void 0!==i&&null!==i&&(n.properties=i),!window.builderStore)throw new Error("Dependency not found: builderStore");for(n.store=window.builderStore,n.colspan=n.getDefaultColspan(),t.HASH_UID++,n.hash=t.HASH_UID.toString(16);8>n.hash.length;)n.hash="0".concat(n.hash);return n.createRootNodeElement(),null!==n.colspan&&n.rootNode&&n.rootNode.setAttribute("data-colspan",String(n.colspan)),n}return f()(t,e),l()(t,[{key:"getHeight",value:function(){return void 0!==this.height?this.height:null}},{key:"getMinHeight",value:function(){return 0}},{key:"withHeight",value:function(e){null!==e&&e<this.getMinHeight()&&(e=this.getMinHeight()),0===e&&(e=null);var t=e!==this.height;return this.height=e,t&&this.form&&this.isAttached()&&this.form.trigger("node-attribute-changed",this,"height",this.height),t&&(this.getRootNode().style.height=e?"".concat(String(~~e),"px"):""),this}},{key:"getColspan",value:function(){return void 0!==this.colspan?this.colspan:null}},{key:"withColspan",value:function(e){null!==e&&(e>this.getMaxColspan()&&(e=this.getMaxColspan()),e<this.getMinColspan()&&(e=this.getMinColspan()));var t=this.colspan!==e;return null!==this.colspan?t&&this.getRootNode().setAttribute("data-colspan",String(e)):t&&this.getRootNode().removeAttribute("data-colspan"),this.colspan=e,t&&this.form&&this.isAttached()&&this.form.trigger("node-attribute-changed",this,"colspan",e),t&&this.isRenderingSupported()&&this.reRender(),this}},{key:"getForm",value:function(){return this.form||null}},{key:"getParent",value:function(){return this.parent||null}},{key:"withParent",value:function(e){return this.parent=e||null,this}},{key:"getNextSibling",value:function(){if(this.parent)for(var e=this.parent.getChildren(),t=0,i=e.length-1;t<i;t++)if(this===e[t])return e[t+1];return null}},{key:"getPreviousSibling",value:function(){if(this.parent)for(var e=this.parent.getChildren(),t=1,i=e.length;t<i;t++)if(this===e[t])return e[t-1];return null}},{key:"flatten",value:function(){return[this]}},{key:"getId",value:function(){return this.id||null}},{key:"withId",value:function(e){return this.id=e||null,null!==this.id?(this.getRootNode().setAttribute("data-id",String(this.id)),this.setupI18n()):this.getRootNode().removeAttribute("data-id"),this.form&&this.isAttached()&&this.form.trigger("node-attribute-changed",this,"id",this.id),this}},{key:"getHash",value:function(){return this.hash}},{key:"_static",value:function(){var e=this.constructor,t=this;return{getSupportedValidators:this.getSupportedValidators?function(){return t.getSupportedValidators(t)}:null,attributes:e.attributes,runtime:e.runtime,nodeName:e.nodeName,getConfiguration:e.getConfiguration,getDropDestinationCSSSelector:"function"===typeof this.constructor.getDropDestinationCSSSelector?this.constructor.getDropDestinationCSSSelector:yt.nullFunction,getDropSupportedEdges:"function"===typeof this.constructor.getDropSupportedEdges?this.constructor.getDropSupportedEdges:yt.nullFunction}}},{key:"hasAttribute",value:function(e){var t=this._static();return!("string"!==typeof e||!e||!t.attributes.hasOwnProperty(e))}},{key:"getAttributeType",value:function(e){var t=this._static();return this.hasAttribute(e)&&t.attributes[e].type||null}},{key:"hasAttributeProperty",value:function(e,t){var i=this._static();return"string"===typeof t&&t&&i.attributes[e].properties.hasOwnProperty(t)&&void 0!==i.attributes[e].properties[t]}},{key:"getAttributePropertyDescriptor",value:function(e,t){return this._static().attributes[e].properties[t]}},{key:"getProperty",value:function(e){var t,i=String(e||"").split("."),n=i[0]||"",a=i[1]||"";if(""===n||""===a||2!==i.length)throw new Error("Illegal attribute accessor: ".concat(JSON.stringify(e)));if(this.hasAttribute(n)){if(!this.hasAttributeProperty(n,a)){if(null!==(t=D.getPropertyReadCallback(e,this)))return t.call(this);if(D.isVirtualProperty(e,this))return;throw new Error("Property ".concat(JSON.stringify(a)," does not exist on a attribute of type ").concat(JSON.stringify(this.getAttributeType(n))))}return void 0===this.properties[n]?this._static().attributes[n].properties[a].defaultValue:void 0===this.properties[n][a]?this._static().attributes[n].properties[a].defaultValue:this.properties[n][a]}if(null!==(t=D.getPropertyReadCallback(e,this)))return t.call(this);if(!D.isVirtualProperty(e,this))throw new Error("Property ".concat(JSON.stringify(a)," does not exist on a attribute of type ").concat(JSON.stringify(this.getAttributeType(n))))}},{key:"hasProperty",value:function(e){var t=String(e||"").split("."),i=t[0]||"",n=t[1]||"";return""!==i&&""!==n&&2===t.length&&(this.hasAttribute(i)&&!!this.hasAttributeProperty(i,n)||D.isVirtualProperty(e,this))}},{key:"setProperty",value:function(e,t){var i,n,a,r,o=String(e||"").split("."),s=o[0]||"",l=o[1]||"",u=this._static(),d=!1;if(""===s||""===l||2!==o.length)throw new Error("Illegal attribute accessor: ".concat(JSON.stringify(e)));if(!this.hasAttribute(s)){if(null===(r=D.getPropertyWriteCallback(e,this)))throw new Error("Attribute ".concat(JSON.stringify(s)," was not found"));r.call(this,t),d=!0}if(!d&&!this.hasAttributeProperty(s,l)){if(null===(r=D.getPropertyWriteCallback(e,this)))throw new Error("Property ".concat(JSON.stringify(l)," does not exist on a attribute of type ").concat(JSON.stringify(this.getAttributeType(s))));r.call(this,t),d=!0}if(d||void 0!==this.properties[s]||(this.properties[s]={}),d)a&&this.isAttached()&&(a.trigger("node-property-changed",this,e,t,null),a.trigger("change"));else{if(i=this.getAttributePropertyDescriptor(s,l),null===t&&!i.optional)switch(i.type){case"string":t="";break;case"number":case"int":case"float":t=0;break;case"boolean":case"bool":t=!1}if(!(null===t&&i.optional||u.runtime.isTypeOf(t,i.type)))throw new Error("Value ".concat(JSON.stringify(t)," is not of type ").concat(JSON.stringify(i)));n=this.properties[s][l],this.properties[s][l]=t,(a=this.getForm())&&!yt.areTheSame(n,t)&&this.isAttached()&&(a.trigger("node-property-changed",this,e,t,n),a.trigger("change"))}return this}},{key:"enumerateProperties",value:function(){var e,t=[],i=this._static(),n=this.getParent()?this.getParent().enumerateDisabledProperties():null;for(var a in i.attributes)if(i.attributes.hasOwnProperty(a))for(var r in i.attributes[a].properties)i.attributes[a].properties.hasOwnProperty(r)&&t.push({name:"".concat(a,".").concat(r),type:i.attributes[a].properties[r].type,optional:i.attributes[a].properties[r].optional,virtual:!1});if(null!==(e=D.enumerateVirtualProperties(this)))for(var o=0,s=e.length;o<s;o++)t.push(e[o]);if(n)for(var l=t.length-1;l>=0;l--)n.indexOf(t[l].name)>-1&&t.splice(l,1);return t}},{key:"getRootNode",value:function(){return this.rootNode}},{key:"isAttached",value:function(){return void 0!==this.attached&&this.attached}},{key:"onCreated",value:function(){}},{key:"withProperties",value:function(e){return this.properties=e,this}},{key:"getDefaultColspan",value:function(){return 20}},{key:"setAttached",value:function(e){this.attached=e}},{key:"getComputedProperties",value:function(){var e=this._static(),t={};for(var i in e.attributes)if(e.attributes.hasOwnProperty(i))for(var n in t[i]={},e.attributes[i].properties)e.attributes[i].properties.hasOwnProperty(n)&&(t[i][n]=this.getProperty("".concat(i,".").concat(n)));return t}},{key:"isRemovable",value:function(){return!0}},{key:"isDuplicatable",value:function(){return!0}},{key:"isResizable",value:function(){return!0}},{key:"isDragable",value:function(){return!0}},{key:"isSelectable",value:function(){return!0}},{key:"getErrors",value:function(){return this.errors||null}},{key:"withErrors",value:function(e){var t;if(null!==e&&!A()(e,Array))throw new Error("Invalid argument: array expected!");if(e&&(t=e.length)){for(var i,n=[],a=0;a<t;a++){if(!e[a]||"number"!==typeof e[a].code||"string"!==typeof e[a].message)throw new Error("Invalid argument: errors: IElementError[] expected!");if(i={code:~~e[a].code,message:e[a].message},void 0!==e[a].propertyName&&null!==e[a].propertyName){if("string"!==typeof e[a].propertyName)throw new Error("Invalid argument!");i.propertyName=e[a].propertyName}if(void 0!==e[a].fieldName&&null!==e[a].fieldName){if("string"!==typeof e[a].propertyName)throw new Error("Invalid argument!");i.fieldName=e[a].fieldName}n.push(i)}if(!this.errors&&!n.length)return;this.errors=n.length?n:void 0,this.errors?this.getRootNode().setAttribute("data-has-errors","1"):this.getRootNode().removeAttribute("data-has-errors"),this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this))}else this.errors=void 0,this.getRootNode().removeAttribute("data-has-errors"),this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this));return this}},{key:"addError",value:function(e,t,i,n){var a;if("number"!==typeof e)throw new Error("Invalid argument: int expected!");if(e=~~e,"string"!==typeof t)throw new Error("Invalid arugment: string expected!");if(a={code:e,message:t},void 0!==i&&null!==i){if("string"!==typeof i)throw new Error("Invalid argument: undefined|string expected");a.propertyName=i}if(void 0!==n&&null!==n){if("string"!==typeof n)throw new Error("Invalid argument: undefined|string expected");a.fieldName=n}if(void 0===this.errors)return this.errors=[a],this.getRootNode().setAttribute("data-has-errors","1"),this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this)),!0;for(var r=0,o=this.errors.length;r<o;r++)if(this.errors[r].code===e&&this.errors[r].fieldName===a.fieldName&&this.errors[r].propertyName===a.propertyName)return this.errors[r].message!==t&&(this.errors[r].message=t,this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this)),!0);return this.errors.push(a),1===this.errors.length&&this.getRootNode().setAttribute("data-has-errors","1"),this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this)),!0}},{key:"getErrorByCode",value:function(e){if(this.errors)for(var t=0,i=this.errors.length;t<i;t++)if(this.errors[t].code===e)return{code:this.errors[t].code,message:this.errors[t].message};return null}},{key:"removeError",value:function(e,t,i){if(this.errors)for(var n=0,a=this.errors.length;n<a;n++)if(e===this.errors[n].code&&t===this.errors[n].propertyName&&i===this.errors[n].fieldName)return this.errors.splice(n,1),0===this.errors.length&&(this.errors=void 0,this.getRootNode().removeAttribute("data-has-errors")),this.isAttached()&&(this.form.trigger("change"),this.form.trigger("errors-changed",this)),!0;return!1}},{key:"removeAllBackendErrors",value:function(){var e=!1;if(this.errors)for(var i=this.errors.length-1;i>=0;i--)t.ALL_BACKEND_ERRORS.indexOf(this.errors[i].code)>-1&&(this.errors.splice(i,1),e=!0,0===this.errors.length&&(this.errors=void 0,this.getRootNode().removeAttribute("data-has-errors")));return e&&this.isAttached()&&(this.getForm().trigger("change"),this.getForm().trigger("errors-changed",this)),e}},{key:"getResizingCapability",value:function(){return O.E.NONE}},{key:"getParentPage",value:function(){return this.parent?this.parent.getParentPage():null}},{key:"getMinColspan",value:function(){return 0}},{key:"getMaxColspan",value:function(){return this.parent?this.parent.getMaxColspan():20}},{key:"getFirstParentContainer",value:function(){var e=this;do{if(e&&e.getElementKind()===O.l.CONTAINER&&e.getTypeId()!==C.a.CONTAINER_TYPE_ROW&&e.getTypeId()!==C.a.CONTAINER_TYPE_PAGE&&e.getTypeId()!==C.a.CONTAINER_TYPE_PAYMENT_SUMMARY_PAGE&&e.getTypeId()!==C.a.ELEMENT_TYPE_FORM&&e.getTypeId()!==C.a.CONTAINER_TYPE_LIKERT_WRAPPER)break;e=e.getParent()}while(e);return e||null}},{key:"cloneNode",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=yt.clone(this.properties),n=this.getForm().getEngine().createElement(this.getTypeId(),i,this.getForm());return e&&(n.withColspan(this.getColspan()),t&&n.withId(this.getId()),n.withHeight(this.getHeight())),this.getElementKind()===O.l.CONTAINER&&function(i,n){if(i.getTypeId()===C.a.CONTAINER_TYPE_REPEATABLE){var a=i.getChildren();n.appendChild(a[0].cloneNode(!0,!1))}else for(var r=0,o=i.getChildren(),s=o.length;r<s;r++)n.appendChild(o[r].cloneNode(e,t))}(this,n),n}},{key:"onDuplicate",value:function(){if(this.hasProperty("label.labelText")){var e=String(this.getProperty("label.labelText")||"").replace(/(^[\s]+|[\s]+$)/g,"");e="Copy of ".concat(e||this.getElementName()),this.setProperty("label.labelText",e),this.updateLabelText()}}},{key:"hasError",value:function(e){if(void 0!==this.errors&&this.errors&&this.errors.length){for(var t=0,i=this.errors.length;t<i;t++)if(this.errors[t].code===e)return!0;return!1}return!1}},{key:"isRenderingSupported",value:function(){return!1}},{key:"setRendererType",value:function(e){if("number"!=typeof e)throw new Error("Invalid argument: newRendererType: EControlRendererType expected");this.rendererType!==e&&(this.rendererType=e,X.getRendererByType(this.rendererType).updateRootNode(this))}},{key:"getRendererType",value:function(){return void 0===this.rendererType?null:this.rendererType}},{key:"getRenderedLabelPlacement",value:function(){var e=this.getRendererType();if(null===e||!this.isRenderingSupported())return null;switch(e){case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD:case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL:case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return O.t.LEFT_ALIGNED;case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD:case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL:case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return O.t.RIGHT_ALIGNED;case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD:case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL:case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:return O.t.TOP_ALIGNED;default:return null}}},{key:"reRender",value:function(){this.rendererType=void 0,this.setRendererType(X.getSuggestedRenderer(this,this.getForm().getLabelPlacement(),this.getForm().getInstructionsPlacement()))}},{key:"getInputDOMNodes",value:function(){return null}},{key:"getLabelDOMNode",value:function(){return this.labelDOMNode||null}},{key:"getInstructionsDOMNode",value:function(){return this.instructionsDOMNode||null}},{key:"getErrorDOMNode",value:function(){return this.errorDOMNode||null}},{key:"updateLabelText",value:function(){if(void 0!==this.labelDOMNode&&this.hasProperty("label.labelText")){var e=this.getProperty("label.labelText"),t=this.hasProperty("label.isRemoved")&&this.getProperty("label.isRemoved"),i=t||this.hasProperty("label.isCompactField")&&this.getProperty("label.isCompactField");null===e||""===e?(this.labelDOMNode.setAttribute("data-is-empty","1"),this.labelDOMNode.textContent="",this.isCompactFieldPlaceholderSupported()&&i&&M.setLabelCompactFieldState(!0,"",this.getInputDOMNodes(),t)):(this.labelDOMNode.removeAttribute("data-is-empty"),this.labelDOMNode.innerHTML=S.sanitizeHTML(I.parse(e)),this.isCompactFieldPlaceholderSupported()&&i&&(e=I.toPlainText(e),M.setLabelCompactFieldState(!0,e,this.getInputDOMNodes(),t)))}}},{key:"updateInstructionsText",value:function(){if(void 0!==this.instructionsDOMNode&&this.hasProperty("instructions.text")){var e=this.getProperty("instructions.text");null===e||""===e?(this.instructionsDOMNode.setAttribute("data-is-empty","1"),this.instructionsDOMNode.textContent=""):(this.instructionsDOMNode.removeAttribute("data-is-empty"),this.instructionsDOMNode.innerHTML=S.sanitizeHTML(I.parse(e)))}}},{key:"updateShowInstructionsOnClick",value:function(){this.hasProperty("instructions.showInstructionsOnClick")&&this.getProperty("instructions.showInstructionsOnClick")?this.rootNode.setAttribute("data-instructions-on-click","1"):this.rootNode.removeAttribute("data-instructions-on-click")}},{key:"updateErrorsText",value:function(){if(void 0!==this.errorDOMNode){var e=this.getErrors();null===e?(this.errorDOMNode.setAttribute("data-is-empty","1"),this.errorDOMNode.textContent=""):(this.errorDOMNode.removeAttribute("data-is-empty"),this.errorDOMNode.innerHTML=function(){for(var t=[],i=0,n=e.length;i<n;i++)(void 0===e[i].propertyName||/^value\./.test(e[i].propertyName))&&-1===t.indexOf(e[i].message)&&t.push(e[i].message);return t.join("; ")}())}}},{key:"updateLabelBoldState",value:function(){this.hasProperty("label.isBold")&&(this.getProperty("label.isBold")?this.getRootNode().setAttribute("data-label-is-bold","1"):this.getRootNode().removeAttribute("data-label-is-bold"))}},{key:"updateLabelItalicState",value:function(){this.hasProperty("label.isItalic")&&(this.getProperty("label.isItalic")?this.getRootNode().setAttribute("data-label-is-italic","1"):this.getRootNode().removeAttribute("data-label-is-italic"))}},{key:"updateLabelHiddenState",value:function(){this.hasProperty("label.isHidden")&&(this.getProperty("label.isHidden")?this.getRootNode().setAttribute("data-label-is-hidden","1"):this.getRootNode().removeAttribute("data-label-is-hidden"))}},{key:"updateRequiredState",value:function(){this.hasProperty("options.required")&&this.getProperty("options.required")?this.getRootNode().setAttribute("data-is-required","1"):this.getRootNode().removeAttribute("data-is-required")}},{key:"setupDefaults",value:function(){return this}},{key:"updateHiddenAttribute",value:function(){this.hasProperty("options.hidden")&&this.getProperty("options.hidden")?this.rootNode.setAttribute("data-is-hidden","1"):this.rootNode.removeAttribute("data-is-hidden")}},{key:"onBlur",value:function(){console.warn("blur: not implemented")}},{key:"isCompactFieldPlaceholderSupported",value:function(){return!0}},{key:"getVisibilityMode",value:function(){var e=this.hasProperty("label.isHidden")&&this.getProperty("label.isHidden"),t=this.hasProperty("label.isRemoved")&&this.getProperty("label.isRemoved"),i=this.hasProperty("label.isCompactField")&&this.getProperty("label.isCompactField");switch(!0){case!e&&!t&&!i:return O.n.SHOWN;case e&&!t&&!i:return O.n.HIDDEN;case t&&!e&&!i:return O.n.REMOVED;case i&&!e&&!t:return O.n.COMPACT;default:return O.n.OTHER}}},{key:"setVisibilityMode",value:function(e){switch(e){case O.n.HIDDEN:this.hasProperty("label.isHidden")&&this.setProperty("label.isHidden",!0),this.hasProperty("label.isRemoved")&&this.setProperty("label.isRemoved",!1),this.hasProperty("label.isCompactField")&&this.setProperty("label.isCompactField",!1);break;case O.n.REMOVED:this.hasProperty("label.isHidden")&&this.setProperty("label.isHidden",!1),this.hasProperty("label.isRemoved")&&this.setProperty("label.isRemoved",!0),this.hasProperty("label.isCompactField")&&this.setProperty("label.isCompactField",!1);break;case O.n.COMPACT:this.hasProperty("label.isHidden")&&this.setProperty("label.isHidden",!1),this.hasProperty("label.isRemoved")&&this.setProperty("label.isRemoved",!1),this.hasProperty("label.isCompactField")&&this.setProperty("label.isCompactField",!0);break;case O.n.OTHER:break;case O.n.SHOWN:default:this.hasProperty("label.isHidden")&&this.setProperty("label.isHidden",!1),this.hasProperty("label.isRemoved")&&this.setProperty("label.isRemoved",!1),this.hasProperty("label.isCompactField")&&this.setProperty("label.isCompactField",!1)}}},{key:"setupI18n",value:function(){if(this.id){if(this.hasProperty("label.isCompactField")&&this.getProperty("label.isCompactField")){var e=this.getRootNode().querySelector("input, textarea");e&&(e.setAttribute("data-i18n-placeholder","control_label_".concat(this.id)),e.setAttribute("data-i18n-markdown-text",""))}else this.labelDOMNode&&this.labelDOMNode.setAttribute("data-i18n-text","control_label_".concat(this.id));this.instructionsDOMNode&&this.instructionsDOMNode.setAttribute("data-i18n-text","control_instructions_".concat(this.id))}return this}},{key:"onEnterSelection",value:function(){this.rootNode&&this.rootNode.setAttribute("data-is-selected","1")}},{key:"onLeaveSelection",value:function(){this.rootNode&&this.rootNode.removeAttribute("data-is-selected")}},{key:"updateAccessibilityTabIndexes",value:function(){var e=this._static().getConfiguration();if(e&&O.q.NONE!==e.accessibilityFields&&O.q.OTHER!==e.accessibilityFields&&null!==e.accessibilityFields){var t=this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);(e.accessibilityFields&O.q.ROOT_NODE)===O.q.ROOT_NODE&&(t?this.rootNode&&(this.rootNode.tabIndex=0):this.rootNode&&this.rootNode.removeAttribute("tabindex")),(e.accessibilityFields&O.q.ERROR_NODE)===O.q.ERROR_NODE&&(t?this.errorDOMNode&&(this.errorDOMNode.tabIndex=0):this.errorDOMNode&&this.errorDOMNode.removeAttribute("tabindex"))}}},{key:"onFocusEnter",value:function(){}},{key:"onFocusLeave",value:function(){}},{key:"enumerateTranslations",value:function(){return[]}},{key:"isChildOf",value:function(e,t){if(t&&this.getTypeId()===e)return!0;for(var i=this.getParent();i&&i.getTypeId()!==C.a.ELEMENT_TYPE_FORM;){if(i.getTypeId()===e)return!0;i=i.getParent()}return!1}},{key:"getFirstParentOfType",value:function(e){for(var t=this.getParent();t&&t.getTypeId()!==C.a.ELEMENT_TYPE_FORM;){if(t.getTypeId()===e)return t;t=t.getParent()}return null}}]),t}(R.a);v()(ft,"BACKEND_ERR_INVALID_SETTINGS",1e3),v()(ft,"BACKEND_ERR_VALUE_IS_REQUIRED",1001),v()(ft,"BACKEND_ERR_INVALID_VALUE_FORMAT",1002),v()(ft,"BACKEND_ERR_INVALID_VALUE",1003),v()(ft,"BACKEND_ERR_FATAL_FORM_GENERIC_EXCEPTION",2e3),v()(ft,"BACKEND_ERR_FATAL_FORM_IS_INACTIVE",2001),v()(ft,"BACKEND_ERR_FATAL_FORM_IS_UNAVAILABLE",2002),v()(ft,"BACKEND_ERR_FATAL_INVALID_FORM_DOMAIN",2003),v()(ft,"BACKEND_ERR_FATAL_FORM_GENERAL_MAINTENANCE",2004),v()(ft,"BACKEND_ERR_UNKNOWN_LEGACY",1e4),v()(ft,"NET_ERR_FATAL_SUBMISSION_BAD_RESPONSE",2099),v()(ft,"ALL_BACKEND_ERRORS",[ft.BACKEND_ERR_INVALID_SETTINGS,ft.BACKEND_ERR_VALUE_IS_REQUIRED,ft.BACKEND_ERR_INVALID_VALUE_FORMAT,ft.BACKEND_ERR_INVALID_VALUE,ft.BACKEND_ERR_FATAL_FORM_GENERIC_EXCEPTION,ft.BACKEND_ERR_FATAL_FORM_IS_INACTIVE,ft.BACKEND_ERR_FATAL_FORM_IS_UNAVAILABLE,ft.BACKEND_ERR_FATAL_INVALID_FORM_DOMAIN,ft.BACKEND_ERR_FATAL_FORM_GENERAL_MAINTENANCE,ft.NET_ERR_FATAL_SUBMISSION_BAD_RESPONSE,ft.BACKEND_ERR_UNKNOWN_LEGACY]),v()(ft,"HASH_UID",0);var mt=function(e){function t(e,i){var n;return o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"synchronizationEnabled",!0),v()(h()(n),"visible",void 0),v()(h()(n),"readOnly",void 0),v()(h()(n),"disabled",void 0),v()(h()(n),"changeByRulesDebouncer",void 0),v()(h()(n),"hasSuggestions",!1),n.changeByRulesDebouncer=T.a.create((function(){n.emulateUserInput()}),100),n.on("change.rules",(function(){n.changeByRulesDebouncer()})),n}return f()(t,e),l()(t,[{key:"createRootNodeElement",value:function(){this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","control"),this.rootNode.setAttribute("data-type",this._static().nodeName),this.rootNode.setAttribute("data-hash",this.getHash()),this.rootNode.setAttribute("data-type-id",String(this.getTypeId())),this.rootNode.setAttribute("data-colspan",String(this.getColspan())),this.updateLabelItalicState(),this.updateLabelBoldState(),this.updateLabelHiddenState()}},{key:"serialize",value:function(){return[this.getTypeId(),this.getId(),this.getHash(),this.properties||null,this.errors||null,null,this.getColspan(),this.getHeight()]}},{key:"getElementKind",value:function(){return O.l.CONTROL}},{key:"withErrors",value:function(e){return E()(_()(t.prototype),"withErrors",this).call(this,e),this.updateErrorsText(),this}},{key:"addError",value:function(e,i,n,a){var r=E()(_()(t.prototype),"addError",this).call(this,e,i,n,a);return r&&this.updateErrorsText(),r}},{key:"removeError",value:function(e){var i=E()(_()(t.prototype),"removeError",this).call(this,e);return i&&this.updateErrorsText(),i}},{key:"removeAllBackendErrors",value:function(){var e=E()(_()(t.prototype),"removeAllBackendErrors",this).call(this);return e&&this.updateErrorsText(),e}},{key:"getSupportedValidators",value:function(){return null}},{key:"getResizingCapability",value:function(){return O.E.LEFT_AND_RIGHT}},{key:"getMinColspan",value:function(){return 2}},{key:"getValue",value:function(){if(this.hasAttribute("value")){for(var e,t={},i=this.enumerateProperties()||[],n=0,a=i.length;n<a;n++)(e=/^value\.(.*)$/.exec(i[n].name))&&!i[n].virtual&&(t[e[1]]=this.getProperty(i[n].name));return t}}},{key:"onValueChanged",value:function(){}},{key:"synchronizeValue",value:function(){console.warn("synchronize value")}},{key:"setValue",value:function(e){if(!this.hasAttribute("value"))throw new Error("This control does not support a value");if("object"!==a()(e))throw new Error("Invalid argument: object expected!");var t;this.synchronizationEnabled=!1;try{for(var i=this.enumerateProperties()||[],n=0,r=i.length;n<r;n++)if(t=/^value\.(.*)$/.exec(i[n].name))if(i[n].optional)void 0!==e[t[1]]?this.setProperty(i[n].name,e[t[1]]):this.setProperty(i[n].name,null);else{if(void 0===e[t[1]])throw new Error("Property ".concat(JSON.stringify(t[1])," is not present in value object!"));this.setProperty(i[n].name,e[t[1]])}}catch(o){throw this.synchronizationEnabled=!0,o}this.synchronizeValue()}},{key:"isReadOnly",value:function(e){return null===e&&(void 0===this.readOnly||!0===this.readOnly)}},{key:"setReadOnly",value:function(e,t){if(this.readOnly=!!t,this.readOnly){this.rootNode.setAttribute("data-is-readonly","");for(var i=0,n=this.rootNode.querySelectorAll("input, select, textarea"),a=n.length;i<a;i++)n[i].readOnly=!0}else{this.rootNode.removeAttribute("data-is-readonly");for(var r=0,o=this.rootNode.querySelectorAll("input, select, textarea"),s=o.length;r<s;r++)o[r].readOnly=!1}}},{key:"isDisabled",value:function(e){return null===e&&(void 0===this.disabled||!0===this.disabled)}},{key:"setDisabled",value:function(e,t){null===e&&(this.disabled=!!t,this.disabled?this.getRootNode().setAttribute("data-is-disabled",""):this.getRootNode().removeAttribute("data-is-disabled"))}},{key:"isVisible",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return void 0!==this.visible||e?void 0===this.visible||this.visible:!(this.hasProperty("options.hidden")&&this.getProperty("options.hidden"))}},{key:"setVisible",value:function(e){e=!!e,this.visible=e,this.visible?(this.getRootNode().removeAttribute("data-is-hidden"),this.getForm().getEngine().getLoader().execCommand("control-has-changed-visibility",{controlId:this.getId(),visibility:this.visible,element:this})):this.getRootNode().setAttribute("data-is-hidden",""),yt.refreshFrameHeightOnWix()}},{key:"enumerateIndexes",value:function(){return null}},{key:"getMinInputRowWidth",value:function(){return 2}},{key:"isRenderingSupported",value:function(){return!0}},{key:"onReset",value:function(){console.warn("reset: not implemented on ",this)}},{key:"getValueInterfaceName",value:function(){try{return this._static().attributes.value.type}catch(e){return null}}},{key:"hasValueCompatibleWith",value:function(e){if(e&&O.l.CONTROL===e.getElementKind()){var t=e.getValueInterfaceName(),i=e.getTypeId(),n=e&&e.hasProperty("validation.type")&&e.getProperty("validation.type")||null;return null!==t&&(t===this.getValueInterfaceName()?i===C.a.CONTROL_TYPE_WEBSITE?this.getTypeId()===C.a.CONTROL_TYPE_WEBSITE||this.getTypeId()===C.a.CONTROL_TYPE_TEXT&&this.hasProperty("validation.type")&&!this.getProperty("validation.type"):i===C.a.CONTROL_TYPE_EMAIL?this.getTypeId()===C.a.CONTROL_TYPE_EMAIL||this.getTypeId()===C.a.CONTROL_TYPE_TEXT&&this.hasProperty("validation.type")&&!this.getProperty("validation.type"):i!==C.a.CONTROL_TYPE_TEXT||(this.getTypeId()===C.a.CONTROL_TYPE_TEXT&&n&&n===this.getProperty("validation.type")||this.hasProperty("validation.type")&&!this.getProperty("validation.type")||!n):i===C.a.CONTROL_TYPE_NUMBER?this.getTypeId()===C.a.CONTROL_TYPE_TEXT&&this.hasProperty("validation.type")&&!this.getProperty("validation.type"):i===C.a.CONTROL_TYPE_TEXT&&(this.getTypeId()===C.a.CONTROL_TYPE_NUMBER&&!n))}}},{key:"displayValidationUpgradePopupIfNeeded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.hasProperty("validation.type")){var t=this.getProperty("validation.type");if(null!==t&&t!==e){var i=this.getForm().getEngine().getValidator(),n=i.getValidatorById(t);null!==n&&(n.isSupported||(this.setProperty("validation.type",null),this.getForm().getEngine().getLoader().execCommand("show-validator-upgrade-dialog")))}}}},{key:"emulateUserInput",value:function(){}}]),t}(ft),vt=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"onSynchronizeWithControlIdPropertyChanged",value:function(){for(var e=this.getForm().flatten(),t=0,i=e.length;t<i;t++)this.hasProperty("synchronize.withControlId")&&e[t].hasProperty("synchronize.withControlId")&&(e[t].getProperty("synchronize.withControlId")===this.getId()&&this.getProperty("synchronize.withControlId")!==e[t].getId()&&(e[t].setProperty("synchronize.enabled",!1),e[t].setProperty("synchronize.withControlId",null)),e[t].getId()===this.getProperty("synchronize.withControlId")&&(e[t].setProperty("synchronize.enabled",this.getProperty("synchronize.enabled")),e[t].setProperty("synchronize.withControlId",this.getId())))}},{key:"onSynchronizeEnabledPropertyChanged",value:function(){if(this.hasProperty("synchronize.enabled")&&this.hasProperty("synchronize.withControlId")&&this.getProperty("synchronize.withControlId"))for(var e=this.getForm().flatten(),t=0,i=e.length;t<i;t++)e[t].hasProperty("synchronize.withControlId")&&e[t].getProperty("synchronize.withControlId")===this.getId()&&e[t].setProperty("synchronize.enabled",this.getProperty("synchronize.enabled"))}},{key:"checkIfElementValueIsSynchronized",value:function(){if(this.hasProperty("value.value")&&this.getProperty("value.value")&&this.hasProperty("synchronize.enabled")&&this.getProperty("synchronize.enabled")&&this.hasProperty("synchronize.withControlId")&&this.getProperty("synchronize.withControlId"))for(var e=this.getForm().flatten(),t=0,i=e.length;t<i;t++)if(e[t].hasProperty("synchronize.enabled")&&e[t].getProperty("synchronize.enabled")&&e[t].hasProperty("synchronize.withControlId")&&e[t].hasProperty("value.value")&&e[t].getProperty("value.value")&&this.getId()===e[t].getProperty("synchronize.withControlId")){var n=e[t].getProperty("value.value"),a=this.getProperty("value.value");a!==n&&String(a||"")!==String(n||"")?this.addError(it.ERR_CONTROL_VALUES_DONT_MATCH,this.getForm().getEngine().getI18n().translateText("textdef_86",this.getProperty("label.labelText"),e[t].getProperty("label.labelText"))||"".concat(this.getProperty("label.labelText")," and ").concat(e[t].getProperty("label.labelText")," field values must be identical!")):(this.removeError(it.ERR_CONTROL_VALUES_DONT_MATCH),e[t].removeError(it.ERR_CONTROL_VALUES_DONT_MATCH),this.removeAllBackendErrors(),e[t].removeAllBackendErrors())}}}]),t}(mt),Ot=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_ACTION_BAR}},{key:"getElementName",value:function(){var e=this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_action_bar_name");return e&&"edt_UI_control_type_action_bar_name"!==e?e:"Action bar"}},{key:"isRemovable",value:function(){return!1}},{key:"setRendererType",value:function(e){}},{key:"onCreated",value:function(){this.updateDOMAttributes()}},{key:"updateDOMAttributes",value:function(){this.hasProperty("configuration.buttonsPosition")&&this.rootNode.setAttribute("data-buttons-position",String(this.getProperty("configuration.buttonsPosition")||0))}},{key:"getResizingCapability",value:function(){return O.E.NONE}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"isDuplicatable",value:function(){return!1}},{key:"getConfigurableButtons",value:function(){var e=[];return this.getProperty("configuration.hasApproveButton")&&e.push(String(O.a.APPROVE)),this.getProperty("configuration.hasCalculateButton")&&e.push(String(O.a.CALCULATE)),this.getProperty("configuration.hasPreviewButton")&&e.push(String(O.a.PREVIEW)),this.getProperty("configuration.hasPrintButton")&&e.push(String(O.a.PRINT)),this.getProperty("configuration.hasResetButton")&&e.push(String(O.a.RESET)),this.getProperty("configuration.hasSaveForLaterButton")&&e.push(String(O.a.SAVE_FOR_LATER)),this.getProperty("configuration.hasPurchaseButton")&&e.push(String(O.a.PURCHASE)),e}},{key:"setConfigurableButtons",value:function(e){for(var t=[],i=0,n=(e=e||[]).length;i<n;i++)t.push(~~e[i]);this.setProperty("configuration.hasApproveButton",t.indexOf(O.a.APPROVE)>-1),this.setProperty("configuration.hasCalculateButton",t.indexOf(O.a.CALCULATE)>-1),this.setProperty("configuration.hasPreviewButton",t.indexOf(O.a.PREVIEW)>-1),this.setProperty("configuration.hasPrintButton",t.indexOf(O.a.PRINT)>-1),this.setProperty("configuration.hasResetButton",t.indexOf(O.a.RESET)>-1),this.setProperty("configuration.hasSaveForLaterButton",t.indexOf(O.a.SAVE_FOR_LATER)>-1),this.setProperty("configuration.hasPurchaseButton",t.indexOf(O.a.PURCHASE)>-1)}},{key:"getProperty",value:function(e){switch(e){case"configuration.hasSubmitButton":return!(E()(_()(t.prototype),"getProperty",this).call(this,"configuration.hasUpdateButton")||E()(_()(t.prototype),"getProperty",this).call(this,"configuration.hasApproveButton"));case"configuration.hasNextButton":case"configuration.hasPreviousButton":return this.getForm().getNumberOfPages()>1;case"configuration.hasPurchaseButton":return this.getForm().getHasPaymentSummaryPage();case"configuration.hasPreviewButton":return this.getForm().getEngine().getLoader().getLoaderDependency(O.x.FORM_SETTINGS).allowPreviewMode;case"configuration.hasCalculateButton":return this.getForm().getEngine().getLoader().getLoaderDependency(O.x.HAS_CALCULATE_BUTTON);default:return E()(_()(t.prototype),"getProperty",this).call(this,e)}}},{key:"onReset",value:function(){}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"onEnterSelection",value:function(){E()(_()(t.prototype),"onEnterSelection",this).call(this);var e=this.getForm().getEngine().getLoader().getFormSettings(),i="undefined"!==typeof e.autoSubmit&&!0===e.autoSubmit?1:0;!function(e,t){e(t).find("[data-role=control][data-type=form-action-bar]").attr("data-is-selected","1"),setTimeout((function(){e('div[data-role="editor-panel"][data-target-element-type="action bar"]').attr("data-autosubmit-enabled",i)}),500)}(this.getForm().getEngine().getJQuery(),this.getForm().getRootNode())}},{key:"onLeaveSelection",value:function(){E()(_()(t.prototype),"onLeaveSelection",this).call(this),function(e,t){e(t).find("[data-role=control][data-type=form-action-bar]").removeAttr("data-is-selected")}(this.getForm().getEngine().getJQuery(),this.getForm().getRootNode())}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getForm().getEngine().getI18n();return e.push({key:"SendButton",sourceText:this.getProperty("label.submitButtonText")||t.translateText("form_sendDefaultText")}),e.push({key:"textdef_136",sourceText:t.translateText("textdef_136")}),e.push({key:"textdef_254",sourceText:this.getProperty("label.autoSubmitButtonText")||t.translateText("textdef_254")}),e.push({key:"textdef_201",sourceText:this.getProperty("label.resetButtonText")||t.translateText("textdef_201")}),e.push({key:"textdef_84",sourceText:t.translateText("textdef_84")}),e}}],[{key:"getConfiguration",value:function(){return null}}]),t}(mt);v()(Ot,"nodeName","form-action-bar"),v()(Ot,"attributes",{}),v()(Ot,"runtime",null);var Tt=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"streetAddress1DOMNode",void 0),v()(h()(n),"streetAddress2DOMNode",void 0),v()(h()(n),"cityDOMNode",void 0),v()(h()(n),"regionDOMNode",void 0),v()(h()(n),"zipCodeDOMNode",void 0),v()(h()(n),"countryDOMNode",void 0),v()(h()(n),"valueUpdateInterval",void 0),v()(h()(n),"syncCallback",void 0),v()(h()(n),"syncMapControl",!1);var a=n.getHash();return n.rootNode.setAttribute("aria-labelledby","address-".concat(a,"-acc ")+"address-".concat(a,"-error-acc ")+"address-".concat(a,"-instr-acc")),n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","address-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","address-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","address-".concat(a,"-instr-acc")),n.streetAddress1DOMNode=document.createElement("input"),n.streetAddress1DOMNode.setAttribute("type","text"),n.streetAddress1DOMNode.setAttribute("data-role","i123-input"),n.streetAddress1DOMNode.setAttribute("data-index",String(t.INDEX_STREET_ADDRESS_1)),n.streetAddress1DOMNode.placeholder="Address 1",n.streetAddress1DOMNode.setAttribute("data-i18n-placeholder","textdef_24"),n.streetAddress2DOMNode=document.createElement("input"),n.streetAddress2DOMNode.setAttribute("type","text"),n.streetAddress2DOMNode.setAttribute("data-role","i123-input"),n.streetAddress2DOMNode.setAttribute("data-index",String(t.INDEX_STREET_ADDRESS_2)),n.streetAddress2DOMNode.placeholder="Address 2",n.streetAddress2DOMNode.setAttribute("data-i18n-placeholder","textdef_25"),n.cityDOMNode=document.createElement("input"),n.cityDOMNode.setAttribute("type","text"),n.cityDOMNode.setAttribute("data-role","i123-input"),n.cityDOMNode.setAttribute("data-index",String(t.INDEX_CITY)),n.cityDOMNode.setAttribute("data-i18n-placeholder","textdef_26"),n.cityDOMNode.placeholder="City",n.zipCodeDOMNode=document.createElement("input"),n.zipCodeDOMNode.setAttribute("type","text"),n.zipCodeDOMNode.setAttribute("data-role","i123-input"),n.zipCodeDOMNode.setAttribute("data-index",String(t.INDEX_ZIPCODE)),n.zipCodeDOMNode.setAttribute("data-i18n-placeholder","textdef_28"),n.zipCodeDOMNode.placeholder="Zip Code",n.countryDOMNode=lt.createElement(lt.ELEMENT_TYPE_SEARCHABLE_DROPDOWN),n.countryDOMNode.setAttribute("data-role","i123-input"),n.countryDOMNode.setAttribute("data-index",String(t.INDEX_COUNTRY)),n.countryDOMNode.setAttribute("data-i18n-placeholder","textdef_29"),n.countryDOMNode.setAttribute("placeholder","Country"),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_ADDRESS}},{key:"getElementName",value:function(){return"Address"}},{key:"getInputDOMNodes",value:function(){var e=this.getProperty("configuration.fieldAddress1"),t=this.getProperty("configuration.fieldAddress2"),i=this.getProperty("configuration.fieldCity"),n=this.getProperty("configuration.fieldZone"),a=this.getProperty("configuration.fieldZipCode"),r=this.getProperty("configuration.fieldCountry"),o="".concat(~~i).concat(~~n).concat(~~a).concat(~~r),s=[];switch(e&&s.push({inputs:[{input:this.streetAddress1DOMNode,width:O.w.FULL}]}),t&&s.push({inputs:[{input:this.streetAddress2DOMNode,width:O.w.FULL}]}),o){case"0000":break;case"0001":s.push({inputs:[{input:this.countryDOMNode,width:O.w.FULL}]});break;case"0010":s.push({inputs:[{input:this.zipCodeDOMNode,width:O.w.FULL}]});break;case"0011":s.push({inputs:[{input:this.zipCodeDOMNode,width:O.w.HALF},{input:this.countryDOMNode,width:O.w.FILL}]});break;case"0100":s.push({inputs:[{input:this.regionDOMNode,width:O.w.FULL}]});break;case"0101":s.push({inputs:[{input:this.regionDOMNode,width:O.w.HALF},{input:this.countryDOMNode,width:O.w.FILL}]});break;case"0110":s.push({inputs:[{input:this.regionDOMNode,width:O.w.FILL},{input:this.zipCodeDOMNode,width:O.w.HALF}]});break;case"0111":s.push({inputs:[{input:this.regionDOMNode,width:O.w.THIRD},{input:this.zipCodeDOMNode,width:O.w.THIRD},{input:this.countryDOMNode,width:O.w.FILL}]});break;case"1000":s.push({inputs:[{input:this.cityDOMNode,width:O.w.FULL}]});break;case"1001":s.push({inputs:[{input:this.cityDOMNode,width:O.w.HALF},{input:this.countryDOMNode,width:O.w.FILL}]});break;case"1010":s.push({inputs:[{input:this.cityDOMNode,width:O.w.FILL},{input:this.zipCodeDOMNode,width:O.w.HALF}]});break;case"1011":s.push({inputs:[{input:this.cityDOMNode,width:O.w.THIRD},{input:this.zipCodeDOMNode,width:O.w.THIRD},{input:this.countryDOMNode,width:O.w.FILL}]});break;case"1100":s.push({inputs:[{input:this.cityDOMNode,width:O.w.FILL},{input:this.regionDOMNode,width:O.w.HALF}]});break;case"1101":s.push({inputs:[{input:this.cityDOMNode,width:O.w.THIRD},{input:this.regionDOMNode,width:O.w.THIRD},{input:this.countryDOMNode,width:O.w.FILL}]});break;case"1110":s.push({inputs:[{input:this.cityDOMNode,width:O.w.FILL},{input:this.regionDOMNode,width:O.w.THIRD},{input:this.zipCodeDOMNode,width:O.w.THIRD}]});break;case"1111":s.push({inputs:[{input:this.cityDOMNode,width:O.w.HALF},{input:this.regionDOMNode,width:O.w.FILL}]}),s.push({inputs:[{input:this.zipCodeDOMNode,width:O.w.HALF},{input:this.countryDOMNode,width:O.w.FILL}]})}return s}},{key:"configureRegionDOMNode",value:function(){var e,i=this.getProperty("configuration.addressStyle"),n=this.getForm().getEngine().getGeolocation(),a=null;switch(i){case t.ADDRESS_STYLE_US:a=n.getCountryByISOCode("US").regions;break;case t.ADDRESS_STYLE_UNITED_KINGDOM:a=n.getCountryByISOCode("GB").regions;break;case t.ADDRESS_STYLE_CANADA:a=n.getCountryByISOCode("CA").regions;break;case t.ADDRESS_STYLE_AUSTRALIA:a=n.getCountryByISOCode("AU").regions}if(null===a)this.regionDOMNode=document.createElement("input"),this.regionDOMNode.setAttribute("type","text");else{this.regionDOMNode=lt.createElement(lt.ELEMENT_TYPE_SEARCHABLE_DROPDOWN);for(var r=0,o=a.length;r<o;r++)e=Ge.create(this.countryDOMNode,a[r],a[r]),this.regionDOMNode.add(e)}this.regionDOMNode.setAttribute("data-role","i123-input"),this.regionDOMNode.setAttribute("data-index",String(t.INDEX_REGION))}},{key:"populateCountryDOMNode",value:function(){var e,i,n=this.getProperty("configuration.addressStyle"),a=this.getForm().getEngine().getGeolocation(),r=this.getProperty("configuration.countries")||null;switch((null!==r&&0===r.length||r&&1===r.length&&!r[0])&&(r=null),n){case t.ADDRESS_STYLE_US:e=[a.getCountryByISOCode("US")];break;case t.ADDRESS_STYLE_UNITED_KINGDOM:e=[a.getCountryByISOCode("GB")];break;case t.ADDRESS_STYLE_CANADA:e=[a.getCountryByISOCode("CA")];break;case t.ADDRESS_STYLE_AUSTRALIA:e=[a.getCountryByISOCode("AU")];break;case t.ADDRESS_STYLE_ANY:default:e=a.getCountriesList();var o=JSON.parse(JSON.stringify(this.getProperty("configuration.countries")).toLowerCase());Array.isArray(o)&&o.length&&(e=e.filter((function(e){return o.indexOf(e.code.toLowerCase())>-1||o.indexOf(e.name.toLowerCase())>-1})))}for(;this.countryDOMNode.getOptions().length;)this.countryDOMNode.remove(0);(i=Ge.create(this.countryDOMNode,null,null)).value="",i.text="Country",i.setAttribute("data-i18n-text","textdef_29"),this.countryDOMNode.add(i);for(var s=0,l=e.length;s<l;s++)i=Ge.create(this.countryDOMNode,e[s].code,e[s].name),this.countryDOMNode.add(i)}},{key:"setDefaultCountry",value:function(){var e=this.getProperty("configuration.defaultCountry"),t=this.countryDOMNode.getOptions(),i=this.getForm().getEngine().getGeolocation();if(e){for(var n=0,a=t.length;n<a;n++)if(e===t[n].value){this.countryDOMNode.setValue(e),this.setProperty("value.country",e),this.synchronizeValue();break}}else{var r=i.getUserCountryCode();this.countryDOMNode.setValue(r),this.setProperty("value.country",r),this.synchronizeValue()}}},{key:"updateCountry",value:function(e){var t=this.getForm().getEngine().getGeolocation(),i=t.getCorrectedCountryName(e),n=t.getCountryISOCodeByCountryName(i);this.countryDOMNode.setValue(n),this.setProperty("value.country",n)}},{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.configureRegionDOMNode(),this.updateZoneLabelPlaceholder(),this.populateCountryDOMNode(),this.updatePostalCodeLabelPlaceholder(),this.clearValue(),this.setDefaultCountry(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.synchronizeValue(),setTimeout((function(){e.getForm().getEngine().getI18n().translateDOMNode(e.rootNode)}),50)}},{key:"onValueChanged",value:function(){this.setProperty("value.address1",this.streetAddress1DOMNode.value||null),this.setProperty("value.address2",this.streetAddress2DOMNode.value||null),this.setProperty("value.city",this.cityDOMNode.value||null),A()(this.regionDOMNode,HTMLInputElement)?this.setProperty("value.zone",this.regionDOMNode.value||null):this.setProperty("value.zone",this.regionDOMNode.getValue()||null),this.setProperty("value.zipCode",this.zipCodeDOMNode.value||null),this.setProperty("value.country",this.countryDOMNode.getValue()||null),this.updateFieldsWithErrors(),this.onValueUpdated()}},{key:"setSyncronizeCallback",value:function(e){this.syncCallback=e}},{key:"onValueUpdated",value:function(){var e;e=this,clearInterval(e.valueUpdateInterval),e.valueUpdateInterval=setTimeout((function(){null!==e.syncCallback&&e.syncMapControl&&e.syncCallback()}),1e3)}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.streetAddress1DOMNode,this.getProperty("value.address1")),yt.synchronizeControlValue(this.streetAddress2DOMNode,this.getProperty("value.address2")),yt.synchronizeControlValue(this.cityDOMNode,this.getProperty("value.city")),yt.synchronizeControlValue(this.regionDOMNode,this.getProperty("value.zone")),yt.synchronizeControlValue(this.zipCodeDOMNode,this.getProperty("value.zipCode")),yt.synchronizeControlValue(this.countryDOMNode,this.getProperty("value.country"))}},{key:"updateFieldsWithErrors",value:function(){if(this.streetAddress1DOMNode.hasAttribute("data-field-with-error")&&this.streetAddress1DOMNode.removeAttribute("data-field-with-error"),this.streetAddress2DOMNode.hasAttribute("data-field-with-error")&&this.streetAddress2DOMNode.removeAttribute("data-field-with-error"),this.cityDOMNode.hasAttribute("data-field-with-error")&&this.cityDOMNode.removeAttribute("data-field-with-error"),this.regionDOMNode.hasAttribute("data-field-with-error")&&this.regionDOMNode.removeAttribute("data-field-with-error"),this.zipCodeDOMNode.hasAttribute("data-field-with-error")&&this.zipCodeDOMNode.removeAttribute("data-field-with-error"),this.countryDOMNode.hasAttribute("data-field-with-error")&&this.countryDOMNode.removeAttribute("data-field-with-error"),this.errors)for(var e=0,t=this.errors.length;e<t;e++)switch(this.errors[e].propertyName){case"value.address1":this.streetAddress1DOMNode.setAttribute("data-field-with-error","1");break;case"value.address2":this.streetAddress2DOMNode.setAttribute("data-field-with-error","1");break;case"value.city":this.cityDOMNode.setAttribute("data-field-with-error","1");break;case"value.zone":this.regionDOMNode.setAttribute("data-field-with-error","1");break;case"value.zipCode":this.zipCodeDOMNode.setAttribute("data-field-with-error","1");break;case"value.country":this.countryDOMNode.setAttribute("data-field-with-error","1")}}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case t.INDEX_STREET_ADDRESS_1:return{targetPropertyFQN:"value.address1",optional:!0,type:"string"};case t.INDEX_STREET_ADDRESS_2:return{targetPropertyFQN:"value.address2",optional:!0,type:"string"};case t.INDEX_CITY:return{targetPropertyFQN:"value.city",optional:!0,type:"string"};case t.INDEX_REGION:return{targetPropertyFQN:"value.zone",optional:!0,type:"string"};case t.INDEX_ZIPCODE:return{targetPropertyFQN:"value.zipCode",optional:!0,type:"string"};case t.INDEX_COUNTRY:return{targetPropertyFQN:"value.fullCountryName",optional:!0,type:"string"};default:return null}}},{key:"enumerateIndexes",value:function(){return[t.INDEX_STREET_ADDRESS_1,t.INDEX_STREET_ADDRESS_2,t.INDEX_CITY,t.INDEX_REGION,t.INDEX_ZIPCODE,t.INDEX_COUNTRY]}},{key:"getMinInputRowWidth",value:function(){return 12}},{key:"getRequiredFields",value:function(){var e=[],t=0;return this.getProperty("configuration.fieldAddress1")&&this.getProperty("options.isRequiredFieldAddress1")&&(e.push(O.b.ADDRESS_1),t++),this.getProperty("configuration.fieldAddress2")&&this.getProperty("options.isRequiredFieldAddress2")&&(e.push(O.b.ADDRESS_2),t++),this.getProperty("configuration.fieldCity")&&this.getProperty("options.isRequiredFieldCity")&&(e.push(O.b.CITY),t++),this.getProperty("configuration.fieldZone")&&this.getProperty("options.isRequiredFieldZone")&&(e.push(O.b.ZONE),t++),this.getProperty("configuration.fieldZipCode")&&this.getProperty("options.isRequiredFieldZipCode")&&(e.push(O.b.ZIP_CODE),t++),this.getProperty("configuration.fieldCountry")&&this.getProperty("options.isRequiredFieldCountry")&&(e.push(O.b.COUNTRY),t++),6===t&&e.push(O.b.ALL),e}},{key:"setRequiredFields",value:function(e){if(e)for(var t=0,i=e.length;t<i;t++)e[t]=~~e[t];e&&e.length?(this.setProperty("options.isRequiredFieldAddress1",e.indexOf(O.b.ADDRESS_1)>-1),this.setProperty("options.isRequiredFieldAddress2",e.indexOf(O.b.ADDRESS_2)>-1),this.setProperty("options.isRequiredFieldCity",e.indexOf(O.b.CITY)>-1),this.setProperty("options.isRequiredFieldZone",e.indexOf(O.b.ZONE)>-1),this.setProperty("options.isRequiredFieldZipCode",e.indexOf(O.b.ZIP_CODE)>-1),this.setProperty("options.isRequiredFieldCountry",e.indexOf(O.b.COUNTRY)>-1),this.setProperty("options.required",e.length>0)):(this.setProperty("options.isRequiredFieldAddress1",!1),this.setProperty("options.isRequiredFieldAddress2",!1),this.setProperty("options.isRequiredFieldCity",!1),this.setProperty("options.isRequiredFieldZone",!1),this.setProperty("options.isRequiredFieldZipCode",!1),this.setProperty("options.isRequiredFieldCountry",!1),this.setProperty("options.required",!1))}},{key:"getAllowedFields",value:function(){var e=[];return this.getProperty("configuration.fieldAddress1")&&e.push(O.b.ADDRESS_1),this.getProperty("configuration.fieldAddress2")&&e.push(O.b.ADDRESS_2),this.getProperty("configuration.fieldCity")&&e.push(O.b.CITY),this.getProperty("configuration.fieldZone")&&e.push(O.b.ZONE),this.getProperty("configuration.fieldZipCode")&&e.push(O.b.ZIP_CODE),this.getProperty("configuration.fieldCountry")&&e.push(O.b.COUNTRY),e}},{key:"setAllowedFields",value:function(e){if(e)for(var t=0,i=e.length;t<i;t++)e[t]=~~e[t];!e||!e.length||1===e.length&&e[0]===O.b.ALL?(this.setProperty("configuration.fieldAddress1",!0),this.setProperty("configuration.fieldAddress2",!0),this.setProperty("configuration.fieldCity",!0),this.setProperty("configuration.fieldZone",!0),this.setProperty("configuration.fieldZipCode",!0),this.setProperty("configuration.fieldCountry",!0)):(this.setProperty("configuration.fieldAddress1",e.indexOf(O.b.ADDRESS_1)>-1),this.setProperty("configuration.fieldAddress2",e.indexOf(O.b.ADDRESS_2)>-1),this.setProperty("configuration.fieldCity",e.indexOf(O.b.CITY)>-1),this.setProperty("configuration.fieldZone",e.indexOf(O.b.ZONE)>-1),this.setProperty("configuration.fieldZipCode",e.indexOf(O.b.ZIP_CODE)>-1),this.setProperty("configuration.fieldCountry",e.indexOf(O.b.COUNTRY)>-1)),this.reRender()}},{key:"updateZoneLabelPlaceholder",value:function(){var e=this.getProperty("configuration.zoneLabel");switch(this.getProperty("configuration.addressStyle")){case t.ADDRESS_STYLE_US:case t.ADDRESS_STYLE_AUSTRALIA:case t.ADDRESS_STYLE_CANADA:e="state";break;case t.ADDRESS_STYLE_UNITED_KINGDOM:e="region"}switch(e){case"region":this.regionDOMNode.setAttribute("data-i18n-placeholder","textdef_27"),this.regionDOMNode.setAttribute("placeholder","Region");break;case"county":this.regionDOMNode.setAttribute("data-i18n-placeholder","textdef_202"),this.regionDOMNode.setAttribute("placeholder","County");break;case"state":default:this.regionDOMNode.setAttribute("placeholder","State"),this.regionDOMNode.setAttribute("data-i18n-placeholder","textdef_74")}this.getForm().getEngine().getI18n().translateDOMNode(this.rootNode)}},{key:"updatePostalCodeLabelPlaceholder",value:function(){switch(this.getProperty("configuration.postalCodeLabel")){case"zipCode":this.zipCodeDOMNode.setAttribute("placeholder","Zip Code"),this.zipCodeDOMNode.setAttribute("data-i18n-placeholder","textdef_125");break;case"postalCode":this.zipCodeDOMNode.setAttribute("placeholder","Postal Code"),this.zipCodeDOMNode.setAttribute("data-i18n-placeholder","textdef_239");break;case"postalZipCode":default:this.zipCodeDOMNode.setAttribute("placeholder","Postal/Zip Code"),this.zipCodeDOMNode.setAttribute("data-i18n-placeholder","textdef_28")}this.getForm().getEngine().getI18n().translateDOMNode(this.rootNode)}},{key:"onReset",value:function(){this.setValue({address1:null,address2:null,city:null,country:null,zipCode:null,zone:null})}},{key:"setupDefaults",value:function(){this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_address_name"));var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.DEFAULT_USER_PREFERENCES);return e&&(this.setProperty("configuration.postalCodeLabel",e.postalZipCodeFormat),this.updatePostalCodeLabelPlaceholder()),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"getFullCountryName",value:function(){var e=this.getProperty("value.country");return e?this.getForm().getEngine().getGeolocation().getCountryNameByISOCode(e):""}},{key:"setCountryByCountryName",value:function(e){var t=this.getForm().getEngine().getGeolocation().getCountryISOCodeByCountryName(e);t?this.setProperty("value.country",t):this.setProperty("value.country",null)}},{key:"setCountryByCountryCode",value:function(e){e?this.setProperty("value.country",e):this.setProperty("value.country",null)}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"setMapSync",value:function(e){this.syncMapControl=e}},{key:"emulateUserInput",value:function(){var e=this;!function(t){t([e.streetAddress1DOMNode,e.streetAddress2DOMNode,e.cityDOMNode,e.zipCodeDOMNode]).trigger("input"),e.countryDOMNode&&e.countryDOMNode.trigger("change")}(this.getForm().getEngine().getJQuery())}},{key:"clearValue",value:function(){this.setProperty("value.address1",null),this.setProperty("value.address2",null),this.setProperty("value.city",null),this.setProperty("value.zipCode",null),this.setProperty("value.zone",null)}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_ADDRESS,name:"Address",isContainer:!1,category:"advanced",keywords:"address street",icon:"i123-address",isVirtual:!1,i18nName:"edt_UI_control_type_address_name",i18nKeywords:"edt_UI_control_type_address_keywords",index:120,accessibilityFields:O.q.ERROR_NODE+O.q.ROOT_NODE}}}]),t}(mt);v()(Tt,"INDEX_STREET_ADDRESS_1",1),v()(Tt,"INDEX_STREET_ADDRESS_2",2),v()(Tt,"INDEX_CITY",3),v()(Tt,"INDEX_REGION",4),v()(Tt,"INDEX_ZIPCODE",5),v()(Tt,"INDEX_COUNTRY",6),v()(Tt,"ADDRESS_STYLE_ANY","all"),v()(Tt,"ADDRESS_STYLE_US","us"),v()(Tt,"ADDRESS_STYLE_CANADA","ca"),v()(Tt,"ADDRESS_STYLE_AUSTRALIA","au"),v()(Tt,"ADDRESS_STYLE_UNITED_KINGDOM","uk"),v()(Tt,"attributes",{}),v()(Tt,"runtime",null),v()(Tt,"nodeName","address");var Ct=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0),v()(h()(n),"captchaPicture",void 0),v()(h()(n),"recaptchaRenderContainer",void 0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","captcha-".concat(a,"-acc")),n.labelDOMNode.setAttribute("data-i18n-text","textdef_1"),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.captchaPicture=document.createElement("img"),n.captchaPicture.setAttribute("data-role","i123-captcha"),n.captchaPicture.addEventListener("load",(function(){yt.refreshFrameHeightOnWix()}),!0),n.recaptchaRenderContainer=document.createElement("div"),n.recaptchaRenderContainer.setAttribute("class","recaptcha-container"),n.input=document.createElement("input"),n.input.setAttribute("type","text"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("aria-labelledby","captcha-".concat(a,"-acc")),n}return f()(t,e),l()(t,[{key:"updateRequiredState",value:function(){this.getRootNode().setAttribute("data-is-required","1")}},{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_CAPTCHA}},{key:"getElementName",value:function(){var e=this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_captcha_name");return e&&"edt_UI_control_type_captcha_name"!==e?e:"Verification"}},{key:"isRemovable",value:function(){return!1}},{key:"getResizingCapability",value:function(){return O.E.LEFT_AND_RIGHT}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"getInputDOMNodes",value:function(){var e=this.getProperty("configuration.type"),t=this.getForm().getEngine().getLoader().getLoaderType();switch(e){case O.d.DAILY:case O.d.ALWAYS:case O.d.SMART:return[{inputs:[{input:this.captchaPicture,width:O.w.FOUR_UNITS},{input:this.input,width:O.w.FILL}]}];case O.d.RECAPTCHA:return t===O.u.EDIT?[{inputs:[{input:this.captchaPicture,width:null}]}]:[{inputs:[{input:this.recaptchaRenderContainer,width:null}]}];case O.d.NONE:default:return[]}}},{key:"onCaptchaTypeChanged",value:function(){var e=this.getProperty("configuration.type"),i=this.getForm().getEngine().getLoader().getLoaderType(),n=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.SESSION_ID);switch(e){case O.d.NONE:this.captchaPicture.src="",this.captchaPicture.setAttribute("data-captcha-type","none");break;case O.d.ALWAYS:this.captchaPicture.setAttribute("data-captcha-type","always"),i===O.u.VIEW?this.captchaPicture.src=this.captchaPicture.src||"".concat(t.PATH_TO_CAPTCHA_IN_VIEW_FORM_MODE,"?t=").concat(+new Date,"&fid=").concat(String(this.getForm().getEngine().getLoader().getFormId()||"0"),"&needsRandomCaptchaGeneration=true&PHPSESSID=").concat(n):this.captchaPicture.src=t.PATH_TO_CAPTCHA_TYPE_ALWAYS_IN_EDIT_MODE;break;case O.d.DAILY:this.captchaPicture.setAttribute("data-captcha-type","daily"),i===O.u.VIEW?this.captchaPicture.src=this.captchaPicture.src||"".concat(t.PATH_TO_CAPTCHA_TYPE_DAILY_IN_VIEW_FORM_MODE.replace(/\%FORMID\%/g,String(this.getForm().getId()||"0")),"?t=").concat(+new Date,"&PHPSESSID=").concat(n):this.captchaPicture.src=t.PATH_TO_CAPTCHA_TYPE_DAILY_IN_EDIT_MODE;break;case O.d.RECAPTCHA:this.captchaPicture.setAttribute("data-captcha-type","recaptcha"),i===O.u.VIEW?(this.captchaPicture.removeAttribute("src"),function(e){var i,n=ie.isIOS();if(n){var a=e.recaptchaRenderContainer.getBoundingClientRect();i=a.top}e.whenRecaptchaLibraryIsLoaded().then((function(){grecaptcha.render(e.recaptchaRenderContainer,{sitekey:t.RECAPTCHA_SITE_KEY,"expired-callback":function(e){n&&void 0!==i&&window.parent.postMessage({top:i,command:"scroll-into-view"},"*")},callback:function(e){n&&void 0!==i&&window.parent.postMessage({top:i,command:"scroll-into-view"},"*")}})}))}(this)):this.captchaPicture.src=t.PATH_TO_CAPTCHA_TYPE_RECAPTCHA_IN_EDIT_MODE;break;case O.d.SMART:this.captchaPicture.setAttribute("data-captcha-type","smart"),i===O.u.VIEW?this.captchaPicture.src=this.captchaPicture.src||"".concat(t.PATH_TO_CAPTCHA_IN_VIEW_FORM_MODE,"?t=").concat(+new Date,"&fid=").concat(String(this.getForm().getEngine().getLoader().getFormId()||"0"),"&needsRandomCaptchaGeneration=true&PHPSESSID=").concat(n):this.captchaPicture.src=t.PATH_TO_CAPTCHA_TYPE_SMART_IN_EDIT_MODE}this.updateCaptchaTypeAttribute()}},{key:"updateCaptchaTypeAttribute",value:function(){switch(this.getProperty("configuration.type")){case O.d.NONE:this.rootNode.setAttribute("data-captcha-type","none");break;case O.d.DAILY:this.rootNode.setAttribute("data-captcha-type","daily");break;case O.d.RECAPTCHA:this.rootNode.setAttribute("data-captcha-type","recaptcha");break;case O.d.RESERVED:this.rootNode.setAttribute("data-captcha-type","");break;case O.d.SMART:this.rootNode.setAttribute("data-captcha-type","smart");break;case O.d.ALWAYS:this.rootNode.setAttribute("data-captcha-type","always")}}},{key:"whenRecaptchaLibraryIsLoaded",value:function(){return function(e,i){return t.isRecaptchaLibraryLoaded?i.Deferred((function(e){e.resolve(!0)})).promise():void 0!==t.theOnlyOneRecaptchaAPIPromise?t.theOnlyOneRecaptchaAPIPromise:(t.theOnlyOneRecaptchaAPIPromise=i.Deferred((function(i){window.RECAPTCHA_READY_CALBACK_612388123=function(){t.isRecaptchaLibraryLoaded=!0,delete window.RECAPTCHA_READY_CALBACK_612388123,i.resolve(!0)},e.getForm().getEngine().getResourceManager().loadJavascript("//www.google.com/recaptcha/api.js?onload=RECAPTCHA_READY_CALBACK_612388123&render=explicit").then((function(){setTimeout((function(){yt.refreshFrameHeightOnWix()}),100)})).fail((function(){i.reject(new Error("Failed to load google Recaptcha Library"))}))})).promise(),t.theOnlyOneRecaptchaAPIPromise)}(this,lt.getJQuery())}},{key:"onCreated",value:function(){var e=this;setTimeout((function(){e.updateLabelText(),e.updateErrorsText(),e.updateRequiredState(),e.updateCaptchaTypeAttribute();for(var t=0,i=e.enumerateProperties(),n=i.length;t<n;t++)e.getForm().trigger("node-property-changed",e,i[t].name,e.getProperty(i[t].name),null);yt.refreshFrameHeightOnWix()}),0)}},{key:"setRendererType",value:function(e){var i=this.getProperty("configuration.type"),n=this.getForm().getEngine().getLoader().getLoaderType();if(i===O.d.NONE)if(this.getRootNode().innerHTML="",n===O.u.EDIT){var a=document.createElement("p");a.textContent="Configure your captcha",this.getRootNode().appendChild(a)}else this.getRootNode().style.display="none";else this.getRootNode().style.display="",E()(_()(t.prototype),"setRendererType",this).call(this,e)}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"isSubmittable",value:function(){var e=this.getProperty("configuration.type");return e!==O.d.NONE&&e!==O.d.SMART}},{key:"getProperty",value:function(e){var i=E()(_()(t.prototype),"getProperty",this).call(this,e);switch(e){case"label.labelText":if(null===i){var n=this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_captcha_name");return n&&"edt_UI_control_type_captcha_name"!==n?n:"Verification"}return i;case"value.value":var a=this.getProperty("configuration.type"),r=this.getForm().getEngine().getLoader().getLoaderType();if(a===O.d.RECAPTCHA&&r===O.u.VIEW){var o=document.getElementById("g-recaptcha-response");if(o)return o.value}return i;default:return i}}},{key:"isDuplicatable",value:function(){return!1}},{key:"onReset",value:function(){this.setValue({value:null})}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getElementName()),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"getParentPage",value:function(){return this.getForm().getPageByIndex(this.getForm().getNumberOfPages()-1)}},{key:"withColspan",value:function(e){var i=this,n=E()(_()(t.prototype),"withColspan",this).call(this,e);return null!==e&&20!==e?(this.getForm().getConfiguration().withProperty("captchaWidthInUnits",e),setTimeout((function(){var e=i.getParent().getChildren();e[0]!==i&&i.getForm().getConfiguration().withProperty("captchaLeftMarginInUnits",e[0].getColspan())}),100)):(this.getForm().getConfiguration().deleteProperty("captchaWidthInUnits"),this.getForm().getConfiguration().deleteProperty("captchaLeftMarginInUnits")),n}},{key:"setMarginLeft",value:function(e){var t=this.getParent().getChildren();if(null===e||e<=0)t[0]!==this&&this.getParent().removeChild(t[0]);else if(t[0]!==this)t[0].withColspan(e);else{var i=this.getForm().getEngine().createElement(C.a.CONTROL_TYPE_SEPARATOR,void 0,this.getForm());this.getParent().insertBefore(this,i),i.withColspan(e)}}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getForm().getEngine().getI18n();return e.push({key:"textdef_1",sourceText:this.getProperty("label.labelText")||t.translateText("textdef_1")}),e}},{key:"setupI18n",value:function(){var e=this;return setTimeout((function(){var t=e.getForm().getEngine().getLoader();e.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW&&t.getCurrentLanguage()===t.getDefaultLanguage()&&e.getProperty("label.labelText")&&(e.labelDOMNode.innerHTML=S.sanitizeHTML(I.parse(e.getProperty("label.labelText"))))}),100),E()(_()(t.prototype),"setupI18n",this).call(this)}}],[{key:"getConfiguration",value:function(){return null}}]),t}(mt);v()(Ct,"isRecaptchaLibraryLoaded",!1),v()(Ct,"theOnlyOneRecaptchaAPIPromise",void 0),v()(Ct,"PATH_TO_CAPTCHA_TYPE_SMART_IN_EDIT_MODE","/images3/editor/captcha_smart.png"),v()(Ct,"PATH_TO_CAPTCHA_TYPE_DAILY_IN_EDIT_MODE","/images3/editor/captcha_daily.png"),v()(Ct,"PATH_TO_CAPTCHA_TYPE_ALWAYS_IN_EDIT_MODE","/images3/editor/captcha_always.png"),v()(Ct,"PATH_TO_CAPTCHA_TYPE_RECAPTCHA_IN_EDIT_MODE","/images3/editor/captcha_recaptcha.gif"),v()(Ct,"PATH_TO_CAPTCHA_IN_VIEW_FORM_MODE","/random.php"),v()(Ct,"PATH_TO_CAPTCHA_TYPE_DAILY_IN_VIEW_FORM_MODE","/random-%FORMID%.png"),v()(Ct,"RECAPTCHA_SITE_KEY","6LdMNiMTAAAAAGr0ibqKRZc3e5Z6wfLBraX9NuOY"),v()(Ct,"nodeName","form-captcha"),v()(Ct,"attributes",{}),v()(Ct,"runtime",null);var Nt=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"choices",[]),v()(h()(n),"warningContainer",void 0);var a=n.getHash();return n.rootNode.setAttribute("aria-labelledby","checkbox-".concat(a,"-acc ")+"checkbox-".concat(a,"-error-acc ")+"checkbox-".concat(a,"-instr-acc")),n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","checkbox-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","checkbox-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","checkbox-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_CHECKBOX}},{key:"getElementName",value:function(){return"Checkbox"}},{key:"updateChoices",value:function(){if(this.hasProperty("choices.values")){var e,t,i,n,a,r,o,s=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),l=this.getHash(),u=this.getProperty("options.showNumberOfChoicesLeft");u?this.rootNode.setAttribute("data-show-number-of-choices","1"):this.rootNode.removeAttribute("data-show-number-of-choices");for(var d=0,c=s.length;d<c;d++)s[d].index=d;this.hasProperty("options.randomizeOrder")&&this.getProperty("options.randomizeOrder")&&yt.shuffle(s),this.hasProperty("choices.allowOther")&&this.getProperty("choices.allowOther")&&s.push({text:"Other...",isOther:!0,index:s.length});for(var h=0,p=this.choices.length;h<p;h++)this.choices[h].parentNode&&this.choices[h].parentNode.removeChild(this.choices[h]);this.choices.splice(0,this.choices.length);for(var _=0,g=s.length;_<g;_++){if((n=document.createElement("div")).setAttribute("data-role","choice"),n.setAttribute("data-index",String(s[_].index)),(e=document.createElement("input")).setAttribute("type","checkbox"),e.setAttribute("id","".concat(l,"_").concat(_)),e.setAttribute("data-role","i123-input"),e.setAttribute("data-index",String(s[_].index)),s[_].isOther?e.setAttribute("data-is-other","1"):e.setAttribute("data-value",s[_].text),(t=document.createElement("label")).setAttribute("data-role","choice"),t.setAttribute("id","checkbox-".concat(l,"-").concat(_)),t.appendChild(e),s[_].isDefault&&(e.checked=!0,t.setAttribute("aria-checked","true")),(i=document.createElement("label")).setAttribute("data-role","checkbox"),i.setAttribute("for","".concat(l,"_").concat(_)),i.setAttribute("aria-labelledby","checkbox-".concat(l,"-").concat(_)),i.setAttribute("role","checkbox"),t.appendChild(i),n.appendChild(t),s[_].isOther)(a=document.createElement("input")).setAttribute("data-role","other"),a.setAttribute("type","text"),a.setAttribute("data-size","full"),(o=document.createElement("span")).innerHTML=s[_].text||"",o.setAttribute("data-i18n-text","textdef_15"),t.appendChild(o),n.appendChild(a);else yt.isImageURL(s[_].text||"")?((r=document.createElement("img")).setAttribute("src",s[_].text),r.setAttribute("data-choice-is-image","1"),t.appendChild(r)):((o=document.createElement("span")).setAttribute("data-role","option-text"),o.innerHTML=s[_].text||"",t.appendChild(o));this.setupNumberOfTimesAnOptionCanBeChosen(s[_],u,t,n,e),this.choices.push(n)}this.isAttached()&&this.reRender()}}},{key:"setupNumberOfTimesAnOptionCanBeChosen",value:function(e,t,i,n,a){if(e.numberOfTimesThisOptionCanBeChosen&&null!==e.numberOfTimesThisOptionCanBeChosen&&e.numberOfTimesThisOptionCanBeChosen>=-1){var r=~~e.numberOfTimesThisOptionHasBeenChosen;r<0&&(r=0);var o=e.numberOfTimesThisOptionCanBeChosen-r;if(t){var s=document.createElement("span");s.setAttribute("data-role","label-info");var l=document.createElement("span");s.appendChild(document.createTextNode("".concat(String(o<0||0===o?0:o)," "))),l.textContent=1===o?"choice left":"choices left",l.setAttribute("data-i18n-text",1===o?"textdef_173":"textdef_174"),s.appendChild(l),i.appendChild(s)}(this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT||this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW&&this.getForm().getEngine().getLoader().getViewFormContext()!==O.R.EDIT_SUBMISSION)&&o<1&&(i.setAttribute("data-disabled","1"),n.setAttribute("data-disabled","1"),a.setAttribute("disabled","true"),a.setAttribute("data-disabled","1"))}}},{key:"updateSideBySideAttribute",value:function(){this.getProperty("layout.isSideBySide")?this.rootNode.setAttribute("data-is-side-by-side-layout","1"):this.rootNode.removeAttribute("data-is-side-by-side-layout")}},{key:"getNumberOfColumns",value:function(){var e=this.hasProperty("layout.columns")?~~this.getProperty("layout.columns"):1;return e<1&&(e=1),e>4&&(e=4),e}},{key:"getChoiceWidth",value:function(e){switch(e){case 2:return O.w.HALF;case 3:return O.w.THIRD;case 4:return O.w.QUARTER}return O.w.FULL}},{key:"getInputObject",value:function(e,t){switch(e){case 2:return{width:O.w.HALF,input:t};case 3:return{width:O.w.THIRD,input:t};case 4:return{width:O.w.QUARTER,input:t};case 1:default:return{width:O.w.FULL,input:t}}}},{key:"getIsSideBySideLayout",value:function(){return!!this.hasProperty("layout.isSideBySide")&&!!this.getProperty("layout.isSideBySide")}},{key:"getIsDirectionVertical",value:function(){return!!this.hasProperty("layout.direction")&&"vertical"===this.getProperty("layout.direction")}},{key:"getVerticalChoicesLayoutRows",value:function(e,t){var i=Math.ceil(e/t),n=this.getChoiceWidth(t),a=0,r=[];i!==~~i&&(i=1+~~i);for(var o=0,s=e;o<s;o++)r[a]=r[a]||{inputs:[]},r[a].inputs.push({width:n,input:this.choices[o]}),++a>=i&&(a=0);return r}},{key:"getHorizontalChoicesLayoutRows",value:function(e,t){for(var i=null,n=0,a=[],r=0,o=e;r<o;r++)null===i&&(i={inputs:[]},a.push(i)),i.inputs.push(this.getInputObject(t,this.choices[r])),++n>=t&&(n=0,r<o-1&&(i={inputs:[]},a.push(i)));return a}},{key:"getSideBySideChoicesLayoutRows",value:function(e){for(var t=[],i={inputs:[]},n=0,a=e;n<a;n++)i.inputs.push({width:null,input:this.choices[n]});return t.push(i),t}},{key:"getInputDOMNodes",value:function(){var e=this.getNumberOfColumns(),t=this.getIsSideBySideLayout(),i=this.getIsDirectionVertical(),n=this.choices.length;switch(!0){case t:return this.getSideBySideChoicesLayoutRows(n);case i:if(!this.getForm().getEngine().getTheme().isMobileLayout())return this.getVerticalChoicesLayoutRows(n,e)}return this.getHorizontalChoicesLayoutRows(n,e)}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateChoices(),this.updateSideBySideAttribute(),this.updateHiddenAttribute(),this.updateShowInstructionsOnClick(),this.addCustomInputInvalidation(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW&&this.onValueChanged()}},{key:"addCustomInputInvalidation",value:function(){var e=this.getForm().getEngine().getJQuery(),t=this,i=function(e){var i=this.getAttribute("data-index"),n=i&&t.rootNode.querySelector('div[data-index="'.concat(i,'"]'));if("undefined"!=typeof n&&(!e.keyCode||e.keyCode===Ye.KEY_SPACE)){var a=n&&n.hasAttribute("data-disabled");if(e.keyCode===Ye.KEY_SPACE?this.checked||a:!this.checked||a)return t.warningContainer&&t.getErrorDOMNode().removeChild(t.warningContainer),t.warningContainer&&!t.getErrorDOMNode().hasChildNodes()&&t.getErrorDOMNode().setAttribute("data-is-empty","1"),void(t.warningContainer=null);var r=t.getProperty("choices.maxNumberOfChoices"),o=t.choices.filter((function(e){var t=e.querySelector("input[type=checkbox]");return t&&t.checked})).length;null!==r&&o>r&&(t.warningContainer||(t.warningContainer=document.createElement("div"),t.warningContainer.setAttribute("data-warning-container","1")),t.warningContainer.innerText="".concat(t.getForm().getEngine().getI18n().translateText("textdef_61")," (").concat(r,")")||!1,t.getErrorDOMNode().removeAttribute("data-is-empty"),t.getErrorDOMNode().appendChild(t.warningContainer),e.stopPropagation(),e.preventDefault())}};e(this.rootNode).on("keydown","input[type=checkbox]",i),e(this.rootNode).on("click","input[type=checkbox]",i)}},{key:"onValueChanged",value:function(){for(var e,t,i,n,a,r=[],o=this.getProperty("choices.maxNumberOfChoices"),s=this.getProperty("choices.minNumberOfChoices"),l=0,u=this.choices.length;l<u;l++)e=this.choices[l].querySelector("input[type=checkbox]"),a=this.choices[l].querySelector("label[data-role=checkbox]"),e&&e.checked?(e.hasAttribute("data-is-other")?(t=this.choices[l].querySelector("input[type=text][data-role=other]"))&&t.value&&r.push(t.value):r.push(e.getAttribute("data-value")),(n=(i=this.choices[l].querySelector("label[data-role=choice]"))?i.parentNode:null)&&n.setAttribute("data-is-checked","1"),a.setAttribute("aria-checked","true")):((n=(i=this.choices[l].querySelector("label[data-role=choice]"))?i.parentNode:null)&&n.hasAttribute("data-is-checked")&&n.removeAttribute("data-is-checked"),a&&a.removeAttribute("aria-checked"));this.updateControlErrorState(r,o,s),this.setProperty("value.values",r),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateControlErrorState",value:function(e,t,i){e.length>t&&null!=t&&t>0?this.addError(it.ERR_TOO_MANY_CHOICES_SELECTED,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_61")," (").concat(t,")")||!1):this.removeError(it.ERR_TOO_MANY_CHOICES_SELECTED),e.length<i&&e.length>=1&&null!=i&&i>0?this.addError(it.ERR_TOO_FEW_CHOICES_SELECTED,this.getForm().getEngine().getI18n().translateText("textdef_164",String(i))||"You must select at least ".concat(i," options")):this.removeError(it.ERR_TOO_FEW_CHOICES_SELECTED)}},{key:"getPropertyDescriptorByInputIndex",value:function(e){var t=(this.getProperty("choices.values")||[]).length;return e<t?{element:this,targetPropertyFQN:"value.values",optional:!1,type:"boolean",inputIndex:e}:e>t?null:this.getProperty("choices.allowOther")?{element:this,targetPropertyFQN:"value.values",optional:!1,type:"string",inputIndex:e}:null}},{key:"synchronizeValue",value:function(){for(var e,t,i,n,a,r,o=JSON.parse(JSON.stringify(this.getProperty("value.values")))||[],s=this.getProperty("choices.values"),l=0,u=this.choices.length;l<u;l++)void 0!==s[n=parseInt(this.choices[l].getAttribute("data-index"))]&&(t=s[n].text,i=(a=o.indexOf(t))>-1,this.choices[l].querySelector("input[type=checkbox]").checked=i,i&&o.splice(a,1));if(o.length>0&&this.choices.length&&this.getProperty("choices.allowOther"))try{var d=this.choices[this.choices.length-1],c=String(o[0]).replace(/^yes,\s/,"");d.setAttribute("data-is-checked","1"),d.querySelector("input[type=checkbox]").checked=!!o[0],d.querySelector("input[type=text]").value=c,d.querySelector("label[data-role=checkbox]").setAttribute("aria-checked","true")}catch(_){console.error(_)}if(o.length){if(r=!1,e=this.getProperty("value.values"),o[0]||(e.splice(e.indexOf(o[0]),1),r=!0),o.length>1){for(var h=1,p=o.length;h<p;h++)e.splice(e.indexOf(o[h]),1);r=!0}r&&this.setProperty("value.values",e)}}},{key:"isNumberOfTimesAnOptionCanBeChosen",value:function(){for(var e=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),t=0,i=e.length;t<i;t++)if(null!==e[t].numberOfTimesThisOptionCanBeChosen&&void 0!==e[t].numberOfTimesThisOptionCanBeChosen)return!0;return!1}},{key:"setIsNumberOfTimesAnOptionCanBeChosen",value:function(e){for(var t=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),i=0,n=t.length;i<n;i++)e?void 0!==t[i].numberOfTimesThisOptionCanBeChosen&&null!==t[i].numberOfTimesThisOptionCanBeChosen||(t[i].numberOfTimesThisOptionCanBeChosen=0):t[i].numberOfTimesThisOptionCanBeChosen=null;this.setProperty("choices.values",t)}},{key:"getChoicesValues",value:function(){return JSON.parse(JSON.stringify(this.getProperty("choices.values")||[]))}},{key:"setChoicesValues",value:function(e){e&&Object(Fe.a)(e,(function(e){return e.text=e.text.trim()})),this.setProperty("choices.values",e)}},{key:"getChoicesDOMNodes",value:function(){return this.choices}},{key:"onReset",value:function(){this.updateChoices(),this.onValueChanged()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_checkbox_name")),this.updateLabelText(),this}},{key:"setupI18n",value:function(){var e=this.getId();if(e)for(var i=0,n=this.choices.length;i<n;i++){var a=this.choices[i].querySelector("input[type=checkbox][data-index]");if(a){var r=~~a.getAttribute("data-index"),o=this.choices[i].querySelector("span[data-role=option-text]");o&&(o.setAttribute("data-i18n-html","control_label_".concat(e,"_choice_").concat(r)),o.setAttribute("data-skip-markdown","true"))}}return E()(_()(t.prototype),"setupI18n",this).call(this)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=(this.getForm().getEngine().getI18n(),this.getProperty("label.labelText")||""),i=this.getProperty("instructions.text")||"";t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i});for(var n=this.getProperty("choices.values")||[],a=0,r=n.length;a<r;a++)n[a].text&&e.push({key:"control_label_".concat(this.getId(),"_choice_").concat(a),sourceText:n[a].text});return e}},{key:"cloneNode",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return E()(_()(t.prototype),"cloneNode",this).call(this,e,i)}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_CHECKBOX,name:"Checkbox",isContainer:!1,category:"basic",keywords:"multiple choice checkbox checkboxes choices",icon:"i123-multiple_choice",isVirtual:!1,i18nName:"edt_UI_control_type_checkbox_name",i18nKeywords:"edt_UI_control_type_checkbox_keywords",index:50,accessibilityFields:O.q.ROOT_NODE+O.q.ERROR_NODE}}}]),t}(mt);v()(Nt,"attributes",{}),v()(Nt,"runtime",null),v()(Nt,"nodeName","check-box");var At=function(e){function t(e,i,n,a,r){var s;return o()(this,t),s=d()(this,_()(t).call(this)),v()(h()(s),"runtime",void 0),v()(h()(s),"properties",void 0),v()(h()(s),"propertyDescriptors",void 0),v()(h()(s),"configuration",void 0),v()(h()(s),"document",void 0),v()(h()(s),"typescriptInterfaceName",void 0),v()(h()(s),"errors",void 0),s.properties=yt.clone(e),s.configuration=i,s.typescriptInterfaceName=n,s.document=a,s.runtime=r,s.propertyDescriptors=s.runtime.getTypeDescriptor(s.typescriptInterfaceName).properties,s}return f()(t,e),l()(t,[{key:"getConfiguration",value:function(){return this.configuration}},{key:"hasProperty",value:function(e){return void 0!==this.properties[e]}},{key:"getProperty",value:function(e){if(!this.hasProperty(e))throw new Error("Property ".concat(JSON.stringify(e)," does not exist!"));return this.properties[e]}},{key:"setProperty",value:function(e,t){if("string"!==typeof e||!e)throw new Error("Invalid argument: propertyFQN: string not empty expected!");if(void 0===this.propertyDescriptors[e])throw new Error("Property ".concat(JSON.stringify(e)," does not exist!"));var i=this.properties[e];t!==i&&(this.properties[e]=t,this.trigger("property-change",e,t,i,this),this.document.trigger("change"))}},{key:"enumerateProperties",value:function(){var e=[];for(var t in this.propertyDescriptors)this.propertyDescriptors.propertyIsEnumerable(t)&&e.push({name:t,type:this.propertyDescriptors[t].type,optional:this.propertyDescriptors[t].optional,value:void 0===this.properties[t]?null:this.properties[t]});return e}},{key:"hasErrors",value:function(){return!!this.errors&&!!this.errors.length}},{key:"withError",value:function(e){return this.errors=void 0===this.errors?[]:this.errors,this.errors.push(e),this.document&&(this.document.trigger("change"),this.document.trigger("errors-changed",this)),this}},{key:"withoutError",value:function(e){if(void 0!==this.errors){for(var t=!1,i=this.errors.length-1;i>-1;i--)this.errors[i].code===e&&(this.errors.splice(i,1),t=!0);this.errors.length||(this.errors=void 0),t&&this.document&&(this.document.trigger("change"),this.document.trigger("errors-changed",this))}return this}},{key:"serialize",value:function(){return[this.getTypeId(),this.properties,this.errors||null]}},{key:"getForm",value:function(){return this.document}},{key:"isVisible",value:function(){return this.configuration.visible}},{key:"getErrors",value:function(){return this.errors||null}},{key:"withErrors",value:function(e){var t;if(null!==e&&!A()(e,Array))throw new Error("Invalid argument: array expected!");if(e&&(t=e.length)){for(var i,n=[],a=0;a<t;a++){if(!e[a]||"number"!==typeof e[a].code||"string"!==typeof e[a].message)throw new Error("Invalid argument: errors: ISettingError[] expected!");if(i={code:~~e[a].code,message:e[a].message,isHTML:!!e[a].isHTML},void 0!==e[a].propertyName&&null!==e[a].propertyName){if("string"!==typeof e[a].propertyName)throw new Error("Invalid argument!");i.propertyName=e[a].propertyName}n.push(i)}if(!this.errors&&!n.length)return;this.errors=n.length?n:void 0,this.document&&(this.document.trigger("change"),this.document.trigger("errors-changed",this))}else this.errors=void 0,this.document&&(this.document.trigger("change"),this.document.trigger("errors-changed",this));return this}}]),t}(R.a),Rt=function(){function e(){o()(this,e)}return l()(e,null,[{key:"getGroupLabelTextByGroupTypeId",value:function(e){switch(e){case this.PAYMENT_PROCESSORS:return"Payment Processors";case this.PAYMENT_PROCESSORS_SANDBOX:return"Payment Processors (Testing Mode)";case this.PAYMENT_SETTINGS:return"Payments";default:return"Setting group not defined: ".concat(JSON.stringify(e))}}},{key:"getGroupLabelI18nTextByGroupTypeId",value:function(e){switch(e){case this.PAYMENT_PROCESSORS:return"edt_UI_setting_group_payment_processors";case this.PAYMENT_PROCESSORS_SANDBOX:return"edt_UI_setting_group_payment_processors_sandbox";case this.PAYMENT_SETTINGS:return"edt_UI_setting_group_payment_settings";default:return""}}},{key:"getGroupSortIndex",value:function(e){switch(e){case this.PAYMENT_SETTINGS:return 5;case this.PAYMENT_PROCESSORS:return 10;default:return 1e4}}},{key:"getGroupSettingTypeIds",value:function(e){var t=[];return zt.getAllSettingTypeIds().forEach((function(i){zt.getSettingClassByTypeId(i).getConfiguration().group===e&&t.push(i)})),t}}]),e}();v()(Rt,"PAYMENT_PROCESSORS","payment-processors"),v()(Rt,"PAYMENT_PROCESSORS_SANDBOX","payment-processors-sandbox"),v()(Rt,"PAYMENT_SETTINGS","payment-settings");var It=function(e){function t(e,i,n){var a;return o()(this,t),a=d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IProductsSetting",i,n)),$("#notifications-area").on("click","div.notification a[data-trigger=products-trigger]",(function(){i.getEngine().getLoader().execCommand("track-event","payment_processors_reminder_click")})),a}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PRODUCTS_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_SETTINGS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!1,groups:[]}}}],[{key:"getConfiguration",value:function(){return{name:"Products settings",keywords:"",typeId:zt.PAYMENT_PRODUCTS_EDITOR_SETTING,group:Rt.PAYMENT_SETTINGS,category:"basic",visible:!1,i18nName:"",i18nKeywords:"",icon:"i123-settings",index:20}}}]),t}(At);v()(It,"defaultProperties",void 0);var bt=function(e){function t(e,i,n){var a;o()(this,t),a=d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"ISummarySetting",i,n));var r=i.getForm().getEngine().getJQuery(),s=h()(a);return r("#item").off("mouseover","div[data-role=review-products-trigger] > button").on("mouseover","div[data-role=review-products-trigger] > button",(function(){r(this).addClass("_hover")})).off("mouseout","div[data-role=review-products-trigger] > button").on("mouseout","div[data-role=review-products-trigger] > button",(function(){r(this).removeClass("_hover")})),r("#item").off("change, input","input").on("change, input","input",(function(e){if(r('div[id="item"][data-target-setting-id="setting_payment_summary"]').length)switch(r(this).closest("div[data-role=property]").attr("data-property-name")){case O.D.SHOW_SUMMARY_AFTER_SUBMIT:"true"===this.value?(i.getEngine().getLoader().trigger("payments_summary_show_after_submit"),i.getEngine().getLoader().execCommand("track-event","payments_summary_show_after_submit")):(i.getEngine().getLoader().trigger("payments_summary_show_on_form"),i.getEngine().getLoader().execCommand("track-event","payments_summary_show_on_form")),i.getEngine().getLoader().trigger("payments_status_changed");break;case O.D.SHOW_REALTIME_SUMMARY:this.checked?i.getEngine().getLoader().execCommand("track-event","payments_summary_realtime_on"):i.getEngine().getLoader().execCommand("track-event","payments_summary_realtime_off");break;case O.D.COLUMNS:s.updateColumnName(this,O.p.INPUT);break;default:i.getEngine().getLoader().trigger("payments_status_changed")}})).off("click","button.visibility-button").on("click","button.visibility-button",(function(e){a.updateColumnVisibility(e.target)})).off("blur",'[data-property-name="columns"] .list-element > input').on("blur",'[data-property-name="columns"] .list-element > input',(function(e){a.updateColumnName(e.target,O.p.BLUR)})),a}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_SUMMARY_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_SETTINGS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!1,hasProductsTrigger:!0,groups:[{name:"order details",i18nName:"edt_UI_setting_type_order_details_group_name",label:"ORDER DETAILS",properties:[{label:"Currency",type:"int",propertyFQN:"currencyId",i18nName:"edt_UI_setting_summary_currency"},{label:"Discount on total",type:"int",propertyFQN:"discountOnTotal",i18nName:"edt_UI_setting_summary_discount_on_total"},{label:"Tax on total",type:"int",propertyFQN:"taxOnTotal",i18nName:"edt_UI_setting_summary_tax_on_total"}]},{name:"rows",i18nName:"edt_UI_setting_type_rows_group_name",label:"ROWS",properties:[{label:"Show detailed formula",type:"boolean",propertyFQN:"showDetailedFormula",i18nName:"edt_UI_setting_summary_show_detailed_formula"},{label:"Show Discount & Tax",type:"boolean",propertyFQN:"showDiscountAndTax",i18nName:"edt_UI_setting_summary_show_discount_and_tax"}]},{name:"payment summary",i18nName:"edt_UI_setting_type_summary_group_name",label:"SUMMARY",properties:[{label:"Show summary",type:"boolean",propertyFQN:"showSummaryAfterSubmit",i18nName:"payment_summary_show_summary"},{label:"Show live order summary",type:"boolean",propertyFQN:"showRealTimeSummary",i18nName:"payment_summary_show_live_order_summary"}]},{name:"columns",i18nName:"edt_UI_setting_type_columns_group_name",label:"COLUMNS",properties:[{label:null,type:"array",propertyFQN:"columns",i18nName:null}]}]}}},{key:"updateColumnName",value:function(e,t){var i={name:e.parentElement.getAttribute("data-name"),value:e.value};this.document.getEngine().getLoader().trigger("payments_column_name_changed",t,i)}},{key:"updateColumnVisibility",value:function(e){var t={name:e.parentElement.getAttribute("data-name"),isVisible:"true"===e.getAttribute("data-column-is-visible")};this.document.getEngine().getLoader().trigger("payments_column_visibility_changed",t)}}],[{key:"getConfiguration",value:function(){return{name:"Payment summary",keywords:"",typeId:zt.PAYMENT_SUMMARY_EDITOR_SETTING,group:Rt.PAYMENT_SETTINGS,category:"basic",visible:!0,i18nName:"edt_UI_setting_type_summary_name",i18nKeywords:"edt_UI_setting_type_summary_keywords",icon:"i123-setting_payment_summary",index:30}}}]),t}(At);v()(bt,"defaultProperties",void 0);var Pt=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"ICouponSettings",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_COUPON_CODES_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_SETTINGS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,groups:[{name:"settings",i18nName:null,label:"Settings",properties:[{label:"Coupon Codes",propertyFQN:"codes",i18nName:null,type:"ICouponCodeSettings[]"}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"Coupon Codes",keywords:"coupon codes payments",typeId:zt.PAYMENT_COUPON_CODES_EDITOR_SETTING,group:Rt.PAYMENT_SETTINGS,category:"basic",visible:!1,i18nName:"edt_UI_attribute_coupons",i18nKeywords:"edt_UI_attribute_coupons",icon:"i123-field_coupon",index:10}}}]),t}(At);v()(Pt,"defaultProperties",void 0);var St=function(e){function t(e,i,n){var a;o()(this,t),a=d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IPaypalSettings",i,n));var r=i.getEngine().getLoader();return a.on("property-change",(function(e,t,i,n){var a=["useRecurrentPayment","isDonation","useDetailedInvoice"];if(a.indexOf(e)>-1){var o=!1;t?(o=!0,a.forEach((function(t){t!==e&&n.setProperty(t,!1)}))):"useRecurrentPayment"===e&&(o=!0),o&&r.getCommandDispatcher().loadEditorSettingIntoPanel(n,!0)}})),a}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"Email address",type:"string",propertyFQN:"clientId",i18nName:"edt_UI_setting_processor_attribute_account_property_email"},{label:"Language",type:"string",propertyFQN:"language",i18nName:"edt_UI_setting_processor_attribute_account_property_language"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"Billing",properties:[{label:"Use recurrent payment",type:"boolean",propertyFQN:"useRecurrentPayment",i18nName:"edt_UI_setting_processor_attribute_billing_property_useRecurrentPayment"}]},{name:"shipping_information",i18nName:"edt_UI_setting_processor_attribute_shipping_label",label:"Shipping information",properties:[{label:"",type:"IPaypalShippingInformationSettings",propertyFQN:"shippingInformation",i18nName:null}]}]};return this.getProperty("useRecurrentPayment")&&(e.groups[1].properties=e.groups[1].properties.concat([{label:"Frequency",type:"int",propertyFQN:"recurrenceFrequency",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceFrequency"},{label:"Time expressed in",type:"int",propertyFQN:"recurrenceTimeUnit",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceTimeUnit"},{label:"Recurring cycles",type:"int",propertyFQN:"recurrenceCycles",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceCycles"}])),e.groups[1].properties=e.groups[1].properties.concat([{label:"Payment represents a donation",type:"boolean",propertyFQN:"isDonation",i18nName:"edt_UI_setting_processor_attribute_billing_property_isDonation"},{label:"Use detailed invoice",type:"boolean",propertyFQN:"useDetailedInvoice",i18nName:"edt_UI_setting_processor_attribute_billing_property_useDetailedInvoice"},{label:"Use shipping",type:"boolean",propertyFQN:"useShipping",i18nName:"edt_UI_setting_processor_attribute_billing_property_useShipping"}]),e}}],[{key:"getConfiguration",value:function(){return{name:"PayPal",keywords:"paypal",typeId:zt.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_paypal",index:50}}}]),t}(At);v()(St,"defaultProperties",void 0);var Dt=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IPaypalCheckoutSettings",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"Client ID",type:"string",propertyFQN:"clientId",i18nName:"edt_UI_setting_processor_attribute_account_property_clientId"},{label:"Language",type:"string",propertyFQN:"language",i18nName:"edt_UI_setting_processor_attribute_account_property_language"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"Billing",properties:[{label:"Use detailed invoice",type:"boolean",propertyFQN:"useDetailedInvoice",i18nName:"edt_UI_setting_processor_attribute_billing_property_useDetailedInvoice"},{label:"Use shipping",type:"boolean",propertyFQN:"useShipping",i18nName:"edt_UI_setting_processor_attribute_billing_property_useShipping"}]},{name:"shipping_information",i18nName:"edt_UI_setting_processor_attribute_shipping_label",label:"Shipping information",properties:[{label:"",type:"IPaypalShippingInformationSettings",propertyFQN:"shippingInformation",i18nName:null}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"PayPal Express Checkout",keywords:"paypal express checkout",typeId:zt.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_paypal",index:10}}}]),t}(At);v()(Dt,"defaultProperties",void 0);var Lt=function(e){function t(e,i,n){var a;o()(this,t),a=d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IPaypalProSettings",i,n));var r=i.getEngine().getLoader();return a.on("property-change",(function(e,t,i,n){"useRecurrentPayment"===e&&r.getCommandDispatcher().loadEditorSettingIntoPanel(n,!0)})),a}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"API Username",type:"string",propertyFQN:"apiUsername",i18nName:"edt_UI_setting_processor_attribute_account_property_apiUsername"},{label:"API Password",type:"string",propertyFQN:"apiPassword",i18nName:"edt_UI_setting_processor_attribute_account_property_apiPassword"},{label:"API Signature",type:"string",propertyFQN:"apiSignature",i18nName:"edt_UI_setting_processor_attribute_account_property_apiSignature"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"Billing",properties:[{label:"Use recurrent payment",type:"boolean",propertyFQN:"useRecurrentPayment",i18nName:"edt_UI_setting_processor_attribute_billing_property_useRecurrentPayment"}]}]};return this.getProperty("useRecurrentPayment")&&(e.groups[1].properties=e.groups[1].properties.concat([{label:"Frequency",type:"int",propertyFQN:"recurrenceFrequency",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceFrequency"},{label:"Time expressed in",type:"int",propertyFQN:"recurrenceTimeUnit",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceTimeUnit"},{label:"Recurring cycles",type:"int",propertyFQN:"recurrenceCycles",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceCycles"}])),e}}],[{key:"getConfiguration",value:function(){return{name:"PayPal Pro",keywords:"paypal pro",typeId:zt.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_paypal",index:60}}}]),t}(At);v()(Lt,"defaultProperties",void 0);var kt=function(e){function t(e,i,n){var a;o()(this,t),a=d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IPaypalPayflowSetting",i,n));var r=i.getEngine().getLoader();return a.on("property-change",(function(e,t,i,n){"useRecurrentPayment"===e&&r.getCommandDispatcher().loadEditorSettingIntoPanel(n,!0)})),a}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Username",type:"string",propertyFQN:"userId",i18nName:"edt_UI_setting_processor_attribute_account_property_userId"},{label:"Merchant",type:"string",propertyFQN:"merchantId",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantId_paypalPayflow"},{label:"Partner",type:"string",propertyFQN:"partner",i18nName:"edt_UI_setting_processor_attribute_account_property_partner"},{label:"Password",type:"string",propertyFQN:"password",i18nName:"edt_UI_setting_processor_attribute_account_property_password"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"BILLING",properties:[{label:"User recurrent payment",type:"boolean",propertyFQN:"useRecurrentPayment",i18nName:"edt_UI_setting_processor_attribute_billing_property_useRecurrentPayment"}]}]};return!0===this.getProperty("useRecurrentPayment")&&(e.groups[1].properties=e.groups[1].properties.concat([{label:"Frequency",type:"int",propertyFQN:"recurrenceFrequency",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceFrequency"},{label:"Time expressed in",type:"int",propertyFQN:"recurrenceTimeUnit",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceTimeUnit"},{label:"Recurrence cycles",type:"int",propertyFQN:"recurrenceCycles",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceCycles"}])),e}}],[{key:"getConfiguration",value:function(){return{name:"Paypal Payflow",keywords:"paypal payflow",typeId:zt.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_paypal",index:80}}}]),t}(At);v()(kt,"defaultProperties",void 0);var Mt=function(e){function t(e,i,n){var a;o()(this,t),a=d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IStripeSetting",i,n));var r=i.getEngine().getLoader();return a.on("property-change",(function(e,t,i,n){"useRecurrentPayment"===e&&r.getCommandDispatcher().loadEditorSettingIntoPanel(n,!0)})),a}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e=this.getProperty("userPubKey"),t={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!1,isEnabled:this.getProperty("isEnabled"),needsOAuthConnect:!0,groups:[]};return null!==e&&(t.isToggleable=!0,t.groups=[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Connected Account",type:"string",propertyFQN:"userEmail",i18nName:"edt_UI_setting_processor_attribute_account_property_email_stripeCheckout"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"BILLING",properties:[{label:"Required billing address",type:"boolean",propertyFQN:"isBillingAddressRequired",i18nName:"edt_UI_setting_processor_attribute_billing_property_isBillingAddressRequired"},{label:"User recurrent payment",type:"boolean",propertyFQN:"useRecurrentPayment",i18nName:"edt_UI_setting_processor_attribute_billing_property_useRecurrentPayment"}]},{name:"description_information",i18nName:"edt_UI_setting_processor_attribute_description_label",label:"DESCRIPTION",properties:[{label:"",type:"string",propertyFQN:"description",i18nName:null}]}],!0===this.getProperty("useRecurrentPayment")&&(t.groups[1].properties=t.groups[1].properties.concat([{label:"Frequency",type:"int",propertyFQN:"recurrenceFrequency",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceFrequency"},{label:"Time expressed in",type:"int",propertyFQN:"recurrenceTimeUnit",i18nName:"edt_UI_setting_processor_attribute_billing_property_recurrenceTimeUnit"}]))),t}},{key:"oAuthDisconnect",value:function(){this.setProperty("isEnabled",!1),this.setProperty("userEmail",null),this.setProperty("userId",null),this.setProperty("userPubKey",null),this.setProperty("userSecKey",null),this.getForm().getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(this)}}],[{key:"getConfiguration",value:function(){return{name:"Stripe",keywords:"stripe",typeId:zt.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_stripe",index:30}}}]),t}(At);v()(Mt,"defaultProperties",void 0);var xt=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IStripeCheckoutSetting",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e=this.getProperty("userPubKey"),t={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!1,isEnabled:this.getProperty("isEnabled"),needsOAuthConnect:!0,groups:[]};return null!==e&&(t.isToggleable=!0,t.groups=[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Connected Account",type:"string",propertyFQN:"userEmail",i18nName:"edt_UI_setting_processor_attribute_account_property_email_stripeCheckout"},{label:"Store Name",type:"string",propertyFQN:"storeName",i18nName:"edt_UI_setting_processor_attribute_account_property_storeName"},{label:"Store short description",type:"string",propertyFQN:"storeDescription",i18nName:"edt_UI_setting_processor_attribute_account_property_storeDescription"},{label:"Store image URL",type:"string",propertyFQN:"storeImage",i18nName:"edt_UI_setting_processor_attribute_account_property_storeImage"}]}]),t}},{key:"oAuthDisconnect",value:function(){this.setProperty("isEnabled",!1),this.setProperty("userEmail",null),this.setProperty("userId",null),this.setProperty("userPubKey",null),this.setProperty("userSecKey",null),this.getForm().getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(this)}}],[{key:"getConfiguration",value:function(){return{name:"Stripe Checkout",keywords:"stripe checkout",typeId:zt.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_stripe",index:120}}}]),t}(At);v()(xt,"defaultProperties",void 0);var wt=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"ISquareSettings",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!1,isEnabled:this.getProperty("isEnabled"),needsOAuthConnect:!0,groups:[]};return null!==this.getProperty("oAuthToken")&&(e.isToggleable=!0,e.groups=[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Location",type:"string",propertyFQN:"locationId",i18nName:"edt_UI_setting_processor_attribute_account_property_locationId"},{label:"Locations",type:"string",propertyFQN:"locations",i18nName:"edt_UI_setting_processor_attribute_square_property_locations"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"BILLING",properties:[{label:"Use detailed invoice",type:"boolean",propertyFQN:"useDetailedInvoice",i18nName:"edt_UI_setting_processor_attribute_billing_property_useDetailedInvoice"}]}]),e}},{key:"oAuthDisconnect",value:function(){this.setProperty("isEnabled",!1),this.setProperty("oAuthToken",null),this.setProperty("locations",t.defaultProperties.locations),this.setProperty("locationId",null),this.setProperty("useDetailedInvoice",t.defaultProperties.useDetailedInvoice),this.getForm().getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(this)}}],[{key:"getConfiguration",value:function(){return{name:"Square",keywords:"square",typeId:zt.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_square",index:20}}}]),t}(At);v()(wt,"defaultProperties",void 0);var Ut=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IBraintreeSetting",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Merchant ID",type:"string",propertyFQN:"merchantId",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantId"},{label:"Public Key",type:"string",propertyFQN:"publicKey",i18nName:"edt_UI_setting_processor_attribute_account_property_publicKey"},{label:"Private Key",type:"string",propertyFQN:"privateKey",i18nName:"edt_UI_setting_processor_attribute_account_property_privateKey"},{label:"Plan ID",type:"string",propertyFQN:"planId",i18nName:"edt_UI_setting_processor_attribute_account_property_planId"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"BILLING",properties:[{label:"Settlement",type:"boolean",propertyFQN:"automaticPaymentSettlement",i18nName:"edt_UI_setting_processor_attribute_billing_property_settlement"},{label:"Billing Address",type:"boolean",propertyFQN:"requireBillingAddress",i18nName:"edt_UI_setting_processor_attribute_billing_property_billingAddress"}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"Braintree",keywords:"braintree",typeId:zt.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_braintree",index:90}}}]),t}(At);v()(Ut,"defaultProperties",void 0);var Yt=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IPayUSetting",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Merchant ID",type:"string",propertyFQN:"merchantId",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantId"},{label:"Encryption Key",type:"string",propertyFQN:"encryptionKey",i18nName:"edt_UI_setting_processor_attribute_account_property_encryptionKey"},{label:"Collect VAT",type:"boolean",propertyFQN:"collectVat",i18nName:"edt_UI_setting_processor_attribute_account_property_collectVat"}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"PayU",keywords:"payu",typeId:zt.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_payu",index:100}}}]),t}(At);v()(Yt,"defaultProperties",void 0);var Ft=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"ISisowSetting",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"Merchant ID",type:"string",propertyFQN:"merchantId",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantId"},{label:"Merchant Key",type:"string",propertyFQN:"merchantKey",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantKey"}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"Sisow",keywords:"sisow",typeId:zt.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_sisow",index:140}}}]),t}(At);v()(Ft,"defaultProperties",void 0);var Vt=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IPayfastSetting",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Merchant ID",type:"string",propertyFQN:"merchantId",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantId"},{label:"Merchant Key",type:"string",propertyFQN:"merchantKey",i18nName:"edt_UI_setting_processor_attribute_account_property_merchantKey"}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"Payfast",keywords:"payfast",typeId:zt.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_payfast",index:130}}}]),t}(At);v()(Vt,"defaultProperties",void 0);var Bt=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IWorldpaySetting",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Client Key",type:"string",propertyFQN:"clientKey",i18nName:"edt_UI_setting_processor_attribute_account_property_clientKey"},{label:"Service Key",type:"string",propertyFQN:"serviceKey",i18nName:"edt_UI_setting_processor_attribute_account_property_serviceKey"}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"Worldpay",keywords:"worldpay",typeId:zt.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_worldpay",index:150}}}]),t}(At);v()(Bt,"defaultProperties",void 0);var Ht=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IAuthorizeSetting",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"API Login ID",type:"string",propertyFQN:"apiLoginId",i18nName:"edt_UI_setting_processor_attribute_account_property_apiLoginId"},{label:"Transaction Key",type:"string",propertyFQN:"transactionKey",i18nName:"edt_UI_setting_processor_attribute_account_property_transactionKey"},{label:"Create a Customer Information Profile (CIM)",type:"boolean",propertyFQN:"cimFlag",i18nName:"edt_UI_setting_processor_attribute_account_property_cimFlag"}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"Authorize.Net",keywords:"authorize net",typeId:zt.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_authorize_net",index:40}}}]),t}(At);v()(Ht,"defaultProperties",void 0);var Wt=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"ISagepaySetting",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"Vendor name",type:"string",propertyFQN:"vendorName",i18nName:"edt_UI_setting_processor_attribute_account_property_vendorName"},{label:"Encryption password",type:"string",propertyFQN:"encryptionPassword",i18nName:"edt_UI_setting_processor_attribute_account_property_encryptionPassword"},{label:"Vendor email (optional)",type:"string",propertyFQN:"vendorEmail",i18nName:"edt_UI_setting_processor_attribute_account_property_vendorEmail"},{label:"Partner ID (optional)",type:"string",propertyFQN:"partnerId",i18nName:"edt_UI_setting_processor_attribute_account_property_partnerId"}]},{name:"billing",i18nName:"edt_UI_setting_processor_attribute_billing_label",label:"Billing",properties:[{label:"Customer email",type:"string",propertyFQN:"customerEmail",i18nName:"edt_UI_setting_processor_attribute_billing_property_customerEmail"}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"SagePay",keywords:"sagepay",typeId:zt.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_sagepay",index:70}}}]),t}(At);v()(Wt,"defaultProperties",void 0);var Gt=function(e){function t(e,i,n){var a;return o()(this,t),(a=d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"IFreshbooksSetting",i,n))).on("property-change",(function(e,t,n,a){"useOAuth"===e&&i.getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(a)})),a}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){var e={hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!1,isEnabled:this.getProperty("isEnabled"),needsOAuthConnect:!1,groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"ACCOUNT",properties:[{label:"Use OAuth authorization",type:"boolean",propertyFQN:"useOAuth",i18nName:"edt_UI_setting_processor_attribute_account_property_useOAuth"}]},{name:"client_information",i18nName:"edt_UI_setting_processor_attribute_clientInformation_label",label:"CLIENT INFORMATION",properties:[{label:"",type:"IFreshbooksClientInformationSettings",propertyFQN:"clientInformation",i18nName:null},{label:"Update client if email exists",type:"boolean",propertyFQN:"updateMatchingEmailClient",i18nName:"edt_UI_setting_processor_attribute_billing_property_updateClient"}]},{name:"invoice_information",i18nName:"edt_UI_setting_processor_attribute_invoiceInformation_label",label:"INVOICE / ESTIMATE",properties:[{label:"",type:"IFreshbooksInvoiceInformationSettings",propertyFQN:"invoiceInformation",i18nName:null}]},{name:"options",i18nName:"edt_UI_setting_processor_attribute_options_label",label:"OPTIONS",properties:[{label:"Email on failure",type:"string",propertyFQN:"failureEmail",i18nName:"edt_UI_setting_processor_attribute_billing_property_failureEmail"}]}]};return this.getProperty("useOAuth")?(e.needsOAuthConnect=!0,this.getProperty("oAuthToken")&&(e.isToggleable=!0)):(e.isToggleable=!0,e.groups[0].properties.push({label:"URL",type:"string",propertyFQN:"oAuthCustomUrl",i18nName:"edt_UI_setting_processor_attribute_account_property_oAuthCustomUrl"},{label:"Token",type:"string",propertyFQN:"oAuthCustomToken",i18nName:"edt_UI_setting_processor_attribute_account_property_oAuthCustomToken"})),e}},{key:"oAuthDisconnect",value:function(){this.setProperty("isEnabled",!1),this.setProperty("oAuthToken",null),this.getForm().getEngine().getLoader().getCommandDispatcher().loadEditorSettingIntoPanel(this)}}],[{key:"getConfiguration",value:function(){return{name:"FreshBooks",keywords:"freshbooks",typeId:zt.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_freshbooks",index:110}}}]),t}(At);v()(Gt,"defaultProperties",void 0);var Kt=function(e){function t(e,i,n){return o()(this,t),d()(this,_()(t).call(this,e||t.defaultProperties,t.getConfiguration(),"ICivicaSetting",i,n))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return zt.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING}},{key:"getGroupTypeId",value:function(){return Rt.PAYMENT_PROCESSORS}},{key:"getSettingsModelForInspectorPanel",value:function(){return{hasEditingCapabilities:!0,isRemovable:!0,isToggleable:!0,isEnabled:this.getProperty("isEnabled"),groups:[{name:"account",i18nName:"edt_UI_setting_processor_attribute_account_label",label:"Account",properties:[{label:"Paylink",type:"string",propertyFQN:"payLink",i18nName:"edt_UI_setting_processor_attribute_account_property_payLink"},{label:"Calling application ID",type:"string",propertyFQN:"callingApplicationId",i18nName:"edt_UI_setting_processor_attribute_account_property_callingApplicationId"},{label:"Account Reference",type:"string",propertyFQN:"accountReference",i18nName:"edt_UI_setting_processor_attribute_account_property_accountReference"},{label:"Fund code",type:"string",propertyFQN:"fundCode",i18nName:"edt_UI_setting_processor_attribute_account_property_fundCode"},{label:"VAT code (optional)",type:"string",propertyFQN:"vatCode",i18nName:"edt_UI_setting_processor_attribute_account_property_vatCode"},{label:"General ledger code (optional)",type:"string",propertyFQN:"generalLedgerCode",i18nName:"edt_UI_setting_processor_attribute_account_property_generalLedgerCode"}]},{name:"description",i18nName:"edt_UI_setting_processor_attribute_description_label",label:"Description",properties:[{label:"Description",type:"string",propertyFQN:"description",i18nName:"edt_UI_setting_processor_attribute_description_property_description_civica"}]},{name:"testing_mode",i18nName:"edt_UI_setting_processor_attribute_testing_label",label:"Testing mode",properties:[{label:"Paylink for testing",type:"string",propertyFQN:"payLinkForTesting",i18nName:"edt_UI_setting_processor_attribute_account_property_payLinkForTesting"}]}]}}}],[{key:"getConfiguration",value:function(){return{name:"Civica",keywords:"civica",typeId:zt.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING,group:Rt.PAYMENT_PROCESSORS,category:"e-commerce",visible:!0,i18nName:"",i18nKeywords:"",icon:"i123-processor_civica",index:160}}}]),t}(At);v()(Kt,"defaultProperties",void 0);var zt=function(){function e(){o()(this,e)}return l()(e,null,[{key:"getAllSettingTypeIds",value:function(){return[e.PAYMENT_PRODUCTS_EDITOR_SETTING,e.PAYMENT_COUPON_CODES_EDITOR_SETTING,e.PAYMENT_SUMMARY_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING,e.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING,e.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING,e.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING,e.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING,e.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING,e.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING,e.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING,e.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING,e.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING,e.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING,e.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING]}},{key:"getSettingClassByTypeId",value:function(e){switch(e){case this.PAYMENT_PRODUCTS_EDITOR_SETTING:return It;case this.PAYMENT_SUMMARY_EDITOR_SETTING:return bt;case this.PAYMENT_COUPON_CODES_EDITOR_SETTING:return Pt;case this.PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING:return St;case this.PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING:return Dt;case this.PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING:return Lt;case this.PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING:return kt;case this.PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING:return Mt;case this.PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING:return xt;case this.PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING:return wt;case this.PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING:return Ut;case this.PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING:return Yt;case this.PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING:return Ft;case this.PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING:return Vt;case this.PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING:return Bt;case this.PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING:return Ht;case this.PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING:return Wt;case this.PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING:return Gt;case this.PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING:return Kt;default:return null}}}]),e}();v()(zt,"PAYMENT_PRODUCTS_EDITOR_SETTING","setting_payment_products"),v()(zt,"PAYMENT_COUPON_CODES_EDITOR_SETTING","setting_payment_coupons"),v()(zt,"PAYMENT_SUMMARY_EDITOR_SETTING","setting_payment_summary"),v()(zt,"PAYMENT_PROCESSOR_PAYPAL_EDITOR_SETTING","setting_payment_processor_paypal"),v()(zt,"PAYMENT_PROCESSOR_PAYPAL_CHECKOUT_EDITOR_SETTING","setting_payment_processor_paypal_checkout"),v()(zt,"PAYMENT_PROCESSOR_PAYPAL_PAYFLOW_EDITOR_SETTING","setting_payment_processor_paypal_payflow"),v()(zt,"PAYMENT_PROCESSOR_PAYPAL_PRO_EDITOR_SETTING","setting_payment_processor_paypal_pro"),v()(zt,"PAYMENT_PROCESSOR_BRAINTREE_EDITOR_SETTING","setting_payment_processor_braintree"),v()(zt,"PAYMENT_PROCESSOR_STRIPE_EDITOR_SETTING","setting_payment_processor_stripe"),v()(zt,"PAYMENT_PROCESSOR_STRIPE_CHECKOUT_EDITOR_SETTING","setting_payment_processor_stripe_checkout"),v()(zt,"PAYMENT_PROCESSOR_PAYU_EDITOR_SETTING","setting_payment_processor_payu"),v()(zt,"PAYMENT_PROCESSOR_SQUARE_EDITOR_SETTING","setting_payment_processor_square"),v()(zt,"PAYMENT_PROCESSOR_SISOW_EDITOR_SETTING","setting_payment_processor_sisow"),v()(zt,"PAYMENT_PROCESSOR_PAYFAST_EDITOR_SETTING","setting_payment_processor_payfast"),v()(zt,"PAYMENT_PROCESSOR_WORLDPAY_EDITOR_SETTING","setting_payment_processor_worldpay"),v()(zt,"PAYMENT_PROCESSOR_AUTHORIZE_EDITOR_SETTING","setting_payment_processor_authorize"),v()(zt,"PAYMENT_PROCESSOR_SAGEPAY_EDITOR_SETTING","setting_payment_processor_sagepay"),v()(zt,"PAYMENT_PROCESSOR_FRESHBOOKS_EDITOR_SETTING","setting_payment_processor_freshbooks"),v()(zt,"PAYMENT_PROCESSOR_CIVICA_EDITOR_SETTING","setting_payment_processor_civica");var qt=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","number-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","number-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","text-".concat(a,"-instr-acc")),n.input=document.createElement("input"),n.input.setAttribute("type","text"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("aria-labelledby","text-".concat(a,"-acc ")+"text-".concat(a,"-error-acc ")+"text-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_COUPON}},{key:"getElementName",value:function(){return"Coupon"}},{key:"getSupportedValidators",value:function(){return[this.getForm().getEngine().getValidator().getValidatorById(re.VALIDATOR_TYPE_NONE)]}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.w.FULL}]}]}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_coupon_name")),this.updateLabelText(),this}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.synchronizeValue():this.onValueChanged()}},{key:"onReset",value:function(){this.synchronizeValue()}},{key:"onDuplicate",value:function(){E()(_()(t.prototype),"onDuplicate",this).call(this)}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"getCouponCodes",value:function(){var e=this.getForm();return e.hasEditorSetting(zt.PAYMENT_COUPON_CODES_EDITOR_SETTING)||e.withEditorSetting(e.getEngine().getFactory().createEditorSettingByTypeId(zt.PAYMENT_COUPON_CODES_EDITOR_SETTING,e)),e.getEditorSettingByTypeId(zt.PAYMENT_COUPON_CODES_EDITOR_SETTING).getProperty("codes")}},{key:"setCouponCodes",value:function(e){var t=this.getForm();return t.hasEditorSetting(zt.PAYMENT_COUPON_CODES_EDITOR_SETTING)||t.withEditorSetting(t.getEngine().getFactory().createEditorSettingByTypeId(zt.PAYMENT_COUPON_CODES_EDITOR_SETTING,t)),t.getEditorSettingByTypeId(zt.PAYMENT_COUPON_CODES_EDITOR_SETTING).setProperty("codes",e)}},{key:"isDuplicatable",value:function(){return!1}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_COUPON,name:"Coupon",isContainer:!1,category:"e-commerce",keywords:"coupon voucher",icon:"i123-field_coupon",isVirtual:!1,i18nName:"edt_UI_control_type_coupon_name",i18nKeywords:"edt_UI_control_type_coupon_keywords",index:2,accessibilityFields:O.q.NONE}}}]),t}(mt);v()(qt,"nodeName","coupon"),v()(qt,"attributes",{}),v()(qt,"runtime",null);var Xt=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0);var a=n.getHash(),r=n.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);return n.rootNode.setAttribute("aria-labelledby","date-".concat(a,"-acc ")+"date-".concat(a,"-error-acc ")+"date-".concat(a,"-instr-acc")),n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","date-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","date-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","date-".concat(a,"-instr-acc")),n.input=lt.createElement(lt.ELEMENT_TYPE_DATE),n.input.setI18n(e.getEngine().getI18n()),n.input.setAttribute("data-role","i123-input"),n.input.withHash(a).setAccessibilityEnabled(r),n.input.setFormat(n.getProperty("validation.type")||re.VALIDATOR_TYPE_DATE_MMDDYYYY),n.input.setAttribute("aria-live","assertive"),n.input.setAttribute("role","alert"),n.input.setAttribute("aria-labelledby","date-".concat(a,"-acc")+" date-".concat(a,"-error-acc")+" date-".concat(a,"-instr-acc")+" date-".concat(a,"-day")+" date-".concat(a,"-month")+" date-".concat(a,"-year")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getDateValue",value:function(){var e=this.getProperty("value.value");if(null===e)return null;var t=new Date;return t.setTime(1e3*e),t}},{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_DATE}},{key:"getElementName",value:function(){return"Date"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.w.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.synchronizeValue():this.onValueChanged(),this.updateShowInstructionsOnClick(),this.setDateControlOptions(),this.updateHiddenAttribute(),this.loadDefaultDateValueIntoForm(),this.validateDateInterval(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(re.VALIDATOR_TYPE_DATE_MMDDYYYY),e.getValidatorById(re.VALIDATOR_TYPE_DATE_DDMMYYYY),e.getValidatorById(re.VALIDATOR_TYPE_DATE_YYYYMMDD),e.getValidatorById(re.VALIDATOR_TYPE_DATE_MMYYYY)]}},{key:"onValueChanged",value:function(){var e=this.input.getDateValue();this.setProperty("value.value",null===e?null:Math.floor(e.getTime()/1e3)),this.validateDateInterval(),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"getStringValue",value:function(){return this.input.getValue()}},{key:"setStringValue",value:function(e){try{this.input.setValue(e)}catch(t){this.input.setDateValue(null)}this.onValueChanged()}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.stringValue",type:"string",optional:!0};default:return null}}},{key:"setDateControlOptions",value:function(){this.input.withWeekStart(this.getProperty("configuration.weekStart")),this.input.withAcceptedDaysOfWeek(this.getProperty("configuration.acceptedDaysOfWeek")),this.input.withHash(this.getHash()),this.input.setFormat(this.getProperty("validation.type"))}},{key:"synchronizeValue",value:function(){var e,t=this.getProperty("value.value");null===t?e=null:(e=new Date).setTime(1e3*t),this.input.setDateValue(e),null!==e&&this.hasError(it.ERR_INVALID_DATE)&&this.removeError(it.ERR_INVALID_DATE)}},{key:"setupDefaults",value:function(){this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_date_name"));var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.DEFAULT_USER_PREFERENCES);return e&&(this.setProperty("validation.type",e.dateFormat),this.setDateControlOptions()),this.updateLabelText(),this}},{key:"getAcceptedDaysOfWeekString",value:function(){var e=[];return this.hasProperty("configuration.acceptedDaysOfWeek")&&this.getProperty("configuration.acceptedDaysOfWeek")&&(e=this.getProperty("configuration.acceptedDaysOfWeek").map(String)),e}},{key:"setAcceptedDaysOfWeekString",value:function(e){var t=[];if(e)for(var i=0,n=e.length;i<n;i++)t[i]=~~e[i];this.hasProperty("configuration.acceptedDaysOfWeek")&&this.setProperty("configuration.acceptedDaysOfWeek",t)}},{key:"loadDefaultDateValueIntoForm",value:function(){var e="",t=this.hasProperty("validation.type")&&this.getProperty("validation.type")?this.getProperty("validation.type"):re.VALIDATOR_TYPE_DATE_MMDDYYYY,i=this.hasProperty("configuration.defaultValue")?this.getProperty("configuration.defaultValue"):void 0;"string"!==typeof i&&(e=this.convertDateTimestampToString(i)),i||0===i?(this.input.setDateValue(this.getForm().getEngine().getTimeUtils().stringToTime(e||i,t)),this.onValueChanged()):this.input.setDateValue(null)}},{key:"formatDateString",value:function(e){var t=e.length>10?new Date(e).getTime()/1e3:new Date(e.replace(/-/g,"/")).getTime()/1e3;if(25294===this.getForm().getId()&&"salesforce-eu.123formbuilder.com"===window.location.hostname){var i=this.hasProperty("validation.type")?this.getProperty("validation.type"):"",n=""!==i?i:re.VALIDATOR_TYPE_DATE_MMDDYYYY;t=this.getForm().getEngine().getTimeUtils().stringToTime(e||String(e),n).getTime()/1e3}else{var a,r=this.hasProperty("validation.type")?this.getProperty("validation.type"):void 0;switch(this.getTimeFormatFromValidatorType(String(r))){case"%m-%Y":(a=/^([\d]{2})[\/\-\.]{1}([\d]{4})$/.exec(e))&&(t=new Date("".concat(a[1],"/01/").concat(a[2])).getTime()/1e3);break;case"%d-%m-%Y":(a=/^([\d]{2})[\/\-\.]{1}([\d]{2})[\/\-\.]{1}([\d]{4})$/.exec(e))&&(t=new Date("".concat(a[2],"/").concat(a[1],"/").concat(a[3])).getTime()/1e3);break;default:t=e.length>10?new Date(e).getTime()/1e3:new Date(e.replace(/-/g,"/")).getTime()/1e3}}return this.convertDateTimestampToString(t)}},{key:"convertDateTimestampToString",value:function(e){var t,i=this.hasProperty("validation.type")?this.getProperty("validation.type"):void 0;return i&&(t=this.getTimeFormatFromValidatorType(String(i))),this.getForm().getEngine().getTimeUtils().formatTime(e,t)}},{key:"getTimeFormatFromValidatorType",value:function(e){switch(e){case re.VALIDATOR_TYPE_DATE_YYYYMMDD:e="%Y-%m-%d";break;case re.VALIDATOR_TYPE_DATE_MMDDYYYY:e="%m-%d-%Y";break;case re.VALIDATOR_TYPE_DATE_MMYYYY:e="%m-%Y";break;case re.VALIDATOR_TYPE_DATE_DDMMYYYY:default:e="%d-%m-%Y"}return e}},{key:"checkDateRelativeValues",value:function(e){var t,i,n="",a="",r=this.getProperty("configuration.maxDateRelativeValue")||void 0,o=this.getProperty("configuration.minDateRelativeValue")||void 0,s=(this.hasProperty("validation.type")?this.getProperty("validation.type"):void 0)||re.VALIDATOR_TYPE_DATE_MMDDYYYY;"string"!==typeof r&&(n=this.convertDateTimestampToString(r)),"string"!==typeof o&&(a=this.convertDateTimestampToString(o)),t=void 0!==r?this.getForm().getEngine().getTimeUtils().stringToTime(n||String(r),s):null,i=void 0!==o?this.getForm().getEngine().getTimeUtils().stringToTime(a||String(o),s):null,this.updateDateControlErrorState(e,t,i)}},{key:"updateDateControlErrorState",value:function(e,t,i){var n=this;if(null!==i&&e.getTime()<i.setHours(0,0,0,0)){var a=this.getTimeFormatFromValidatorType(this.getProperty("validation.type")),r=this.getForm().getEngine().getTimeUtils().formatTime(i.getTime()/1e3,a),o=this.getForm().getEngine().getI18n().translateText("textdef_221",r,r),s="The selected date must be ".concat(r," or after ").concat(r);setTimeout((function(){n.addError(it.ERR_DATE_TOO_SMALL,o||s)}),50)}else this.removeError(it.ERR_DATE_TOO_SMALL);if(null!==t&&e.getTime()>t.setHours(23,59,59,999)){var l=this.getTimeFormatFromValidatorType(this.getProperty("validation.type")),u=this.getForm().getEngine().getTimeUtils().formatTime(t.getTime()/1e3,l),d=this.getForm().getEngine().getI18n().translateText("textdef_220",u,u),c="The selected date must be ".concat(u," or before ").concat(u);setTimeout((function(){n.addError(it.ERR_DATE_TOO_BIG,d||c)}),50)}else this.removeError(it.ERR_DATE_TOO_BIG)}},{key:"onReset",value:function(){this.loadDefaultDateValueIntoForm(),this.validateDateInterval()}},{key:"validateDateInterval",value:function(){var e=new Date,t=this.getProperty("value.value");if(null===t)return this.removeError(it.ERR_DATE_TOO_BIG),void this.removeError(it.ERR_DATE_TOO_SMALL);e.setTime(1e3*t),this.checkDateRelativeValues(e)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"onBlur",value:function(){var e=this.input.getDateValue();if(this.isValidDate(e))e==this.getDateValue()&&(this.setProperty("value.value",null===e?null:Math.floor(e.getTime()/1e3)),this.validateDateInterval(),this.isAttached()&&this.getForm().trigger("input",this),this.hasError(it.ERR_INVALID_DATE)&&this.removeError(it.ERR_INVALID_DATE));else if(!this.input.isDateFieldEmpty()){var t=this.getForm().getEngine().getI18n().translateText("textdef_228");this.addError(it.ERR_INVALID_DATE,t||"The selected date is invalid.")}}},{key:"isValidDate",value:function(e){return!!e}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.input.setReadOnly(e)}},{key:"setProperty",value:function(e,i){if(E()(_()(t.prototype),"setProperty",this).apply(this,arguments),"value.value"===e){var n=this.getProperty("value.value"),a=null;if(n){var r=new Date(1e3*n);a="".concat(r.getFullYear(),"-").concat("0".concat(r.getMonth()+1).slice(-2),"-").concat("0".concat(r.getDate()).slice(-2))}this.setProperty("value.dateString",a)}return this}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_DATE,name:"Date",isContainer:!1,category:"advanced",keywords:"date time day",icon:"i123-editor_field_date",isVirtual:!1,i18nName:"edt_UI_control_type_date_name",i18nKeywords:"edt_UI_control_type_date_keywords",index:140,accessibilityFields:O.q.ERROR_NODE+O.q.ROOT_NODE}}}]),t}(mt);v()(Xt,"attributes",{}),v()(Xt,"runtime",null),v()(Xt,"nodeName","date");var Qt=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0),v()(h()(n),"defaultOptionIndex",-1),v()(h()(n),"forceSelectedIndex",void 0);var a=n.getHash();return n.properties&&n.properties.choices&&n.properties.choices.values&&(n.properties.choices.values=n.trimChoiceValues(n.properties.choices.values)),n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","dropdown-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","dropdown-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","dropdown-".concat(a,"-instr-acc")),n.getProperty("options.searchable")?n.input=lt.createElement(lt.ELEMENT_TYPE_SEARCHABLE_DROPDOWN):n.input=lt.createElement(lt.ELEMENT_TYPE_DROPDOWN),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("aria-labelledby","dropdown-".concat(a,"-acc ")+"dropdown-".concat(a,"-error-acc ")+"dropdown-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_DROPDOWN}},{key:"getElementName",value:function(){return"Dropdown"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.w.FULL}]}]}},{key:"updateChoices",value:function(){if(this.hasProperty("choices.values")){for(;this.input.getOptions().length;)this.input.remove(0);var e;if(this.hasProperty("choices.isDropdownWithForms")&&this.getProperty("choices.isDropdownWithForms"))this.updateChoicesWithForms();else{if(this.hasProperty("choices.isWorkflowsUserDropdown")&&this.getProperty("choices.isWorkflowsUserDropdownSelectAll")){var t=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.WORKFLOWS_USERS_LIST);e=[];for(var i=0,n=t.length;i<n;i++)e.push({index:i,numberOfTimesThisOptionHasBeenChosen:0,text:t[i].email,value:t[i].email})}else e=yt.clone(this.getProperty("choices.values")||[]);this.updateChoicesFunctionality(e)}}}},{key:"updateChoicesFunctionality",value:function(e){for(var t=0,i=e.length;t<i;t++)e[t].index=t;this.hasProperty("options.randomizeOrder")&&this.getProperty("options.randomizeOrder")&&(e=yt.shuffle(e)),this.defaultOptionIndex=null;for(var n=0,a=e.length;n<a;n++)if(e[n].isDefault){e[n].numberOfTimesThisOptionCanBeChosen&&e[n].numberOfTimesThisOptionCanBeChosen-e[n].numberOfTimesThisOptionHasBeenChosen<=0&&e[n].numberOfTimesThisOptionCanBeChosen>=-1?this.defaultOptionIndex=-1:this.defaultOptionIndex=n;break}if(-1===this.defaultOptionIndex)for(var r=0,o=e.length;r<o;r++)if(e[r].numberOfTimesThisOptionCanBeChosen&&e[r].numberOfTimesThisOptionCanBeChosen-e[r].numberOfTimesThisOptionHasBeenChosen>0&&e[r].numberOfTimesThisOptionCanBeChosen>=-1){this.defaultOptionIndex=r;break}null===this.defaultOptionIndex&&(this.defaultOptionIndex=-1),this.hasProperty("choices.allowOther")&&this.getProperty("choices.allowOther")&&e.push({text:"Other...",isOther:!0,index:-1});for(var s,l=this.hasProperty("options.showNumberOfChoicesLeft")&&this.getProperty("options.showNumberOfChoicesLeft"),u=0,d=e.length;u<d;u++)e[u].value=e[u].value||e[u].text,this.setupChoiceTextNumberOfChoicesLeft(e[u],l,null),s=Ge.create(this.input,void 0===e[u].value?e[u].text:e[u].value,e[u].text),this.setupOptionDisabledStateIfNoChoicesLeft(e[u],s),s.setAttribute("data-index",String(e[u].index)),e[u].isOther&&s.setAttribute("data-role","other-option"),this.input.add(s);for(var c=null,h=0,p=e.length;h<p;h++)if(e[h].isDefault){e[h].numberOfTimesThisOptionCanBeChosen&&e[h].numberOfTimesThisOptionCanBeChosen-e[h].numberOfTimesThisOptionHasBeenChosen<=0&&e[h].numberOfTimesThisOptionCanBeChosen>=-1?(c="",this.setProperty("value.value",c),this.setProperty("value.index",-1)):c=e[h].value;break}null!==c&&""!==c?this.input.setValue(c):-1!==this.defaultOptionIndex&&this.input.setValue(e[this.defaultOptionIndex].value)}},{key:"updateChoicesWithForms",value:function(){!function(e){var t=e.getForm().getEngine().getJQuery(),i=yt.clone(e.getProperty("choices.values")||[]);e.getFormsByGroups(t,i,e.getForm().getEngine().getLoader().getFormId()).then((function(t){for(var i=[],n=0,a=t.length||0;n<a;n++)i.push({index:n,numberOfTimesThisOptionHasBeenChosen:0,text:t[n].name,value:t[n].id>0?t[n].id:""});e.updateChoicesFunctionality(i)})).fail((function(t){e.getForm().getEngine().getLoader().getUI().alert("Error loading forms","There was a network error obtaining groups. Please retry. If the problem persists, contact support")}))}(this)}},{key:"getFormsByGroups",value:function(e,t,i){return e.Deferred((function(n){e.post("/modules/CustomScripts/classes/Hilti/DropdownForms/ajaxCall.php",{do:"getFormsByGroupsNewEditor",formID:i,groups:t},(function(e){n.resolve(e)}),"json").fail((function(e){n.reject(e)}))})).promise()}},{key:"setupChoiceTextNumberOfChoicesLeft",value:function(e,t,i){if(e.numberOfTimesThisOptionCanBeChosen&&null!==e.numberOfTimesThisOptionCanBeChosen&&e.numberOfTimesThisOptionCanBeChosen>=-1){var n=~~e.numberOfTimesThisOptionHasBeenChosen;n<0&&(n=0);var a=e.numberOfTimesThisOptionCanBeChosen-n,r=this.getForm().getEngine().getI18n(),o="",s=null!==i?i:e.text;switch(!0){case e.numberOfTimesThisOptionCanBeChosen-e.numberOfTimesThisOptionHasBeenChosen<=0:o="textdef_174";break;case e.numberOfTimesThisOptionCanBeChosen-e.numberOfTimesThisOptionHasBeenChosen===1:o="textdef_173";break;default:o="textdef_174"}var l=r.translateText(o);t&&(e.text=1===a?"".concat(s," (1 ").concat(l&&l!==o?"".concat(l,")"):"choice left)"):"".concat(s," (").concat(Math.max(a,0)," ").concat(l&&l!==o?"".concat(l,")"):"choices left)"))}}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateChoices(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.input.setSelectedIndex(this.getDefaultOptionIndex()):this.onValueChanged()}},{key:"getProperty",value:function(e){return void 0!==this.forceSelectedIndex&&"value.index"===e?this.forceSelectedIndex:E()(_()(t.prototype),"getProperty",this).call(this,e)}},{key:"onValueChanged",value:function(){var e=this.input.getValue(),t=-1;this.setProperty("value.value",""===e?null:e);for(var i=0,n=this.getProperty("choices.values")||[],a=n.length;i<a;i++)if(n[i].text===e){t=i;break}this.resetValueIfValueIsPlaceholder(e),this.setProperty("value.index",-1===t?null:t),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value")),this.input.setSelectedIndex(null===this.input.getSelectedIndex()?-1:this.input.getSelectedIndex())}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",optional:!0,type:"string"};default:return null}}},{key:"isNumberOfTimesAnOptionCanBeChosen",value:function(){for(var e=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),t=0,i=e.length;t<i;t++)if(e[t].numberOfTimesThisOptionCanBeChosen)return!0;return!1}},{key:"setIsNumberOfTimesAnOptionCanBeChosen",value:function(e){for(var t=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),i=0,n=t.length;i<n;i++)e?void 0!==t[i].numberOfTimesThisOptionCanBeChosen&&null!==t[i].numberOfTimesThisOptionCanBeChosen||(t[i].numberOfTimesThisOptionCanBeChosen=0):t[i].numberOfTimesThisOptionCanBeChosen=null;this.setProperty("choices.values",t)}},{key:"getChoicesValues",value:function(){return JSON.parse(JSON.stringify(this.getProperty("choices.values")||[]))}},{key:"setChoicesValues",value:function(e){if(null!==e)for(var t=0;t<e.length;t++)e[t].text=e[t].text.replace(/^\s+|\s+$/g,"");this.setProperty("choices.values",e)}},{key:"onReset",value:function(){this.updateChoices(),this.onValueChanged()}},{key:"setupDefaults",value:function(){this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_dropdown_name")),this.updateLabelText();var e=JSON.parse(JSON.stringify(this.getProperty("choices.values")));if(e&&e.length)for(var t=this.getForm().getEngine().getI18n(),i=0,n=Math.min(e.length,5);i<n;i++)e[i].text=t.translateText("formeditor_dropdownChoice".concat(i+1));return this.setProperty("choices.values",e),this.updateChoices(),this}},{key:"setProperty",value:function(e,i){return"choices.values"===e?E()(_()(t.prototype),"setProperty",this).call(this,e,this.trimChoiceValues(i)):E()(_()(t.prototype),"setProperty",this).call(this,e,i)}},{key:"getDefaultOptionIndex",value:function(){return this.defaultOptionIndex}},{key:"setValue",value:function(e){if(E()(_()(t.prototype),"setValue",this).call(this,e),e&&void 0===e.index)for(var i=this.getProperty("choices.values")||[],n=0,a=i.length;n<a;n++)if(i[n].text===e.value){this.setProperty("value.index",n);break}}},{key:"setupOptionDisabledStateIfNoChoicesLeft",value:function(e,t){e.numberOfTimesThisOptionCanBeChosen&&null!==e.numberOfTimesThisOptionCanBeChosen&&e.numberOfTimesThisOptionCanBeChosen>=-1&&(e.numberOfTimesThisOptionCanBeChosen-~~e.numberOfTimesThisOptionHasBeenChosen>0?t.removeAttribute("disabled"):t.setAttribute("disabled","true"))}},{key:"setupI18n",value:function(){var e,i,n=this.getId(),a=this.getForm().getEngine().getI18n(),r=JSON.parse(JSON.stringify(this.getProperty("choices.values"))),o=this.getProperty("options.showNumberOfChoicesLeft"),s=this.getProperty("value.value");if(n&&this.input.getOptions){for(var l=this.input.getOptions(),u=0,d=l.length;u<d;u++)if(l[u].hasAttribute&&l[u].hasAttribute("data-index")){var c=~~l[u].getAttribute("data-index");(e="control_label_".concat(n,"_choice_").concat(c))!==(i=a.translateText(e))&&i&&(o&&r[c].numberOfTimesThisOptionCanBeChosen&&null!==r[c].numberOfTimesThisOptionCanBeChosen&&r[c].numberOfTimesThisOptionCanBeChosen>=-1?(this.setupChoiceTextNumberOfChoicesLeft(r[c],o,i),l[u].text=r[c].text,this.setupOptionDisabledStateIfNoChoicesLeft(r[c],l[u])):l[u].text=i)}this.resetValueIfValueIsPlaceholder(s),this.input.trigger("update")}return E()(_()(t.prototype),"setupI18n",this).call(this)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"withForceSelectedIndex",value:function(e){return this.forceSelectedIndex=e,this}},{key:"enumerateTranslations",value:function(){var e=[],t=(this.getForm().getEngine().getI18n(),this.getProperty("label.labelText")||""),i=this.getProperty("instructions.text")||"";t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i});for(var n=this.getProperty("choices.values")||[],a=0,r=n.length;a<r;a++)n[a].text&&e.push({key:"control_label_".concat(this.getId(),"_choice_").concat(a),sourceText:n[a].text});return e}},{key:"resetValueIfValueIsPlaceholder",value:function(e){var t=String(this.getForm().getEngine().getI18n().translateText("edt_placeholder_dropdown_option")||"");e&&this.getForm().getEngine().getI18n().translateText("edt_placeholder_dropdown_option")&&(this.isOriginalEqualWithTranslated(e,t)||!this.isOriginalEqualWithTranslated(e,t)&&"please select"===e.toLowerCase())&&this.setProperty("value.value","")}},{key:"isOriginalEqualWithTranslated",value:function(e,t){return e.toLowerCase()===t.toLowerCase()}},{key:"trimChoiceValues",value:function(e){if(Array.isArray(e)){for(var t=yt.clone(e),i=0,n=t.length;i<n;i++)t[i].text=String(t[i].text||"").trim();return t}return e}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_DROPDOWN,name:"DropDown",isContainer:!1,category:"basic",keywords:"dropdown select drop down",icon:"i123-editor_field_dropdown",isVirtual:!1,i18nName:"edt_UI_control_type_dropdown_name",i18nKeywords:"edt_UI_control_type_dropdown_keywords",index:30,accessibilityFields:O.q.ERROR_NODE+O.q.ROOT_NODE}}}]),t}(mt);v()(Qt,"attributes",{}),v()(Qt,"runtime",null),v()(Qt,"nodeName","drop-down");var $t=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0);var a=n.getHash(),r=n.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","file".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","file-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","file-".concat(a,"-instr-acc")),n.input=lt.createElement(lt.ELEMENT_TYPE_FILE).withControl(h()(n)),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("type","file"),n.input.setAttribute("aria-labelledby","file".concat(a,"-acc file-control-placeholder-acc ")+"file-".concat(a,"-error-acc ")+"file-".concat(a,"-instr-acc")),n.input.setAccessibility(r),n.input.withMultiple(n.getProperty("options.multiple")).withMinUploadSizeInBytes(n.getProperty("configuration.minSizeInBytes")||null).withMaxUploadSizeInBytes(n.getProperty("configuration.maxSizeInBytes")||null).withFileUtils(e.getEngine().getFileUtils()).withAllowDirectoryUpload(n.getProperty("options.multiple")&&n.getProperty("configuration.isAllowFolderUpload")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_FILE}},{key:"getElementName",value:function(){return"File"}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateInstructionsText(),this.updateErrorsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.synchronizeValue(),this.updateDisabledFileExtensions(),this.updateAllowedFileExtensions(),this.updateHiddenAttribute()}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.w.FULL}]}]}},{key:"setDownloadURL",value:function(e){if(null===e)this.input.setDownloadInfo(null);else{var t={name:null,size:null,url:e},i=e.split("#").slice(1).join("#");if(i)try{var n=JSON.parse(atob(i));n&&("string"===typeof n.name&&n.name&&(t.name=n.name),"number"===typeof n.size&&n.size>=0&&(t.size=n.size))}catch(a){}this.input.setDownloadInfo(t)}this.onValueChanged()}},{key:"getDownloadURL",value:function(){var e=this.input.getDownloadInfo();return e?e.url:null}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.downloadURL",optional:!0,type:"string"};default:return null}}},{key:"onValueChanged",value:function(){this.setProperty("value.files",this.input.getFilesList()),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateAllowedFileExtensions",value:function(){this.input.withAllowedFileExtensions(this.getProperty("configuration.allowExtensions"))}},{key:"updateDisabledFileExtensions",value:function(){this.input.withForbiddenFileExtensions(this.getProperty("configuration.forbidExtensions"))}},{key:"getMinInputRowWidth",value:function(){return 15}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_file_name")),this.updateLabelText(),this}},{key:"getErrors",value:function(){for(var e=E()(_()(t.prototype),"getErrors",this).call(this)||[],i=this.input.getErrors(),n=0,a=i.length;n<a;n++)e.push(i[n]);return e.length?e:null}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"onReset",value:function(){this.input.clearFiles()}},{key:"setProperty",value:function(e,i){var n=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.VIEW_FORM_CONTEXT);return"value.files"===e&&n===O.R.PDF_EXPORT?this:E()(_()(t.prototype),"setProperty",this).call(this,e,i)}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"getMinSizeInKiloBytes",value:function(){var e=this.getProperty("configuration.minSizeInBytes"),i=null;return null!==e&&(i=Math.floor(e/t.KILOBYTE_CONVERSION_FACTOR)),i}},{key:"setMinSizeInKiloBytes",value:function(e){null!==e?this.setProperty("configuration.minSizeInBytes",e*t.KILOBYTE_CONVERSION_FACTOR):this.setProperty("configuration.minSizeInBytes",null)}},{key:"getMaxSizeInKiloBytes",value:function(){var e=this.getProperty("configuration.maxSizeInBytes"),i=null;return null!==e&&(i=Math.floor(e/t.KILOBYTE_CONVERSION_FACTOR)),i}},{key:"setMaxSizeInKiloBytes",value:function(e){null!==e?this.setProperty("configuration.maxSizeInBytes",e*t.KILOBYTE_CONVERSION_FACTOR):this.setProperty("configuration.maxSizeInBytes",null)}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_FILE,name:"File",isContainer:!1,category:"basic",keywords:"file upload",icon:"i123-file_upload",isVirtual:!1,i18nName:"edt_UI_control_type_file_name",i18nKeywords:"edt_UI_control_type_file_keywords",index:60,accessibilityFields:O.q.ERROR_NODE+O.q.ROOT_NODE}}}]),t}(mt);v()($t,"attributes",{}),v()($t,"runtime",null),v()($t,"nodeName","file"),v()($t,"KILOBYTE_CONVERSION_FACTOR",1024);var jt=function(){function e(){o()(this,e)}return l()(e,null,[{key:"init",value:function(){if(null===this.diacriticsMap){this.diacriticsMap={};for(var e=0;e<this.replacementList.length;e+=1)for(var t=this.replacementList[e].chars,i=0;i<t.length;i+=1)this.diacriticsMap[t[i]]=this.replacementList[e].base}}},{key:"removeDiacritics",value:function(e){var t=this;return this.init(),e.replace(/[^\u0000-\u007e]/g,(function(e){return t.diacriticsMap[e]||e}))}},{key:"getDOMWidth",value:function(e){try{var t=document.createElement("canvas").getContext("2d");return t.font="14px Open sans",Math.round(t.measureText(e).width)}catch(i){}}}]),e}();v()(jt,"diacriticsMap",null),v()(jt,"replacementList",[{base:" ",chars:"\xa0"},{base:"0",chars:"\u07c0"},{base:"A",chars:"\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",chars:"\ua732"},{base:"AE",chars:"\xc6\u01fc\u01e2"},{base:"AO",chars:"\ua734"},{base:"AU",chars:"\ua736"},{base:"AV",chars:"\ua738\ua73a"},{base:"AY",chars:"\ua73c"},{base:"B",chars:"\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0181"},{base:"C",chars:"\u24b8\uff23\ua73e\u1e08\u0106C\u0108\u010a\u010c\xc7\u0187\u023b"},{base:"D",chars:"\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018a\u0189\u1d05\ua779"},{base:"Dh",chars:"\xd0"},{base:"DZ",chars:"\u01f1\u01c4"},{base:"Dz",chars:"\u01f2\u01c5"},{base:"E",chars:"\u025b\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e\u1d07"},{base:"F",chars:"\ua77c\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",chars:"\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e\u0262"},{base:"H",chars:"\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",chars:"\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",chars:"\u24bf\uff2a\u0134\u0248\u0237"},{base:"K",chars:"\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",chars:"\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",chars:"\u01c7"},{base:"Lj",chars:"\u01c8"},{base:"M",chars:"\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c\u03fb"},{base:"N",chars:"\ua7a4\u0220\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u019d\ua790\u1d0e"},{base:"NJ",chars:"\u01ca"},{base:"Nj",chars:"\u01cb"},{base:"O",chars:"\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OE",chars:"\u0152"},{base:"OI",chars:"\u01a2"},{base:"OO",chars:"\ua74e"},{base:"OU",chars:"\u0222"},{base:"P",chars:"\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",chars:"\u24c6\uff31\ua756\ua758\u024a"},{base:"R",chars:"\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",chars:"\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",chars:"\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"Th",chars:"\xde"},{base:"TZ",chars:"\ua728"},{base:"U",chars:"\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",chars:"\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",chars:"\ua760"},{base:"W",chars:"\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",chars:"\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",chars:"\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",chars:"\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",chars:"\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250\u0251"},{base:"aa",chars:"\ua733"},{base:"ae",chars:"\xe6\u01fd\u01e3"},{base:"ao",chars:"\ua735"},{base:"au",chars:"\ua737"},{base:"av",chars:"\ua739\ua73b"},{base:"ay",chars:"\ua73d"},{base:"b",chars:"\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253\u0182"},{base:"c",chars:"\uff43\u24d2\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",chars:"\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\u018b\u13e7\u0501\ua7aa"},{base:"dh",chars:"\xf0"},{base:"dz",chars:"\u01f3\u01c6"},{base:"e",chars:"\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u01dd"},{base:"f",chars:"\u24d5\uff46\u1e1f\u0192"},{base:"ff",chars:"\ufb00"},{base:"fi",chars:"\ufb01"},{base:"fl",chars:"\ufb02"},{base:"ffi",chars:"\ufb03"},{base:"ffl",chars:"\ufb04"},{base:"g",chars:"\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\ua77f\u1d79"},{base:"h",chars:"\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",chars:"\u0195"},{base:"i",chars:"\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",chars:"\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",chars:"\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",chars:"\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747\u026d"},{base:"lj",chars:"\u01c9"},{base:"m",chars:"\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",chars:"\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5\u043b\u0509"},{base:"nj",chars:"\u01cc"},{base:"o",chars:"\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\ua74b\ua74d\u0275\u0254\u1d11"},{base:"oe",chars:"\u0153"},{base:"oi",chars:"\u01a3"},{base:"oo",chars:"\ua74f"},{base:"ou",chars:"\u0223"},{base:"p",chars:"\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755\u03c1"},{base:"q",chars:"\u24e0\uff51\u024b\ua757\ua759"},{base:"r",chars:"\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",chars:"\u24e2\uff53\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b\u0282"},{base:"ss",chars:"\xdf"},{base:"t",chars:"\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"th",chars:"\xfe"},{base:"tz",chars:"\ua729"},{base:"u",chars:"\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",chars:"\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",chars:"\ua761"},{base:"w",chars:"\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",chars:"\u24e7\uff58\u1e8b\u1e8d"},{base:"y",chars:"\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",chars:"\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}]);var Jt=i(208),Zt=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"inputContainer",void 0),v()(h()(n),"prefixLabel",void 0),v()(h()(n),"input",void 0),v()(h()(n),"onValueCalculatedThrottler",void 0),v()(h()(n),"recalculateThrottler",void 0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","formula-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","formula-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","number-".concat(a,"-instr-acc")),n.input=document.createElement("input"),n.input.setAttribute("type","number"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("data-type","formula"),n.input.setAttribute("data-no-theme",""),n.input.setAttribute("readOnly","true"),n.prefixLabel=document.createElement("span"),n.prefixLabel.setAttribute("data-role","prefix-label"),n.prefixLabel.setAttribute("id","price-".concat(a,"-prefix-acc")),n.inputContainer=document.createElement("div"),n.inputContainer.setAttribute("data-role","input-container"),n.inputContainer.setAttribute("data-ui-role","ui-element"),n.inputContainer.appendChild(n.prefixLabel),n.inputContainer.appendChild(n.input),n.recalculateThrottler=T.a.create((function(){n.recalculate()}),100),n.input.setAttribute("aria-labelledby","formula-".concat(a,"-acc ")+"formula-".concat(a,"-error-acc ")+"number-".concat(a,"-instr-acc")),n.onValueCalculatedThrottler=T.a.create((function(){n.validateValue()}),100),n.updateAccessibilityTabIndexes(),n.getForm().getEngine().getLoader().getRules().on("dispatch",(function(t){var i=parseInt(t.replace(/^control_/,""),10),a=e.getElementById(i);a&&a.getElementKind()===O.l.CONTROL&&a.getTypeId()!==C.a.CONTROL_TYPE_FORMULA&&n.recalculateThrottler()})),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_FORMULA}},{key:"getElementName",value:function(){return"Formula"}},{key:"updatePrefixLabel",value:function(){this.prefixLabel.textContent=this.getProperty("configuration.prefix")||"",this.adjustInputPadding()}},{key:"syncInputCompactField",value:function(){this.input.placeholder=this.inputContainer.hasAttribute("placeholder")?this.inputContainer.getAttribute("placeholder"):""}},{key:"adjustInputPadding",value:function(){var e=this;setTimeout((function(){var t=e.getForm().getEngine().getTheme().properties.input.padding.horizontal,i=e.getForm().getRootNode().getAttribute("data-text-direction"),n=e.prefixLabel.offsetWidth>parseInt(t,10)?"".concat(e.prefixLabel.offsetWidth+8,"px"):t;"ltr"===i?(e.input.style.paddingLeft=n,e.input.style.removeProperty("padding-right")):(e.input.style.paddingRight=n,e.input.style.removeProperty("padding-left"))}),1)}},{key:"getSupportedValidators",value:function(){return[this.getForm().getEngine().getValidator().getValidatorById(re.VALIDATOR_TYPE_NUMERIC)]}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.inputContainer,width:O.w.FULL}]}]}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"number",optional:!0};default:return null}}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.updatePrefixLabel(),this.syncInputCompactField(),this.addEventListeners(),setTimeout((function(){e.hidePrefixLabelIfNeeded()}),1e3)}},{key:"addEventListeners",value:function(){var e=this,t=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.UNDO_SERVICE),i=this.getForm().getEngine();t&&t.on("user-action",(function(t){"resize-end"===t&&e.hidePrefixLabelIfNeeded()})),window.addEventListener("resize",Object(Jt.a)((function(){e.hidePrefixLabelIfNeeded()}),500)),this.input.addEventListener("focus",(function(){e.rootNode.querySelector('div[data-role="input-container"]').setAttribute("data-is-focused-child-element","1")})),this.input.addEventListener("blur",(function(){e.rootNode.querySelector('div[data-role="input-container"]').removeAttribute("data-is-focused-child-element")})),i.getDocument().on("update-text-direction",(function(){e.adjustInputPadding()})),i.getLoader().on("navigate-to-relative-page-number",(function(){e.hidePrefixLabelIfNeeded()}))}},{key:"hidePrefixLabelIfNeeded",value:function(){var e=this.getProperty("configuration.prefix")||"",t=parseInt(getComputedStyle(this.prefixLabel).paddingLeft,10),i=parseInt(getComputedStyle(this.input).paddingRight,10),n=jt.getDOMWidth(e);this.inputContainer.offsetWidth<n+t+i+30?this.prefixLabel.style.display="none":this.prefixLabel.style.removeProperty("display"),this.adjustInputPadding()}},{key:"onFocusEnter",value:function(){var e=this,t=setInterval((function(){e.getPrefixInspectorInput()&&(e.updateInspectorPrefix(),clearInterval(t))}),500)}},{key:"onReset",value:function(){this.validateValue()}},{key:"onDuplicate",value:function(){E()(_()(t.prototype),"onDuplicate",this).call(this),this.hasProperty("configuration.isLimitSubmissionsEnabled")&&this.getProperty("configuration.isLimitSubmissionsEnabled")&&(this.hasProperty("configuration.currentSubmissionsValue")&&this.setProperty("configuration.currentSubmissionsValue",null),this.updateInstructionsText())}},{key:"onValueChanged",value:function(){}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_formula_name")),this.updateLabelText(),this}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"updateInstructionsText",value:function(){if(void 0!==this.instructionsDOMNode){var e=this.getProperty("instructions.text"),t=this.hasProperty("configuration.limitSubmissionsTotal")&&this.getProperty("configuration.limitSubmissionsTotal")||null,i=this.hasProperty("configuration.currentSubmissionsValue")?this.getProperty("configuration.currentSubmissionsValue"):null,n=null!==t?Math.max(0,t-i):null,a="The maximum accepted value is ".concat(n),r=this.hasProperty("configuration.isLimitSubmissionsEnabled")?this.getProperty("configuration.isLimitSubmissionsEnabled"):null;null!==n&&r?(this.instructionsDOMNode.removeAttribute("data-is-empty"),e?(this.instructionsDOMNode.textContent=e,this.instructionsDOMNode.appendChild(document.createElement("br"))):this.instructionsDOMNode.textContent="",this.instructionsDOMNode.appendChild(document.createTextNode(a))):null===e||""===e?(this.instructionsDOMNode.setAttribute("data-is-empty","1"),this.instructionsDOMNode.textContent=""):(this.instructionsDOMNode.removeAttribute("data-is-empty"),this.instructionsDOMNode.textContent=e)}}},{key:"validateValue",value:function(){var e=this.getProperty("value.value");if(0===e||e||(e=null),null===e)return this.removeError(it.ERR_NUMBER_TOO_BIG),this.removeError(it.ERR_NUMBER_TOO_LONG),this.removeError(it.ERR_NUMBER_TOO_SHORT),this.removeError(it.ERR_NUMBER_TOO_SMALL),void this.removeError(it.ERR_MAX_ACCEPTED_VALUE_EXCEEDED);var t=this.hasProperty("configuration.minLength")?this.getProperty("configuration.minLength"):null,i=this.hasProperty("configuration.maxLength")?this.getProperty("configuration.maxLength"):null,n=this.hasProperty("configuration.minValue")?this.getProperty("configuration.minValue"):null,a=this.hasProperty("configuration.maxValue")?this.getProperty("configuration.maxValue"):null,r=this.hasProperty("configuration.isLimitSubmissionsEnabled")&&this.getProperty("configuration.isLimitSubmissionsEnabled");if(null!=i&&i>0&&(String(e).length>i?this.addError(it.ERR_NUMBER_TOO_LONG,this.getForm().getEngine().getI18n().translateText("textdef_71",String(i))||"The number is too long"):this.removeError(it.ERR_NUMBER_TOO_LONG)),null!=t&&t>0&&(String(e).length<t?this.addError(it.ERR_NUMBER_TOO_SHORT,this.getForm().getEngine().getI18n().translateText("textdef_70",String(t))||"The number is too short"):this.removeError(it.ERR_NUMBER_TOO_SHORT)),null!=a&&(e>a?this.addError(it.ERR_NUMBER_TOO_BIG,this.getForm().getEngine().getI18n().translateText("textdef_73",String(a))||"The value you have provided is too big"):this.removeError(it.ERR_NUMBER_TOO_BIG)),null!=n&&(e<n?this.addError(it.ERR_NUMBER_TOO_SMALL,this.getForm().getEngine().getI18n().translateText("textdef_72",String(n))||"The value you have provided is too small"):this.removeError(it.ERR_NUMBER_TOO_SMALL)),r){var o=this.getProperty("configuration.currentSubmissionsValue"),s=this.getProperty("configuration.limitSubmissionsTotal");if(null!==s){var l=Math.max(0,s-o);e>l&&(null===a||l<a)?(this.removeError(it.ERR_NUMBER_TOO_BIG),this.addError(it.ERR_MAX_ACCEPTED_VALUE_EXCEEDED,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_41")||"The maximum accepted value is "," ").concat(l))):this.removeError(it.ERR_MAX_ACCEPTED_VALUE_EXCEEDED)}}}},{key:"getPrefixVisibility",value:function(){return(this.getProperty("configuration.prefix")||"").length>0}},{key:"setPrefixVisibility",value:function(e){var t=this.getProperty("configuration.prefix")||"USD";e?this.setProperty("configuration.prefix",this.getProperty("configuration.prefix")||"USD"):this.setProperty("configuration.prefix",null),this.getPrefixInspectorInput().value=t}},{key:"updateInspectorPrefix",value:function(){var e=this.getPrefixInspectorInput();e.addEventListener("keypress",(function(t){if(!yt.isInputTextSelected(e)){var i=0;i+=e.value.replace(/[^a-z0-9]/gi,"").length;for(var n=0;n<e.value.length;n++)e.value.charCodeAt(n)>127&&i++;i>=4&&(t.key.match(/[a-z0-9]/gi)||t.key.charCodeAt(0)>127)&&t.preventDefault()}}))}},{key:"getPrefixInspectorInput",value:function(){return document.querySelector('#item [data-property-name="configuration-prefix"] input')}},{key:"setVisible",value:function(e){E()(_()(t.prototype),"setVisible",this).call(this,e),this.recalculateThrottler()}},{key:"recalculate",value:function(){if(this.isVisible(!0)&&this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW){var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.RULES_QUERY_BUILDER),t=this.getForm().getEngine().getLoader().getRules().getDatabase();if(e){var i=e.getCalculationSQLStatements(String(this.getId()));if(i&&i.length)for(var n=0,a=i.length;n<a;n++){var r=t.createStatement(i[n]);t.executeStatement(r)}}}}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_FORMULA,name:"Formula",isContainer:!1,category:"advanced",keywords:"formula calculation",icon:"i123-field_formula",isVirtual:!1,i18nName:"edt_UI_control_type_formula_name",i18nKeywords:"edt_UI_control_type_formula_keywords",index:99,accessibilityFields:O.q.NONE}}}]),t}(vt);v()(Zt,"nodeName","formula"),v()(Zt,"attributes",{}),v()(Zt,"runtime",null);var ei=function(e){function t(e,i){var n;o()(this,t);var a=(n=d()(this,_()(t).call(this,e,i))).getHash();return n.rootNode.setAttribute("id","htmlblock-".concat(a,"-acc")),n.rootNode.setAttribute("aria-labelledby","htmlblock-".concat(a,"-acc")),n.updateAccessibilityTabIndexes(),t.instanceID++,n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_HTML_BLOCK}},{key:"getElementName",value:function(){return"HTML block"}},{key:"setRendererType",value:function(e){}},{key:"updateHTMLContent",value:function(){var e=this.getProperty("configuration.innerHTML");e=yt.addNoFollowOnLinks(e),this.rootNode.innerHTML=S.sanitizeHTMLUsingUserRights(e||"")}},{key:"updateFieldNameAttribute",value:function(){var e=String(this.getProperty("configuration.fieldName"))||"";this.rootNode.setAttribute("field-name",e)}},{key:"onCreated",value:function(){this.updateHTMLContent(),this.updateFieldNameAttribute()}},{key:"onReset",value:function(){}},{key:"setupDefaults",value:function(){var e;return this.setProperty("configuration.fieldName",e="".concat(this.getForm().getEngine().getI18n().translateText("formeditor_fieldTypeHtmlBlock")," ").concat(t.instanceID)),this.rootNode.setAttribute("field-name",e),this}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"configuration.innerHTML",type:"string",optional:!0};default:return null}}},{key:"cloneNode",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=E()(_()(t.prototype),"cloneNode",this).call(this,!!e,i);return n.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_html_block_name")," ").concat(t.instanceID)),n}},{key:"setupI18n",value:function(){var e=this.getId();return e&&this.rootNode.setAttribute("data-i18n-html","control_label_".concat(e)),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("configuration.innerHTML")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),e}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_HTML_BLOCK,name:"HTML Block",isContainer:!1,category:"basic",keywords:"html block text",icon:"i123-code",isVirtual:!1,i18nName:"edt_UI_control_type_html_block_name",i18nKeywords:"edt_UI_control_type_html_block_keywords",index:80,accessibilityFields:O.q.ROOT_NODE}}}]),t}(mt);v()(ei,"instanceID",0),v()(ei,"attributes",{}),v()(ei,"runtime",null),v()(ei,"nodeName","html-block");var ti=function(e){function t(){var e,i;o()(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return i=d()(this,(e=_()(t)).call.apply(e,[this].concat(a))),v()(h()(i),"elementTypeId",void 0),i}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return void 0===this.elementTypeId?C.a.ELEMENT_NOT_SUPPORTED:this.elementTypeId}},{key:"getElementName",value:function(){return"Unsupported element"}},{key:"setRendererType",value:function(e){}},{key:"updateHTMLContent",value:function(){this.getRootNode().innerHTML="This element is not supported on your Plan. Please Upgrade.";var e="unknown";switch(this.elementTypeId){case C.a.CONTROL_TYPE_FILE:e=$t.getConfiguration().name;break;case C.a.CONTROL_TYPE_HTML_BLOCK:e=ei.getConfiguration().name;break;case C.a.CONTROL_TYPE_FORMULA:e=Zt.getConfiguration().name;break;case C.a.CONTROL_TYPE_COUPON:e=qt.getConfiguration().name;break;default:e=this.getElementName()}this.getRootNode().setAttribute("data-i18n-text","userAccountUpgrade_81"),this.getRootNode().setAttribute("data-i18n-param","controlName=".concat(e))}},{key:"onCreated",value:function(){this.updateHTMLContent()}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"withTypeId",value:function(e){return this.elementTypeId=e,this}},{key:"setProperty",value:function(e,t){return this}},{key:"getProperty",value:function(e){return null}},{key:"enumerateProperties",value:function(){return[]}},{key:"hasProperty",value:function(e){return!1}},{key:"isDuplicatable",value:function(){return!1}},{key:"isDragable",value:function(){return!1}},{key:"onReset",value:function(){}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.ELEMENT_NOT_SUPPORTED,name:"Not Supported",isContainer:!1,category:"basic",keywords:"not supported element anymore",icon:"i123-code",isVirtual:!0,index:99999,accessibilityFields:O.q.NONE}}}]),t}(mt);v()(ti,"attributes",{}),v()(ti,"runtime",null),v()(ti,"nodeName","not-supported");var ii=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"inputContainer",void 0),v()(h()(n),"prefixLabel",void 0),v()(h()(n),"input",void 0),v()(h()(n),"hasSuggestions",!0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","text-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","text-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","text-".concat(a,"-instr-acc")),n.input=document.createElement("input"),n.input.setAttribute("type","text"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("data-no-theme",""),n.input.setAttribute("aria-labelledby","text-".concat(a,"-acc ")+"text-".concat(a,"-error-acc ")+"text-".concat(a,"-instr-acc")),n.prefixLabel=document.createElement("span"),n.prefixLabel.setAttribute("data-role","prefix-label"),n.prefixLabel.setAttribute("id","price-".concat(a,"-prefix-acc")),n.inputContainer=document.createElement("div"),n.inputContainer.setAttribute("data-role","input-container"),n.inputContainer.setAttribute("data-ui-role","ui-element"),n.inputContainer.appendChild(n.prefixLabel),n.inputContainer.appendChild(n.input),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_TEXT}},{key:"getElementName",value:function(){return"Text"}},{key:"updatePrefixLabel",value:function(){this.prefixLabel.textContent=this.getProperty("configuration.prefix")||"",this.adjustInputPadding()}},{key:"syncInputCompactField",value:function(){this.input.placeholder=this.inputContainer.hasAttribute("placeholder")?this.inputContainer.getAttribute("placeholder"):""}},{key:"adjustInputPadding",value:function(){var e=this;setTimeout((function(){var t=e.getForm().getEngine().getTheme().properties.input.padding.horizontal,i=e.getForm().getRootNode().getAttribute("data-text-direction"),n=e.prefixLabel.offsetWidth>parseInt(t,10)?"".concat(e.prefixLabel.offsetWidth+8,"px"):t;"ltr"===i?(e.input.style.paddingLeft=n,e.input.style.removeProperty("padding-right")):(e.input.style.paddingRight=n,e.input.style.removeProperty("padding-left"))}),1)}},{key:"adjustPrefixLabelOpacity",value:function(){this.input.value.length>0||null!==this.getErrors()?this.prefixLabel.style.removeProperty("opacity"):this.prefixLabel.style.opacity=".5"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.inputContainer,width:O.w.FULL}]}]}},{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateDefaultValue(),this.validateValue(),this.updateHiddenAttribute(),this.initializeSuggestions(),this.updatePrefixLabel(),this.adjustPrefixLabelOpacity(),this.syncInputCompactField(),this.addEventListeners(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.synchronizeValue():this.onValueChanged(),this.onReadonlyStateChanged(),setTimeout((function(){e.hidePrefixLabelIfNeeded()}),1e3)}},{key:"addEventListeners",value:function(){var e=this,t=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.UNDO_SERVICE),i=this.getForm().getEngine();t&&t.on("user-action",(function(t){"resize-end"===t&&e.hidePrefixLabelIfNeeded()})),window.addEventListener("resize",Object(Jt.a)((function(){e.hidePrefixLabelIfNeeded()}),500)),this.input.addEventListener("focus",(function(){e.rootNode.querySelector('div[data-role="input-container"]').setAttribute("data-is-focused-child-element","1")})),this.input.addEventListener("blur",(function(){e.rootNode.querySelector('div[data-role="input-container"]').removeAttribute("data-is-focused-child-element")})),i.getDocument().on("update-text-direction",(function(){e.adjustInputPadding()})),i.getLoader().on("navigate-to-relative-page-number",(function(){e.hidePrefixLabelIfNeeded()}))}},{key:"hidePrefixLabelIfNeeded",value:function(){var e=this.getProperty("configuration.prefix")||"",t=parseInt(getComputedStyle(this.prefixLabel).paddingLeft,10),i=parseInt(getComputedStyle(this.input).paddingRight,10),n=jt.getDOMWidth(e);this.inputContainer.offsetWidth<n+t+i+30?this.prefixLabel.style.display="none":this.prefixLabel.style.removeProperty("display"),this.adjustInputPadding()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(re.VALIDATOR_TYPE_NONE),e.getValidatorById(re.VALIDATOR_TYPE_ALPHA),e.getValidatorById(re.VALIDATOR_TYPE_ALPHANUMERIC),e.getValidatorById(re.VALIDATOR_TYPE_ALPHASPACE),e.getValidatorById(re.VALIDATOR_TYPE_ALPHANUMERICSPACE),e.getValidatorById(re.VALIDATOR_TYPE_FULL_NAME),e.getValidatorById(re.VALIDATOR_TYPE_REGEX),e.getValidatorById(re.VALIDATOR_TYPE_NUMERIC)]}},{key:"onFocusEnter",value:function(){var e=this,t=setInterval((function(){e.getPrefixInspectorInput()&&(e.updateInspectorPrefix(),clearInterval(t))}),500)}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.validateValue(),this.adjustPrefixLabelOpacity(),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"validateValue",value:function(){var e=this.getProperty("configuration.minLength"),t=this.getProperty("configuration.maxLength"),i=this.getProperty("value.value")||"";i?(null!==t&&t>0&&(i.length>t?this.addError(it.ERR_TOO_MANY_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_71",String(t))||"You have more characters than allowed"):this.removeError(it.ERR_TOO_MANY_CHARACTERS)),null!==e&&e>0&&(i.length<e?this.addError(it.ERR_TOO_FEW_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_70",String(e))||"You have fewer characters than allowed"):this.removeError(it.ERR_TOO_FEW_CHARACTERS))):(this.removeError(it.ERR_TOO_FEW_CHARACTERS),this.removeError(it.ERR_TOO_MANY_CHARACTERS))}},{key:"updateDefaultValue",value:function(){var e=this.getProperty("configuration.defaultValue"),t=e&&e.trim();this.getProperty("configuration.defaultValueIsUniqueId")?this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW?this.setProperty("value.value",String((+new Date).toString(32))):this.setProperty("value.value","<UNIQUE_ID>"):(this.setProperty("value.value",""===e?null:t),this.setProperty("configuration.defaultValue",t)),this.onReadonlyStateChanged(),this.synchronizeValue()}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.setValue({value:this.getProperty("configuration.defaultValue")}),this.validateValue()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_text_name")),this.updateLabelText(),this}},{key:"onBlur",value:function(){this.checkIfElementValueIsSynchronized()}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"getSuggestionsVisibility",value:function(){return null!==(this.getProperty("options.suggestions")||null)}},{key:"setSuggestionsVisibility",value:function(e){e?this.setProperty("options.suggestions",this.getProperty("options.suggestions")||""):this.setProperty("options.suggestions",null)}},{key:"initializeSuggestions",value:function(){var e=this;this.getForm().getEngine().on("compute-form-rules-done",(function(){setTimeout((function(){e.getSuggestionsVisibility()?e.suggestionsDropDown(lt.getJQuery()):e.getForm().getEngine().getJQuery()(e.input).parent().find("[data-autocomplete-items]").remove()}),1e3)}))}},{key:"getPrefixVisibility",value:function(){return(this.getProperty("configuration.prefix")||"").length>0}},{key:"setPrefixVisibility",value:function(e){var t=this.getProperty("configuration.prefix")||"USD";e?this.setProperty("configuration.prefix",this.getProperty("configuration.prefix")||"USD"):this.setProperty("configuration.prefix",null),this.getPrefixInspectorInput().value=t}},{key:"updateInspectorPrefix",value:function(){var e=this.getPrefixInspectorInput();e.addEventListener("keypress",(function(t){if(!yt.isInputTextSelected(e)){var i=0;i+=e.value.replace(/[^a-z0-9]/gi,"").length;for(var n=0;n<e.value.length;n++)e.value.charCodeAt(n)>127&&i++;i>=4&&(t.key.match(/[a-z0-9]/gi)||t.key.charCodeAt(0)>127)&&t.preventDefault()}}))}},{key:"getPrefixInspectorInput",value:function(){return document.querySelector('#item [data-property-name="configuration-prefix"] input')}},{key:"suggestionsDropDown",value:function(e){var i,n=this,a=this.getProperty("options.suggestions").split("\n"),r=this.input;!function(o){function s(t){r.value=t,o.onValueChanged(),e(r).trigger("input"),e(r).trigger("change")}function l(){for(var t=e(r).parent().find("[data-autocomplete-items]"),i=0,n=t.length;i<n;i++)t[i].parentNode.removeChild(t[i])}function u(e,t){var i=document.createElement("div"),n=document.createElement("strong"),a=t.toUpperCase().indexOf(e.toUpperCase()),r=t.length,o=t.substr(a,e.length);if(n.appendChild(document.createTextNode(o)),a>0){var s=t.substr(0,a);i.appendChild(document.createTextNode(s))}i.appendChild(n);var l=a+e.length;if(l<r){var u=t.substr(l,r);i.appendChild(document.createTextNode(u))}return i.setAttribute("data-value",String(t||"")),i}function d(e){if(0===e.length)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("data-autocomplete-active")}(e),i>=e.length&&(i=0),i<0&&(i=e.length-1),e[i].setAttribute("data-autocomplete-active","")}function c(n){if(null!==o.getProperty("options.suggestions")){t.initialize(),l(),i=-1;for(var d=function(){var t=document.createElement("div");t.setAttribute("data-autocomplete-items",""),e(t).width("".concat(r.offsetWidth,"px"));var i=r.getBoundingClientRect();return e(t).css({top:"".concat(~~i.top+~~i.height,"px")}),e(t).on("mousedown","> div",(function(){s(e(this).attr("data-value")),l()})),t}(),c=!1,h=0,p=a.length;h<p;h++)if(a[h].toUpperCase().indexOf(n.toUpperCase())>=0){var _=u(n,a[h]);e(d).append(_),c=!0}c?e(r).parent().append(d):e(d).remove()}}e(n.input).on("input",(function(){c(this.value)})),e(n.input).on("click",(function(e){e.stopPropagation(),c(this.value)})),e(r).on("keydown",(function(t){var n=e(r).parent().find("[data-autocomplete-items]").find("div");switch(t.keyCode){case Ye.KEY_DOWN:i++,d(n),t.preventDefault();break;case Ye.KEY_UP:i--,d(n),t.preventDefault();break;case Ye.KEY_ENTER:i>-1&&n.length&&(s(n[i].getAttribute("data-value")),l()),t.preventDefault();break;case Ye.KEY_ESC:l(),t.preventDefault()}})),e(n.input).on("blur",(function(){l()}))}(this)}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly")||this.getProperty("configuration.defaultValueIsUniqueId");this.setReadonly(e)}},{key:"isReadonly",value:function(){return this.input.readOnly}},{key:"setReadonly",value:function(e){return this.input.readOnly=e,this}},{key:"emulateUserInput",value:function(){var e=this;!function(t){t([e.input]).trigger("input")}(this.getForm().getEngine().getJQuery())}}],[{key:"initialize",value:function(){this.initialized||(!function(e){e(window).on("scroll","[data-autocomplete-items]",(function(e){e.stopPropagation()})),document.body.addEventListener("scroll",(function(){for(var e=0,t=document.querySelectorAll("[data-autocomplete-items]"),i=t.length;e<i;e++)t[e].parentNode.removeChild(t[e])}),{passive:!0})}(lt.getJQuery()),this.initialized=!0)}},{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_TEXT,name:"Text",isContainer:!1,category:"basic",keywords:"short text input textbox open",icon:"i123-editor_field_shorttext",isVirtual:!1,i18nName:"edt_UI_control_type_text_name",i18nKeywords:"edt_UI_control_type_text_keywords",index:10,accessibilityFields:O.q.ERROR_NODE}}}]),t}(vt);v()(ii,"attributes",{}),v()(ii,"runtime",null),v()(ii,"nodeName","text"),v()(ii,"initialized",!1);var ni,ai=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0),v()(h()(n),"hasSuggestions",!0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","email".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","email-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","email-".concat(a,"-instr-acc")),n.input=document.createElement("input"),n.input.setAttribute("type","email"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("aria-labelledby","email".concat(a,"-acc ")+"email-".concat(a,"-error-acc ")+"email-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_EMAIL}},{key:"getElementName",value:function(){return"Email"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.w.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.updateDefaultValue(),this.initializeSuggestions(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.synchronizeValue():this.onValueChanged(),this.onReadonlyStateChanged()}},{key:"validateInput",value:function(){var e=this.getForm().getEngine().getValidator(),t=this.getProperty("value.value")||"";t&&!e.validate(t,re.VALIDATOR_TYPE_EMAIL)?this.addError(it.ERR_INVALID_EMAIL,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_5"),": ").concat(this.getForm().getEngine().getI18n().translateText("textdef_49"))||"The email address is invalid"):this.hasError(it.ERR_INVALID_EMAIL)&&this.removeError(it.ERR_INVALID_EMAIL)}},{key:"getSupportedValidators",value:function(){return[this.getForm().getEngine().getValidator().getValidatorById(re.VALIDATOR_TYPE_EMAIL)]}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateDefaultValue",value:function(){var e=String(this.getProperty("configuration.defaultValue")||"");this.setProperty("value.value",""===e?null:e),this.synchronizeValue()}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.updateDefaultValue(),this.onValueChanged()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_email_name")),this.updateLabelText(),this}},{key:"onBlur",value:function(){var e=this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);this.validateInput(),this.checkIfElementValueIsSynchronized(),e&&(this.errorDOMNode.tabIndex=0)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"getSuggestionsVisibility",value:function(){return null!==(this.getProperty("options.suggestions")||null)}},{key:"setSuggestionsVisibility",value:function(e){e?this.setProperty("options.suggestions",this.getProperty("options.suggestions")||""):this.setProperty("options.suggestions",null)}},{key:"initializeSuggestions",value:function(){var e=this;this.getForm().getEngine().on("compute-form-rules-done",(function(){setTimeout((function(){e.getSuggestionsVisibility()?e.suggestionsDropDown(lt.getJQuery()):e.getForm().getEngine().getJQuery()(e.input).parent().find("[data-autocomplete-items]").remove()}),1e3)}))}},{key:"suggestionsDropDown",value:function(e){var i,n=this,a=this.getProperty("options.suggestions").split("\n"),r=this.input;!function(o){function s(t){r.value=t,o.onValueChanged(),e(r).trigger("input"),e(r).trigger("change")}function l(){for(var t=e(r).parent().find("[data-autocomplete-items]"),i=0,n=t.length;i<n;i++)t[i].parentNode.removeChild(t[i])}function u(e,t){var i=document.createElement("div"),n=document.createElement("strong");return n.appendChild(document.createTextNode(t.substr(0,e.length))),i.appendChild(n),i.appendChild(document.createTextNode(t.substr(e.length))),i.setAttribute("data-value",String(t||"")),i}function d(e){if(0===e.length)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("data-autocomplete-active")}(e),i>=e.length&&(i=0),i<0&&(i=e.length-1),e[i].setAttribute("data-autocomplete-active","")}function c(n){if(null!==o.getProperty("options.suggestions")){t.initialize(),l(),i=-1;for(var d=function(){var t=document.createElement("div");t.setAttribute("data-autocomplete-items",""),e(t).width("".concat(r.offsetWidth,"px"));var i=r.getBoundingClientRect();return e(t).css({top:"".concat(~~i.top+~~i.height,"px")}),e(t).on("mousedown","> div",(function(){s(e(this).attr("data-value")),l()})),t}(),c=!1,h=0,p=a.length;h<p;h++)if(a[h].substr(0,n.length).toUpperCase()===n.toUpperCase()){var _=u(n,a[h]);e(d).append(_),c=!0}c?e(r).parent().append(d):e(d).remove()}}e(n.input).on("input",(function(){c(this.value)})),e(n.input).on("click",(function(e){e.stopPropagation(),c(this.value)})),e(r).on("keydown",(function(t){var n=e(r).parent().find("[data-autocomplete-items]").find("div");switch(t.keyCode){case Ye.KEY_DOWN:i++,d(n),t.preventDefault();break;case Ye.KEY_UP:i--,d(n),t.preventDefault();break;case Ye.KEY_ENTER:i>-1&&n.length&&(s(n[i].getAttribute("data-value")),l()),t.preventDefault();break;case Ye.KEY_ESC:l(),t.preventDefault()}})),e(n.input).on("blur",(function(){l()}))}(this)}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.setReadonly(e)}},{key:"isReadonly",value:function(){return this.input.readOnly}},{key:"setReadonly",value:function(e){return this.input.readOnly=e,this}}],[{key:"initialize",value:function(){ii.initialize()}},{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_EMAIL,name:"Email",isContainer:!1,category:"advanced",keywords:"email mail address",icon:"i123-email",isVirtual:!1,i18nName:"edt_UI_control_type_email_name",i18nKeywords:"edt_UI_control_type_email_keywords",index:100,accessibilityFields:O.q.ERROR_NODE}}}]),t}(vt);v()(ai,"attributes",{}),v()(ai,"runtime",null),v()(ai,"nodeName","email"),function(e){e.TYPE_APPEND="append",e.TYPE_INSERT_BEFORE="insertBefore",e.TYPE_REPLACE="replace"}(ni||(ni={}));var ri=function(e){function t(e){var i;return o()(this,t),i=d()(this,_()(t).call(this)),v()(h()(i),"node",void 0),v()(h()(i),"options",void 0),v()(h()(i),"config",void 0),v()(h()(i),"selectedOption",null),v()(h()(i),"jq",void 0),v()(h()(i),"dropdownDirectionPlugin",!0),v()(h()(i),"onValueChanged",void 0),i.jq=e,i}return f()(t,e),l()(t,[{key:"init",value:function(e,t,i){var n=this;return this.node=e,this.options=t,this.setConfig(i),this.setSelectedOption(),this.appendSelect(),setTimeout((function(){return n.bindEvents()}),5),this}},{key:"appendSelect",value:function(){var e=this.render();switch(this.jq(this.node).append(e),this.config.append){case ni.TYPE_APPEND:this.jq(this.node).append(e);break;case ni.TYPE_INSERT_BEFORE:this.jq(this.node).children().length>0?this.jq(this.node).prepend(e):this.jq(this.node).append(e);break;case ni.TYPE_REPLACE:this.virtualSelectAppendReplace(e)}}},{key:"virtualSelectAppendReplace",value:function(e){!function(t,i){var n=i(t.node).prop("attributes"),a=i(t.node).parent().append(e).children("div:last-child");i.each(n,(function(){"undefined"===typeof i(a).attr(this.name)&&i(a).attr(this.name,this.value)})),i(t.node).remove(),t.setNode(i(a).parent())}(this,this.jq)}},{key:"reRender",value:function(){!function(e,t){t(e.node).empty(),e.appendSelect()}(this,this.jq)}},{key:"render",value:function(){var e=this.getSelectedOption(),t=document.createElement("div");return t.className="virtual-select",null!==this.config.fixedWidth&&(t.style.width=this.config.fixedWidth),!0!==this.config.light||window.innerWidth<=767?t.setAttribute("data-light","false"):t.setAttribute("data-light","true"),t.setAttribute("data-size","".concat(this.config.size)),this.config.sizeSm&&t.setAttribute("data-sm-size","".concat(this.config.sizeSm)),this.config.sizeMd&&t.setAttribute("data-md-size","".concat(this.config.sizeSm)),this.config.sizeLg&&t.setAttribute("data-lg-size","".concat(this.config.sizeSm)),null!==e&&"undefined"!==typeof e.label||t.setAttribute("data-not-selected","true"),this.jq(t).append(this.renderPlaceholder()),t}},{key:"renderPlaceholder",value:function(){var e=this.getSelectedOption(),t=document.createElement("div"),i=document.createElement("span"),n=document.createElement("span");return t.className="virtual-select-placeholder",i.className="title-placeholder",n.className="arrow-placeholder",null!==e&&"undefined"!==typeof e.label?i.innerText="".concat(this.selectedOption.label):i.innerText=this.placeholderText(),t.innerHTML=i.outerHTML+n.outerHTML,t}},{key:"bindEvents",value:function(){!function(e,t){e.options&&"object"===a()(e.options)&&e.options.length>0?t(e.node).on("click",".virtual-select-placeholder",(function(i){i.stopImmediatePropagation(),i.preventDefault(),null!==e.config.changeOptions&&e.config.changeOptions(e),t(e.node).find(".virtual-select").append(e.renderSelect()).append((function(){var i=this,n={placeholder:e.placeholderText(),plugins:{no_results:{message:"No match found"},start_typing:{},scroll_dropdown_view_on_selected_item_top:{}},onInitialize:function(){var e=this;this.revertSettings.$children.each((function(){t(this).children().length&&t(this).children().each((function(){t.extend(e.options[this.value],t(this).data())})),t.extend(e.options[this.value],t(this).data())}))},render:{option:function(t,i){var n=e.getSelectedOption(),a="",r="";return t.hasOwnProperty("extraClass")&&(a+="".concat(t.extraClass)),null!==n&&n.hasOwnProperty("id")&&this.value==n.id&&(r="selected"),'<div class="option '.concat(r," ").concat(a,'">').concat(t.text," ").concat(r,"</div>")}},onDropdownClose:function(n){setTimeout((function(){"undefined"!==typeof n.attr("data-no-match-found")&&"true"===n.attr("data-no-match-found")||(t(i).find("select").each((function(e,t){e.selectize&&e.selectize().destroy()})),t(i).empty(),t(i).append(e.renderPlaceholder()))}),10)},onDropdownOpen:function(){t(".selectize-dropdown-content").perfectScrollbar({minScrollbarLength:10})}};e.dropdownDirectionPlugin&&(n.plugins.dropdown_direction={},n.dropdownDirection="auto"),t(this).find("select").selectize(n),t(this).find(".virtual-select-placeholder").hide(),setTimeout((function(){var e=t(i).find("select")[0];"undefined"!==typeof e&&"undefined"!==typeof e.selectize&&e.selectize.open()}),250)}))})).on("change","select",(function(i){i.stopImmediatePropagation(),i.preventDefault(),this.value&&("undefined"!==typeof t(e.node).find(".virtual-select").attr("data-not-selected")&&t(e.node).find(".virtual-select").removeAttr("data-not-selected"),e.changeSelectedStatusById(this.value),e.trigger("change",e))})).on("click",".selectize-control",(function(e){e.stopImmediatePropagation(),e.preventDefault(),t(this).parent().find("select.selectized")[0].selectize.open()})).on("mouseover",(function(t){e.trigger("hover",t)})).on("mouseenter",(function(t){e.trigger("mouseenter",t)})).on("mouseleave",(function(t){e.trigger("mouseleave",t)})):e.trigger("render-fail",e)}(this,this.jq)}},{key:"renderSelect",value:function(){var e=document.createElement("select"),t=this.config.selected;this.config.isSearchable||e.classList.add("no-search"),this.dropdownDirectionPlugin&&e.classList.add("dropdown-direction-plugin"),e.setAttribute("placeholder",this.placeholderText());var i=document.createElement("option");if(i.value="",i.text=this.placeholderText(),e.appendChild(i),Array.isArray(this.options)&&this.options.length>0){for(var n in this.options)if(this.options.hasOwnProperty(n))if(this.options[n].hasOwnProperty("groupLabel")){var a=document.createElement("optgroup");for(var r in a.setAttribute("label",this.options[n].groupLabel),this.options[n].options)if(this.options[n].options.hasOwnProperty(r)){var o=document.createElement("option");o.value=this.options[n].options[r].id.toString(),o.text=this.options[n].options[r].label,null!==t&&t.toString()===this.options[n].options[r].id.toString()&&(o.setAttribute("selected","selected"),o.setAttribute("class","option-highlight")),"undefined"!==typeof this.options[n].options[r].disabled&&this.options[n].options[r].disabled&&o.setAttribute("disabled","disabled"),"undefined"!==typeof this.options[n].options[r].class&&o.setAttribute("data-extra-class",this.options[n].options[r].class),a.appendChild(o)}e.add(a,e[e.length])}else{var s=document.createElement("option");s.value="".concat(this.options[n].id),s.text="".concat(this.options[n].label),null!==t&&t.toString()===this.options[n].id.toString()&&(s.setAttribute("selected","selected"),s.setAttribute("class","option-highlight")),"undefined"!==typeof this.options[n].disabled&&this.options[n].disabled&&s.setAttribute("disabled","disabled"),"undefined"!==typeof this.options[n].class&&s.setAttribute("data-extra-class",this.options[n].class),e.add(s,e[e.length])}return e}}},{key:"setConfig",value:function(e){var t={light:!1,size:12,sizeSm:null,sizeMd:null,sizeLg:null,fixedWidth:null,placeholder:"Please Select",append:ni.TYPE_APPEND,selected:null,isSearchable:!0,changeOptions:null};if("undefined"!==typeof e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);this.config=t}},{key:"getConfig",value:function(){return this.config}},{key:"setValueByOptionId",value:function(e){this.changeSelectedStatusById(e),this.reRender()}},{key:"changeSelectedStatusById",value:function(e){this.config.selected=e,this.setSelectedOption()}},{key:"placeholderText",value:function(){return this.config.placeholder}},{key:"setSelectedOption",value:function(){if(null!==this.config.selected){var e,t=this.config.selected;if("undefined"!==typeof this.options)Array.isArray(this.options)&&this.options.filter((function(i){i.hasOwnProperty("groupLabel")?i.options.filter((function(i){i.id==t&&(e=i)})):i.hasOwnProperty("id")&&i.id==t&&(e=i)})),this.selectedOption="undefined"!==typeof e?e:null;else this.selectedOption=null}}},{key:"getSelectedOption",value:function(){if(null!==this.config.selected){var e,t=this.config.selected;if(Array.isArray(this.options)&&this.options.filter((function(i){i.hasOwnProperty("groupLabel")?i.options.filter((function(i){i.id==t&&(e=i)})):i.hasOwnProperty("id")&&i.id==t&&(e=i)})),"undefined"!==typeof e)return this.onValueChanged&&this.onValueChanged(+e.id),e}return null}},{key:"getNode",value:function(){return this.node}},{key:"setNode",value:function(e){return this.node=e}},{key:"setOptions",value:function(e){this.options=e}}]),t}(R.a),oi=function(){function e(){o()(this,e)}return l()(e,null,[{key:"makeSortable",value:function(t,i,n,a,r,o){var s,l,u=O.T.IDLE,d={left:0,top:0},c={left:0,top:0},h=!1,p=function(n){if(u===O.T.START||u===O.T.RUN){var r=n.target||n.srcElement;if(r===i||t.contains(i,r)){if(!h){var p={left:n.clientX,top:n.clientY};if(yt.computeDistance(d,p)<e.MINIMUM_DISTANCE_IN_PIXELS_TO_INITIATE_A_DRAG)return n.preventDefault(),void n.stopPropagation();h=!0;var _=t(i).find("table").attr("data-editing-context"),g=s.getBoundingClientRect();l=s.cloneNode(!0),s.setAttribute("data-is-sortable-source-element",""),l.style.width="".concat(g.width,"px"),l.style.height="".concat(g.height,"px"),l.style.left="".concat(g.left,"px"),l.style.top="".concat(g.top,"px"),l.setAttribute("data-element-type","sortable-overlay"),l.setAttribute("data-editing-context",_),document.body.appendChild(l)}n.preventDefault(),n.stopPropagation(),t(i).attr("data-in-dragging-procedure",!0);var E=t(r).closest(a).get(0);if(E){var y=E.getBoundingClientRect(),f=y.top+y.height/2,m=O.S.BEFORE;if(n.clientY>f&&(m=O.S.AFTER),o)try{o(s,E,m)}catch(n){}}u=O.T.RUN,c.left=n.clientX-d.left,c.top=n.clientY-d.top,l.style.transform="translate(".concat(c.left,"px, ").concat(c.top,"px)")}}},_=function e(n){if(t(i).removeAttr("data-in-dragging-procedure"),h=!1,u!==O.T.RUN)return console.warn("RETURN (STATE IS NOT RUN)"),void(u=O.T.IDLE);l.parentNode.removeChild(l),u=O.T.IDLE,document.body.removeEventListener("mousemove",p,!0),document.body.removeEventListener("mouseup",e,!0),s.removeAttribute("data-is-sortable-source-element"),l=null,d.left=d.top=c.left=c.top=0,n.preventDefault(),n.stopPropagation();var o=n.target||n.srcElement;if(o!==i&&!t.contains(i,o))return console.warn("RETURN: TARGET IS NOT (A CHILD OF) SOURCE CONTAINER"),s=null,void(u=O.T.IDLE);var _=t(o).closest(a).get(0);if(!_){if(r)try{r(s,null,O.S.BEFORE)}catch(n){console.error("DROP CALLBACK EXCEPTION: ",n)}return s=null,_=null,console.warn("RETURN (NO TARGET DROP ELEMENT)"),void(u=O.T.IDLE)}if(_===s)return s=null,u=O.T.IDLE,void console.warn("RETURN (TARGET DROP ELEMENT == SOURCE ELEMENT)");var g=_.getBoundingClientRect(),E=g.top+g.height/2,y=O.S.BEFORE;if(n.clientY>E&&(y=O.S.AFTER),r)try{r(s,_,y)}catch(n){console.error("DROP CALLBACK EXCEPTION: ",n)}_=null,s=null,u=O.T.IDLE};t(a).on("mousedown",(function(e){if(u===O.T.IDLE&&je.getMouseButtonFromEvent(e)===O.y.LEFT){var i=e.target||e.srcElement;if(d.left=e.clientX,d.top=e.clientY,t(i).is("".concat(n,", ").concat(n," *"))){if(!(s=t(i).closest(a).get(0)))return;u=O.T.START,document.body.addEventListener("mousemove",p,!0),document.body.addEventListener("mouseup",_,!0)}}}))}}]),e}();v()(oi,"MINIMUM_DISTANCE_IN_PIXELS_TO_INITIATE_A_DRAG",5);var si=i(21),li=function(){function e(){o()(this,e),v()(this,"currentSelectedControl",void 0),v()(this,"dialogOptions",void 0),v()(this,"userService",void 0),this.userService=ae.a.getInstance()}return l()(e,[{key:"getName",value:function(){return e.NAME}},{key:"upgrade",value:function(t,i,n){var a=this;this.setCurrentSelectedControl(n.getEngine()),t(i).find("input[type=hidden][data-plugin=text-choice-interface][data-value]").each((function(r,o){var s=o.getAttribute("data-value"),l=[],u=~~o.getAttribute("data-default-choice-type"),d=(o.getAttribute("data-set-default-first-option-after-text-dataset-import"),o.getAttribute("data-synchronize-other-properties")),c=o.getAttribute("data-new-choice-text")||"New Choice",h=o.getAttribute("data-new-choice-text-i18n");a.setDialogOptions({choices:l,container:i,editorUserInterface:n,defaultOptionInputType:u,dialogTitle:"",newChoiceText:"",itemType:"",editingContext:"",useDifferentValuesPerStatement:!1}),t(o).on("reload",(function(e){try{var i=e.target,n=t(i).closest("[data-role=property]").find("div[data-role=secondary]").get(0),r=t(n).find("[data-role=container]");a.dialogOptions.choices=a.reinitializeChoicesIndexes(JSON.parse(i.value),r),a.updateChoices(i,t),a.updateContainerAttributes(n)}catch(o){}})),o.removeAttribute("data-value"),s&&(a.dialogOptions.choices=JSON.parse(s)||[]),t(o).parent().find("[data-role=secondary]").each((function(i,r){t(o).closest("label").after(r);var s=t(r).find("[data-role=container]");a.dialogOptions.choices=a.resetChoicesIndex(a.dialogOptions.choices,s),a.updateContainerAttributes(r),a.makeChoicesInInspectorSortable(t,r,o,d),t(r).on("click","a[data-role=edit-option], a[data-role=edit-more-option]",(function(e){var i=e.currentTarget,u=String(i.getAttribute("data-dialog-title")),c=String(i.getAttribute("data-dialog-title-i18n")||""),h=String(i.getAttribute("data-new-choice-text")),p=String(i.getAttribute("data-new-choice-text-i18n")),_=String(i.getAttribute("data-item-type")),g=o.getAttribute("data-editing-context");a.dialogOptions.itemType=_,a.dialogOptions.editingContext=g,a.dialogOptions.useDifferentValuesPerStatement=a.currentSelectedControl.hasProperty("options.useDifferentValuesPerStatement")&&a.currentSelectedControl.getProperty("options.useDifferentValuesPerStatement"),a.dialogOptions.dialogTitle=c?n.getEngine().getI18n().translateText(c):u,a.dialogOptions.newChoiceText=p?n.getEngine().getI18n().translateText(p):h,a.editChoices().then((function(){a.currentSelectedControl.hasProperty("options.useDifferentValuesPerStatement")&&a.currentSelectedControl.setProperty("options.useDifferentValuesPerStatement",a.dialogOptions.useDifferentValuesPerStatement),l=JSON.parse(JSON.stringify(a.dialogOptions.choices)),l=a.reinitializeChoicesIndexes(l,s),a.updateContainerAttributes(r),a.updateChoices(o,t,d),a.makeChoicesInInspectorSortable(t,r,o,d),n.getEngine().getLoader().trigger("payments_products_price_change")})).fail((function(e){void 0!==e&&(console.warn("Failed to save options. Error is displayed below"),console.error(e))}))})).on("click","a[data-role=add-option]",(function(e){n.getEngine().getLoader().execCommand("track-event","edt_inspector_choice_option_add");var i=e.target,s=String(i.getAttribute("data-new-choice-text")),l=String(i.getAttribute("data-new-choice-text-i18n")),u=l?n.getEngine().getI18n().translateText(l):s,c=t(r).find('[data-role="container"]')[0],h=t(c).find('[data-role="choice"]:last-child input[data-role="secondary"]')[0];a.insertNewChoice(c,u,h,t),a.updateContainerAttributes(r),a.updateChoices(o,t,d),a.makeChoicesInInspectorSortable(t,r,o,d)})).parent().on("click","a[data-role=import-option]",(function(i){var l=i.target,u=JSON.parse(l.getAttribute("data-sets")||"[]"),c=String(l.getAttribute("data-dialog-title")||"Import choices"),h=String(l.getAttribute("data-dialog-title-i18n")||""),p=a.dialogOptions.choices;a.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(p=JSON.parse(JSON.stringify(a.dialogOptions.choices[0]))),n.getSelectedDataset(u,h?n.getEngine().getI18n().translateText(h):c,p).then((function(i){s.find("[data-role=choice]").remove();for(var n=0,l=i.getValues(),u=l.length;n<u;n++){if(a.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER){for(var c=0,h=a.dialogOptions.choices.length;c<h;c++)void 0===a.dialogOptions.choices[c][n]?a.dialogOptions.choices[c].push(e.createUniqueChoice({text:l[n].text,isDefault:!1,index:n,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,isCorrect:!1,quizPoints:0,paymentsValue:null},p)):a.dialogOptions.choices[c][n].text=l[n].text,n===u-1&&(a.dialogOptions.choices[c].length=u);p[n]=a.dialogOptions.choices[0][n]}else void 0===a.dialogOptions.choices[n]?a.dialogOptions.choices.push(e.createUniqueChoice({text:l[n].text,isDefault:!1,index:n,numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,isCorrect:!1,quizPoints:0,paymentsValue:null},p)):a.dialogOptions.choices[n].text=l[n].text,p[n]=a.dialogOptions.choices[n],n===u-1&&(a.dialogOptions.choices.length=u);s.append(a.createChoiceElement(p[n]))}a.updateContainerAttributes(r),a.updateChoices(o,t,d),a.makeChoicesInInspectorSortable(t,r,o,d)})).fail((function(e){console.warn("Failed to import choices. Error is displayed below"),console.error(e)}))})).on("input","[data-role=choice] > input[type=text][data-model-property=text]",(function(e){var i=e.target,n=~~t(i).closest("[data-role=choice]").attr("data-index");if(a.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var r=0,s=a.currentSelectedControl.getChildren().length;r<s;r++)a.dialogOptions.choices[r][n].text=i.value;else a.dialogOptions.choices[n].text=i.value;a.updateChoices(o,t,d)})).on("paste","[data-role=choice] > input[type=text][data-model-property=text]",(function(i){var n,s=i.target,u=[],c=~~t(s).closest("div[data-role=statement]").attr("data-index");try{var h=i.originalEvent||{},p=i.originalEvent.clipboardData||null;if(!p)return;n=p.getData("text/plain");var _=String(n||"").replace(/(^[\s]+|[\s]+$)/g,"");if(!(_.indexOf("\n")>-1))return;if(1===(u=_.split("\n")).length)return;h.preventDefault(),h.stopPropagation(),a.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(l=l[0]);for(var g=0,E=u.length;g<E;g++){var y=e.createUniqueChoice({text:u[g],index:c+g+1},l),f=a.createChoiceElement(y);l.splice(y.index,0,y),t(f).insertAfter(t("div[data-role=choice][data-index=".concat(y.index-1,"]"))),l=a.reinitializeChoicesIndexes(l,t(r)),a.updateContainerAttributes(r)}a.updateChoices(o,t,d),a.makeChoicesInInspectorSortable(t,r,o,d)}catch(m){}})).on("click","[data-role=choice] div[data-role=remove]",(function(e){if(!(a.dialogOptions.choices.length<=1||a.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&a.dialogOptions.choices[0].length<=1)){n.getEngine().getLoader().execCommand("track-event","edt_inspector_choice_option_remove");var i=e.target,r=t(i).closest('[data-role="container"]'),s=t(i).closest("[data-role=choice]"),l=~~s.attr("data-index");if(a.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var u=0,c=a.dialogOptions.choices.length;u<c;u++)a.dialogOptions.choices[u].splice(l,1);else a.dialogOptions.choices.splice(l,1);a.dialogOptions.choices=a.reinitializeChoicesIndexes(a.dialogOptions.choices,t(r)),a.updateChoices(o,t,d),s.remove(),a.updateContainerAttributes(r.closest("div[data-role=secondary]")[0])}})).on("keydown","input",(function(i){if((i.keyCode||i.charCode)===Ye.KEY_ENTER&&null!==l[l.length-1].text&&""!==l[l.length-1].text){var s=i.target,u=~~t(s).parent().attr("data-index");if(l.length>e.MAX_VISIBLE_NUMBER_OF_CHOICES_IN_INSPECTOR_PANEL&&u===e.MAX_VISIBLE_NUMBER_OF_CHOICES_IN_INSPECTOR_PANEL&&t("a[data-role=edit-more-option][data-target=choices]").trigger("click"),u<e.MAX_VISIBLE_NUMBER_OF_CHOICES_IN_INSPECTOR_PANEL){var p=e.createUniqueChoice({text:h?n.getEngine().getI18n().translateText(h):c,index:l.length},l),_=a.createChoiceElement(p);l.splice(u+1,0,p),t(_).insertAfter(s.parentNode),l=a.reinitializeChoicesIndexes(l,t(r)),a.updateChoices(o,t,d),a.updateContainerAttributes(r),a.makeChoicesInInspectorSortable(t,r,o,d),t(_).find("input").focus().select()}}}))}))}))}},{key:"createChoiceElement",value:function(e){var t,i,n,a=document.createElement("div");return a.setAttribute("data-role","choice"),a.setAttribute("data-index",String(e.index)),(t=document.createElement("input")).setAttribute("type","text"),t.setAttribute("data-model-property","text"),t.setAttribute("data-role","secondary"),a.appendChild(t),(i=document.createElement("div")).setAttribute("data-role","remove"),a.appendChild(i),(n=document.createElement("div")).setAttribute("data-role","drag"),a.appendChild(n),t.value=e.text,a}},{key:"isUniqueSetOfChoices",value:function(e){if(!e)return!0;for(var t=0,i=e.length;t<i;t++)for(var n=0;n<t;n++)if(e[t].text===e[n].text)return!1;return!0}},{key:"editChoices",value:function(){var e=this;this.dialogOptions.dialogTitle=this.dialogOptions.dialogTitle||"Default choice",this.dialogOptions.newChoiceText=this.dialogOptions.newChoiceText||"New Choice",this.dialogOptions.itemType=this.dialogOptions.itemType||"CHOICE";var t=JSON.parse(JSON.stringify(this.dialogOptions.choices)),i=this.dialogOptions.editorUserInterface,n=this.dialogOptions.editorUserInterface.getEngine().getJQuery(),a=this.dialogOptions.editorUserInterface.getEngine().getResourceManager(),r=this.dialogOptions.editorUserInterface.getEngine().getI18n(),o=this.dialogOptions.editorUserInterface.getEngine().getLoader().getCommandDispatcher();this.dialogOptions.editorUserInterface.getEngine().getFactory();return n.Deferred((function(s){if(!e.dialogOptions||"QUIZ_OPTIONS"!==e.dialogOptions.editingContext||e.userService.canUseQuizOptions()){var l="/modules/Typescript/Form/resources/edit-option-dialog.html",u=e.dialogOptions.choices,d=[];e.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(l="/modules/Typescript/Form/resources/edit-option-dialog-likert.html",d=e.generateStatementsForSalvageModel(),0!=e.dialogOptions.choices.length&&(u=e.dialogOptions.choices[0])),a.get(l).then((function(a){if(e.currentSelectedControl.getTypeId()!==C.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var l=0,c=u.length;l<c;l++){var h=u[l];h.isCorrect||(h.quizPoints=0),h.numberOfTimesThisOptionHasBeenChosen<0&&(h.numberOfTimesThisOptionHasBeenChosen=0)}var p,_=new si.a(a),g={choices:JSON.parse(JSON.stringify(u)),inputType:e.dialogOptions.defaultOptionInputType!==O.e.CHECKBOX,itemType:e.dialogOptions.itemType,editingContext:e.dialogOptions.editingContext,displayResetUsedChoicesOption:e.isResetButtonVisibleInEditingPanel(u),resetUsedColumnText:"Reset used choices",resetUsedColumnTextI18n:"edt_text_reset_used_choices",formTotalPointsText:"Form total points:",formTotalPointsTextI18n:"edt_text_form_total_points",formTotalPoints:yt.getFormTotalPoints(e.dialogOptions.editorUserInterface.getEngine().getDocument()),useDifferentValuesPerStatement:e.dialogOptions.useDifferentValuesPerStatement,statements:d};if((p=i.createDialog(e.dialogOptions.dialogTitle,[{type:be.c.CANCEL,callback:e.onCancelButtonPress.bind(e,t,s)},{type:be.c.SAVE,callback:e.onSaveButtonPress.bind(e,u,i,s)}],{width:"600px",height:"600px"})).body.setAttribute("data-dialog-role","edit-option"),e.dialogOptions&&"CONFIGURE_VALUES"===e.dialogOptions.editingContext){var E=document.createElement("div"),y=document.createElement("div"),f=document.createElement("div");E.setAttribute("data-role","set-all-button-container"),y.setAttribute("data-role","set-all-button"),f.setAttribute("data-i18n-text","edt_set_to_all"),f.innerText=r.translateText("edt_set_to_all"),y.appendChild(f),E.appendChild(y),p.titlebody.appendChild(E)}e.renderDialogBodyContent(p,_,g,r,o,n,u,i);for(var m,v=0,T=0,N=u.length;T<N;T++)if(u[T].isCorrect){v=u[T].quizPoints;break}m=yt.getFormTotalPoints(e.dialogOptions.editorUserInterface.getEngine().getDocument())-v,e.attachDialogEvents(n,p,i,m,u,g,_,r,o)})).fail((function(e){s.reject(e)}))}else o.triggerPaywall(be.h.QUIZ_OPTIONS_NOT_SUPPORTED_IN_CURRENT_USER_PLAN)})).promise()}},{key:"onSaveButtonPress",value:function(e,t,i,n,a){this.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER||this.isUniqueSetOfChoices(e)?(a.close(),i.resolve(this.dialogOptions.choices)):t.alert("Error Saving Choices","You are not allowed to have 2 or more options with the same value")}},{key:"onCancelButtonPress",value:function(e,t,i,n){this.dialogOptions.choices=e,n.close(),t.reject()}},{key:"generateStatementsForSalvageModel",value:function(){for(var e=[],t=this.currentSelectedControl.getChildren(),i=0,n=t.length;i<n;i++)e.push({choices:JSON.parse(JSON.stringify(this.dialogOptions.choices[i])),text:t[i].getProperty("label.labelText"),index:i});return e}},{key:"renderDialogBodyContent",value:function(e,t,i,n,a,r,o,s){var l=this;e.body.innerHTML=t.parse(i),n.translateDOMNode(e.body),a.addPerfectScrollbar(e.body),r(e.body).find("table tbody tr").each((function(e,t){l.updateNumberOfChoicesLeft(r(t))})),("PAYMENTS_VALUES"===i.editingContext&&(this.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&this.currentSelectedControl.hasProperty("options.useDifferentValuesPerStatement")&&!this.currentSelectedControl.getProperty("options.useDifferentValuesPerStatement")||this.currentSelectedControl.getTypeId()!==C.a.CONTAINER_TYPE_LIKERT_WRAPPER)||"PAYMENTS_VALUES"!==i.editingContext)&&this.makeChoicesInEditPanelSortable(r,e.body),s.upgrade(e.body)}},{key:"attachDialogEvents",value:function(e,t,i,n,a,r,o,s,l){var u=this;e(t.body).on("keydown","input[name=payments-values]",(function(e){var t=e.target;t.setAttribute("data-temp-value",t.value)})).on("input","input[name=payments-values]",(function(e){var t=e.target;t.value.length&&!t.value.match(/^([0-9]+(\.[0-9]{1,2}|\.)?|\.[0-9]{1,2})$/)&&(t.value=t.getAttribute("data-temp-value"))})).on("keyup","input[name=payments-values]",(function(e){var t=e.target;setTimeout((function(){t.removeAttribute("data-temp-value")}),0)})).on("blur","input[name=payments-values]",(function(e){var t=e.target;if(t.value.indexOf(".")>-1){for(var i=t.value.split("."),n=!i[0].length||i[1].length<2;i[1].length<2;)i[1]+="0";n&&(t.value="".concat(i[0]||"0",".").concat(i[1]))}})).on("click","a[data-role=add-option]",(function(){var n=e(t.body).find('tbody [data-role="choice"]:last-child [data-role="choice-name"] input')[0],a=u.insertNewChoice(t.body,u.dialogOptions.newChoiceText,n,e);u.makeChoicesInEditPanelSortable(e,t.body),i.upgrade(a)})).on("input","td[data-role=choice-name] input[type=text]",(function(t){var i=t.target,n=i.value,a=e(i).closest("tr"),r=~~a.attr("data-statement-index"),o=~~a.attr("data-index"),s=u.dialogOptions.choices[o];if(u.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER){s=u.dialogOptions.choices[r][o];for(var l=0,d=u.dialogOptions.choices.length;l<d;l++)u.dialogOptions.choices[l][o].text=n}s.text=n})).on("click","tr[data-role=choice] td[data-role=choice-name] div[data-role=remove]",(function(i){if(!(u.dialogOptions.choices.length<=1||u.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&u.dialogOptions.choices[0].length<=1)){var a=i.target,r=e(a).closest("[data-role=choice]"),o=r.parent(),s=~~r.attr("data-index");if(r.remove(),u.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var l=0,d=u.dialogOptions.choices.length;l<d;l++){u.dialogOptions.choices[l].splice(s,1);for(var c=0,h=u.dialogOptions.choices[l].length;c<h;c++)u.dialogOptions.choices[l][c].isCorrect&&u.updateFormTotalPoints(n,t.body,u.dialogOptions.choices[l][c].quizPoints,e),o.find('[data-role="choice"]').get(c).setAttribute("data-index",String(c))}else{u.dialogOptions.choices.splice(s,1);for(var p=0,_=u.dialogOptions.choices.length;p<_;p++)u.dialogOptions.choices[p].isCorrect&&u.updateFormTotalPoints(n,t.body,u.dialogOptions.choices[p].quizPoints,e),o.find('[data-role="choice"]').get(p).setAttribute("data-index",String(p))}u.dialogOptions.choices=u.reinitializeChoicesIndexes(u.dialogOptions.choices)}})).on("click","td[data-role=is-default-choice] input",(function(t){var i=t.target,n=~~e(i).closest("tr").attr("data-index");if(u.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var a=0,r=u.dialogOptions.choices.length;a<r;a++)for(var o=0,s=u.dialogOptions.choices[a].length;o<s;o++){var l=!1;o!==n||u.dialogOptions.choices[a][o].isDefault||(l=!0),o===n&&(i.checked=l),u.dialogOptions.choices[a][o].isDefault=l}else for(var d=0,c=u.dialogOptions.choices.length;d<c;d++){var h=!1;(u.dialogOptions.defaultOptionInputType===O.e.CHECKBOX&&!0===u.dialogOptions.choices[d].isDefault&&d!==n||d===n&&!u.dialogOptions.choices[d].isDefault)&&(h=!0),d===n&&(i.checked=h),u.dialogOptions.choices[d].isDefault=h}})).on("keydown","input[type=text][data-role=choice-name]",(function(i){if(a=u.dialogOptions.choices[0].length>0?u.dialogOptions.choices[0]:u.dialogOptions.choices,(i.keyCode||i.charCode)===Ye.KEY_ENTER&&null!==a[a.length-1].text&&""!==a[a.length-1].text){var n=i.target;u.insertNewChoice(t.body,u.dialogOptions.newChoiceText||"New Choice",n,e),u.makeChoicesInEditPanelSortable(e,t.body)}})).on("paste","td[data-role=choice-name] input[type=text]",(function(i){var n,a=[];try{var r=i.target,o=i.originalEvent||{},s=i.originalEvent.clipboardData||null;if(!s)return;n=s.getData("text/plain");var l=String(n||"").replace(/(^[\s]+|[\s]+$)/g,"");if(!(l.indexOf("\n")>-1))return;a=l.split("\n"),o.preventDefault(),o.stopPropagation();for(var d=0,c=a.length;d<c;d++)u.insertNewChoice(t.body,a[d],r,e);u.makeChoicesInEditPanelSortable(e,t.body)}catch(h){return}})).on("input","td[data-role=total-number-of-choices] input[type=number]",(function(t){if(!(u.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER||u.dialogOptions.choices[0].length>0)){var i=t.target,n=~~e(i).closest("tr").attr("data-index");u.dialogOptions.choices[n].numberOfTimesThisOptionCanBeChosen=~~i.value,e(i).closest("tr").each((function(t,i){u.updateNumberOfChoicesLeft(e(i))}))}})).on("click","div[data-role=apply-all-button]",(function(){var i=e(t.body).find("input[type=number][name=apply-all-default-number-of-choices]").get(0),n=parseInt(i.value);if(n>=-1){e(t.body).find("table tbody tr").each((function(t,i){e(i).find("td[data-role=total-number-of-choices] input[type=number]").val(n),u.updateNumberOfChoicesLeft(e(i))}));for(var a=0;a<u.dialogOptions.choices.length;a++)u.dialogOptions.choices[a].numberOfTimesThisOptionCanBeChosen=n}})).on("click","a[data-role=reset-used-column]",(function(){if(!(u.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER||u.dialogOptions.choices[0].length>0)){for(var i=0,n=(a=u.dialogOptions.choices).length;i<n;i++)a[i].numberOfTimesThisOptionHasBeenChosen=-1;e(t.body).find("table tbody tr").each((function(t,i){var n=~~e(i).attr("data-index");e(i).find("td[data-role=used-number-of-choices] div span").text("0"),e(i).find("td[data-role=number-of-choices-left] div span").text(String(a[n].numberOfTimesThisOptionCanBeChosen||"0"))}))}})).on("click","td[data-role=quiz-correct] input",(function(i){var a=i.target,r=~~e(a).closest("tr").attr("data-index"),o=e(a).closest("tr").find("input[type=number][name=quiz-points]"),s=o.get(0);if(u.onCorrectChoiceCheckedStateModified(a,u.dialogOptions,r,s,!0,e),a.checked)setTimeout((function(){o.focus().select()}),10);else{var l=u.getQuizValue(s,e);e(t.body).find("div[data-role=form-total-points] span[data-role=form-total-points]").text(n+l)}})).on("input","td[data-role=quiz-points] input[type=number]",(function(i){if(!(u.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER||u.dialogOptions.choices[0].length>0)){a=u.dialogOptions.choices;var r=i.target,o=~~r.value;u.setQuizValue(t.body,o,e);for(var s=0,l=a.length;s<l;s++)a[s].isCorrect&&(a[s].quizPoints=o);u.updateFormTotalPoints(n,t.body,~~r.value,e)}})).on("click focus","td[data-role=quiz-points] input",(function(i){if(!(u.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER||u.dialogOptions.choices[0].length>0)){a=u.dialogOptions.choices;var r=i.target,o=e(r).closest("tr[data-role=choice]").find("td[data-role=quiz-correct] input").get(0),s=~~e(r).closest("tr").attr("data-index");o.checked=!0,u.onCorrectChoiceCheckedStateModified(o,u.dialogOptions,s,r,!1,e);for(var l=0,d=a.length;l<d;l++)a[l].isCorrect&&(a[l].quizPoints=~~r.value);u.updateFormTotalPoints(n,t.body,~~r.value,e)}})).on("input","td[data-role=payments-values] input[type=text]",(function(t){var i=t.target,n=parseFloat(i.value),a=e(i).closest("tr"),r=~~a.attr("data-statement-index"),o=~~a.attr("data-index"),s=u.dialogOptions.choices[o];u.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(s=u.dialogOptions.choices[r][o]),!isNaN(n)&&n>=0?s.paymentsValue=n:s.paymentsValue=null})).on("change","input#use-different-values-per-statement",(function(n){var d=n.target,c=e(t.body).find("div[data-editing-context][data-use-different-values]");u.dialogOptions.useDifferentValuesPerStatement=d.checked,c.attr("data-use-different-values",String(d.checked)),r.useDifferentValuesPerStatement=u.dialogOptions.useDifferentValuesPerStatement,r.choices=JSON.parse(JSON.stringify(u.dialogOptions.choices[0])),r.statements=JSON.parse(JSON.stringify(u.generateStatementsForSalvageModel())),u.renderDialogBodyContent(t,o,r,s,l,e,a,i),(u.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&!u.dialogOptions.useDifferentValuesPerStatement||u.currentSelectedControl.getTypeId()!==C.a.CONTAINER_TYPE_LIKERT_WRAPPER)&&u.makeChoicesInEditPanelSortable(e,t.body)})),e(t.titlebody).on("click","div[data-role=set-all-button-container]",(function(){var i=e(t.body).find("div[data-role=apply-all-holder]");"none"===i.css("display")?i.css("display","inline-flex"):i.hide()}))}},{key:"updateControlChoicesAndDOM",value:function(e,t,i){t=this.getValidatedChoicesFromSet(t);var n=document.getElementById("item");if(n.getAttribute("data-target-element")===e.getHash())for(var a=n.querySelectorAll("input[type=hidden][data-plugin=text-choice-interface]"),r=t.length?JSON.stringify(t):"null",o=0,s=a.length;o<s;o++)i(a[o]).val(r).trigger("reload");else{for(var l=!1,u=[],d=0,c=t.length;d<c;d++)"undefined"!==typeof t[d].paymentsValue&&null!==t[d].paymentsValue?(l=!0,u.push(t[d].paymentsValue)):u.push(null);e.setProperty("choices.values",t),e.setProperty("payments.value",l?u.map((function(e){return Number(e)})):null),e.getForm().getEngine().getLoader().getCommandDispatcher().reloadVisiblePanel()}}},{key:"updateFormTotalPoints",value:function(e,t,i,n){var a=e+~~i;n(t).find("div[data-role=form-total-points] span[data-role=form-total-points]").text(a)}},{key:"getQuizValue",value:function(e,t){var i=0;return t(e).closest("table > tbody").find("input[type=number][name=quiz-points]").each((function(){if(0!=this.value)return i=this.value})),~~i}},{key:"setQuizValue",value:function(e,t,i){i(e).find("input[type=number][name=quiz-points]").each((function(){i(this).closest("tr").find("[name=quiz-correct]").is(":checked")&&(this.value=t)}))}},{key:"resetAllUncorrectChoicesPointsToZero",value:function(e,t,i,n){n(e).closest("table > tbody").find("input[type=number][name=quiz-points]").each((function(){if(this!==t&&!n(this).closest("tr").find("[name=quiz-correct]").is(":checked")){i.choices=i.choices;var e=~~n(this).closest("tr").attr("data-index");this.value="0",i.choices[e].isCorrect=!1,i.choices[e].quizPoints=0}}))}},{key:"insertNewChoice",value:function(t,i,n,a){var r,o="edit-option"===t.getAttribute("data-dialog-role"),s=this.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER?JSON.parse(JSON.stringify(this.dialogOptions.choices[0])):JSON.parse(JSON.stringify(this.dialogOptions.choices)),l=a(n).closest("[data-role=choice]").get(0),u=e.createUniqueChoice({text:i,isDefault:!1,index:1+~~l.getAttribute("data-index"),numberOfTimesThisOptionCanBeChosen:null,numberOfTimesThisOptionHasBeenChosen:null,isCorrect:!1,quizPoints:0,paymentsValue:null},s);s.push(u);var d=a(r=l.cloneNode(!0)).find('td[data-role="is-default-choice"] input[name="default-option"]').get(0);d&&(d.removeAttribute("checked"),d.checked=!1),a(r).insertAfter(l);var c=a(n).closest("div[data-dialog-role=edit-option]");if(c.scrollTop(c.prop("scrollHeight")),this.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER){for(var h=0,p=this.currentSelectedControl.getChildren().length;h<p;h++)if(this.dialogOptions.choices[h].push(JSON.parse(JSON.stringify(u))),!this.currentSelectedControl.hasProperty("options.useDifferentValuesPerStatement")||!this.currentSelectedControl.getProperty("options.useDifferentValuesPerStatement"))for(var _=0,g=this.dialogOptions.choices[h].length;_<g;_++)this.dialogOptions.choices[h][_].paymentsValue=this.dialogOptions.choices[0][_].paymentsValue}else this.dialogOptions.choices=JSON.parse(JSON.stringify(s));return this.dialogOptions.choices=o?this.reinitializeChoicesIndexes(this.dialogOptions.choices):this.reinitializeChoicesIndexes(this.dialogOptions.choices,a(t)),a(r).find("td[data-role=choice-name] input[type=text]").val(u.text).focus().select(),a(r).find("td[data-role=total-number-of-choices] input[type=number]").val(u.numberOfTimesThisOptionCanBeChosen),a(r).find("[data-role=used-number-of-choices] > span").text("0"),a(r).find("[data-role=number-of-choices-left] > span").text("0"),a(r).find("td[data-role=quiz-points] input[type=number]").val(u.quizPoints),a(r).find("td[data-role=payments-values] input[type=number]").val(String(u.paymentsValue||"")),a(r).find("td[data-role=payments-values] input[name=payments-values]").val(""),this.initializeNewlyInsertedRow(r,u,a),this.dialogOptions.container&&this.updateContainerAttributes(this.dialogOptions.container),r}},{key:"onCorrectChoiceCheckedStateModified",value:function(e,t,i,n,a,r){t.choices=t.choices,this.resetAllUncorrectChoicesPointsToZero(e,n,t,r);var o=this.getQuizValue(e,r);if(o>0&&r(n).val(o),a&&t.choices[i].isCorrect&&(e.checked=!1,n.value="0"),t.choices[i].isCorrect=e.checked,t.choices[i].quizPoints=~~n.value,t.defaultOptionInputType!==O.e.CHECKBOX)for(var s=0,l=t.choices.length;s<l;s++)s!=i&&(t.choices[s].isCorrect=!1)}},{key:"updateNumberOfChoicesLeft",value:function(e){null===e.find("[data-role=used-number-of-choices] > span").text()&&e.find("[data-role=used-number-of-choices] > span").text("0");var t=~~e.find("[name=total-number-of-choices]").val()-~~e.find("[data-role=used-number-of-choices] > span").text();e.find("[data-role=number-of-choices-left] > span").text(String(Math.max(0,t)))}},{key:"initializeNewlyInsertedRow",value:function(e,t,i){i(e).attr("data-index",(~~t.index).toString()).find("td[data-role=is-default-choice]").each((function(){i(this).find("input").each((function(){this.checked=t.isDefault,this.setAttribute("id","choice-editor-".concat((~~t.index).toString())),this.setAttribute("index",(~~t.index).toString())})),i(this).find("label").each((function(){this.setAttribute("for","choice-editor-".concat((~~t.index).toString()))}))})),i(e).find("td[data-role=quiz-correct]").each((function(){i(this).find("input").each((function(){this.checked=t.isCorrect,this.setAttribute("id","quiz-editor-".concat((~~t.index).toString())),this.setAttribute("index",(~~t.index).toString())})),i(this).find("label").each((function(){this.setAttribute("for","quiz-editor-".concat((~~t.index).toString()))}))}))}},{key:"updateContainerAttributes",value:function(t){var i=this.dialogOptions.choices;this.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(i=this.dialogOptions.choices[0]),t.setAttribute("data-truncate-options",String(~~(i.length>e.MAX_VISIBLE_NUMBER_OF_CHOICES_IN_INSPECTOR_PANEL)))}},{key:"reinitializeChoicesIndexes",value:function(e,t){return t?(t.find("[data-role=choice]").remove(),this.resetChoicesIndex(e,t)):this.resetChoicesIndex(e)}},{key:"updateChoices",value:function(e,t,i){var n=this.getValidatedChoicesFromSet(this.dialogOptions.choices);e.value=n.length?JSON.stringify(n):"null",t(e).trigger("input"),i&&t(i).val(e.value).trigger("reload")}},{key:"getValidatedChoicesFromSet",value:function(e){for(var t,i=[],n=0,a=e.length;n<a;n++)if(Array.isArray(e[n])){var r=n;i[n]=this.getValidatedChoicesFromSet(e[r])}else{var o=e[n];t={text:window.removeDangerousHtmlAttributes(o.text)},void 0!==o.isOther&&(t.isOther=o.isOther),void 0!==o.isCorrect&&(t.isCorrect=o.isCorrect),void 0!==o.isDefault&&(t.isDefault=o.isDefault),void 0!==o.numberOfTimesThisOptionCanBeChosen&&(t.numberOfTimesThisOptionCanBeChosen=o.numberOfTimesThisOptionCanBeChosen),void 0!==o.numberOfTimesThisOptionHasBeenChosen&&(t.numberOfTimesThisOptionHasBeenChosen=o.numberOfTimesThisOptionHasBeenChosen),void 0!==o.quizPoints&&(t.quizPoints=o.quizPoints),void 0!==o.paymentsValue&&(t.paymentsValue=o.paymentsValue),i.push(t)}return i}},{key:"isResetButtonVisibleInEditingPanel",value:function(e){for(var t=0,i=e.length;t<i;t++)if(null!==e[t].numberOfTimesThisOptionHasBeenChosen&&e[t].numberOfTimesThisOptionHasBeenChosen>0)return!0;return!1}},{key:"makeChoicesInInspectorSortable",value:function(e,t,i,n){var a=this,r=T.a.create((function(){a.reorderOptionsInInspector(e,t,i,n)}),100);oi.makeSortable(e,t,"div[data-role=choice] div[data-role=drag]","div[data-role=choice]",(function(e,t,i){r()}),(function(e,t,i){var n=e.parentNode;i===O.S.BEFORE?n.insertBefore(e,t):n.insertBefore(e,t.nextSibling),r()}))}},{key:"makeChoicesInEditPanelSortable",value:function(e,t){var i=this,n=T.a.create((function(){i.reorderOptionsInEditPanel(e,t)}),100);oi.makeSortable(e,t,"table[data-role=edit-option] tr[data-role=choice] td[data-role=choice-name] div[data-role=drag]","table[data-role=edit-option] tr[data-role=choice]",(function(e,t,i){n()}),(function(e,t,i){var a=e.parentNode;i===O.S.BEFORE?a.insertBefore(e,t):a.insertBefore(e,t.nextSibling),n()}))}},{key:"onOptionsReorderedByDragAndDrop",value:function(e,t,i){var n=this,a=this.dialogOptions.choices,r=!1;if(e(t).find(i).each((function(e,t){var i=~~t.getAttribute("data-index");if(e!==i){if(r=!0,n.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var o=0,s=n.dialogOptions.choices.length;o<s;o++)(a=n.dialogOptions.choices[o])[i].index=e;else a[i].index=e;t.setAttribute("data-index",String(e))}})),r)if(this.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var o=0,s=this.dialogOptions.choices.length;o<s;o++)(a=this.dialogOptions.choices[o]).sort((function(e,t){return e.index-t.index}));else a.sort((function(e,t){return e.index-t.index}))}},{key:"reorderOptionsInInspector",value:function(e,t,i,n){this.onOptionsReorderedByDragAndDrop(e,t,"[data-role=choice]"),this.updateChoices(i,e,n)}},{key:"reorderOptionsInEditPanel",value:function(e,t){var i=this,n="[data-role=choice]";this.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(n='div[data-editing-context="PAYMENTS_VALUES"][data-use-different-values="true"] table[data-role="edit-option"] tbody[data-role="multi-statement-choices"] '.concat(n,', div[data-editing-context="PAYMENTS_VALUES"][data-use-different-values="false"] table[data-role="edit-option"] tbody[data-role="single-statement-choices"] ').concat(n,', div:not([data-editing-context="PAYMENTS_VALUES"]) table[data-role="edit-option"] tbody[data-role="single-statement-choices"] ').concat(n)),this.onOptionsReorderedByDragAndDrop(e,t,n),e(t).find(n).each((function(t,n){var a=i.dialogOptions.choices;i.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER&&(a=i.dialogOptions.choices[0]),i.initializeNewlyInsertedRow(n,a[t],e)}))}},{key:"resetChoicesIndex",value:function(e,t){if(this.currentSelectedControl.getTypeId()===C.a.CONTAINER_TYPE_LIKERT_WRAPPER)for(var i=0,n=e.length;i<n;i++)for(var a=0,r=e[i].length;a<r;a++)e[i][a].index=a,0===i&&t&&t.append(this.createChoiceElement(e[i][a]));else for(var o=0,s=e.length;o<s;o++)e[o].index=o,t&&t.append(this.createChoiceElement(e[o]));return e}},{key:"setDialogOptions",value:function(e){e.choices=this.resetChoicesIndex(e.choices),this.dialogOptions=e}},{key:"setCurrentSelectedControl",value:function(e,t){if(void 0===t){var i=e.getLoader().getSelection().getItems();0!==i.length&&(this.currentSelectedControl=i[0])}else this.currentSelectedControl=t}}],[{key:"createUniqueChoice",value:function(e,t){var i,n,a=0,r=e.text;if(!t||!t.length)return e;do{i=!0,n=0===a?r:"".concat(r," (").concat(a,")");for(var o=0,s=t.length;o<s;o++)if(t[o].text===n){i=!1,a++;break}}while(!i);return e.text=n,e}}]),e}();v()(li,"NAME","ChoicesEditorInspectorPlugin"),v()(li,"MAX_VISIBLE_NUMBER_OF_CHOICES_IN_INSPECTOR_PANEL",4);var ui,di=i(204),ci=function(){function e(t){o()(this,e),v()(this,"element",void 0),v()(this,"onclick",void 0),t.onClick&&(this.onclick=t.onClick),this.constructElement(),this.setState(t)}return l()(e,[{key:"constructElement",value:function(){this.element=document.createElement("button"),this.element.setAttribute("type","button"),this.element.onclick=this.clickHandler.bind(this)}},{key:"getElement",value:function(){return this.element}},{key:"setState",value:function(e){e.label&&(this.element.innerHTML=e.label),e.isDisabled?(this.element.setAttribute("disabled","disabled"),this.element.setAttribute("title",e.disabledTitle||"")):(this.element.removeAttribute("disabled"),this.element.setAttribute("title",e.title||"")),e.classList&&(this.element.className=e.classList)}},{key:"clickHandler",value:function(e){this.onclick&&this.onclick(e)}}]),e}();!function(e){e[e.PERCENTAGE=0]="PERCENTAGE",e[e.FIXED_VALUE=1]="FIXED_VALUE"}(ui||(ui={}));var hi=function(){function e(){o()(this,e),v()(this,"unitType",[{unitTypeIndex:ui.PERCENTAGE,unitTypeName:"percentage",unitTypeSymbol:"%"},{unitTypeIndex:ui.FIXED_VALUE,unitTypeName:"fixed_value",unitTypeSymbol:"$"}]),v()(this,"model",void 0),v()(this,"engine",void 0),v()(this,"ui",void 0),v()(this,"i18n",void 0),v()(this,"dispatcher",void 0),v()(this,"resourceManager",void 0),v()(this,"settings",void 0),v()(this,"productsToRemove",[]),v()(this,"jq",void 0),v()(this,"temporaryControlsData",void 0),v()(this,"selectedCurrency",void 0)}return l()(e,[{key:"open",value:function(t,i){var n=this;i&&(this.engine=i),t&&(this.jq=t),this.ui=this.engine.getLoader().getUI(),this.i18n=this.engine.getLoader().getI18n(),this.dispatcher=this.engine.getLoader().getCommandDispatcher(),this.resourceManager=this.engine.getResourceManager(),this.settings=this.engine.getDocument().getForm().getEditorSettingByTypeId(zt.PAYMENT_PRODUCTS_EDITOR_SETTING),this.temporaryControlsData={};var a=this,r=a.settings.getProperty("currencyId")||e.DEFAULT_CURRENCY_ID;return this.jq.Deferred((function(e){n.jq.when(a.resourceManager.get("/modules/Typescript/Form/resources/editor/Payments/ProductsDialog/payments-products-dialog.html"),a.resourceManager.get("/modules/Typescript/Form/resources/editor/Payments/ProductsDialog/payments-products-dialog-table-headings.html"),a.resourceManager.get("/modules/Typescript/Form/resources/editor/Payments/ProductsDialog/payments-products-dialog-discount-on-total.html")).done((function(t,i,n){var o,s=new si.a(t),l=new si.a(i),u=new si.a(n),d=a.ui.createDialog(a.i18n.translateText("edt_UI_property_payments_products_dialog_title")||"Products",[{type:be.c.CANCEL,callback:function(){d.close(),e.reject(new Error("User closed the dialog by pressing the Cancel button"))}},{type:be.c.SAVE,callback:function(){a.engine.getLoader().trigger("products_dialog_on_save"),a.saveProductRemovalFromDialog(),d.close(),e.resolve(a.model)}}],{width:"900px",height:"615px"}),c=d.dialog.getElementsByClassName("ui-titlebar")[0],h=d.dialog.getElementsByClassName("ui-buttons")[0],p=new ci({onClick:function(){d.close(),a.openCurrencyDialog()},classList:"i123-payments currency-button"}),_=document.createElement("div");d.dialog.classList.add("products-dialog"),a.model={currencyId:r,currencySymbol:a.engine.getCurrency().getCurrencySymbolById(r),onTotalDiscountValue:a.generateGenericPriceFormatFromInputValue(a.settings.getProperty("discountValue")),onTotalDiscountUnitType:a.settings.getProperty("discountType")||0,onTotalTaxValue:a.generateGenericPriceFormatFromInputValue(a.settings.getProperty("taxValue")),onTotalTaxUnitType:a.settings.getProperty("taxType")||0,unitType:a.unitType,controls:a.getControlsDataForSalvage()},null!==a.settings.getProperty("fixedAmount")&&(a.model.fixedAmount=a.settings.getProperty("fixedAmount").toFixed(2)),a.unitType[ui.FIXED_VALUE].unitTypeSymbol=a.model.currencySymbol;for(var g=0,E=a.model.controls.length;g<E;g++)null===a.model.controls[g]&&(a.model.controls.splice(g,1),E=a.model.controls.length,g--);(c.appendChild(p.getElement()),_.classList.add("i123-add"),_.addEventListener("click",(function(){var e=d.body.getElementsByClassName("add-new-product");0!=e.length?a.jq(e).find('[data-role="text-dropdown"]').trigger("click"):a.renderAddProductRow(a.jq,d,s)})),c.appendChild(_),c.insertAdjacentHTML("beforeend",l.parse({tableHeaders:[{name:"name"},{name:"price"},{name:"quantity"},{name:"discount"},{name:"tax"}]})),a.ui.upgrade(c),a.renderDiscountOnTotal(h,u),a.renderDialogBody(a.jq,d,s),a.selectedCurrency)&&(o="string"===typeof a.selectedCurrency.id?parseInt(a.selectedCurrency.id):a.selectedCurrency.id,a.updateCurrency(a.jq,o,d,s,u))})).fail((function(e){console.warn("Failed to open Payment Calculations Settings. Error is displayed below"),console.error(e)}))})).promise()}},{key:"updateFeeControl",value:function(){var e=this,t=document.querySelectorAll("#form [data-role=control][data-type=fee]"),i=document.querySelectorAll(".form-currency-container > a[data-plugin=currency-editor]"),n=document.querySelectorAll("#item .fee-base-price-container > input");t&&(t.forEach((function(t){var i=t.getAttribute("data-hash");e.engine.getDocument().getElementByHash(i).updatePriceFee()})),i&&(i.forEach((function(t){t.innerText=e.engine.getCurrency().getCurrencyById(e.model.currencyId).isoCode})),n&&n.forEach((function(t){t.value=t.value.replace(/[^0-9.]/g,""),t.value=e.model.currencySymbol+t.value}))))}},{key:"openCurrencyDialog",value:function(){var t,i=this,n=this.settings.getProperty("currencyId")||e.DEFAULT_CURRENCY_ID,a=this.engine.getCurrency().enumerateCurrencies().map((function(e){return{id:e.id,label:i.i18n.translateText(e.i18n)}}));a=Object(di.a)(a,["label"],["asc"]);var r=this.ui.createDialog(this.i18n.translateText("payments_form_currency")||e.CURRENCY_DIALOG_TITLE,[{type:be.c.SAVE,callback:function(){i.currencyDialogOnSaveHandler(r,t)}},{type:be.c.CANCEL,callback:function(){i.switchDialogs(r)}}],{width:"500px",height:"270px"});r.dialog.classList.add("currency-dialog");var o=document.createElement("p");o.textContent=this.i18n.translateText("payments_currency_dialog_description"),r.body.appendChild(o);var s={placeholder:""};this.selectedCurrency?s.selected=this.selectedCurrency.id:n&&(s.selected=n);var l=new ri(this.jq).init(r.body,a,s);l.on("change",(function(){t=l.getSelectedOption()}))}},{key:"currencyDialogOnSaveHandler",value:function(e,t){t&&(this.selectedCurrency=t),this.engine.getLoader().execCommand("track-event","payments_currency_change"),this.engine.getLoader().trigger("payments_currency_change",t),this.switchDialogs(e)}},{key:"switchDialogs",value:function(e){var t=this;e.close(),this.open().done((function(e){t.saveData(e)})).fail((function(e){console.warn(e.message)}))}},{key:"updateCurrency",value:function(e,t,i,n,a){this.model.currencyId=t,this.model.currencySymbol=this.engine.getCurrency().getCurrencySymbolById(t),this.unitType[ui.FIXED_VALUE].unitTypeSymbol=this.model.currencySymbol;for(var r=i.dialog.getElementsByClassName("ui-buttons")[0],o=r.getElementsByClassName("payments-products-dialog-row"),s=0,l=o.length;s<l;s++)r.removeChild(o[0]);this.renderDiscountOnTotal(r,a),this.ui.upgrade(r),this.renderDialogBody(this.jq,i,n)}},{key:"renderDiscountOnTotal",value:function(e,t){e.insertAdjacentHTML("afterbegin",t.parse(this.model)),this.ui.upgrade(e)}},{key:"renderAddProductRow",value:function(t,i,n){var a=this,r=i.body.querySelector('[data-role="edit-products-options"]'),o=document.createElement("div"),s=r.getElementsByClassName("payments-products-dialog-row"),l=0!=s.length?s[s.length-1].nextSibling:r.firstChild,u=document.createElement("select"),d=document.createElement("div"),c=this.getCompatibleProductControls();o.classList.add("payments-products-dialog-row"),o.classList.add("add-new-product"),u.setAttribute("data-appearance","text");var h=document.createElement("option");if(h.value="",h.text=a.i18n.translateText("edt_UI_property_payments_products_dialog_select product_label"),u.add(h),!this.model.fixedAmount){var p=document.createElement("option");p.value="1",p.text=a.i18n.translateText("edt_UI_property_payments_products_dialog_fixed_amount_label"),u.add(p)}for(var _=0,g=c.length;_<g;_++){var E=document.createElement("option");E.value=c[_].id.toString(),E.text=c[_].label,u.add(E)}o.appendChild(u),d.classList.add("payments-products-dialog-column"),d.classList.add("i-lg"),d.classList.add("i123-close"),d.setAttribute("data-role","control-delete"),o.appendChild(d),r.insertBefore(o,l),this.ui.upgrade(r.parentNode),r.parentNode.scrollTop=r.offsetHeight-r.parentNode.offsetHeight;var y=t('.add-new-product [data-role="text-dropdown"]');y.get(0).addEventListener("click",(function(r){if(r.target.hasAttribute("data-value")){var o=parseInt(r.target.getAttribute("data-value").replace(/"/g,"")),s=r.target.innerHTML;if(1===o)a.model.fixedAmount=a.generateGenericPriceFormatFromInputValue("0");else{var l=a.engine.getDocument().getElementById(o);l.hasProperty("payments")&&l.setProperty("payments.isProduct",!0);var u=a.getControlHasQuantity(l);a.model.controls.push({rowIndex:a.model.controls.length,controlId:o,name:s,customName:null,hasMultiplePrices:e.CONTROLS_WITH_MULTIPLE_PRICES.indexOf(l.getTypeId())>-1,hasVariablePrice:e.CONTROLS_WITH_VARIABLE_PRICE.indexOf(l.getTypeId())>-1,price:a.getControlSinglePrice(l),hasQuantity:u,quantity:null,quantityControls:u?a.getCompatibleQuantityControls(o):null,discountValue:a.generateGenericPriceFormatFromInputValue("0"),discountUnitType:ui.PERCENTAGE,taxValue:a.generateGenericPriceFormatFromInputValue("0"),taxUnitType:ui.PERCENTAGE})}a.renderDialogBody(t,i,n),r.stopPropagation(),a.engine.getLoader().execCommand("track-event","payments_products_add")}}),!0),y.trigger("click")}},{key:"renderDialogBody",value:function(e,t,i){t.body.innerHTML=i.parse(this.model),this.i18n.translateDOMNode(t.body),this.dispatcher.addPerfectScrollbar(t.body),this.ui.upgrade(t.body),this.attachDialogEvents(t)}},{key:"getControlHasQuantity",value:function(e){return e.getTypeId()!==C.a.CONTROL_TYPE_FEE}},{key:"getControlsDataForSalvage",value:function(){var t=this,i=this.settings.getProperty("productsData"),n=0;return null===i?[]:i.map((function(i){var a=t.engine.getDocument().getElementById(i.controlId);if(!a)return null;var r=t.getControlHasQuantity(a);return{rowIndex:n++,controlId:i.controlId,name:t.getControlName(a),customName:i.details,hasMultiplePrices:e.CONTROLS_WITH_MULTIPLE_PRICES.indexOf(a.getTypeId())>-1,hasVariablePrice:e.CONTROLS_WITH_VARIABLE_PRICE.indexOf(a.getTypeId())>-1,price:t.getControlSinglePrice(a),hasQuantity:r,quantity:i.quantityControlId,quantityControls:r?t.getCompatibleQuantityControls(a.getId()):null,discountValue:t.generateGenericPriceFormatFromInputValue(String(i.discount)),discountUnitType:i.discountType,taxValue:t.generateGenericPriceFormatFromInputValue(String(i.tax)),taxUnitType:i.taxType}}))}},{key:"attachDialogEvents",value:function(e){var t=this;e.dialog.hasAttribute("events-attached")||($(e.dialog).on("click",'[data-role="control-price"][data-price-literal], [data-role="control-discount"], [data-role="control-tax"]',(function(){t.removeClickedState($),this.setAttribute("data-has-click",""),$(this).find('input:not([type="hidden"])').each((function(){this.focus()}))})).on("click",'[data-role="control-price"][data-price-multiple]',(function(){var i=t.engine.getLoader().getI18n(),n=+$(this).closest("[data-control-identifier]").attr("data-control-identifier"),a=t.engine.getDocument().getElementById(n),r="undefined"!==typeof t.temporaryControlsData[n]?yt.clone(t.temporaryControlsData[n]):yt.clone(a.getProperty("choices.values"))||[],o=new li;e.hide(),o.setCurrentSelectedControl(t.engine,a),o.setDialogOptions({editingContext:"PAYMENTS_VALUES",itemType:"CHOICE",container:null,choices:r,defaultOptionInputType:0,dialogTitle:i.translateText("edt_UI_property_payments_value"),newChoiceText:i.translateText("edt_text_new_choice"),editorUserInterface:t.ui,useDifferentValuesPerStatement:!1}),o.editChoices().then((function(i){t.temporaryControlsData[n]=yt.clone(i),e.show()})).fail((function(t){e.show(),console.warn("Failed to save options. Error is displayed below"),console.error(t)}))})).on("change",'[data-role="control-name"] input:not([type="hidden"])',(function(){var e=$(this).parents(".payments-products-dialog-row"),i=t.engine.getDocument().getElementById(parseInt(e.attr("data-control-identifier"))),n=parseInt(e.attr("data-index"));t.updateControlConfigurationInsideModel(n,"customName",this.value),e.find('[data-role="control-name"]').attr("title",t.getControlName(i))})).on("change",'[data-role="control-price"][data-price-literal] input:not([type="hidden"])',(function(){var e=$(this),i=t.generateGenericPriceFormatFromInputValue(this.value),n=e.parents(".payments-products-dialog-row"),a=n.find('.payments-products-dialog-column[data-role="control-price"][data-price-literal] span'),r=parseInt(n.attr("data-index"));-1===r?t.model.fixedAmount=i:t.updateControlConfigurationInsideModel(r,"price",i),e.attr("title",t.model.currencySymbol+this.value),a.text(t.model.currencySymbol+i),this.value=i})).on("input",'[data-role="control-price"][data-price-literal] input:not([type="hidden"])',(function(){var e=$(this).parents(".payments-products-dialog-row"),i=e.attr("data-control-identifier"),n=t.generateGenericPriceFormatFromInputValue(this.value);$('[data-control-identifier="'.concat(i,'"]')).each((function(){var i=$(this);if(e.get(0)!==i.get(0)){var a=i.find('.payments-products-dialog-column[data-role="control-price"][data-price-literal] input'),r=i.find('.payments-products-dialog-column[data-role="control-price"][data-price-literal] span');t.updateControlConfigurationInsideModel(parseInt(i.attr("data-index")),"price",n),a.attr("title",t.model.currencySymbol+n),r.text(t.model.currencySymbol+n),i.val(n)}}))})).on("change",'[data-role="control-discount"] input:not([type="hidden"])',(function(){var e=$(this),i=e.parents(".payments-products-dialog-row"),n=e.parents(".payments-products-dialog-column"),a=n.find("span"),r=parseInt(i.attr("data-index")),o=this.value,s=!1,l="- ";isNaN(r)?(t.engine.getLoader().execCommand("track-event","payments_products_discount_total_value_change"),0===t.model.onTotalDiscountUnitType&&(s=!0),o=t.generateGenericPriceFormatFromInputValue(this.value,s),t.model.onTotalDiscountValue=o,l+=t.generateDiscountAndTaxValue(o,t.model.onTotalDiscountUnitType)):(t.engine.getLoader().execCommand("track-event","payments_products_discount_value_change"),0===t.model.controls[r].discountUnitType&&(s=!0),o=t.generateGenericPriceFormatFromInputValue(this.value,s),t.updateControlConfigurationInsideModel(r,"discountValue",o),l+=t.generateDiscountAndTaxValue(o,t.model.controls[r].discountUnitType)),n.attr("title",l),a.text(l),e.val(o)})).on("change",'[data-role="control-tax"] input:not([type="hidden"])',(function(){var e=$(this),i=e.parents(".payments-products-dialog-row"),n=e.parents(".payments-products-dialog-column"),a=n.find("span"),r=parseInt(i.attr("data-index")),o=this.value,s="+ ";isNaN(r)?(t.engine.getLoader().execCommand("track-event","payments_products_tax_total_value_change"),o=t.generateGenericPriceFormatFromInputValue(this.value),t.model.onTotalTaxValue=o,s+=t.generateDiscountAndTaxValue(o,t.model.onTotalTaxUnitType)):(t.engine.getLoader().execCommand("track-event","payments_products_tax_value_change"),o=t.generateGenericPriceFormatFromInputValue(this.value),t.updateControlConfigurationInsideModel(r,"taxValue",o),s+=t.generateDiscountAndTaxValue(o,t.model.controls[r].taxUnitType)),n.attr("title",s),a.text(s),e.val(o)})).on("click",'.ui-body .payments-products-dialog-row [data-role="control-delete"]',(function(){var e=$(this).parents(".payments-products-dialog-row");t.engine.getLoader().execCommand("track-event","payments_products_delete");var i=parseInt(e.attr("data-index")),n=parseInt(e.attr("data-control-identifier"));if(t.productsToRemove.push(n),-1===i)t.model.fixedAmount=null;else for(var a=0,r=t.model.controls.length;a<r;a++)if(i===t.model.controls[a].rowIndex){t.model.controls.splice(a,1);break}$(this).parent().remove()})),e.dialog.setAttribute("events-attached","1")),$('[data-role="control-quantity"] [data-role="text-dropdown"]').each((function(){this.addEventListener("click",(function(e){var i=$(e.target);if(i.attr("data-value")){var n=parseInt(i.parents(".payments-products-dialog-row").attr("data-index")),a=parseInt(i.attr("data-value").replace(/"/g,""))||null;t.updateControlConfigurationInsideModel(n,"quantity",a)}}),!0)})),$('[data-role="control-discount"] [data-role="text-dropdown"]').each((function(){this.addEventListener("click",(function(e){var i=$(e.target);if(i.attr("data-value")){var n=i.parents(".payments-products-dialog-row"),a=i.parents(".payments-products-dialog-column"),r=a.find("span"),o=a.find('input:not([type="hidden"])'),s=parseInt(n.attr("data-index")),l=parseInt(JSON.parse(i.attr("data-value"))),u=0===l,d=t.generateGenericPriceFormatFromInputValue(o.val(),u),c="- ";isNaN(s)?(t.engine.getLoader().execCommand("track-event","payments_products_discount_total_type_change"),t.model.onTotalDiscountUnitType=l,t.model.onTotalDiscountValue=d,c+=t.generateDiscountAndTaxValue(d,t.model.onTotalDiscountUnitType)):(t.engine.getLoader().execCommand("track-event","payments_products_discount_type_change"),t.updateControlConfigurationInsideModel(s,"discountUnitType",l),t.updateControlConfigurationInsideModel(s,"discountValue",d),c+=t.generateDiscountAndTaxValue(d,t.model.controls[s].discountUnitType)),a.attr("title",c),r.text(c),o.val(d),t.removeClickedState($)}}),!0)})),$('[data-role="control-tax"] [data-role="text-dropdown"]').each((function(){this.addEventListener("click",(function(e){var i=$(e.target);if(i.attr("data-value")){var n=i.parents(".payments-products-dialog-row"),a=i.parents(".payments-products-dialog-column"),r=a.find("span"),o=a.find('input:not([type="hidden"])'),s=parseInt(n.attr("data-index")),l=parseInt(JSON.parse(i.attr("data-value"))),u=t.generateGenericPriceFormatFromInputValue(o.val()),d="+ ";isNaN(s)?(t.engine.getLoader().execCommand("track-event","payments_products_tax_total_type_change"),t.model.onTotalTaxUnitType=l,t.model.onTotalTaxValue=u,d+=t.generateDiscountAndTaxValue(u,t.model.onTotalTaxUnitType)):(t.engine.getLoader().execCommand("track-event","payments_products_tax_type_change"),t.updateControlConfigurationInsideModel(s,"taxUnitType",l),t.updateControlConfigurationInsideModel(s,"taxValue",u),d+=t.generateDiscountAndTaxValue(u,t.model.controls[s].taxUnitType)),a.attr("title",d),r.text(d),o.val(u),t.removeClickedState($)}}),!0)})),e.dialog.addEventListener("click",(function(e){var i=$(e.target),n=i.parents('[data-role="control-price"][data-price-literal]'),a=i.parents('[data-role="control-discount"]'),r=i.parents('[data-role="control-tax"]');0===n.length&&0===a.length&&0===r.length&&t.removeClickedState($)}),!0)}},{key:"generateGenericPriceFormatFromInputValue",value:function(e,t){return t=void 0!==t&&t,e=e||"0",parseFloat(e)<0&&(e="0"),parseFloat(e)>100&&!0===t&&(e="100"),(Math.round(100*parseFloat(e||"0"))/100).toFixed(2)}},{key:"generateDiscountAndTaxValue",value:function(e,t){var i=e+this.unitType[ui.PERCENTAGE].unitTypeSymbol;return 1===t&&(i=this.model.currencySymbol+e),i}},{key:"removeClickedState",value:function(e){e(".payments-products-dialog-row [data-has-click]").each((function(){this.removeAttribute("data-has-click")}))}},{key:"updateControlConfigurationInsideModel",value:function(e,t,i){for(var n=0,a=this.model.controls.length;n<a;n++)if(e===this.model.controls[n].rowIndex){this.model.controls[n][t]=i;break}}},{key:"getCompatibleProductControls",value:function(){var t=this,i=this.engine.getDocument().getControlsList(),n=[];return i.forEach((function(i){null!==i.getId()&&(e.COMPATIBLE_QUANTITY_CONTROLS_WITHOUT_VALUE.indexOf(i.getTypeId())>-1||i.hasProperty("payments.value"))&&n.push({id:i.getId(),label:t.getControlName(i)})})),n}},{key:"getCompatibleQuantityControls",value:function(t){for(var i=this.engine.getDocument().getControlsList(),n=[],a=0,r=i.length;a<r;a++)if(null!==i[a].getId()&&t!==i[a].getId())if(e.COMPATIBLE_QUANTITY_CONTROLS_WITHOUT_VALUE.indexOf(i[a].getTypeId())>-1)n.push({id:i[a].getId(),label:this.getControlName(i[a])});else if(i[a].hasProperty("payments.value")){var o=i[a].getProperty("payments.value");null!==o&&o.length>=1&&0!==o.reduce((function(e,t){return e+t}),0)&&n.push({id:i[a].getId(),label:this.getControlName(i[a])})}return n}},{key:"getControlName",value:function(e){return e.hasProperty("label.labelText")&&""!==e.getProperty("label.labelText")?e.getProperty("label.labelText"):"Control #".concat(e.getId())}},{key:"getControlSinglePrice",value:function(t){if(!t.hasProperty("payments.value"))return null;var i=t.getProperty("payments.value")||["0"];return-1===e.CONTROLS_WITH_MULTIPLE_PRICES.indexOf(t.getTypeId())&&-1===e.CONTROLS_WITH_VARIABLE_PRICE.indexOf(t.getTypeId())?this.generateGenericPriceFormatFromInputValue(i[0]):null}},{key:"saveProductRemovalFromDialog",value:function(){var e={},t={},i=this;if(i.productsToRemove.forEach((function(t){e[t]=(e[t]||0)+1})),null==i.settings.getProperty("productsData"))var n=[];else n=i.settings.getProperty("productsData").map((function(e){return e.controlId}));n.forEach((function(e){t[e]=(t[e]||0)+1})),i.productsToRemove.map((function(n){if(!isNaN(n)&&(e[n]===t[n]||e[n]>=1&&void 0===t[n])){var a=i.engine.getDocument().getElementById(n);a.hasProperty("payments")&&a.setProperty("payments.isProduct",!1)}}))}},{key:"saveData",value:function(t){var i=this,n=document.getElementById("item"),a=this.engine.getDocument().getElementByHash(n.getAttribute("data-target-element")),r=[],o=[];(this.settings.getProperty("productsData")||[]).forEach((function(e){r.push(e.controlId)})),this.settings.setProperty("currencyId",t.currencyId),void 0!==t.fixedAmount&&null!==t.fixedAmount?(this.settings.setProperty("fixedAmount",parseFloat(t.fixedAmount)),this.engine.getLoader().getCommandDispatcher().trackFirstValueSaved()):this.settings.setProperty("fixedAmount",null),this.settings.setProperty("discountValue",parseFloat(t.onTotalDiscountValue)),this.settings.setProperty("discountType",t.onTotalDiscountUnitType),this.settings.setProperty("taxValue",parseFloat(t.onTotalTaxValue)),this.settings.setProperty("taxType",t.onTotalTaxUnitType),this.settings.setProperty("productsData",t.controls.map((function(t){var r,s=t.controlId,l=i.engine.getDocument().getElementById(s),u=i.engine.getLoader(),d=l.getForm().getEditorSettingByTypeId(zt.PAYMENT_PRODUCTS_EDITOR_SETTING).getProperty("productsData"),c=window.location.href.replace("p=edit_fields","p=settings&tab=4"),h=u.getI18n().translateText("edt_UI_msg_payments_products_first_add_notification",c),p=i.engine.getDocument().getConfiguration().getProperty("hasProcessorsInjected");if(d&&0!==d.length||p||u.getUI().createNotification(h,!1,be.d.DEFAULT,!0),-1===e.CONTROLS_WITH_MULTIPLE_PRICES.indexOf(l.getTypeId())&&-1===e.CONTROLS_WITH_VARIABLE_PRICE.indexOf(l.getTypeId())&&(l.setProperty("payments.value",[parseFloat(t.price||"0")]),i.updateFeeControl(),i.engine.getLoader().getCommandDispatcher().trackFirstValueSaved(),i.engine.getLoader().execCommand("track-event","payments_products_price_change"),u.trigger("payments_products_price_change"),a&&a.getId()===s)){var _=n.querySelector('[data-role="attribute-group"][data-name="payments"] [data-role="property"][data-property-name="payments-virtualValue"] input[type="number"]');null!==_&&(_.value=String(t.price))}e.CONTROLS_WITH_MULTIPLE_PRICES.indexOf(l.getTypeId())>-1&&((r=void 0===i.temporaryControlsData[s]?l.getProperty("choices.values"):i.temporaryControlsData[s]).forEach((function(e){"undefined"!==typeof e.paymentsValue&&null!==e.paymentsValue||(e.paymentsValue=0)})),(new li).updateControlChoicesAndDOM(l,r,i.engine.getJQuery()));return o.push(s),l.hasProperty("payments.hasProductsSettingsEntry")&&l.setProperty("payments.hasProductsSettingsEntry",!0),{controlId:s,details:t.customName,quantityControlId:t.quantity||null,tax:parseFloat(t.taxValue),taxType:t.taxUnitType,discount:parseFloat(t.discountValue),discountType:t.discountUnitType}}))),this.engine.getLoader().getCommandDispatcher().reloadVisiblePanel(),r.forEach((function(e){if(-1===o.indexOf(e)){var t=i.engine.getDocument().getElementById(e);t&&t.hasProperty("payments.hasProductsSettingsEntry")&&t.setProperty("payments.hasProductsSettingsEntry",!1)}}))}}],[{key:"openFromExternalSource",value:function(){var t=new e,i=window.ed;t.open(i.getJQuery(),i.getEngine()).done((function(e){t.saveData(e)})).fail((function(e){console.warn(e.message)}))}}]),e}();v()(hi,"DEFAULT_CURRENCY_ID",1),v()(hi,"COMPATIBLE_QUANTITY_CONTROLS_WITHOUT_VALUE",[C.a.CONTROL_TYPE_TEXT,C.a.CONTROL_TYPE_NUMBER,C.a.CONTROL_TYPE_STAR_RATING,C.a.CONTROL_TYPE_PRICE,C.a.CONTROL_TYPE_FORMULA]),v()(hi,"CONTROLS_WITH_MULTIPLE_PRICES",[C.a.CONTROL_TYPE_DROPDOWN,C.a.CONTROL_TYPE_CHECKBOX,C.a.CONTROL_TYPE_RADIO,C.a.CONTROL_TYPE_LIKERT_SCALE]),v()(hi,"CONTROLS_WITH_VARIABLE_PRICE",[C.a.CONTROL_TYPE_FORMULA]),v()(hi,"CURRENCY_DIALOG_TITLE","Form currency");var pi=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"settings",void 0),v()(h()(n),"nameNode",void 0),v()(h()(n),"priceNode",void 0);var a=n.getHash();return n.settings=n.getForm().getEngine().getDocument().getForm().getEditorSettingByTypeId(zt.PAYMENT_PRODUCTS_EDITOR_SETTING),n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","name-".concat(a,"-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("data-index",String(t.INDEX_DESCRIPTION)),n.instructionsDOMNode.setAttribute("id","name-".concat(a,"-instr-acc")),n.nameNode=document.createElement("input"),n.nameNode.setAttribute("data-role","i123-input"),n.nameNode.setAttribute("type","text"),n.nameNode.setAttribute("data-index",String(t.INDEX_NAME)),n.nameNode.placeholder="Shipping fee",n.nameNode.setAttribute("data-i18n-placeholder","textdef_30"),n.priceNode=document.createElement("div"),n.priceNode.setAttribute("data-role","fee-price"),n.priceNode.setAttribute("id","name-".concat(a,"-fee-price-acc")),n.priceNode.setAttribute("data-index",String(t.INDEX_BASE_PRICE)),n.priceNode.innerHTML=n.getProperty("payments.value")||"0",n.rootNode.setAttribute("aria-labelledby","name-".concat(a,"-acc\n                   name-").concat(a,"-error-acc\n                   name-").concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_FEE}},{key:"getElementName",value:function(){return"Fee"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.priceNode,width:O.w.FULL},{input:this.instructionsDOMNode,width:O.w.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updatePriceFee(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute()}},{key:"updatePriceFee",value:function(){var e=this.getProperty("payments.value"),t=this.getCurrencySymbol();e=e||"0",this.priceNode.innerHTML=t+e}},{key:"getCurrencySymbol",value:function(){var e,t=this.getForm().getEngine();return e=this.settings?this.settings.getProperty("currencyId"):t.getLoader().getFormSettings().currencyId,t.getCurrency().getCurrencyById(e||hi.DEFAULT_CURRENCY_ID).symbol}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case t.INDEX_NAME:return{targetPropertyFQN:"label.labelText",type:"string",optional:!1};case t.INDEX_DESCRIPTION:return{targetPropertyFQN:"instructions.text",type:"string",optional:!0};case t.INDEX_BASE_PRICE:return{targetPropertyFQN:"payments.value",type:"numeric",optional:!1};default:return null}}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText","Shipping Fee"),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}}],[{key:"initialize",value:function(){this.isInitialized||(this.isInitialized=!0)}},{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_FEE,name:"Fee",isContainer:!1,category:"e-commerce",keywords:"shipping fee fixed",icon:"i123-price_fee",isVirtual:!1,index:1,accessibilityFields:O.q.ERROR_NODE}}}]),t}(vt);v()(pi,"attributes",{}),v()(pi,"runtime",null),v()(pi,"nodeName","fee"),v()(pi,"isInitialized",!1),v()(pi,"INDEX_NAME",0),v()(pi,"INDEX_DESCRIPTION",1),v()(pi,"INDEX_BASE_PRICE",2);var _i=function(e){function t(){var e,i;o()(this,t);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return i=d()(this,(e=_()(t)).call.apply(e,[this].concat(a))),v()(h()(i),"isEditorVisible",!1),i}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_FORM_HEADER}},{key:"getElementName",value:function(){var e=this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_form_header_name");return e&&"edt_UI_control_type_form_header_name"!==e?e:"Form header"}},{key:"updateHTMLContent",value:function(){if(this.hasProperty("configuration.innerHTML")){var e=this.getProperty("configuration.innerHTML"),t=this.getForm();e=yt.addNoFollowOnLinks(e),this.rootNode.innerHTML=S.sanitizeHTMLUsingUserRights(String(e||""));for(var i=0,n=t.getNumberOfPages();i<n;i++)t.getPageByIndex(i).renderHeader()}else this.rootNode.innerHTML="";this.updateAccessibilityAttributes()}},{key:"isRemovable",value:function(){return!1}},{key:"onCreated",value:function(){var e=this;this.updateHTMLContent(),this.updateAccessibilityAttributes(),setTimeout((function(){e.updateAccessibilityTabIndexes()}),10)}},{key:"getResizingCapability",value:function(){return O.E.NONE}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"isDuplicatable",value:function(){return!1}},{key:"onReset",value:function(){}},{key:"setupI18n",value:function(){return this.getRootNode().setAttribute("data-i18n-html","Headline"),E()(_()(t.prototype),"setupI18n",this).call(this)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"updateAccessibilityAttributes",value:function(){var e=this.getHash();this.rootNode.setAttribute("id","form-heading-".concat(e,"-acc")),this.rootNode.setAttribute("aria-labelledby","form-heading-".concat(e,"-acc"))}},{key:"onEnterSelection",value:function(){E()(_()(t.prototype),"onEnterSelection",this).call(this),function(e,t){e(t).find("[data-role=control][data-type=form-header]").attr("data-is-selected","1")}(this.getForm().getEngine().getJQuery(),this.getForm().getRootNode())}},{key:"onLeaveSelection",value:function(){E()(_()(t.prototype),"onLeaveSelection",this).call(this),function(e,t){e(t).find("[data-role=control][data-type=form-header]").removeAttr("data-is-selected")}(this.getForm().getEngine().getJQuery(),this.getForm().getRootNode())}},{key:"openEditableHTMLDialog",value:function(){this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT&&function(e,t){t.isEditorVisible||(t.isEditorVisible=!0,setTimeout((function(){e('#item[data-target-element-type="form header"][data-target-element="'.concat(t.getHash(),'"] [data-auto-click]')).each((function(){e(this).trigger("click")}))}),300),setTimeout((function(){t.isEditorVisible=!1}),600))}(this.getForm().getEngine().getJQuery(),this)}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("configuration.innerHTML")||"";return t&&e.push({key:"Headline",sourceText:t}),e}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_FORM_HEADER,name:"Form Header",isContainer:!1,category:"basic",keywords:"",icon:"",isVirtual:!1,index:99999,accessibilityFields:O.q.ROOT_NODE}}}]),t}(mt);v()(_i,"nodeName","form-header"),v()(_i,"attributes",{}),v()(_i,"runtime",null);var gi=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"previousRenderedHeadingElementName",void 0);var a=n.getHash();return n.previousRenderedHeadingElementName=n.getDOMLabelElementName(),n.labelDOMNode=document.createElement(n.previousRenderedHeadingElementName),n.labelDOMNode.setAttribute("id","heading-".concat(a,"-acc")),n.labelDOMNode.setAttribute("aria-labelledby","heading-".concat(a,"-acc")),n.rootNode.appendChild(n.labelDOMNode),n.updateAccessibilityTabIndexes(),t.instanceID++,n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_HEADING}},{key:"getElementName",value:function(){return"Heading"}},{key:"setRendererType",value:function(e){}},{key:"getDOMLabelElementName",value:function(){switch(this.getProperty("configuration.fontSize")){case 1:return"h6";case 2:return"h5";case 4:return"h3";case 5:return"h2";case 6:return"h1";case 3:default:return"h4"}}},{key:"updateLabelText",value:function(){var e=this.getDOMLabelElementName();e!==this.previousRenderedHeadingElementName&&(this.labelDOMNode.parentNode.removeChild(this.labelDOMNode),this.labelDOMNode=document.createElement(e),this.rootNode.appendChild(this.labelDOMNode),this.previousRenderedHeadingElementName=e),E()(_()(t.prototype),"updateLabelText",this).call(this)}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateLabelRemovedState(),this.updateFieldNameAttribute()}},{key:"updateLabelRemovedState",value:function(){this.hasProperty("label.isRemoved")&&this.getProperty("label.isRemoved")?this.rootNode.removeChild(this.labelDOMNode):this.rootNode.appendChild(this.labelDOMNode)}},{key:"updateFieldNameAttribute",value:function(){this.hasProperty("configuration.fieldName")&&this.getProperty("configuration.fieldName")&&this.rootNode.setAttribute("data-field-name",this.getProperty("configuration.fieldName"))}},{key:"onReset",value:function(){}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("formeditor_headingDefault")),this.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("formeditor_fieldTypeHeading")," ").concat(t.instanceID)),this.updateLabelText(),this}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"label.labelText",type:"string",optional:!0};default:return null}}},{key:"cloneNode",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=E()(_()(t.prototype),"cloneNode",this).call(this,!!e,i);return n.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_heading_name")," ").concat(t.instanceID)),n}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),e}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_HEADING,name:"Heading",isContainer:!1,category:"basic",keywords:"heading text statement",icon:"i123-editor_field_heading",isVirtual:!1,i18nName:"edt_UI_control_type_heading_name",i18nKeywords:"edt_UI_control_type_heading_keywords",index:70,accessibilityFields:O.q.ROOT_NODE}}}]),t}(mt);v()(gi,"instanceID",0),v()(gi,"attributes",{}),v()(gi,"runtime",null),v()(gi,"nodeName","heading");var Ei=function(e){function t(e,i){var n;return o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"imageNode",void 0),v()(h()(n),"imageParentNode",void 0),v()(h()(n),"isImageLoaded",!1),t.instanceID++,n.imageParentNode=document.createElement("div"),n.getRootNode().appendChild(n.imageParentNode),n.imageParentNode.setAttribute("data-image-container","1"),n.imageNode=document.createElement("img"),n.imageParentNode.appendChild(n.imageNode),n.imageNode.addEventListener("load",(function(){n.getRootNode().removeAttribute("data-image-placeholder"),n.isImageLoaded=!0,yt.refreshFrameHeightOnWix()}),!0),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_IMAGE}},{key:"getElementName",value:function(){return"Image"}},{key:"updateImageOptions",value:function(){this.hasProperty("configuration.remoteURL")&&!this.getProperty("configuration.remoteURL")&&this.rootNode.setAttribute("data-image-placeholder","1"),this.isImageLoaded=!1,this.imageNode.setAttribute("src",yt.getImageURLAntiCache(String(this.getProperty("configuration.remoteURL")||""))),this.imageNode.setAttribute("align",String(this.getProperty("configuration.align"))),this.updateAlternateTextAttribute()}},{key:"setRendererType",value:function(e){}},{key:"onCreated",value:function(){this.updateImageOptions(),this.updateAlternateTextAttribute()}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"getResizingCapability",value:function(){return this.isImageLoaded?O.E.ALL:O.E.LEFT_AND_RIGHT}},{key:"onReset",value:function(){}},{key:"updateAlternateTextAttribute",value:function(){var e=this.getProperty("configuration.alternateText");e&&this.imageNode.getAttribute("src")?this.imageNode.setAttribute("alt",e):this.imageNode.removeAttribute("alt")}},{key:"setupDefaults",value:function(){return this.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("formeditor_fieldTypeImage")," ").concat(t.instanceID)),this}},{key:"cloneNode",value:function(e){var i=E()(_()(t.prototype),"cloneNode",this).call(this,!!e);return i.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_image_name")," ").concat(t.instanceID)),i}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_IMAGE,name:"Image",isContainer:!1,category:"other",keywords:"image picture photo",icon:"i123-editor_field_image",isVirtual:!1,i18nName:"edt_UI_control_type_image_name",i18nKeywords:"edt_UI_control_type_image_keywords",index:230,accessibilityFields:O.q.ROOT_NODE}}}]),t}(mt);v()(Ei,"instanceID",0),v()(Ei,"attributes",{}),v()(Ei,"runtime",null),v()(Ei,"nodeName","image");var yi=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"choices",[]),v()(h()(n),"choicesLine",void 0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","likertscale-".concat(a,"-acc")),n.labelDOMNode.setAttribute("data-skip-markdown","true"),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","likertscale-".concat(a,"-error-acc")),n.choicesLine=document.createElement("div"),n.choicesLine.setAttribute("data-role","likert-header"),n.rootNode.setAttribute("aria-labelledby","likertscale-".concat(a,"-acc ")+"likertscale-".concat(a,"-error-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateShowInstructionsOnClick(),this.updateInlineOptionsAttribute(),this.updateBoldOptionsAttribute(),this.updateChoices(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.synchronizeValue():this.onValueChanged()}},{key:"updateLabelText",value:function(){if(void 0!==this.labelDOMNode&&this.hasProperty("label.labelText")){var e=this.getProperty("label.labelText"),t=this.hasProperty("label.isRemoved")&&this.getProperty("label.isRemoved"),i=t||this.hasProperty("label.isCompactField")&&this.getProperty("label.isCompactField");null===e||""===e?(this.labelDOMNode.setAttribute("data-is-empty","1"),this.labelDOMNode.textContent="",this.isCompactFieldPlaceholderSupported()&&i&&M.setLabelCompactFieldState(!0,"",this.getInputDOMNodes(),t)):(this.labelDOMNode.removeAttribute("data-is-empty"),this.labelDOMNode.innerHTML=e,this.isCompactFieldPlaceholderSupported()&&i&&M.setLabelCompactFieldState(!0,e,this.getInputDOMNodes(),t))}}},{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_LIKERT_SCALE}},{key:"getElementName",value:function(){return"Likert scale"}},{key:"getPropertyDescriptorByInputIndex",value:function(e){var t=(this.getProperty("choices.values")||[]).length;return e<t?{element:this,targetPropertyFQN:"value.value",optional:!1,type:"string",inputIndex:e}:e>=t?null:{element:this,targetPropertyFQN:"value.value",optional:!1,type:"string",inputIndex:e}}},{key:"isSelectable",value:function(){return!1}},{key:"isDragable",value:function(){return!1}},{key:"getResizingCapability",value:function(){return O.E.NONE}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.choicesLine,width:O.w.FULL}]}]}},{key:"updateChoices",value:function(){if(this.hasProperty("choices.values")){for(var e,t=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),i=this.getHash(),n=this.getProperty("options.inlineOptions"),a=0,r=t.length;a<r;a++)t[a].index=a;this.choicesLine.innerHTML="",this.choices.splice(0,this.choices.length);for(var o=0,s=t.length;o<s;o++)e=this.getForm().getEngine().getTheme().isMobileLayout()?this.createChoiceElement(t[o].text,o,i,t[o].isDefault,!0):this.createChoiceElement(t[o].text,o,i,t[o].isDefault,n),this.choices.push(e),this.choicesLine.appendChild(e);this.isAttached()&&this.reRender()}}},{key:"createRadioNode",value:function(e,t,i,n){var a=document.createElement("input");return a.setAttribute("type","radio"),a.setAttribute("id","".concat(i,"_").concat(e)),a.setAttribute("name","c_".concat(i)),a.setAttribute("value",t),a.setAttribute("data-index",String(e)),a.setAttribute("data-role","i123-input"),n&&(a.checked=!0),a}},{key:"createLabelElement",value:function(e,t,i,n,a){var r=document.createElement("label");r.setAttribute("data-role","choice");var o=this.createRadioNode(e,t,i,n),s=this.createDecoratorElement(e,i);if(n&&r.setAttribute("aria-checked","true"),a){var l=document.createElement("span");l.setAttribute("data-role","option-text"),l.appendChild(document.createTextNode(t||"")),r.appendChild(l)}return r.appendChild(o),r.appendChild(s),r}},{key:"createDecoratorElement",value:function(e,t){var i=document.createElement("label");return i.setAttribute("data-role","checkbox"),i.setAttribute("for","".concat(t,"_").concat(e)),i.setAttribute("role","radio"),i.tabIndex=0,i}},{key:"createChoiceElement",value:function(e,t,i,n,a){var r=document.createElement("div");r.setAttribute("data-role","choice");var o=this.createLabelElement(t,e,i,n,a);return r.appendChild(o),r}},{key:"updateInlineOptionsAttribute",value:function(){this.hasProperty("options.inlineOptions")&&this.getProperty("options.inlineOptions")?this.rootNode.setAttribute("data-has-inline-options",""):this.rootNode.removeAttribute("data-has-inline-options")}},{key:"updateBoldOptionsAttribute",value:function(){this.hasProperty("options.boldOptions")&&this.getProperty("options.boldOptions")?this.rootNode.setAttribute("data-has-bold-options",""):this.rootNode.removeAttribute("data-has-bold-options")}},{key:"synchronizeValue",value:function(){var e,t=this.getProperty("choices.values"),i=this.getProperty("value.value");if(t&&t.length)for(var n=0,a=t.length;n<a;n++)if(t[n].text===i)for(var r=0,o=this.choices.length;r<o;r++)if(e=this.choices[r].querySelector("input[type=radio]"),parseInt(e.getAttribute("data-index"))===n)return void(e.checked||(e.checked=!0,this.setProperty("value.index",n)))}},{key:"onValueChanged",value:function(){for(var e,t,i=null,n=null,a=this.getValue().index,r=0,o=this.choices.length;r<o;r++){if(e=this.choices[r].querySelector("input[type=radio]"),t=this.choices[r].querySelector("label[data-role=checkbox]"),e&&e.checked){i=e.value,n=~~e.getAttribute("data-index"),t.setAttribute("aria-checked","true");break}t&&t.hasAttribute("aria-checked")&&t.removeAttribute("aria-checked")}this.setProperty("value.value",i),this.setProperty("value.index",-1===n?null:~~n),this.isAttached()&&(n!==a&&null!==a&&this.getForm().trigger("radio-uncheck",this,a),this.getForm().trigger("change",this))}},{key:"onReset",value:function(){this.updateChoices(),this.onValueChanged()}},{key:"updateRequiredState",value:function(){}},{key:"setupI18n",value:function(){var e=this.getId();if(e){for(var i=this.getParent(),n=0,a=this.choices.length;n<a;n++){var r=this.choices[n].querySelector("input[type=radio][data-index]");if(r){var o=~~r.getAttribute("data-index"),s=this.choices[n].querySelector("span[data-role=option-text]");s&&(s.setAttribute("data-i18n-text","control_label_".concat(e,"_choice_").concat(o)),s.setAttribute("data-skip-markdown","true")),i&&i.trigger("translation-set",o,"control_label_".concat(e,"_choice_").concat(o))}}i&&i.trigger("translation-set",null,"likert_headline_".concat(e))}return E()(_()(t.prototype),"setupI18n",this).call(this)}},{key:"getInputDOMNodeAtIndex",value:function(e){return null===e?null:this.rootNode.querySelector('input[type=radio][data-index="'.concat(e,'"]'))}},{key:"setRendererType",value:function(e){var i=e;switch(e){case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL:i=O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL;break;case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD:i=O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD;break;case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:i=O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD;break;case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:i=O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD}E()(_()(t.prototype),"setRendererType",this).call(this,i)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"setVisible",value:function(e){E()(_()(t.prototype),"setVisible",this).call(this,e),this.getParent().trigger("child-visibility-changed")}},{key:"onFocusEnter",value:function(){this.getParent()&&this.getParent().onFocusEnter()}},{key:"onFocusLeave",value:function(){this.getParent()&&this.getParent().onFocusLeave()}},{key:"enumerateTranslations",value:function(){return[]}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_LIKERT_SCALE,name:"Likert Scale",isContainer:!1,category:"advanced",keywords:"likert scale radio radios matrix",icon:"i123-editor_field_likertscale",isVirtual:!0,i18nName:"edt_UI_control_type_likert_scale_name",i18nKeywords:"edt_UI_control_type_likert_scale_keywords",index:105,accessibilityFields:O.q.ROOT_NODE+O.q.ERROR_NODE}}}]),t}(mt);v()(yi,"attributes",{}),v()(yi,"runtime",null),v()(yi,"nodeName","likert-scale");var fi,mi=function(){function e(){o()(this,e)}return l()(e,null,[{key:"create",value:function(e,t){var i,n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var l=function(){i=void 0,a||e.apply(n,o)},u=a&&void 0===i;void 0!==i&&clearTimeout(i),i=setTimeout(l.bind(n),t),u&&e.apply(n,o)}}}]),e}();!function(e){e.NO_API_KEY="no_api_key",e.WRONG_API_KEY="wrong_api_key",e.OTHER_ERROR="other_error"}(fi||(fi={}));var vi=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"isGoogleMapsJavascriptAPILoaded",!1),v()(h()(n),"mapRendererNode",void 0),v()(h()(n),"mapOverlay",void 0),v()(h()(n),"mapSearchInput",void 0),v()(h()(n),"isMapSearchDivSet",void 0),v()(h()(n),"map",void 0),v()(h()(n),"marker",void 0),v()(h()(n),"geocoder",void 0),v()(h()(n),"updateMarkerPositionInThrottledMode",void 0),v()(h()(n),"updateMapSizeDebounced",mi.create((function(){var e=n.labelDOMNode.offsetHeight,i=n.instructionsDOMNode.offsetHeight,a=n.errorDOMNode.offsetHeight,r=null===n.getHeight()?t.DEFAULT_MAP_HEIGHT:n.getHeight(),o=r,s=n.getForm().getEngine().getTheme(),l=~~parseInt(s.getMergedProperties().container.padding.vertical),u=~~parseInt(s.getMergedProperties().label.padding.bottom);M.LABEL_PLACEMENT_TOP_RENDERERS.indexOf(n.getRendererType())>-1&&n.getVisibilityMode()!==O.n.REMOVED&&(o-=e,o-=i,o-=a,o-=u),o-=2*l,n.mapRendererNode.style.height="".concat(o,"px"),n.setProperty("configuration.mapHeight",r-5),window.google&&window.google.maps&&n.map&&google.maps.event.trigger(n.map,"resize")}),200));var a=n.getHash();if(n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","googlemap-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","googlemap-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","googlemap-".concat(a,"-instr-acc")),n.mapRendererNode=document.createElement("div"),n.mapRendererNode.setAttribute("data-role","map-canvas"),n.mapRendererNode.tabIndex=null,n.mapOverlay=document.createElement("div"),n.mapOverlay.setAttribute("data-role","map-overlay"),n.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT){var r=document.createElement("div");r.setAttribute("data-role","map-overlay-text");var s=document.createElement("span");s.setAttribute("data-i18n-text","textdef_250"),s.textContent="Add your Google Maps API Key to use this field",r.appendChild(s),n.mapOverlay.appendChild(r)}return n.mapSearchInput=document.createElement("input"),n.mapSearchInput.setAttribute("type","text"),n.mapSearchInput.setAttribute("data-role","i123-input"),n.mapSearchInput.setAttribute("class","controls"),n.mapSearchInput.setAttribute("data-no-theme",""),n.mapSearchInput.placeholder="Search Address",n.rootNode.setAttribute("aria-labelledby","googlemap-".concat(a,"-acc ")+"googlemap-".concat(a,"-error-acc ")+"googlemap-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n.updateMarkerPositionInThrottledMode=T.a.create((function(){n.updateMarkerPosition()}),1500),n}return f()(t,e),l()(t,[{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.mapRendererNode,width:O.w.FULL}]}]}},{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_MAP}},{key:"getElementName",value:function(){return"Map"}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"float[]",optional:!0};default:return null}}},{key:"setRendererType",value:function(e){E()(_()(t.prototype),"setRendererType",this).call(this,e),this.updateMapSize()}},{key:"onCreated",value:function(){var e=this;this.updateMapSize(),this.updateLabelText(),this.updateInstructionsText(),this.updateErrorsText(),this.updateShowInstructionsOnClick(),this.synchronizeValue(),this.updateApiKey(),this.initializeMapCanvas(),this.initDOMEvents(),setTimeout((function(){e.initAddressSync()}),0)}},{key:"updateApiKey",value:function(){this.getProperty("configuration.apiKey")?t.GOOGLE_MAPS_EMBED_KEY=this.getProperty("configuration.apiKey"):t.GOOGLE_MAPS_EMBED_KEY="",t.theOnlyOneGoogleMapsAPILoadRequestPromise=void 0,this.isGoogleMapsJavascriptAPILoaded=!1,window.google=void 0}},{key:"initAddressSync",value:function(){var e=this,t=this.getProperty("synchronize.withControlId");try{if(this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW&&null!==t){var i=this.getForm().getElementById(t);i&&(setTimeout((function(){i.setMapSync(!0)}),1e3),i.setSyncronizeCallback((function(){e.geocoder.geocode({address:e.parseUserAddress(i)},(function(t,i){e.showAddressOnMap(i,t)}))})))}}catch(n){console.warn("Failed to synchronize map coordinates with control #".concat(t)),console.error(n)}}},{key:"parseUserAddress",value:function(e){var t,i=e.getValue();return null!==i.address1&&(t=i.address1),null!==i.address2&&(t+=" ".concat(i.address2)),null!==i.city&&(t+=" ".concat(i.city)),null!==i.zone&&(t+=" ".concat(i.zone)),null!==i.zipCode&&(t+=" ".concat(i.zipCode)),null!==i.country&&(t+=" ".concat(i.country)),t}},{key:"initializeMapCanvas",value:function(){var e=this;this.whenGoogleMapsAPIIsLoaded().then((function(){window.google?(e.map=new google.maps.Map(e.mapRendererNode,{center:{lat:-34.397,lng:150.644}}),e.marker=void 0,e.geocoder=new google.maps.Geocoder,e.updateMapZoomSetting(),e.updateMapInteractiveSetting(),e.updateMarkerPosition(),e.updateMapSize()):e.mapRendererNode.innerHTML=""})).fail((function(){e.mapRendererNode.appendChild(e.mapOverlay),e.updateMapSize()}))}},{key:"updateMapZoomSetting",value:function(){var e=~~this.getProperty("configuration.initialZoom")||15;e<t.GOOGLE_MAPS_MIN_ZOOM&&(e=t.GOOGLE_MAPS_MIN_ZOOM),e>t.GOOGLE_MAPS_MAX_ZOOM&&(e=t.GOOGLE_MAPS_MAX_ZOOM),this.map.setZoom(e)}},{key:"updateMapInteractiveSetting",value:function(){var e=this,i=!!this.getProperty("configuration.isInteractive"),n=~~this.getProperty("configuration.initialZoom")||15;if(n<t.GOOGLE_MAPS_MIN_ZOOM&&(n=t.GOOGLE_MAPS_MIN_ZOOM),n>t.GOOGLE_MAPS_MAX_ZOOM&&(n=t.GOOGLE_MAPS_MAX_ZOOM),i){this.map.setOptions({zoomControl:!0,panControl:!0,rotateControl:!0,minZoom:t.GOOGLE_MAPS_MIN_ZOOM,mazZoom:t.GOOGLE_MAPS_MAX_ZOOM,zoom:n,streetViewControl:!0,mapTypeControl:!0,fullscreenControl:!0,gestureHandling:"auto",keyboardShortcuts:!0,scrollwheel:!0}),this.marker&&this.marker.setOptions({draggable:!0});var a=document.createElement("div");a.appendChild(this.mapSearchInput),""===ie.meetsRequirements("* * mobile * *")&&(this.mapSearchInput.oninput=function(){e.isMapSearchDivSet||setTimeout((function(){for(var t=document.body.getElementsByClassName("pac-container"),i=t.length,n=0;n<i;n++)if("none"!==t[n].style.display){a.appendChild(t[n]),e.isMapSearchDivSet=!0;break}}),300)});var r=new google.maps.places.SearchBox(this.mapSearchInput);this.map.controls[google.maps.ControlPosition.TOP_LEFT].push(a),this.map.addListener("bounds_changed",(function(){r.setBounds(e.map.getBounds())})),r.addListener("places_changed",(function(){var t=r.getPlaces();0!=t.length&&t[0].geometry&&(e.marker?e.marker.position=t[0].geometry.location:e.marker=new google.maps.Marker({map:e.map,position:t[0].geometry.location,draggable:e.getProperty("configuration.isInteractive")}),e.map.setCenter(e.marker.getPosition()),""===ie.meetsRequirements("* * mobile * *")&&setTimeout((function(){e.map.panBy(0,-25)}),500),e.onValueChanged(),e.propagateCoordinates(t[0].geometry.location.lat(),t[0].geometry.location.lng()),e.geocoder.geocode({latLng:t[0].geometry.location},(function(t){e.propagateAddress(t)})))}))}else this.map.setOptions({zoomControl:!1,panControl:!1,rotateControl:!1,minZoom:n,maxZoom:n,zoom:n,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,gestureHandling:"none",keyboardShortcuts:!1,scrollwheel:!1}),this.marker&&this.marker.setOptions({draggable:!1}),this.map.controls[google.maps.ControlPosition.TOP_LEFT].clear()}},{key:"updateMarkerPosition",value:function(){var e=this;if(this.isGoogleMapsJavascriptAPILoaded){var t=String(this.getProperty("configuration.initialAddressText"))||null;t?this.geocoder.geocode({address:t},(function(t,i){e.showAddressOnMap(i,t),e.geocoder.geocode({latLng:t[0].geometry.location},(function(t){e.propagateAddress(t)}))})):this.marker&&this.marker.setMap(null)}}},{key:"showAddressOnMap",value:function(e,t){var i=this;this.isGoogleMapsJavascriptAPILoaded&&(e===google.maps.GeocoderStatus.OK?(this.map.setCenter(t[0].geometry.location),this.getProperty("configuration.isInteractive")&&""===ie.meetsRequirements("* * mobile * *")&&setTimeout((function(){i.map.panBy(0,-25)}),500),this.marker?(this.marker.setPosition(t[0].geometry.location),this.marker.setMap(this.map),this.propagateCoordinates(t[0].geometry.location.lat(),t[0].geometry.location.lng())):(this.marker=new google.maps.Marker({map:this.map,position:t[0].geometry.location,draggable:this.getProperty("configuration.isInteractive")}),this.onValueChanged(),this.propagateCoordinates(t[0].geometry.location.lat(),t[0].geometry.location.lng()),google.maps.event.addListener(this.marker,"dragend",(function(e){var t=e.latLng.lat(),n=e.latLng.lng();i.map.setCenter(i.marker.getPosition()),i.getProperty("configuration.isInteractive")&&""===ie.meetsRequirements("* * mobile * *")&&setTimeout((function(){i.map.panBy(0,-25)}),500),i.onValueChanged(),i.propagateCoordinates(t,n),i.geocoder.geocode({latLng:e.latLng},(function(e){i.propagateAddress(e)})),i.mapSearchInput.value=""})))):this.marker.setMap(null))}},{key:"propagateAddress",value:function(e){var t=this.getCombinedGeocodedAddressData(e),i=this.getProperty("synchronize.withControlId");try{if(this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW&&null!==i&&!0===this.getProperty("synchronize.enabled")){var n=this.getForm().getElementById(i);if(null===n)return;n.setMapSync(!1),n.setValue(t),n.updateCountry(t.country),setTimeout((function(){n.setMapSync(!0)}),1e3)}}catch(a){console.warn("Failed to propagate map coordinates to control #".concat(i)),console.error(a)}}},{key:"getCombinedGeocodedAddressData",value:function(e){var t=this,i=this.getGeocodedAddressData(e[0].address_components);return Object(Fe.a)(e,(function(e){var n=t.getGeocodedAddressData(e.address_components);Object(Fe.a)(n,(function(e,t){!i[t]&&e&&(i[t]=e)}))})),i}},{key:"getGeocodedAddressData",value:function(e){var t=this.getExtractedAddressData(e,["country"]),i={address1:this.getExtractedAddressData(e,["route"]),city:this.getExtractedAddressData(e,["locality"]),zone:this.getExtractedAddressData(e,["administrative_area_level_1"]),country:t,zipCode:this.getExtractedAddressData(e,["postal_code"]),fullCountryName:t},n=this.getExtractedAddressData(e,["street_number"]);return""!==n&&(i.address2="No. ".concat(n)),i}},{key:"getExtractedAddressData",value:function(e,t){for(var i=[],n=0;n<e.length;n++)for(var a=0;a<t.length;a++)-1!=e[n].types.indexOf(t[a])&&i.push(e[n].long_name.toString());return i.join(" ")}},{key:"propagateCoordinates",value:function(e,t){var i=this.getProperty("propagate.onControlId");try{if(this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW&&null!==i&&!0===this.getProperty("propagate.enabled")){var n=this.getForm().getElementById(i);null!==n&&n.setValue({value:"".concat(e,", ").concat(t)})}}catch(a){console.warn("Failed to propagate map coordinates to control #".concat(i)),console.error(a)}}},{key:"updateMapSize",value:function(){this.updateMapSizeDebounced()}},{key:"withHeight",value:function(e){var i=E()(_()(t.prototype),"withHeight",this).call(this,e);return this.updateMapSize(),i}},{key:"getResizingCapability",value:function(){return O.E.ALL}},{key:"whenGoogleMapsAPIIsLoaded",value:function(){var e=this,i=lt.getJQuery();return this.isGoogleMapsJavascriptAPILoaded?i.Deferred((function(e){e.resolve()})).promise():t.theOnlyOneGoogleMapsAPILoadRequestPromise?t.theOnlyOneGoogleMapsAPILoadRequestPromise:(t.theOnlyOneGoogleMapsAPILoadRequestPromise=i.Deferred((function(i){if(""!==t.GOOGLE_MAPS_EMBED_KEY){window.gm_authFaliure=function(){i.reject({code:fi.OTHER_ERROR})};var n="//maps.googleapis.com/maps/api/js?libraries=places&key=".concat(t.GOOGLE_MAPS_EMBED_KEY);e.getForm().getEngine().getResourceManager().loadJavascript(n).done((function(){e.isGoogleMapsJavascriptAPILoaded=!0,i.resolve()})).fail((function(){i.reject(new Error("Failed to load google Maps API"))}))}else i.reject({code:fi.NO_API_KEY})})).promise(),t.theOnlyOneGoogleMapsAPILoadRequestPromise)}},{key:"setupDefaults",value:function(){this.withHeight(t.DEFAULT_MAP_HEIGHT),this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_map_name"));var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.DEFAULT_USER_PREFERENCES);return e&&this.setProperty("configuration.initialAddressText",e.mapLocation),this.updateLabelText(),this}},{key:"onValueChanged",value:function(){this.marker&&this.setProperty("value.value",[this.marker.getPosition().lat(),this.marker.getPosition().lng()])}},{key:"synchronizeValue",value:function(){var e=this,t=this.getProperty("value.value");if(t&&2===t.length&&this.map){var i=new google.maps.LatLng({lat:t[0],lng:t[1]});this.map.setCenter(i),this.getProperty("configuration.isInteractive")&&""===ie.meetsRequirements("* * mobile * *")&&setTimeout((function(){e.map.panBy(0,-25)}),500),this.marker&&this.marker.setPosition(i)}}},{key:"updateLabelText",value:function(){E()(_()(t.prototype),"updateLabelText",this).call(this),this.updateMapSize()}},{key:"updateInstructionsText",value:function(){E()(_()(t.prototype),"updateInstructionsText",this).call(this),this.updateMapSize()}},{key:"updateErrorsText",value:function(){E()(_()(t.prototype),"updateErrorsText",this).call(this),this.updateMapSize()}},{key:"initDOMEvents",value:function(){var e=this;window.addEventListener("resize",(function(){e.updateMapSize()}),!0),this.getForm().on("page-changed",(function(){e.updateMapSize()}))}},{key:"onReset",value:function(){var e=this;this.geocoder?(this.updateMarkerPosition(),this.updateMapZoomSetting(),this.onValueChanged()):(this.initializeMapCanvas(),setTimeout((function(){e.updateMarkerPosition(),e.updateMapZoomSetting(),e.onValueChanged()}),1500))}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_MAP,name:"Map",isContainer:!1,category:"other",keywords:"google map place address",icon:"i123-editor_field_googlemaps",isVirtual:!1,i18nName:"edt_UI_control_type_map_name",i18nKeywords:"edt_UI_control_type_map_keywords",index:280,accessibilityFields:O.q.ROOT_NODE+O.q.ERROR_NODE}}}]),t}(mt);v()(vi,"GOOGLE_MAPS_EMBED_KEY",""),v()(vi,"GOOGLE_MAPS_MIN_ZOOM",1),v()(vi,"GOOGLE_MAPS_MAX_ZOOM",15),v()(vi,"DEFAULT_MAP_HEIGHT",300),v()(vi,"theOnlyOneGoogleMapsAPILoadRequestPromise",void 0),v()(vi,"attributes",{}),v()(vi,"runtime",null),v()(vi,"nodeName","map");var Oi=function(){function e(){o()(this,e)}return l()(e,null,[{key:"parseName",value:function(e){var t,i="",n="",a="",r=null,o=0,s=0,l=(t=(e=String(this.trim(e)||"")).split(" ").filter((function(e){return-1===e.indexOf("(")}))).length,u=this.getSalutation(t[0]),d=this.getSuffix(t[l-1]),c=u?1:0,h=d?l-1:l;for(r=t[c],this.isInitialName(r)?this.isInitialName(t[c+1])?n+=" ".concat(r.toUpperCase()):a+=" ".concat(r.toUpperCase()):n+=" ".concat(this.fixCase(r)),s=c+1;s<h-1&&(r=t[s],!this.is_compound_lastName(r)||this.isInitialName(r)&&r===r.toUpperCase());s++)this.isInitialName(r)?a+=" ".concat(r.toUpperCase()):n+=" ".concat(this.fixCase(r));if(h-c>1)for(o=s;o<h;o++)i+=" ".concat(this.fixCase(t[o]));return{title:this.trim(u)||null,firstName:this.getFirstName(n)||null,middleName:this.getMiddleName(n)||null,initials:this.trim(a)||null,lastName:this.trim(i)||null,suffix:this.trim(d)||null}}},{key:"isInitialName",value:function(e){return!!e&&1===(e=this.removeIgnoredChars(e)).length}},{key:"fixCase",value:function(e){return e=this.safeUCFirst("-",String(e||"")),e=this.safeUCFirst(".",String(e||""))}},{key:"safeUCFirst",value:function(e,t){return t.split(e).map((function(e){return this.isCamelCaseString(e)?e:e.substr(0,1).toUpperCase()+e.substr(1).toLowerCase()}),this).join(e)}},{key:"is_compound_lastName",value:function(e){return e=e.toLowerCase(),this.COMPOUND_LAST_NAME_WORDS.indexOf(e)>=0}},{key:"getSalutation",value:function(e){return"mr"===(e=this.removeIgnoredChars(e).toLowerCase())||"master"===e||"mister"===e?"Mr.":"mrs"===e?"Mrs.":"miss"===e||"ms"===e?"Ms.":"dr"===e?"Dr.":"rev"===e?"Rev.":"fr"===e?"Fr.":null}},{key:"trim",value:function(e){return null===e?null:String(e||"").replace(/(^[\s]+|[\s]+$)/g,"")}},{key:"getFirstName",value:function(e){return this.trim(String(e||"")).split(/[\s]+/)[0]||null}},{key:"getMiddleName",value:function(e){return this.trim(String(e||"")).split(/[\s]+/).slice(1).join(" ")||null}}]),e}();v()(Oi,"COMPOUND_LAST_NAME_WORDS",["vere","von","van","de","del","della","di","da","pietro","vanden","du","st.","st","la","lo","ter","o","o'","mac","fitz"]),v()(Oi,"SUFFIX_ARRAY",["I","II","III","IV","V","Senior","Junior","Jr","Sr","PhD","APR","RPh","PE","MD","MA","DMD","CME","BVM","CFRE","CLU","CPA","CSC","CSJ","DC","DD","DDS","DO","DVM","EdD","Esq","JD","LLD","OD","OSB","PC","Ret","RGS","RN","RNC","SHCJ","SJ","SNJM","SSMO","USA","USAF","USAFR","USAR","USCG","USMC","USMCR","USN","USNR"]),v()(Oi,"removeIgnoredChars",(function(e){return String(e||"").replace(/\./g,"")})),v()(Oi,"isCamelCaseString",(function(e){return/[A-Z]+/.test(e)&&/[a-z]+/.test(e)})),v()(Oi,"getSuffix",(function(e){e=this.removeIgnoredChars(String(e||"")).toLowerCase();var t=this.SUFFIX_ARRAY.map((function(e){return e.toLowerCase()})).indexOf(e);return t>=0?this.SUFFIX_ARRAY[t]:null}));var Ti=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"titleNode",void 0),v()(h()(n),"firstNameNode",void 0),v()(h()(n),"initialsNode",void 0),v()(h()(n),"middleNameNode",void 0),v()(h()(n),"lastNameNode",void 0),v()(h()(n),"wasCapitalizationPerformed",!1);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","name-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","name-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","name-".concat(a,"-instr-acc")),n.titleNode=lt.createElement(lt.ELEMENT_TYPE_DROPDOWN),n.titleNode.setAttribute("data-role","i123-input"),n.titleNode.setAttribute("data-index",String(t.INDEX_TITLE)),n.firstNameNode=document.createElement("input"),n.firstNameNode.setAttribute("data-role","i123-input"),n.firstNameNode.setAttribute("type","text"),n.firstNameNode.setAttribute("data-index",String(t.INDEX_FIRST_NAME)),n.firstNameNode.placeholder="First",n.firstNameNode.setAttribute("data-i18n-placeholder","textdef_30"),n.initialsNode=document.createElement("input"),n.initialsNode.setAttribute("data-role","i123-input"),n.initialsNode.setAttribute("type","text"),n.initialsNode.setAttribute("data-index",String(t.INDEX_INITIALS)),n.initialsNode.placeholder="Initials",n.initialsNode.setAttribute("data-i18n-placeholder","textdef_168"),n.middleNameNode=document.createElement("input"),n.middleNameNode.setAttribute("data-role","i123-input"),n.middleNameNode.setAttribute("type","text"),n.middleNameNode.setAttribute("data-index",String(t.INDEX_MIDDLE_NAME)),n.middleNameNode.placeholder="Middle",n.middleNameNode.setAttribute("data-i18n-placeholder","textdef_167"),n.lastNameNode=document.createElement("input"),n.lastNameNode.setAttribute("data-role","i123-input"),n.lastNameNode.setAttribute("type","text"),n.lastNameNode.setAttribute("data-index",String(t.INDEX_LAST_NAME)),n.lastNameNode.placeholder="Last",n.lastNameNode.setAttribute("data-i18n-placeholder","textdef_31"),n.rootNode.setAttribute("aria-labelledby","name-".concat(a,"-acc ")+"name-".concat(a,"-error-acc ")+"name-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_NAME}},{key:"getElementName",value:function(){return"Name"}},{key:"updateTitleOptions",value:function(){for(var e,t=this.getProperty("configuration.titleChoices")||[{text:"Ms",i18n:"formeditor_dropdownTitleNameChoice1"},{text:"Miss",i18n:"formeditor_dropdownTitleNameChoice2"},{text:"Mrs",i18n:"formeditor_dropdownTitleNameChoice3"},{text:"Mr",i18n:"formeditor_dropdownTitleNameChoice4"}];this.titleNode.getOptions().length;)this.titleNode.remove(0);(e=document.createElement("option")).value="",e.text="Title",e.setAttribute("data-i18n-text","textdef_166"),this.titleNode.add(e);for(var i=this.getId(),n=0,a=t.length;n<a;n++)(e=document.createElement("option")).text=e.value=t[n].text,i?e.setAttribute("data-i18n-text","control_label_".concat(this.getId(),"_choice_").concat(n)):t[n].i18n&&e.setAttribute("data-i18n-text",t[n].i18n),this.titleNode.add(e)}},{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateDefaultName(),this.synchronizeValue(),this.updateHiddenAttribute(),setTimeout((function(){e.updateTitleOptions()}),1)}},{key:"getInputDOMNodes",value:function(){switch(String(~~this.getProperty("configuration.fieldTitle"))+String(~~this.getProperty("configuration.fieldInitials"))+String(~~this.getProperty("configuration.fieldMiddleName"))){case"111":return[{inputs:[{width:O.w.QUARTER,input:this.titleNode},{width:O.w.FILL,input:this.firstNameNode},{width:O.w.QUARTER,input:this.initialsNode}]},{inputs:[{width:O.w.FILL,input:this.middleNameNode},{width:O.w.HALF,input:this.lastNameNode}]}];case"011":return[{inputs:[{width:O.w.QUARTER,input:this.firstNameNode},{width:O.w.QUARTER,input:this.initialsNode},{width:O.w.QUARTER,input:this.middleNameNode},{width:O.w.FILL,input:this.lastNameNode}]}];case"010":return[{inputs:[{width:O.w.THIRD,input:this.firstNameNode},{width:O.w.QUARTER,input:this.initialsNode},{width:O.w.FILL,input:this.lastNameNode}]}];case"001":return[{inputs:[{width:O.w.THIRD,input:this.firstNameNode},{width:O.w.THIRD,input:this.middleNameNode},{width:O.w.FILL,input:this.lastNameNode}]}];case"101":return[{inputs:[{width:O.w.QUARTER,input:this.titleNode},{width:O.w.QUARTER,input:this.firstNameNode},{width:O.w.QUARTER,input:this.middleNameNode},{width:O.w.FILL,input:this.lastNameNode}]}];case"100":return[{inputs:[{width:O.w.QUARTER,input:this.titleNode},{width:O.w.THIRD,input:this.firstNameNode},{width:O.w.FILL,input:this.lastNameNode}]}];case"110":return[{inputs:[{width:O.w.QUARTER,input:this.titleNode},{width:O.w.QUARTER,input:this.firstNameNode},{width:O.w.QUARTER,input:this.initialsNode},{width:O.w.FILL,input:this.lastNameNode}]}];case"000":return[{inputs:[{width:O.w.FILL,input:this.firstNameNode},{width:O.w.HALF,input:this.lastNameNode}]}]}}},{key:"getCapitalizedValue",value:function(e){if(!this.getProperty("options.capitalize"))return e;if(!e)return e;for(var t=e.split(" "),i=0,n=t.length;i<n;i++)t[i]&&t[i].charAt(0)!==t[i].charAt(0).toLocaleUpperCase()&&(t[i]=t[i].charAt(0).toLocaleUpperCase()+t[i].slice(1),this.wasCapitalizationPerformed=!0);return t.join(" ")}},{key:"onValueChanged",value:function(){var e=this;setTimeout((function(){e.wasCapitalizationPerformed=!1,e.setProperty("value.title",e.titleNode.getValue()),e.setProperty("value.firstName",e.getCapitalizedValue(e.firstNameNode.value)),e.setProperty("value.initials",e.getCapitalizedValue(e.initialsNode.value)),e.setProperty("value.middleName",e.getCapitalizedValue(e.middleNameNode.value)),e.setProperty("value.lastName",e.getCapitalizedValue(e.lastNameNode.value)),e.wasCapitalizationPerformed&&e.synchronizeValue()}),0)}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case t.INDEX_TITLE:return{targetPropertyFQN:"value.title",type:"string",optional:!0};case t.INDEX_FIRST_NAME:return{targetPropertyFQN:"value.firstName",type:"string",optional:!0};case t.INDEX_INITIALS:return{targetPropertyFQN:"value.initials",type:"string",optional:!0};case t.INDEX_MIDDLE_NAME:return{targetPropertyFQN:"value.middleName",type:"string",optional:!0};case t.INDEX_LAST_NAME:return{targetPropertyFQN:"value.lastName",type:"string",optional:!0};default:return null}}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.titleNode,this.getProperty("value.title")),yt.synchronizeControlValue(this.firstNameNode,this.getProperty("value.firstName")),yt.synchronizeControlValue(this.initialsNode,this.getProperty("value.initials")),yt.synchronizeControlValue(this.middleNameNode,this.getProperty("value.middleName")),yt.synchronizeControlValue(this.lastNameNode,this.getProperty("value.lastName"))}},{key:"enumerateIndexes",value:function(){return[t.INDEX_MIDDLE_NAME,t.INDEX_FIRST_NAME,t.INDEX_INITIALS,t.INDEX_LAST_NAME,t.INDEX_TITLE]}},{key:"getMinInputRowWidth",value:function(){return 12}},{key:"getOptionalFields",value:function(){var e=[];return this.getProperty("configuration.fieldInitials")&&e.push(O.z.INITIALS),this.getProperty("configuration.fieldMiddleName")&&e.push(O.z.MIDDLE_NAME),this.getProperty("configuration.fieldTitle")&&e.push(O.z.TITLE),e}},{key:"setOptionalFields",value:function(e){for(var t=0,i=(e=e||[]).length;t<i;t++)e[t]=~~e[t];this.setProperty("configuration.fieldInitials",e.indexOf(O.z.INITIALS)>-1),this.setProperty("configuration.fieldMiddleName",e.indexOf(O.z.MIDDLE_NAME)>-1),this.setProperty("configuration.fieldTitle",e.indexOf(O.z.TITLE)>-1)}},{key:"updateDefaultName",value:function(){var e,t=this.getProperty("configuration.defaultValue"),i=!1;null!==t?(e=Oi.parseName(t.trim()),this.setProperty("configuration.defaultValue",t.trim())):e={initials:null,title:null,firstName:null,lastName:null,middleName:null,suffix:null},null!==e.firstName?(this.setProperty("value.firstName",e.firstName),i=!0):null!==this.getProperty("value.firstName")&&(this.setProperty("value.firstName",null),i=!0),null!==e.lastName?(this.setProperty("value.lastName",e.lastName),i=!0):null!==this.getProperty("value.lastName")&&(this.setProperty("value.lastName",null),i=!0),this.getProperty("configuration.fieldTitle")&&(null!==e.title?(this.setProperty("value.title",e.title.replace(/\.$/g,"")),i=!0):null!==this.getProperty("value.title")&&(this.setProperty("value.title",null),i=!0)),this.getProperty("configuration.fieldMiddleName")&&(null!==e.middleName?(this.setProperty("value.middleName",e.middleName),i=!0):null!==this.getProperty("value.middleName")&&(this.setProperty("value.middleName",null),i=!0)),this.getProperty("configuration.fieldInitials")&&(null!==e.initials?(this.setProperty("value.initials",e.initials),i=!0):null!==this.getProperty("value.initials")&&(this.setProperty("value.initials",null),i=!0)),i&&this.synchronizeValue()}},{key:"onReset",value:function(){this.setValue({title:null,firstName:null,initials:null,middleName:null,lastName:null}),this.updateDefaultName(),this.onValueChanged()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_name_name")),this.updateLabelText(),this}},{key:"setupI18n",value:function(){return this.titleNode.trigger("update"),E()(_()(t.prototype),"setupI18n",this).call(this)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";if(t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),this.getProperty("configuration.fieldTitle"))for(var n=this.getProperty("configuration.titleChoices")||[],a=0,r=n.length;a<r;a++)n[a].text&&e.push({key:"control_label_".concat(this.getId(),"_choice_").concat(a),sourceText:n[a].text});return e}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_NAME,name:"Name",isContainer:!1,category:"advanced",keywords:"name surname contact information",icon:"i123-editor_field_name",isVirtual:!1,i18nName:"edt_UI_control_type_name_name",i18nKeywords:"edt_UI_control_type_name_keywords",index:110,accessibilityFields:O.q.ROOT_NODE+O.q.ERROR_NODE}}}]),t}(mt);v()(Ti,"INDEX_FIRST_NAME",1),v()(Ti,"INDEX_LAST_NAME",2),v()(Ti,"INDEX_TITLE",3),v()(Ti,"INDEX_INITIALS",4),v()(Ti,"INDEX_MIDDLE_NAME",5),v()(Ti,"attributes",{}),v()(Ti,"runtime",null),v()(Ti,"nodeName","name");var Ci=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"inputContainer",void 0),v()(h()(n),"prefixLabel",void 0),v()(h()(n),"input",void 0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","number-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","number-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","number-".concat(a,"-instr-acc")),n.input=document.createElement("input"),n.input.setAttribute("type","number"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("data-no-theme",""),n.input.setAttribute("step","any"),n.prefixLabel=document.createElement("span"),n.prefixLabel.setAttribute("data-role","prefix-label"),n.prefixLabel.setAttribute("id","price-".concat(a,"-prefix-acc")),n.inputContainer=document.createElement("div"),n.inputContainer.setAttribute("data-role","input-container"),n.inputContainer.setAttribute("data-ui-role","ui-element"),n.inputContainer.appendChild(n.prefixLabel),n.inputContainer.appendChild(n.input),n.input.setAttribute("aria-labelledby","number-".concat(a,"-acc ")+"number-".concat(a,"-error-acc ")+"number-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_NUMBER}},{key:"getElementName",value:function(){return"Number"}},{key:"updatePrefixLabel",value:function(){this.prefixLabel.textContent=this.getProperty("configuration.prefix")||"",this.adjustInputPadding()}},{key:"syncInputCompactField",value:function(){this.input.placeholder=this.inputContainer.hasAttribute("placeholder")?this.inputContainer.getAttribute("placeholder"):""}},{key:"adjustInputPadding",value:function(){var e=this;setTimeout((function(){var t=e.getForm().getEngine().getTheme().properties.input.padding.horizontal,i=e.getForm().getRootNode().getAttribute("data-text-direction"),n=e.prefixLabel.offsetWidth>parseInt(t,10)?"".concat(e.prefixLabel.offsetWidth+8,"px"):t;"ltr"===i?(e.input.style.paddingLeft=n,e.input.style.removeProperty("padding-right")):(e.input.style.paddingRight=n,e.input.style.removeProperty("padding-left"))}),1)}},{key:"adjustPrefixLabelOpacity",value:function(){this.input.value.length>0||null!==this.getErrors()?this.prefixLabel.style.removeProperty("opacity"):this.prefixLabel.style.opacity=".5"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.inputContainer,width:O.w.FULL}]}]}},{key:"onCreated",value:function(){var e=this;this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.updateDefaultValue(),this.validateValue(),this.synchronizeValue(),this.updatePrefixLabel(),this.adjustPrefixLabelOpacity(),this.syncInputCompactField(),this.addEventListeners(),this.onReadonlyStateChanged(),setTimeout((function(){e.hidePrefixLabelIfNeeded()}),1e3)}},{key:"addEventListeners",value:function(){var e=this,t=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.UNDO_SERVICE),i=this.getForm().getEngine();t&&t.on("user-action",(function(t){"resize-end"===t&&e.hidePrefixLabelIfNeeded()})),window.addEventListener("resize",Object(Jt.a)((function(){e.hidePrefixLabelIfNeeded()}),500)),this.input.addEventListener("focus",(function(){e.rootNode.querySelector('div[data-role="input-container"]').setAttribute("data-is-focused-child-element","1")})),this.input.addEventListener("blur",(function(){e.rootNode.querySelector('div[data-role="input-container"]').removeAttribute("data-is-focused-child-element")})),i.getDocument().on("update-text-direction",(function(){e.adjustInputPadding()})),i.getLoader().on("navigate-to-relative-page-number",(function(){e.hidePrefixLabelIfNeeded()}))}},{key:"hidePrefixLabelIfNeeded",value:function(){var e=this.getProperty("configuration.prefix")||"",t=parseInt(getComputedStyle(this.prefixLabel).paddingLeft,10),i=parseInt(getComputedStyle(this.input).paddingRight,10),n=jt.getDOMWidth(e);this.inputContainer.offsetWidth<n+t+i+30?this.prefixLabel.style.display="none":this.prefixLabel.style.removeProperty("display"),this.adjustInputPadding()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(re.VALIDATOR_TYPE_NUMERIC),e.getValidatorById(re.VALIDATOR_TYPE_NUMERICPLUS)]}},{key:"onFocusEnter",value:function(){var e=this,t=setInterval((function(){e.getPrefixInspectorInput()&&(e.updateInspectorPrefix(),clearInterval(t))}),500)}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:parseFloat(e)),this.validateValue(),this.adjustPrefixLabelOpacity(),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateDefaultValue",value:function(){var e=this.getProperty("configuration.defaultValue");this.setProperty("value.value",0===e?0:e),this.synchronizeValue()}},{key:"validateValue",value:function(){var e=this.getProperty("value.value"),t=this.input.validity;if(0===e||e||(e=null),t&&t.valid)null!==e?this.checkValidNumericInput():this.clearAllValidationErrors();else if(t&&!t.valid){var i=this.getForm().getEngine().getI18n();this.addError(it.ERR_INVALID_NUMBER,"".concat(i.translateText("textdef_5"),":").concat(i.translateText("textdef_47"))||"Expected input: numeric (only numbers)")}}},{key:"clearAllValidationErrors",value:function(){this.removeError(it.ERR_NUMBER_TOO_BIG),this.removeError(it.ERR_NUMBER_TOO_LONG),this.removeError(it.ERR_NUMBER_TOO_SHORT),this.removeError(it.ERR_NUMBER_TOO_SMALL),this.removeError(it.ERR_NOT_NUMERIC),this.removeError(it.ERR_INVALID_NUMBER)}},{key:"checkValidNumericInput",value:function(){var e=this.getProperty("configuration.minLength"),t=this.getProperty("configuration.maxLength"),i=this.getProperty("configuration.minValue"),n=this.getProperty("configuration.maxValue"),a=this.getProperty("value.value"),r=this.getProperty("validation.type"),o=this.getForm().getEngine().getI18n();""==ie.meetsRequirements("* * * msie *")&&(isNaN(Number(this.input.value))||this.input.value.indexOf("x")>=0)?this.addError(it.ERR_INVALID_NUMBER,"".concat(o.translateText("textdef_5"),":").concat(o.translateText("textdef_47"))||"Expected input: numeric (only numbers)"):this.removeError(it.ERR_INVALID_NUMBER),r===re.VALIDATOR_TYPE_NUMERIC&&(a<0||Math.floor(a)!==a?this.addError(it.ERR_NOT_NUMERIC,"".concat(o.translateText("textdef_5"),":").concat(o.translateText("textdef_47"))||"Expected input: numeric (only numbers)"):this.removeError(it.ERR_NOT_NUMERIC)),null!=t&&t>0&&(String(a).length>t?this.addError(it.ERR_NUMBER_TOO_LONG,this.getForm().getEngine().getI18n().translateText("textdef_71",String(t))||"The number is too long"):this.removeError(it.ERR_NUMBER_TOO_LONG)),null!=e&&e>0&&(String(a).length<e?this.addError(it.ERR_NUMBER_TOO_SHORT,this.getForm().getEngine().getI18n().translateText("textdef_70",String(e))||"The number is too short"):this.removeError(it.ERR_NUMBER_TOO_SHORT)),null!=n&&(a>n?this.addError(it.ERR_NUMBER_TOO_BIG,this.getForm().getEngine().getI18n().translateText("textdef_73",String(n))||"The value you have provided is too big"):this.removeError(it.ERR_NUMBER_TOO_BIG)),null!=i&&(a<i?this.addError(it.ERR_NUMBER_TOO_SMALL,this.getForm().getEngine().getI18n().translateText("textdef_72",String(i))||"The value you have provided is too small"):this.removeError(it.ERR_NUMBER_TOO_SMALL))}},{key:"getPrefixVisibility",value:function(){return(this.getProperty("configuration.prefix")||"").length>0}},{key:"setPrefixVisibility",value:function(e){var t=this.getProperty("configuration.prefix")||"USD";e?this.setProperty("configuration.prefix",this.getProperty("configuration.prefix")||"USD"):this.setProperty("configuration.prefix",null),this.getPrefixInspectorInput().value=t}},{key:"updateInspectorPrefix",value:function(){var e=this.getPrefixInspectorInput();e.addEventListener("keypress",(function(t){if(!yt.isInputTextSelected(e)){var i=0;i+=e.value.replace(/[^a-z0-9]/gi,"").length;for(var n=0;n<e.value.length;n++)e.value.charCodeAt(n)>127&&i++;i>=4&&(t.key.match(/[a-z0-9]/gi)||t.key.charCodeAt(0)>127)&&t.preventDefault()}}))}},{key:"getPrefixInspectorInput",value:function(){return document.querySelector('#item [data-property-name="configuration-prefix"] input')}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value")),this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW&&this.removeAllBackendErrors()}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"number",optional:!0};default:return null}}},{key:"onReset",value:function(){this.updateDefaultValue(),this.synchronizeValue(),this.validateValue()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_number_name")),this.updateLabelText(),this}},{key:"updateInstructionsText",value:function(){if(void 0!==this.instructionsDOMNode){var e=this.getProperty("instructions.text"),t=this.hasProperty("configuration.limitSubmissionsTotal")&&this.getProperty("configuration.limitSubmissionsTotal")||null,i=this.hasProperty("configuration.currentSubmissionsValue")?this.getProperty("configuration.currentSubmissionsValue"):null,n=null!==t?Math.max(0,t-i):null,a="".concat(this.getForm().getEngine().getI18n().translateText("textdef_41")," ").concat(n),r=this.hasProperty("configuration.isLimitSubmissionsEnabled")?this.getProperty("configuration.isLimitSubmissionsEnabled"):null;null!==n&&r?(this.instructionsDOMNode.removeAttribute("data-is-empty"),e?(this.instructionsDOMNode.textContent=e,this.instructionsDOMNode.appendChild(document.createElement("br"))):this.instructionsDOMNode.textContent="",this.instructionsDOMNode.appendChild(document.createTextNode(a))):null===e||""===e?(this.instructionsDOMNode.setAttribute("data-is-empty","1"),this.instructionsDOMNode.textContent=""):(this.instructionsDOMNode.removeAttribute("data-is-empty"),this.instructionsDOMNode.textContent=I.parse(e))}}},{key:"onBlur",value:function(){this.checkIfElementValueIsSynchronized(),this.checkIfLimitSubmissionsTotalValueIsExceeded()}},{key:"checkIfLimitSubmissionsTotalValueIsExceeded",value:function(){if(this.hasProperty("configuration.isLimitSubmissionsEnabled")&&this.getProperty("configuration.isLimitSubmissionsEnabled")){var e=this.hasProperty("configuration.limitSubmissionsTotal")&&this.getProperty("configuration.limitSubmissionsTotal")||null,t=this.hasProperty("configuration.currentSubmissionsValue")&&this.getProperty("configuration.currentSubmissionsValue")||null,i=null!==e?Math.max(0,e-t):null;(i||0===i)&&(~~this.input.value>i?this.addError(it.ERR_MAX_ACCEPTED_VALUE_EXCEEDED,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_41"),": ").concat(i)||"The maximum accepted value is ".concat(i)):this.removeError(it.ERR_MAX_ACCEPTED_VALUE_EXCEEDED))}}},{key:"onDuplicate",value:function(){E()(_()(t.prototype),"onDuplicate",this).call(this),this.hasProperty("configuration.isLimitSubmissionsEnabled")&&(this.hasProperty("configuration.currentSubmissionsValue")&&this.setProperty("configuration.currentSubmissionsValue",null),this.updateInstructionsText())}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"setupI18n",value:function(){var e=this;if(this.hasProperty("configuration.isLimitSubmissionsEnabled")&&this.getProperty("configuration.isLimitSubmissionsEnabled")){var i=this.hasProperty("configuration.limitSubmissionsTotal")&&this.getProperty("configuration.limitSubmissionsTotal")||null,n=this.hasProperty("configuration.currentSubmissionsValue")&&this.getProperty("configuration.currentSubmissionsValue")||null,a=null!==i?Math.max(0,i-n):null;setTimeout((function(){var t="".concat(e.getForm().getEngine().getI18n().translateText("textdef_41")," ").concat(a);e.instructionsDOMNode.textContent=t}),100)}return E()(_()(t.prototype),"setupI18n",this).call(this)}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.setReadonly(e)}},{key:"isReadonly",value:function(){return this.input.readOnly}},{key:"setReadonly",value:function(e){return this.input.readOnly=e,this}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_NUMBER,name:"Number",isContainer:!1,category:"advanced",keywords:"number quantity",icon:"i123-editor_field_number",isVirtual:!1,i18nName:"edt_UI_control_type_number_name",i18nKeywords:"edt_UI_control_type_number_keywords",index:90,accessibilityFields:O.q.ERROR_NODE}}}]),t}(vt);v()(Ci,"attributes",{}),v()(Ci,"runtime",null),v()(Ci,"nodeName","number");var Ni=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"getElementName",value:function(){return"Page break"}},{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_PAGE_BREAK}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"isSelectable",value:function(){return!1}},{key:"onReset",value:function(){}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"enumerateTranslations",value:function(){return[]}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_PAGE_BREAK,name:"Page Break",isContainer:!1,category:"other",keywords:"page break",icon:"i123-editor_field_pagebreak",isVirtual:!1,i18nName:"edt_UI_control_type_page_break_name",i18nKeywords:"edt_UI_control_type_page_break_keywords",index:220,accessibilityFields:O.q.NONE}}},{key:"getDropDestinationCSSSelector",value:function(){return"#form > div[data-role=page] > div[data-role=page-body] > div[data-role=container][data-type=virtual-form-table-row]"}},{key:"getDropSupportedEdges",value:function(){return[O.k.TOP,O.k.BOTTOM]}}]),t}(mt);v()(Ni,"attributes",{}),v()(Ni,"runtime",null),v()(Ni,"nodeName","page-break");var Ai=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","password-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","password-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","password-".concat(a,"-instr-acc")),n.input=document.createElement("input"),n.input.setAttribute("type","password"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("aria-labelledby","password-".concat(a,"-acc ")+"password-".concat(a,"-error-acc ")+"password-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_PASSWORD}},{key:"getElementName",value:function(){return"Password"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.w.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateHiddenAttribute(),this.updateShowInstructionsOnClick(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.synchronizeValue():this.onValueChanged(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(re.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY_INCLUDING_BLANK_PASSWORDS),e.getValidatorById(re.VALIDATOR_TYPE_PASSWORD_ANY_COMPLEXITY),e.getValidatorById(re.VALIDATOR_TYPE_PASSWORD_MIN_COMPLEXITY),e.getValidatorById(re.VALIDATOR_TYPE_PASSWORD_MED_COMPLEXITY),e.getValidatorById(re.VALIDATOR_TYPE_PASSWORD_CORPORATE_COMPLEXITY)]}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.validateValue(),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"validateValue",value:function(){var e=this.getProperty("configuration.minLength"),t=this.getProperty("configuration.maxLength"),i=this.getProperty("value.value")||"";i?(null!=t&&t>0&&(i.length>t?this.addError(it.ERR_TOO_MANY_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_71",String(t))||"You have more characters than allowed."):this.removeError(it.ERR_TOO_MANY_CHARACTERS)),null!=e&&e>0&&(i.length<e?this.addError(it.ERR_TOO_FEW_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_70",String(e))||"You have fewer characters than allowed."):this.removeError(it.ERR_TOO_FEW_CHARACTERS))):(this.removeError(it.ERR_TOO_MANY_CHARACTERS),this.removeError(it.ERR_TOO_FEW_CHARACTERS))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.setValue({value:null}),this.input.value=null}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_password_name")),this.updateLabelText(),this}},{key:"onBlur",value:function(){this.checkIfElementValueIsSynchronized()}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"onReadonlyStateChanged",value:function(){this.input.readOnly=!!this.getProperty("options.readOnly")}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_PASSWORD,name:"Password",isContainer:!1,category:"advanced",keywords:"password",icon:"i123-editor_field_password",isVirtual:!1,i18nName:"edt_UI_control_type_password_name",i18nKeywords:"edt_UI_control_type_password_keywords",index:180,accessibilityFields:O.q.ERROR_NODE}}}]),t}(vt);v()(Ai,"attributes",{}),v()(Ai,"runtime",null),v()(Ai,"nodeName","password");var Ri=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","phone-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","phone-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","phone-".concat(a,"-instr-acc")),n.input=document.createElement("input"),n.input.setAttribute("type","text"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("aria-labelledby","phone-".concat(a,"-acc ")+"phone-".concat(a,"-format-acc ")+"phone-".concat(a,"-error-acc ")+"phone-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_PHONE}},{key:"getElementName",value:function(){return"Phone"}},{key:"onBlur",value:function(){this.validateInput()}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.onValidationChanged(),this.clearValue(),this.synchronizeValue(),this.updateHiddenAttribute(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_2_2_4),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_2_3_4),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_2_3_8),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_2_4_4),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_2_5_4),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_3_3_4),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_3_3_3),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_3_3_7),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_3_4_4),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_3_2_4),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_3_2_6),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_3_2_7),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_3_5_4),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_4_3_4),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_4_3_6),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_4_3_7),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_4_2_8),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_4_4_6),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_5_3_3),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_5_4_4),e.getValidatorById(re.VALIDATOR_TYPE_PHONE_FORMAT_5_6)]}},{key:"getDigitGroups",value:function(e){switch(e){case re.VALIDATOR_TYPE_PHONE_FORMAT_2_2_4:return[2,2,4];case re.VALIDATOR_TYPE_PHONE_FORMAT_2_3_4:return[2,3,4];case re.VALIDATOR_TYPE_PHONE_FORMAT_2_3_8:return[2,3,8];case re.VALIDATOR_TYPE_PHONE_FORMAT_2_4_4:return[2,4,4];case re.VALIDATOR_TYPE_PHONE_FORMAT_2_5_4:return[2,5,4];case re.VALIDATOR_TYPE_PHONE_FORMAT_3_3_4:return[3,3,4];case re.VALIDATOR_TYPE_PHONE_FORMAT_3_3_3:return[3,3,3];case re.VALIDATOR_TYPE_PHONE_FORMAT_3_3_7:return[3,3,7];case re.VALIDATOR_TYPE_PHONE_FORMAT_3_4_4:return[3,4,4];case re.VALIDATOR_TYPE_PHONE_FORMAT_3_2_4:return[3,2,4];case re.VALIDATOR_TYPE_PHONE_FORMAT_3_2_6:return[3,2,6];case re.VALIDATOR_TYPE_PHONE_FORMAT_3_2_7:return[3,2,7];case re.VALIDATOR_TYPE_PHONE_FORMAT_3_5_4:return[3,5,4];case re.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3:return[4,3,3];case re.VALIDATOR_TYPE_PHONE_FORMAT_4_3_4:return[4,3,4];case re.VALIDATOR_TYPE_PHONE_FORMAT_4_3_6:return[4,3,6];case re.VALIDATOR_TYPE_PHONE_FORMAT_4_3_7:return[4,3,7];case re.VALIDATOR_TYPE_PHONE_FORMAT_4_2_8:return[4,2,8];case re.VALIDATOR_TYPE_PHONE_FORMAT_4_4_6:return[4,4,6];case re.VALIDATOR_TYPE_PHONE_FORMAT_5_3_3:return[5,3,3];case re.VALIDATOR_TYPE_PHONE_FORMAT_5_4_4:return[5,4,4];case re.VALIDATOR_TYPE_PHONE_FORMAT_5_6:return[5,6];default:return null}}},{key:"onValidationChanged",value:function(){for(var e="",i=this.getDigitGroups(this.getProperty("validation.type")||re.VALIDATOR_TYPE_PHONE_FORMAT_4_3_3)||t.DEFAULT_MASK_FORMAT,n=0,a=i.length;n<a;n++)e+="".concat(this.strRepeat("#",i[n])," ");this.input.placeholder=e,this.updatePhoneFormatAccessibility(i)}},{key:"strRepeat",value:function(e,t){var i="";e=String(e||"");for(var n=0;n<t;n++)i+=e;return i}},{key:"getFormattedPhoneNumberAccordingToValidationType",value:function(e){var t=String(e||"").replace(/[^\d\+]+/g,""),i=this.getProperty("validation.type");if(!/^(\+)?([\d]+)/.test(t))return e;var n=this.getForm().getEngine().getPhoneUtils().parsePhoneNumber(t);if(null===n)return e;var a,r=this.getDigitGroups(i),o=0,s="";a=n.areaCode?"".concat(n.areaCode," "):"",n.localPhoneNumber=n.localPhoneNumber||"";for(var l=0,u=r.length;l<u;l++){for(var d=0;d<r[l]&&""!==(s=n.localPhoneNumber.charAt(o)||"");d++)o++,a+=s;if(""===s)break;a="".concat(a," ")}return a.replace(/(^[\s]+|[\s]+$)/g,"")}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{width:O.w.FULL,input:this.input}]}]}},{key:"onValueChanged",value:function(){var e=this.getFormattedPhoneNumberAccordingToValidationType(this.input.value);if(e!==this.input.value){this.input.value=e;var t=this.input;T.a.create((function(){t.focus(),t.setSelectionRange(t.value.length,t.value.length)}),0)()}e=e.replace(/ /g,"-"),this.setProperty("value.value",""===e?null:e),this.removeError(it.ERR_INVALID_PHONE_FORMAT),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"validateInput",value:function(){var e=this.getForm().getEngine().getValidator(),t=this.getProperty("value.value")||"",i=this.hasProperty("validation.type")?this.getProperty("validation.type"):null;this.hasError(it.ERR_INVALID_PHONE_FORMAT)&&this.removeError(it.ERR_INVALID_PHONE_FORMAT),t&&i&&!e.validate(t,this.getProperty("validation.type"))&&this.addError(it.ERR_INVALID_PHONE_FORMAT,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_5"),": ").concat(this.getDigitGroups(i).join(" "))||"The phone format must be ".concat(this.getDigitGroups(i).join(" ")))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.setValue({value:null})}},{key:"setupDefaults",value:function(){this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_phone_name"));var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.DEFAULT_USER_PREFERENCES);return e&&(this.setProperty("validation.type",e.phoneFormat),this.onValidationChanged()),this.updateLabelText(),this}},{key:"isCompactFieldPlaceholderSupported",value:function(){return!1}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getFormattedPhoneNumberAccordingToValidationType(this.getProperty("value.value")))}},{key:"setValue",value:function(e){E()(_()(t.prototype),"setValue",this).call(this,e),this.validateInput()}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"updatePhoneFormatAccessibility",value:function(e){var t=document.createElement("span");t.setAttribute("id","phone-".concat(this.getHash(),"-format-acc")),t.textContent="Format ".concat(e[0]," ").concat(e[1]," ").concat(e[2]),t.style.display="none",this.input.appendChild(t)}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"onReadonlyStateChanged",value:function(){this.input.readOnly=!!this.getProperty("options.readOnly")}},{key:"clearValue",value:function(){this.setProperty("value.value",null)}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_PHONE,name:"Phone",isContainer:!1,category:"advanced",keywords:"phone number",icon:"i123-phone",isVirtual:!1,i18nName:"edt_UI_control_type_phone_name",i18nKeywords:"edt_UI_control_type_phone_keywords",index:130,accessibilityFields:O.q.ERROR_NODE}}}]),t}(mt);v()(Ri,"DEFAULT_MASK_FORMAT",[4,3,3]),v()(Ri,"attributes",{}),v()(Ri,"runtime",null),v()(Ri,"nodeName","phone");var Ii=function(){function e(t){o()(this,e),v()(this,"i18n",void 0),v()(this,"cache",void 0),this.i18n=t}return l()(e,[{key:"getCurrencyById",value:function(t){return e.$ID_TO_ISO_CODE[t]?-1===e.$SUPPORTED_CURRENCIES.indexOf(e.$ID_TO_ISO_CODE[t])?null:{id:t,isoCode:e.$ID_TO_ISO_CODE[t],name:e.$ISO_CODE_TO_FULL_NAME[e.$ID_TO_ISO_CODE[t]],isOther:!1,i18n:e.$ISO_CODE_TO_NAME_I18N[e.$ID_TO_ISO_CODE[t]],symbol:e.$ID_TO_SYMBOL[t]}:null}},{key:"getCurrencyByCode",value:function(t){var i=String(t||"").toUpperCase();if(e.$SUPPORTED_CURRENCIES.indexOf(i)>-1){var n=null;for(var a in e.$ID_TO_ISO_CODE)if(e.$ID_TO_ISO_CODE.hasOwnProperty(a)&&e.$ID_TO_ISO_CODE[a]===i){n=parseInt(a);break}return null===n?null:{id:n,isoCode:i,name:e.$ISO_CODE_TO_FULL_NAME[i],isOther:!1,i18n:e.$ISO_CODE_TO_NAME_I18N[i],symbol:e.$ID_TO_SYMBOL[n]}}return null}},{key:"enumerateCurrencies",value:function(){if(void 0!==this.cache)return JSON.parse(JSON.stringify(this.cache));this.cache=[];for(var t=0,i=e.$SUPPORTED_CURRENCIES.length;t<i;t++)this.cache.push(this.getCurrencyByCode(e.$SUPPORTED_CURRENCIES[t]));return JSON.parse(JSON.stringify(this.cache))}},{key:"getCurrencySymbolById",value:function(e){var t=this.getCurrencyById(e);return t?t.symbol:""}}],[{key:"share",value:function(t){return void 0!==e.instance?e.instance:(e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_USD]=e.CURRENCY_USD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_EUR]=e.CURRENCY_EUR,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_GBP]=e.CURRENCY_GBP,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_AUD]=e.CURRENCY_AUD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_JPY]=e.CURRENCY_JPY,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_CAD]=e.CURRENCY_CAD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_NZD]=e.CURRENCY_NZD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_HKD]=e.CURRENCY_HKD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_SGD]=e.CURRENCY_SGD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_MXN]=e.CURRENCY_MXN,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_DKK]=e.CURRENCY_DKK,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_NOK]=e.CURRENCY_NOK,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_MYR]=e.CURRENCY_MYR,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_TWD]=e.CURRENCY_TWD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_THB]=e.CURRENCY_THB,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_ILS]=e.CURRENCY_ILS,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_CHF]=e.CURRENCY_CHF,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_BRL]=e.CURRENCY_BRL,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_RON]=e.CURRENCY_RON,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_PGK]=e.CURRENCY_PGK,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_INR]=e.CURRENCY_INR,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_MUR]=e.CURRENCY_MUR,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_CZK]=e.CURRENCY_CZK,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_DOP]=e.CURRENCY_DOP,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_ZAR]=e.CURRENCY_ZAR,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_TRY]=e.CURRENCY_TRY,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_SEK]=e.CURRENCY_SEK,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_PLN]=e.CURRENCY_PLN,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_PHP]=e.CURRENCY_PHP,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_AED]=e.CURRENCY_AED,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_ARS]=e.CURRENCY_ARS,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_RUB]=e.CURRENCY_RUB,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_XCD]=e.CURRENCY_XCD,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_BGN]=e.CURRENCY_BGN,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_HUF]=e.CURRENCY_HUF,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_COP]=e.CURRENCY_COP,e.$ISO_CODE_TO_ID[e.CURRENCY_CODE_CNY]=e.CURRENCY_CNY,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_USD]=e.CURRENCY_FULL_NAME_USD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_EUR]=e.CURRENCY_FULL_NAME_EUR,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_GBP]=e.CURRENCY_FULL_NAME_GBP,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_AUD]=e.CURRENCY_FULL_NAME_AUD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_JPY]=e.CURRENCY_FULL_NAME_JPY,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_CAD]=e.CURRENCY_FULL_NAME_CAD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_NZD]=e.CURRENCY_FULL_NAME_NZD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_HKD]=e.CURRENCY_FULL_NAME_HKD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_SGD]=e.CURRENCY_FULL_NAME_SGD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_MXN]=e.CURRENCY_FULL_NAME_MXN,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_DKK]=e.CURRENCY_FULL_NAME_DKK,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_NOK]=e.CURRENCY_FULL_NAME_NOK,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_MYR]=e.CURRENCY_FULL_NAME_MYR,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_TWD]=e.CURRENCY_FULL_NAME_TWD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_THB]=e.CURRENCY_FULL_NAME_THB,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_ILS]=e.CURRENCY_FULL_NAME_ILS,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_CHF]=e.CURRENCY_FULL_NAME_CHF,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_BRL]=e.CURRENCY_FULL_NAME_BRL,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_RON]=e.CURRENCY_FULL_NAME_RON,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_PGK]=e.CURRENCY_FULL_NAME_PGK,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_INR]=e.CURRENCY_FULL_NAME_INR,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_MUR]=e.CURRENCY_FULL_NAME_MUR,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_CZK]=e.CURRENCY_FULL_NAME_CZK,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_DOP]=e.CURRENCY_FULL_NAME_DOP,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_ZAR]=e.CURRENCY_FULL_NAME_ZAR,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_TRY]=e.CURRENCY_FULL_NAME_TRY,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_SEK]=e.CURRENCY_FULL_NAME_SEK,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_PLN]=e.CURRENCY_FULL_NAME_PLN,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_PHP]=e.CURRENCY_FULL_NAME_PHP,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_AED]=e.CURRENCY_FULL_NAME_AED,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_ARS]=e.CURRENCY_FULL_NAME_ARS,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_RUB]=e.CURRENCY_FULL_NAME_RUB,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_XCD]=e.CURRENCY_FULL_NAME_XCD,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_BGN]=e.CURRENCY_FULL_NAME_BGN,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_HUF]=e.CURRENCY_FULL_NAME_HUF,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_COP]=e.CURRENCY_FULL_NAME_COP,e.$ISO_CODE_TO_FULL_NAME[e.CURRENCY_CODE_CNY]=e.CURRENCY_FULL_NAME_CNY,e.$ID_TO_ISO_CODE[e.CURRENCY_USD]=e.CURRENCY_CODE_USD,e.$ID_TO_ISO_CODE[e.CURRENCY_EUR]=e.CURRENCY_CODE_EUR,e.$ID_TO_ISO_CODE[e.CURRENCY_GBP]=e.CURRENCY_CODE_GBP,e.$ID_TO_ISO_CODE[e.CURRENCY_AUD]=e.CURRENCY_CODE_AUD,e.$ID_TO_ISO_CODE[e.CURRENCY_JPY]=e.CURRENCY_CODE_JPY,e.$ID_TO_ISO_CODE[e.CURRENCY_CAD]=e.CURRENCY_CODE_CAD,e.$ID_TO_ISO_CODE[e.CURRENCY_NZD]=e.CURRENCY_CODE_NZD,e.$ID_TO_ISO_CODE[e.CURRENCY_HKD]=e.CURRENCY_CODE_HKD,e.$ID_TO_ISO_CODE[e.CURRENCY_SGD]=e.CURRENCY_CODE_SGD,e.$ID_TO_ISO_CODE[e.CURRENCY_MXN]=e.CURRENCY_CODE_MXN,e.$ID_TO_ISO_CODE[e.CURRENCY_DKK]=e.CURRENCY_CODE_DKK,e.$ID_TO_ISO_CODE[e.CURRENCY_NOK]=e.CURRENCY_CODE_NOK,e.$ID_TO_ISO_CODE[e.CURRENCY_MYR]=e.CURRENCY_CODE_MYR,e.$ID_TO_ISO_CODE[e.CURRENCY_TWD]=e.CURRENCY_CODE_TWD,e.$ID_TO_ISO_CODE[e.CURRENCY_THB]=e.CURRENCY_CODE_THB,e.$ID_TO_ISO_CODE[e.CURRENCY_ILS]=e.CURRENCY_CODE_ILS,e.$ID_TO_ISO_CODE[e.CURRENCY_CHF]=e.CURRENCY_CODE_CHF,e.$ID_TO_ISO_CODE[e.CURRENCY_BRL]=e.CURRENCY_CODE_BRL,e.$ID_TO_ISO_CODE[e.CURRENCY_RON]=e.CURRENCY_CODE_RON,e.$ID_TO_ISO_CODE[e.CURRENCY_PGK]=e.CURRENCY_CODE_PGK,e.$ID_TO_ISO_CODE[e.CURRENCY_INR]=e.CURRENCY_CODE_INR,e.$ID_TO_ISO_CODE[e.CURRENCY_MUR]=e.CURRENCY_CODE_MUR,e.$ID_TO_ISO_CODE[e.CURRENCY_CZK]=e.CURRENCY_CODE_CZK,e.$ID_TO_ISO_CODE[e.CURRENCY_DOP]=e.CURRENCY_CODE_DOP,e.$ID_TO_ISO_CODE[e.CURRENCY_ZAR]=e.CURRENCY_CODE_ZAR,e.$ID_TO_ISO_CODE[e.CURRENCY_TRY]=e.CURRENCY_CODE_TRY,e.$ID_TO_ISO_CODE[e.CURRENCY_SEK]=e.CURRENCY_CODE_SEK,e.$ID_TO_ISO_CODE[e.CURRENCY_PLN]=e.CURRENCY_CODE_PLN,e.$ID_TO_ISO_CODE[e.CURRENCY_PHP]=e.CURRENCY_CODE_PHP,e.$ID_TO_ISO_CODE[e.CURRENCY_AED]=e.CURRENCY_CODE_AED,e.$ID_TO_ISO_CODE[e.CURRENCY_ARS]=e.CURRENCY_CODE_ARS,e.$ID_TO_ISO_CODE[e.CURRENCY_RUB]=e.CURRENCY_CODE_RUB,e.$ID_TO_ISO_CODE[e.CURRENCY_XCD]=e.CURRENCY_CODE_XCD,e.$ID_TO_ISO_CODE[e.CURRENCY_BGN]=e.CURRENCY_CODE_BGN,e.$ID_TO_ISO_CODE[e.CURRENCY_HUF]=e.CURRENCY_CODE_HUF,e.$ID_TO_ISO_CODE[e.CURRENCY_COP]=e.CURRENCY_CODE_COP,e.$ID_TO_ISO_CODE[e.CURRENCY_CNY]=e.CURRENCY_CODE_CNY,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_USD]=e.CURRENCY_NAME_I18N_USD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_EUR]=e.CURRENCY_NAME_I18N_EUR,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_GBP]=e.CURRENCY_NAME_I18N_GBP,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_AUD]=e.CURRENCY_NAME_I18N_AUD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_JPY]=e.CURRENCY_NAME_I18N_JPY,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_CAD]=e.CURRENCY_NAME_I18N_CAD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_NZD]=e.CURRENCY_NAME_I18N_NZD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_HKD]=e.CURRENCY_NAME_I18N_HKD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_SGD]=e.CURRENCY_NAME_I18N_SGD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_MXN]=e.CURRENCY_NAME_I18N_MXN,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_DKK]=e.CURRENCY_NAME_I18N_DKK,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_NOK]=e.CURRENCY_NAME_I18N_NOK,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_MYR]=e.CURRENCY_NAME_I18N_MYR,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_TWD]=e.CURRENCY_NAME_I18N_TWD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_THB]=e.CURRENCY_NAME_I18N_THB,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_ILS]=e.CURRENCY_NAME_I18N_ILS,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_CHF]=e.CURRENCY_NAME_I18N_CHF,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_BRL]=e.CURRENCY_NAME_I18N_BRL,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_RON]=e.CURRENCY_NAME_I18N_RON,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_PGK]=e.CURRENCY_NAME_I18N_PGK,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_INR]=e.CURRENCY_NAME_I18N_INR,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_MUR]=e.CURRENCY_NAME_I18N_MUR,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_CZK]=e.CURRENCY_NAME_I18N_CZK,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_DOP]=e.CURRENCY_NAME_I18N_DOP,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_ZAR]=e.CURRENCY_NAME_I18N_ZAR,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_TRY]=e.CURRENCY_NAME_I18N_TRY,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_SEK]=e.CURRENCY_NAME_I18N_SEK,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_PLN]=e.CURRENCY_NAME_I18N_PLN,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_PHP]=e.CURRENCY_NAME_I18N_PHP,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_AED]=e.CURRENCY_NAME_I18N_AED,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_ARS]=e.CURRENCY_NAME_I18N_ARS,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_RUB]=e.CURRENCY_NAME_I18N_RUB,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_XCD]=e.CURRENCY_NAME_I18N_XCD,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_BGN]=e.CURRENCY_NAME_I18N_BGN,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_HUF]=e.CURRENCY_NAME_I18N_HUF,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_COP]=e.CURRENCY_NAME_I18N_COP,e.$ISO_CODE_TO_NAME_I18N[e.CURRENCY_CODE_CNY]=e.CURRENCY_NAME_I18N_CNY,e.$ID_TO_SYMBOL[e.CURRENCY_USD]=e.CURRENCY_SYMBOL_USD,e.$ID_TO_SYMBOL[e.CURRENCY_EUR]=e.CURRENCY_SYMBOL_EUR,e.$ID_TO_SYMBOL[e.CURRENCY_GBP]=e.CURRENCY_SYMBOL_GBP,e.$ID_TO_SYMBOL[e.CURRENCY_AUD]=e.CURRENCY_SYMBOL_AUD,e.$ID_TO_SYMBOL[e.CURRENCY_JPY]=e.CURRENCY_SYMBOL_JPY,e.$ID_TO_SYMBOL[e.CURRENCY_CAD]=e.CURRENCY_SYMBOL_CAD,e.$ID_TO_SYMBOL[e.CURRENCY_NZD]=e.CURRENCY_SYMBOL_NZD,e.$ID_TO_SYMBOL[e.CURRENCY_HKD]=e.CURRENCY_SYMBOL_HKD,e.$ID_TO_SYMBOL[e.CURRENCY_SGD]=e.CURRENCY_SYMBOL_SGD,e.$ID_TO_SYMBOL[e.CURRENCY_MXN]=e.CURRENCY_SYMBOL_MXN,e.$ID_TO_SYMBOL[e.CURRENCY_DKK]=e.CURRENCY_SYMBOL_DKK,e.$ID_TO_SYMBOL[e.CURRENCY_NOK]=e.CURRENCY_SYMBOL_NOK,e.$ID_TO_SYMBOL[e.CURRENCY_MYR]=e.CURRENCY_SYMBOL_MYR,e.$ID_TO_SYMBOL[e.CURRENCY_TWD]=e.CURRENCY_SYMBOL_TWD,e.$ID_TO_SYMBOL[e.CURRENCY_THB]=e.CURRENCY_SYMBOL_THB,e.$ID_TO_SYMBOL[e.CURRENCY_ILS]=e.CURRENCY_SYMBOL_ILS,e.$ID_TO_SYMBOL[e.CURRENCY_CHF]=e.CURRENCY_SYMBOL_CHF,e.$ID_TO_SYMBOL[e.CURRENCY_BRL]=e.CURRENCY_SYMBOL_BRL,e.$ID_TO_SYMBOL[e.CURRENCY_RON]=e.CURRENCY_SYMBOL_RON,e.$ID_TO_SYMBOL[e.CURRENCY_PGK]=e.CURRENCY_SYMBOL_PGK,e.$ID_TO_SYMBOL[e.CURRENCY_INR]=e.CURRENCY_SYMBOL_INR,e.$ID_TO_SYMBOL[e.CURRENCY_MUR]=e.CURRENCY_SYMBOL_MUR,e.$ID_TO_SYMBOL[e.CURRENCY_CZK]=e.CURRENCY_SYMBOL_CZK,e.$ID_TO_SYMBOL[e.CURRENCY_DOP]=e.CURRENCY_SYMBOL_DOP,e.$ID_TO_SYMBOL[e.CURRENCY_ZAR]=e.CURRENCY_SYMBOL_ZAR,e.$ID_TO_SYMBOL[e.CURRENCY_TRY]=e.CURRENCY_SYMBOL_TRY,e.$ID_TO_SYMBOL[e.CURRENCY_SEK]=e.CURRENCY_SYMBOL_SEK,e.$ID_TO_SYMBOL[e.CURRENCY_PLN]=e.CURRENCY_SYMBOL_PLN,e.$ID_TO_SYMBOL[e.CURRENCY_PHP]=e.CURRENCY_SYMBOL_PHP,e.$ID_TO_SYMBOL[e.CURRENCY_AED]=e.CURRENCY_SYMBOL_AED,e.$ID_TO_SYMBOL[e.CURRENCY_ARS]=e.CURRENCY_SYMBOL_ARS,e.$ID_TO_SYMBOL[e.CURRENCY_RUB]=e.CURRENCY_SYMBOL_RUB,e.$ID_TO_SYMBOL[e.CURRENCY_XCD]=e.CURRENCY_SYMBOL_XCD,e.$ID_TO_SYMBOL[e.CURRENCY_BGN]=e.CURRENCY_SYMBOL_BGN,e.$ID_TO_SYMBOL[e.CURRENCY_HUF]=e.CURRENCY_SYMBOL_HUF,e.$ID_TO_SYMBOL[e.CURRENCY_COP]=e.CURRENCY_SYMBOL_COP,e.$ID_TO_SYMBOL[e.CURRENCY_CNY]=e.CURRENCY_SYMBOL_CNY,e.instance=new e(t),e.instance)}}]),e}();v()(Ii,"instance",void 0),v()(Ii,"CURRENCY_CODE_USD","USD"),v()(Ii,"CURRENCY_CODE_EUR","EUR"),v()(Ii,"CURRENCY_CODE_GBP","GBP"),v()(Ii,"CURRENCY_CODE_AUD","AUD"),v()(Ii,"CURRENCY_CODE_JPY","JPY"),v()(Ii,"CURRENCY_CODE_CAD","CAD"),v()(Ii,"CURRENCY_CODE_NZD","NZD"),v()(Ii,"CURRENCY_CODE_HKD","HKD"),v()(Ii,"CURRENCY_CODE_SGD","SGD"),v()(Ii,"CURRENCY_CODE_MXN","MXN"),v()(Ii,"CURRENCY_CODE_DKK","DKK"),v()(Ii,"CURRENCY_CODE_NOK","NOK"),v()(Ii,"CURRENCY_CODE_MYR","MYR"),v()(Ii,"CURRENCY_CODE_TWD","TWD"),v()(Ii,"CURRENCY_CODE_THB","THB"),v()(Ii,"CURRENCY_CODE_ILS","ILS"),v()(Ii,"CURRENCY_CODE_CHF","CHF"),v()(Ii,"CURRENCY_CODE_BRL","BRL"),v()(Ii,"CURRENCY_CODE_RON","RON"),v()(Ii,"CURRENCY_CODE_PGK","PGK"),v()(Ii,"CURRENCY_CODE_INR","INR"),v()(Ii,"CURRENCY_CODE_MUR","MUR"),v()(Ii,"CURRENCY_CODE_CZK","CZK"),v()(Ii,"CURRENCY_CODE_DOP","DOP"),v()(Ii,"CURRENCY_CODE_ZAR","ZAR"),v()(Ii,"CURRENCY_CODE_SEK","SEK"),v()(Ii,"CURRENCY_CODE_PLN","PLN"),v()(Ii,"CURRENCY_CODE_PHP","PHP"),v()(Ii,"CURRENCY_CODE_TRY","TRY"),v()(Ii,"CURRENCY_CODE_AED","AED"),v()(Ii,"CURRENCY_CODE_ARS","ARS"),v()(Ii,"CURRENCY_CODE_RUB","RUB"),v()(Ii,"CURRENCY_CODE_XCD","XCD"),v()(Ii,"CURRENCY_CODE_BGN","BGN"),v()(Ii,"CURRENCY_CODE_HUF","HUF"),v()(Ii,"CURRENCY_CODE_CNY","CNY"),v()(Ii,"CURRENCY_CODE_COP","COP"),v()(Ii,"CURRENCY_FULL_NAME_USD","United States Dollar"),v()(Ii,"CURRENCY_FULL_NAME_EUR","Euro"),v()(Ii,"CURRENCY_FULL_NAME_GBP","United Kingdom Pound"),v()(Ii,"CURRENCY_FULL_NAME_AUD","Australia Dollar"),v()(Ii,"CURRENCY_FULL_NAME_JPY","Japan Yen"),v()(Ii,"CURRENCY_FULL_NAME_CAD","Canada Dollar"),v()(Ii,"CURRENCY_FULL_NAME_NZD","New Zealand Dollar"),v()(Ii,"CURRENCY_FULL_NAME_HKD","Hong Kong Dollar"),v()(Ii,"CURRENCY_FULL_NAME_SGD","Singapore Dollar"),v()(Ii,"CURRENCY_FULL_NAME_MXN","Mexico Peso"),v()(Ii,"CURRENCY_FULL_NAME_DKK","Denmark Krone"),v()(Ii,"CURRENCY_FULL_NAME_NOK","Norway Krone"),v()(Ii,"CURRENCY_FULL_NAME_MYR","Malaysia Ringgit"),v()(Ii,"CURRENCY_FULL_NAME_TWD","Taiwan New Dollar"),v()(Ii,"CURRENCY_FULL_NAME_THB","Thailand Baht"),v()(Ii,"CURRENCY_FULL_NAME_ILS","Israel Shekel"),v()(Ii,"CURRENCY_FULL_NAME_CHF","Switzerland Franc"),v()(Ii,"CURRENCY_FULL_NAME_BRL","Brazil Real"),v()(Ii,"CURRENCY_FULL_NAME_RON","Romania Leu"),v()(Ii,"CURRENCY_FULL_NAME_PGK","Papua New Guinea Kina"),v()(Ii,"CURRENCY_FULL_NAME_INR","Indian Rupee"),v()(Ii,"CURRENCY_FULL_NAME_MUR","Mauritian Rupee"),v()(Ii,"CURRENCY_FULL_NAME_CZK","Czech Republic Koruna"),v()(Ii,"CURRENCY_FULL_NAME_DOP","Dominican Republic Peso"),v()(Ii,"CURRENCY_FULL_NAME_ZAR","South Africa Rand"),v()(Ii,"CURRENCY_FULL_NAME_TRY","Turkey Lira"),v()(Ii,"CURRENCY_FULL_NAME_SEK","Sweden Krona"),v()(Ii,"CURRENCY_FULL_NAME_PLN","Poland Zloty"),v()(Ii,"CURRENCY_FULL_NAME_PHP","Philippines Peso"),v()(Ii,"CURRENCY_FULL_NAME_AED","United Arab Emirates Dirham"),v()(Ii,"CURRENCY_FULL_NAME_ARS","Argentina Peso"),v()(Ii,"CURRENCY_FULL_NAME_RUB","Russia Ruble"),v()(Ii,"CURRENCY_FULL_NAME_XCD","East Caribbean Dollar"),v()(Ii,"CURRENCY_FULL_NAME_BGN","Bulgaria Lev"),v()(Ii,"CURRENCY_FULL_NAME_HUF","Hungary Forint"),v()(Ii,"CURRENCY_FULL_NAME_CNY","Chinese Yuan"),v()(Ii,"CURRENCY_FULL_NAME_COP","Colombian Pesos"),v()(Ii,"CURRENCY_NAME_I18N_USD","payments_currency01"),v()(Ii,"CURRENCY_NAME_I18N_EUR","payments_currency02"),v()(Ii,"CURRENCY_NAME_I18N_GBP","payments_currency03"),v()(Ii,"CURRENCY_NAME_I18N_AUD","payments_currency04"),v()(Ii,"CURRENCY_NAME_I18N_JPY","payments_currency05"),v()(Ii,"CURRENCY_NAME_I18N_CAD","payments_currency06"),v()(Ii,"CURRENCY_NAME_I18N_NZD","payments_currency07"),v()(Ii,"CURRENCY_NAME_I18N_HKD","payments_currency08"),v()(Ii,"CURRENCY_NAME_I18N_SGD","payments_currency09"),v()(Ii,"CURRENCY_NAME_I18N_MXN","payments_currency10"),v()(Ii,"CURRENCY_NAME_I18N_DKK","payments_currency11"),v()(Ii,"CURRENCY_NAME_I18N_NOK","payments_currency13"),v()(Ii,"CURRENCY_NAME_I18N_MYR","payments_currency14"),v()(Ii,"CURRENCY_NAME_I18N_TWD","payments_currency15"),v()(Ii,"CURRENCY_NAME_I18N_THB","payments_currency16"),v()(Ii,"CURRENCY_NAME_I18N_ILS","payments_currency17"),v()(Ii,"CURRENCY_NAME_I18N_CHF","payments_currency18"),v()(Ii,"CURRENCY_NAME_I18N_BRL","payments_currency19"),v()(Ii,"CURRENCY_NAME_I18N_RON","payments_currency37"),v()(Ii,"CURRENCY_NAME_I18N_PGK","payments_currency22"),v()(Ii,"CURRENCY_NAME_I18N_INR","payments_currency23"),v()(Ii,"CURRENCY_NAME_I18N_MUR","payments_currency24"),v()(Ii,"CURRENCY_NAME_I18N_CZK","payments_currency25"),v()(Ii,"CURRENCY_NAME_I18N_DOP","payments_currency26"),v()(Ii,"CURRENCY_NAME_I18N_ZAR","payments_currency27"),v()(Ii,"CURRENCY_NAME_I18N_TRY","payments_currency28"),v()(Ii,"CURRENCY_NAME_I18N_SEK","payments_currency29"),v()(Ii,"CURRENCY_NAME_I18N_PLN","payments_currency30"),v()(Ii,"CURRENCY_NAME_I18N_PHP","payments_currency38"),v()(Ii,"CURRENCY_NAME_I18N_AED","payments_currency32"),v()(Ii,"CURRENCY_NAME_I18N_ARS","payments_currency33"),v()(Ii,"CURRENCY_NAME_I18N_RUB","payments_currency34"),v()(Ii,"CURRENCY_NAME_I18N_XCD","payments_currency36"),v()(Ii,"CURRENCY_NAME_I18N_BGN","payments_currency39"),v()(Ii,"CURRENCY_NAME_I18N_HUF","payments_currency40"),v()(Ii,"CURRENCY_NAME_I18N_CNY","payments_currency41"),v()(Ii,"CURRENCY_NAME_I18N_COP","payments_currency42"),v()(Ii,"CURRENCY_SYMBOL_USD","$"),v()(Ii,"CURRENCY_SYMBOL_EUR","\u20ac"),v()(Ii,"CURRENCY_SYMBOL_GBP","\xa3"),v()(Ii,"CURRENCY_SYMBOL_AUD","$"),v()(Ii,"CURRENCY_SYMBOL_JPY","\xa5"),v()(Ii,"CURRENCY_SYMBOL_CAD","$"),v()(Ii,"CURRENCY_SYMBOL_NZD","$"),v()(Ii,"CURRENCY_SYMBOL_HKD","$"),v()(Ii,"CURRENCY_SYMBOL_SGD","$"),v()(Ii,"CURRENCY_SYMBOL_MXN","$"),v()(Ii,"CURRENCY_SYMBOL_DKK","Kr."),v()(Ii,"CURRENCY_SYMBOL_NOK","kr"),v()(Ii,"CURRENCY_SYMBOL_MYR","RM"),v()(Ii,"CURRENCY_SYMBOL_TWD","NT$"),v()(Ii,"CURRENCY_SYMBOL_THB","\u0e3f"),v()(Ii,"CURRENCY_SYMBOL_ILS","\u20aa"),v()(Ii,"CURRENCY_SYMBOL_CHF","SFr."),v()(Ii,"CURRENCY_SYMBOL_BRL","R$"),v()(Ii,"CURRENCY_SYMBOL_RON","lei"),v()(Ii,"CURRENCY_SYMBOL_PGK","K"),v()(Ii,"CURRENCY_SYMBOL_INR","\u20b9"),v()(Ii,"CURRENCY_SYMBOL_MUR","\u20a8"),v()(Ii,"CURRENCY_SYMBOL_CZK","K\u010d"),v()(Ii,"CURRENCY_SYMBOL_DOP","RD$"),v()(Ii,"CURRENCY_SYMBOL_ZAR","R"),v()(Ii,"CURRENCY_SYMBOL_SEK","kr"),v()(Ii,"CURRENCY_SYMBOL_PLN","z\u0142"),v()(Ii,"CURRENCY_SYMBOL_PHP","\u20b1"),v()(Ii,"CURRENCY_SYMBOL_TRY","\u20ba"),v()(Ii,"CURRENCY_SYMBOL_AED","\u062f.\u0625"),v()(Ii,"CURRENCY_SYMBOL_ARS","$"),v()(Ii,"CURRENCY_SYMBOL_RUB","\u20bd"),v()(Ii,"CURRENCY_SYMBOL_XCD","$"),v()(Ii,"CURRENCY_SYMBOL_BGN","\u043b\u0432"),v()(Ii,"CURRENCY_SYMBOL_HUF","Ft"),v()(Ii,"CURRENCY_SYMBOL_CNY","\uffe5"),v()(Ii,"CURRENCY_SYMBOL_COP","COP"),v()(Ii,"$SUPPORTED_CURRENCIES",[Ii.CURRENCY_CODE_ARS,Ii.CURRENCY_CODE_AUD,Ii.CURRENCY_CODE_BRL,Ii.CURRENCY_CODE_BGN,Ii.CURRENCY_CODE_CAD,Ii.CURRENCY_CODE_CNY,Ii.CURRENCY_CODE_COP,Ii.CURRENCY_CODE_CZK,Ii.CURRENCY_CODE_DKK,Ii.CURRENCY_CODE_DOP,Ii.CURRENCY_CODE_XCD,Ii.CURRENCY_CODE_EUR,Ii.CURRENCY_CODE_HKD,Ii.CURRENCY_CODE_HUF,Ii.CURRENCY_CODE_INR,Ii.CURRENCY_CODE_ILS,Ii.CURRENCY_CODE_JPY,Ii.CURRENCY_CODE_PGK,Ii.CURRENCY_CODE_MYR,Ii.CURRENCY_CODE_MUR,Ii.CURRENCY_CODE_MXN,Ii.CURRENCY_CODE_NZD,Ii.CURRENCY_CODE_NOK,Ii.CURRENCY_CODE_PHP,Ii.CURRENCY_CODE_PLN,Ii.CURRENCY_CODE_GBP,Ii.CURRENCY_CODE_RON,Ii.CURRENCY_CODE_RUB,Ii.CURRENCY_CODE_SGD,Ii.CURRENCY_CODE_ZAR,Ii.CURRENCY_CODE_CHF,Ii.CURRENCY_CODE_SEK,Ii.CURRENCY_CODE_TWD,Ii.CURRENCY_CODE_THB,Ii.CURRENCY_CODE_TRY,Ii.CURRENCY_CODE_AED,Ii.CURRENCY_CODE_USD]),v()(Ii,"CURRENCY_USD",1),v()(Ii,"CURRENCY_EUR",2),v()(Ii,"CURRENCY_GBP",3),v()(Ii,"CURRENCY_AUD",4),v()(Ii,"CURRENCY_JPY",5),v()(Ii,"CURRENCY_CAD",6),v()(Ii,"CURRENCY_NZD",7),v()(Ii,"CURRENCY_HKD",8),v()(Ii,"CURRENCY_SGD",9),v()(Ii,"CURRENCY_MXN",10),v()(Ii,"CURRENCY_DKK",11),v()(Ii,"CURRENCY_NOK",13),v()(Ii,"CURRENCY_MYR",14),v()(Ii,"CURRENCY_TWD",15),v()(Ii,"CURRENCY_THB",16),v()(Ii,"CURRENCY_ILS",17),v()(Ii,"CURRENCY_CHF",18),v()(Ii,"CURRENCY_BRL",19),v()(Ii,"CURRENCY_RON",20),v()(Ii,"CURRENCY_PGK",22),v()(Ii,"CURRENCY_INR",23),v()(Ii,"CURRENCY_MUR",24),v()(Ii,"CURRENCY_CZK",25),v()(Ii,"CURRENCY_DOP",26),v()(Ii,"CURRENCY_ZAR",27),v()(Ii,"CURRENCY_TRY",28),v()(Ii,"CURRENCY_SEK",29),v()(Ii,"CURRENCY_PLN",30),v()(Ii,"CURRENCY_PHP",31),v()(Ii,"CURRENCY_AED",32),v()(Ii,"CURRENCY_ARS",33),v()(Ii,"CURRENCY_RUB",34),v()(Ii,"CURRENCY_XCD",36),v()(Ii,"CURRENCY_BGN",37),v()(Ii,"CURRENCY_HUF",38),v()(Ii,"CURRENCY_CNY",39),v()(Ii,"CURRENCY_COP",40),v()(Ii,"$ID_TO_ISO_CODE",{}),v()(Ii,"$ID_TO_SYMBOL",{}),v()(Ii,"$ISO_CODE_TO_ID",{}),v()(Ii,"$ISO_CODE_TO_FULL_NAME",{}),v()(Ii,"$ISO_CODE_TO_NAME_I18N",{});var bi=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"priceInput",void 0),v()(h()(n),"priceContainer",void 0),v()(h()(n),"currencyLabel",void 0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","price-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","price-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","price-".concat(a,"-instr-acc")),n.priceInput=document.createElement("input"),n.priceInput.setAttribute("type","text"),n.priceInput.setAttribute("data-role","i123-input"),n.priceInput.setAttribute("data-no-theme",""),n.priceInput.setAttribute("data-index",String("".concat(t.INDEX_FLOAT_PART,",").concat(t.INDEX_FIXED_PART,",").concat(t.INDEX_DECIMAL_PART))),n.currencyLabel=document.createElement("span"),n.currencyLabel.setAttribute("data-role","currency-code"),n.currencyLabel.setAttribute("id","price-".concat(a,"-currency-acc")),n.priceContainer=document.createElement("div"),n.priceContainer.setAttribute("data-role","price-container"),n.priceContainer.setAttribute("data-ui-role","ui-element"),n.priceContainer.appendChild(n.currencyLabel),n.priceContainer.appendChild(n.priceInput),n.priceInput.setAttribute("aria-labelledby","price-".concat(a,"-acc ")+"price-".concat(a,"-error-acc ")+"price-".concat(a,"-instr-acc ")+"price-".concat(a,"-currency-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_PRICE}},{key:"getElementName",value:function(){return"Price"}},{key:"updateCurrencyLabel",value:function(){var e=this.getProperty("options.intendedCurrencyISOCode")||Ii.CURRENCY_CODE_USD;this.currencyLabel.textContent=e}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateCurrencyLabel(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.clearValue(),this.updatePlaceholderValue(),this.addEventListeners(),this.synchronizeValue()}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.priceContainer,width:O.w.FULL}]}]}},{key:"onValueChanged",value:function(){var e=this.priceInput.value,i=this.getProperty("options.hideDecimals"),n=[],a=null,r=parseFloat(e),o=parseInt(String(r));if(""!==e)if(isFinite(r))if(r<0)this.addError(it.ERR_NEGATIVE_PRICE,this.getForm().getEngine().getI18n().translateText("textdef_224")||"Negative price is not allowed"),n.push(it.ERR_NEGATIVE_PRICE);else if(!i&&/\.[\d]{3,}(.*)?$/.test(e))this.addError(it.ERR_PRICE_TOO_MANY_DECIMALS,this.getForm().getEngine().getI18n().translateText("textdef_219")||"Maximum 2 decimals are allowed"),n.push(it.ERR_PRICE_TOO_MANY_DECIMALS);else{var s=(e=e.replace(/^[0]+/,"")).indexOf(".")>-1?e.replace(/\.\d{1}$/,(function(e){return"".concat(e,"0")})).replace(/\.$/,".00").replace(".",""):"".concat(e,"00");(a=Math.round(100*r))>=100&&(a>t.MAX_STORED_VALUE||String(a).length!==s.length)?(this.addError(it.ERR_NUMBER_TOO_BIG,this.getForm().getEngine().getI18n().translateText("textdef_73",String(t.MAX_INPUT_VALUE_STRING))||"The value you have provided is too big"),n.push(it.ERR_NUMBER_TOO_BIG)):i&&r!==o&&(this.addError(it.ERR_INTEGER_VALUE_EXPECTED,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_5"),": ").concat(this.getForm().getEngine().getI18n().translateText("textdef_223"))||"Please input an integer number"),n.push(it.ERR_INTEGER_VALUE_EXPECTED))}else this.addError(it.ERR_NUMBER_EXPECTED,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_5"),": ").concat(this.getForm().getEngine().getI18n().translateText("textdef_47"))||"Please input a number"),n.push(it.ERR_NUMBER_EXPECTED);for(var l=0,u=[it.ERR_INTEGER_VALUE_EXPECTED,it.ERR_PRICE_TOO_MANY_DECIMALS,it.ERR_NUMBER_EXPECTED,it.ERR_NEGATIVE_PRICE,it.ERR_NUMBER_TOO_BIG],d=u.length;l<d;l++)-1===n.indexOf(u[l])&&this.removeError(u[l]);n.length?(this.setProperty("value.chosenValueInMinimalPossibleRepresentation",null),this.setProperty("value.chosenCurrency",null)):(this.setProperty("value.chosenCurrency",this.getProperty("options.intendedCurrencyISOCode")),this.setProperty("value.chosenValueInMinimalPossibleRepresentation",a)),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"addEventListeners",value:function(){var e=this;this.priceInput.addEventListener("keydown",(function(t){var i=e.priceInput.value,n=t.keyCode||t.charCode,a=!e.getProperty("options.hideDecimals"),r=i.indexOf(".")>-1;if(t.shiftKey&&n!==Ye.KEY_TAB)return t.preventDefault(),void t.stopPropagation();switch(n){case Ye.KEY_0:case Ye.KEY_1:case Ye.KEY_2:case Ye.KEY_3:case Ye.KEY_4:case Ye.KEY_5:case Ye.KEY_6:case Ye.KEY_7:case Ye.KEY_8:case Ye.KEY_9:if(t.shiftKey)return t.preventDefault(),void t.stopPropagation();case Ye.KEY_PAD_0:case Ye.KEY_PAD_1:case Ye.KEY_PAD_2:case Ye.KEY_PAD_3:case Ye.KEY_PAD_4:case Ye.KEY_PAD_5:case Ye.KEY_PAD_6:case Ye.KEY_PAD_7:case Ye.KEY_PAD_8:case Ye.KEY_PAD_9:case Ye.KEY_BACKSPACE:case Ye.KEY_DELETE:case Ye.KEY_LEFT:case Ye.KEY_RIGHT:case Ye.KEY_HOME:case Ye.KEY_END:case Ye.KEY_TAB:break;case Ye.KEY_UP:isFinite(parseFloat(e.priceInput.value))&&!e.readOnly&&(e.priceInput.value=String(parseFloat(i)+1));break;case Ye.KEY_DOWN:isFinite(parseFloat(e.priceInput.value))&&parseFloat(e.priceInput.value)-1>=0&&!e.readOnly&&(e.priceInput.value=String(parseFloat(i)-1));break;case Ye.KEY_DOT:case Ye.KEY_PAD_DOT:if(a&&!r)return;default:t.stopPropagation(),t.preventDefault()}})),function(e,t){e(t.priceInput).on("focus",(function(){e(t.rootNode).find("div[data-role=price-container]").attr("data-is-focused-child-element","1")})).on("blur",(function(){e(t.rootNode).find("div[data-role=price-container]").removeAttr("data-is-focused-child-element")}))}(lt.getJQuery(),this)}},{key:"enumerateIndexes",value:function(){return[t.INDEX_FLOAT_PART,t.INDEX_FIXED_PART,t.INDEX_DECIMAL_PART]}},{key:"getIntPartAsString",value:function(){var e=this.getProperty("value.chosenValueInMinimalPossibleRepresentation");return null===e?null:(e/100).toFixed(0)}},{key:"setIntPartFromString",value:function(e){var t=parseInt(e);if(isFinite(t)&&t>=0){var i=this.getProperty("value.chosenValueInMinimalPossibleRepresentation");if(null===i)i=100*t;else i=100*t+i%100;this.setProperty("value.chosenValueInMinimalPossibleRepresentation",i),this.synchronizeValue()}else console.warn("Invalid int part value: ".concat(JSON.stringify(e),": sint >=0 expected!"))}},{key:"getDecimalPartAsString",value:function(){var e=this.getProperty("value.chosenValueInMinimalPossibleRepresentation");return this.getProperty("options.hideDecimals")?"":null!==e&&isFinite(e)?String(e%100):""}},{key:"setDecimalPartAsString",value:function(e){var t=this.getProperty("value.chosenValueInMinimalPossibleRepresentation");if(!this.getProperty("options.hideDecimals")){var i=null===e?0:parseInt(e);isFinite(i)&&i>=0&&i<100?(t=null===t?i:100*Math.floor(t/100)+i,this.setProperty("value.chosenValueInMinimalPossibleRepresentation",t),this.synchronizeValue()):console.warn("Invalid decimal part value: ".concat(JSON.stringify(e),": sint >=0 < 100 expected!"))}}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case t.INDEX_FLOAT_PART:return{targetPropertyFQN:"value.asFloat",type:"number",optional:!0};case t.INDEX_FIXED_PART:return{targetPropertyFQN:"value.fixedPart",type:"string",optional:!0};case t.INDEX_DECIMAL_PART:return{targetPropertyFQN:"value.decimalPart",type:"string",optional:!0};default:return null}}},{key:"updatePlaceholderValue",value:function(){var e=this.getProperty("options.hideDecimals");this.priceInput.placeholder=e?"0":"0.00"}},{key:"setupDefaults",value:function(){this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_price_name"));var e=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.DEFAULT_USER_PREFERENCES);return e&&(this.setProperty("options.intendedCurrencyISOCode",e.currency),this.updateCurrencyLabel()),this.updateLabelText(),this}},{key:"synchronizeValue",value:function(){var e=this.getProperty("value.chosenValueInMinimalPossibleRepresentation"),t=parseInt(String(e/100),10),i=e%100;if(null===e)yt.synchronizeControlValue(this.priceInput,"");else{var n=this.getProperty("options.hideDecimals"),a=this.priceInput.value,r=String(t)+(n?"":".".concat(String(i<10?"0".concat(i):i)));parseFloat(a)!==parseFloat(r)&&(this.priceInput.value=r)}}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"getValueAsFloat",value:function(){return parseFloat(((this.getProperty("value.chosenValueInMinimalPossibleRepresentation")||0)/100).toFixed(2))}},{key:"setValueFromFloat",value:function(e){this.setProperty("value.chosenValueInMinimalPossibleRepresentation",Math.round(100*(e||0)))}},{key:"onReset",value:function(){null!==this.getProperty("value.chosenValueInMinimalPossibleRepresentation")&&(this.setProperty("value.chosenValueInMinimalPossibleRepresentation",null),yt.synchronizeControlValue(this.priceInput,""),this.getForm().getEngine().getJQuery()(this.priceInput).trigger("input"))}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"clearValue",value:function(){this.setProperty("value.chosenValueInMinimalPossibleRepresentation",null)}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_PRICE,name:"Price",isContainer:!1,category:"advanced",keywords:"price number",icon:"i123-editor_field_price",isVirtual:!1,i18nName:"edt_UI_control_type_price_name",i18nKeywords:"edt_UI_control_type_price_keywords",index:160,accessibilityFields:O.q.ERROR_NODE}}}]),t}(mt);v()(bi,"MAX_STORED_VALUE",900719925474999),v()(bi,"MAX_INPUT_VALUE_STRING","9007199254749.99"),v()(bi,"INDEX_FLOAT_PART",0),v()(bi,"INDEX_FIXED_PART",1),v()(bi,"INDEX_DECIMAL_PART",2),v()(bi,"attributes",{}),v()(bi,"runtime",null),v()(bi,"nodeName","price");var Pi=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"choices",[]),v()(h()(n),"clearableButton",void 0);var a=n.getHash();return n.rootNode.setAttribute("aria-labelledby","checkbox-".concat(a,"-acc ")+"radio-".concat(a,"-clearable-button-acc ")+"checkbox-".concat(a,"-error-acc ")+"checkbox-".concat(a,"-instr-acc")),n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","radio-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","radio-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","radio-".concat(a,"-instr-acc")),n.clearableButton=document.createElement("span"),n.clearableButton.setAttribute("data-role","clear-value"),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_RADIO}},{key:"getElementName",value:function(){return"Radio"}},{key:"clearValue",value:function(){!function(e,t){e(t.rootNode).find("input[type=radio]").each((function(){this.checked&&(e(this).trigger("click"),this.checked=!1)}))}(this.getForm().getEngine().getJQuery(),this),this.onValueChanged()}},{key:"updateChoices",value:function(){if(this.hasProperty("choices.values")){var e,t,i,n,a,r,o,s=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),l=this.getHash(),u=this.getProperty("options.showNumberOfChoicesLeft");u?this.rootNode.setAttribute("data-show-number-of-choices","1"):this.rootNode.removeAttribute("data-show-number-of-choices");for(var d=0,c=s.length;d<c;d++)s[d].index=d;this.hasProperty("options.randomizeOrder")&&this.getProperty("options.randomizeOrder")&&yt.shuffle(s),this.hasProperty("choices.allowOther")&&this.getProperty("choices.allowOther")&&s.push({text:"Other...",isOther:!0,index:-1});for(var h=0,p=this.choices.length;h<p;h++)this.choices[h].parentNode&&this.choices[h].parentNode.removeChild(this.choices[h]);this.choices.splice(0,this.choices.length);for(var _=0,g=s.length;_<g;_++){if((n=document.createElement("div")).setAttribute("data-role","choice"),(e=document.createElement("input")).setAttribute("type","radio"),e.setAttribute("id","".concat(l,"_").concat(_)),e.setAttribute("name","c_".concat(l)),e.setAttribute("value",s[_].text),e.setAttribute("data-index",String(s[_].index)),e.setAttribute("data-role","i123-input"),s[_].isOther&&e.setAttribute("data-is-other","1"),(t=document.createElement("label")).setAttribute("data-role","choice"),t.setAttribute("id","radio-".concat(l).concat(_)),t.appendChild(e),s[_].isDefault&&(e.checked=!0,t.setAttribute("aria-checked","true")),(i=document.createElement("label")).setAttribute("data-role","radio"),i.setAttribute("for","".concat(l,"_").concat(_)),i.setAttribute("aria-labelledby","radio-".concat(l).concat(_)),i.setAttribute("role","radio"),t.appendChild(i),n.appendChild(t),s[_].isOther)(a=document.createElement("input")).setAttribute("data-role","other"),a.setAttribute("type","text"),a.setAttribute("data-size","full"),(o=document.createElement("span")).innerHTML=s[_].text||"",o.setAttribute("data-i18n-text","textdef_15"),t.appendChild(o),t.setAttribute("data-is-other","1"),n.appendChild(a);else yt.isImageURL(s[_].text||"")?((r=document.createElement("img")).setAttribute("src",s[_].text),r.setAttribute("data-choice-is-image","1"),t.appendChild(r)):((o=document.createElement("span")).setAttribute("data-role","option-text"),o.innerHTML=s[_].text||"",t.appendChild(o));this.setupNumberOfTimesAnOptionCanBeChosen(s[_],u,t,n,e),this.choices.push(n)}if(this.isAttached()){this.rendererType=void 0;var E=X.getSuggestedRenderer(this,this.getForm().getLabelPlacement(),this.getForm().getInstructionsPlacement());this.setRendererType(E)}}}},{key:"setupNumberOfTimesAnOptionCanBeChosen",value:function(e,t,i,n,a){if(e.numberOfTimesThisOptionCanBeChosen&&null!==e.numberOfTimesThisOptionCanBeChosen&&e.numberOfTimesThisOptionCanBeChosen>=-1){var r=~~e.numberOfTimesThisOptionHasBeenChosen;r<0&&(r=0);var o=e.numberOfTimesThisOptionCanBeChosen-r;if(t){var s=document.createElement("span");s.setAttribute("data-role","label-info");var l=document.createElement("span");s.appendChild(document.createTextNode("".concat(String(o<0||0===o?0:o)," "))),l.textContent=1===o?"choice left":"choices left",l.setAttribute("data-i18n-text",1===o?"textdef_173":"textdef_174"),s.appendChild(l),i.appendChild(s)}(this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT||this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW&&this.getForm().getEngine().getLoader().getViewFormContext()!==O.R.EDIT_SUBMISSION)&&o<1&&(i.setAttribute("data-disabled","1"),n.setAttribute("data-disabled","1"),a.setAttribute("disabled","true"),a.setAttribute("data-disabled","1"))}}},{key:"updateSideBySideAttribute",value:function(){this.getProperty("layout.isSideBySide")?this.rootNode.setAttribute("data-is-side-by-side-layout","1"):this.rootNode.removeAttribute("data-is-side-by-side-layout")}},{key:"updateClearableOption",value:function(){this.getProperty("options.clearable")?this.labelDOMNode.appendChild(this.clearableButton):this.clearableButton.parentNode&&this.clearableButton.parentNode.removeChild(this.clearableButton)}},{key:"getNumberOfColumns",value:function(){var e=this.hasProperty("layout.columns")?~~this.getProperty("layout.columns"):1;return e<1&&(e=1),e>4&&(e=4),e}},{key:"getIsSideBySideLayout",value:function(){return!!this.hasProperty("layout.isSideBySide")&&!!this.getProperty("layout.isSideBySide")}},{key:"getIsDirectionVertical",value:function(){return!!this.hasProperty("layout.direction")&&"vertical"===this.getProperty("layout.direction")}},{key:"getSideBySideChoicesLayoutRows",value:function(e){for(var t=[],i={inputs:[]},n=0,a=e;n<a;n++)i.inputs.push({width:null,input:this.choices[n]});return t.push(i),t}},{key:"getChoiceWidth",value:function(e){switch(e){case 2:return O.w.HALF;case 3:return O.w.THIRD;case 4:return O.w.QUARTER;case 1:default:return O.w.FULL}}},{key:"getVerticalChoicesLayoutRows",value:function(e,t){var i=Math.ceil(e/t),n=0,a=this.getChoiceWidth(t),r=[];i!==~~i&&(i=1+~~i);for(var o=0,s=e;o<s;o++)r[n]=r[n]||{inputs:[]},r[n].inputs.push({width:a,input:this.choices[o]}),++n>=i&&(n=0);return r}},{key:"getInputObject",value:function(e,t){switch(e){case 2:return{width:O.w.HALF,input:t};case 3:return{width:O.w.THIRD,input:t};case 4:return{width:O.w.QUARTER,input:t};case 1:default:return{width:O.w.FULL,input:t}}}},{key:"getHorizontalChoicesLayoutRows",value:function(e,t){for(var i=null,n=0,a=[],r=0,o=e;r<o;r++)null===i&&(i={inputs:[]},a.push(i)),i.inputs.push(this.getInputObject(t,this.choices[r])),++n>=t&&(n=0,r<o-1&&(i={inputs:[]},a.push(i)));return a}},{key:"getInputDOMNodes",value:function(){var e=this.getNumberOfColumns(),t=this.getIsSideBySideLayout(),i=this.getIsDirectionVertical(),n=this.choices.length;switch(!0){case t:return this.getSideBySideChoicesLayoutRows(n);case i:if(!this.getForm().getEngine().getTheme().isMobileLayout())return this.getVerticalChoicesLayoutRows(n,e)}return this.getHorizontalChoicesLayoutRows(n,e)}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateChoices(),this.updateShowInstructionsOnClick(),this.updateSideBySideAttribute(),this.updateHiddenAttribute(),this.updateClearableOption(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW&&this.onValueChanged()}},{key:"onValueChanged",value:function(){for(var e,t,i,n,a,r=null,o=null,s=this.getValue().index,l=0,u=this.choices.length;l<u;l++)if(e=this.choices[l].querySelector("input[type=radio]"),a=this.choices[l].querySelector("label[data-role=radio]"),e&&e.checked){if(a.setAttribute("aria-checked","true"),!e.hasAttribute("data-is-other")){r=e.value,o=parseInt(e.getAttribute("data-index"));break}if(t=this.choices[l].querySelector("input[type=text][data-role=other]")){r=t.value,o=-1;break}}else a&&a.hasAttribute("aria-checked")&&a.removeAttribute("aria-checked");null!==(i=this.choices[this.choices.length-1]||null)&&i.querySelector("label [data-is-other]")&&(e=i.querySelector("input[type=radio]"))&&(e.checked?i.setAttribute("data-is-checked","1"):i.removeAttribute("data-is-checked")),this.setProperty("value.value",r),this.setProperty("value.index",n=-1===o?this.choices.length-1:~~o),this.isAttached()&&(n!==s&&this.getForm().trigger("radio-uncheck",this,s),this.getForm().trigger("change",this))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){var t,i=this.getProperty("choices.values")||[],n=i.length;return e<n?{element:this,targetPropertyFQN:"value.value",optional:!1,type:"string",inputIndex:e,parser:(t=e,function(e){return e===i[t].text})}:e>n?null:this.getProperty("choices.allowOther")?{element:this,targetPropertyFQN:"value.value",optional:!1,type:"string",inputIndex:e}:null}},{key:"synchronizeValue",value:function(){var e,t=this.getProperty("choices.values"),i=this.getProperty("choices.allowOther"),n=this.getProperty("value.value"),a=this.getProperty("value.index");if(t&&t.length)for(var r=0,o=t.length;r<o;r++)if(t[r].text===n&&a===r)for(var s=0,l=this.choices.length-~~i;s<l;s++)if(e=this.choices[s].querySelector("input[type=radio]"),parseInt(e.getAttribute("data-index"))===a)return void(e.checked||(e.checked=!0));if(i&&null===a)try{var u=this.choices[this.choices.length-1];u.setAttribute("data-is-checked","1"),u.querySelector("input[type=radio]").checked=!!n,u.querySelector("input[type=text]").value=String(n||""),u.querySelector("label[data-role=radio]").setAttribute("aria-checked","true")}catch(d){console.error(d)}}},{key:"isNumberOfTimesAnOptionCanBeChosen",value:function(){for(var e=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),t=0,i=e.length;t<i;t++)if(e[t].numberOfTimesThisOptionCanBeChosen)return!0;return!1}},{key:"setIsNumberOfTimesAnOptionCanBeChosen",value:function(e){for(var t=JSON.parse(JSON.stringify(this.getProperty("choices.values")||[])),i=0,n=t.length;i<n;i++)e?void 0!==t[i].numberOfTimesThisOptionCanBeChosen&&null!==t[i].numberOfTimesThisOptionCanBeChosen||(t[i].numberOfTimesThisOptionCanBeChosen=0):t[i].numberOfTimesThisOptionCanBeChosen=null;this.setProperty("choices.values",t)}},{key:"getChoicesValues",value:function(){return JSON.parse(JSON.stringify(this.getProperty("choices.values")||[]))}},{key:"setChoicesValues",value:function(e){e&&Object(Fe.a)(e,(function(e){return e.text=e.text.trim()})),this.setProperty("choices.values",e)}},{key:"onReset",value:function(){this.updateChoices(),this.onValueChanged()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_radio_name")),this.updateLabelText(),this}},{key:"setupI18n",value:function(){var e=this,i=this.getId();if(i){for(var n=0,a=this.choices.length;n<a;n++){var r=this.choices[n].querySelector("input[type=radio][data-index]");if(r){var o=~~r.getAttribute("data-index"),s=this.choices[n].querySelector("span[data-role=option-text]");s&&(s.setAttribute("data-i18n-html","control_label_".concat(i,"_choice_").concat(o)),s.setAttribute("data-skip-markdown","true"))}}setTimeout((function(){return e.updateClearableOption()}),30)}return E()(_()(t.prototype),"setupI18n",this).call(this)}},{key:"getInputDOMNodeAtIndex",value:function(e){return null===e?null:this.rootNode.querySelector('input[type=radio][data-index="'.concat(e,'"]'))}},{key:"getChoicesDOMNodes",value:function(){return this.choices}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"updateAccessibilityTabIndexes",value:function(){if(E()(_()(t.prototype),"updateAccessibilityTabIndexes",this).call(this),this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1)){var e=document.createElement("span");e.appendChild(document.createTextNode("Clear options")),e.style.display="none",this.clearableButton.appendChild(e),this.clearableButton.setAttribute("aria-labelledby","radio-".concat(this.getHash(),"-clearable-button-acc")),this.clearableButton.tabIndex=0}else this.clearableButton.removeAttribute("tabindex")}},{key:"enumerateTranslations",value:function(){var e=[],t=(this.getForm().getEngine().getI18n(),this.getProperty("label.labelText")||""),i=this.getProperty("instructions.text")||"";t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i});for(var n=this.getProperty("choices.values")||[],a=0,r=n.length;a<r;a++)n[a].text&&e.push({key:"control_label_".concat(this.getId(),"_choice_").concat(a),sourceText:n[a].text});return e}},{key:"cloneNode",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return E()(_()(t.prototype),"cloneNode",this).call(this,e,i)}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_RADIO,name:"Radio",isContainer:!1,category:"basic",keywords:"single choice radio radios multiple choices",icon:"i123-single_choice",isVirtual:!1,i18nName:"edt_UI_control_type_radio_name",i18nKeywords:"edt_UI_control_type_radio_keywords",index:40,accessibilityFields:O.q.ROOT_NODE+O.q.ERROR_NODE+O.q.OTHER}}}]),t}(mt);v()(Pi,"attributes",{}),v()(Pi,"runtime",null),v()(Pi,"nodeName","radio");var Si=function(e){function t(){return o()(this,t),d()(this,_()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_SEPARATOR}},{key:"getElementName",value:function(){return"Separator"}},{key:"setRendererType",value:function(e){}},{key:"getMinColspan",value:function(){return 0}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"onReset",value:function(){}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!1}},{key:"enumerateTranslations",value:function(){return[]}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_SEPARATOR,name:"Separator",isContainer:!1,category:"basic",keywords:"separator space blank empty",icon:"i123-single_choice",isVirtual:!1,index:99999,accessibilityFields:O.q.NONE}}}]),t}(mt);v()(Si,"attributes",{}),v()(Si,"runtime",null),v()(Si,"nodeName","separator");var Di=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"canvasNode",void 0),v()(h()(n),"textBaseline",void 0),v()(h()(n),"clearButton",void 0),v()(h()(n),"fakeInputNode",void 0),v()(h()(n),"tainted",!1),v()(h()(n),"warningMessageRegardingLoosingSignature",void 0),v()(h()(n),"pictureWithLoadedTaintedSignature",void 0),v()(h()(n),"signatureValueAsString",null);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","signature-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","signature-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","signature-".concat(a,"-instr-acc")),n.canvasNode=document.createElement("canvas"),n.textBaseline=document.createElement("div"),n.textBaseline.setAttribute("data-role","text-baseline"),n.clearButton=document.createElement("a"),n.clearButton.setAttribute("data-role","clear-signature"),n.clearButton.textContent="Clear",n.clearButton.style.display="none",n.clearButton.setAttribute("data-i18n-text","textdef_218"),n.clearButton.setAttribute("id","signature-".concat(a,"-clear-button-acc")),n.fakeInputNode=document.createElement("div"),n.fakeInputNode.setAttribute("data-role","signature-container"),n.fakeInputNode.appendChild(n.canvasNode),n.fakeInputNode.appendChild(n.textBaseline),n.fakeInputNode.appendChild(n.clearButton),e.getEngine().getLoader().getLoaderType()===O.u.VIEW&&n.init(),n.fakeInputNode.setAttribute("aria-labelledby","signature-".concat(a,"-acc ")+"signature-".concat(a,"-clear-button-acc ")+"signature-".concat(a,"-error-acc ")+"signature-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_SIGNATURE}},{key:"getElementName",value:function(){return"Signature"}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateRequiredState(),this.updateInstructionsText(),this.updateShowInstructionsOnClick(),this.clearValue(),this.updateHiddenAttribute(),this.synchronizeValue(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(re.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_EXTRA_LOW),e.getValidatorById(re.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_LOW),e.getValidatorById(re.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_AVERAGE),e.getValidatorById(re.VALIDATOR_TYPE_SIGNATURE_COMPLEXITY_HIGH)]}},{key:"getInputDOMNodes",value:function(){var e=this.signatureValueAsString,t="string"===typeof e&&/^data:/.test(e);return this.tainted?[{inputs:[{width:O.w.FULL,input:t?this.fakeInputNode:this.warningMessageRegardingLoosingSignature}]}]:[{inputs:[{width:O.w.FULL,input:this.fakeInputNode}]}]}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"any",optional:!0};default:return null}}},{key:"setRendererType",value:function(e){switch(e){case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD:case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL:case O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:E()(_()(t.prototype),"setRendererType",this).call(this,e);break;case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD:case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD:E()(_()(t.prototype),"setRendererType",this).call(this,O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD);break;case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL:case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL:E()(_()(t.prototype),"setRendererType",this).call(this,O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL);break;case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD:E()(_()(t.prototype),"setRendererType",this).call(this,O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD_COMPACT_FIELD);break;case O.m.LABEL_PLACEMENT_LEFT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:case O.m.LABEL_PLACEMENT_RIGHT_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD:E()(_()(t.prototype),"setRendererType",this).call(this,O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_LABEL_COMPACT_FIELD);break;default:E()(_()(t.prototype),"setRendererType",this).call(this,O.m.LABEL_PLACEMENT_TOP_INSTRUCTIONS_BELOW_FIELD)}}},{key:"draw",value:function(e){if(this.removeAllBackendErrors(),e){var t=this.canvasNode.getContext("2d");if(this.tainted)this.pictureWithLoadedTaintedSignature&&(this.canvasNode.width=this.canvasNode.getBoundingClientRect().width,this.canvasNode.height=this.canvasNode.getBoundingClientRect().height,t.fillStyle="rgba(255,255,255,0)",t.fillRect(0,0,this.canvasNode.offsetWidth,this.canvasNode.offsetHeight),t.drawImage(this.pictureWithLoadedTaintedSignature,0,0));else{var i=e.length,n=0,a=1;if(t.lineWidth=2,t.lineCap="round",t.strokeStyle="#000000",i<2)this.clearButton.style.display="none";else for(this.clearButton.style.display="";n<i;)0===n||-1===e[n-1]?(t.beginPath(),t.moveTo(e[n],e[n+1]),a=2):-1===e[n]?(a=1,t.stroke()):(t.lineTo(e[n],e[n+1]),a=2),n+=a}}else this.clearButton.style.display="none"}},{key:"getMostLeftSignaturePoint",value:function(e){if(!e)return null;var t=e.length,i=0,n=1,a=0|e[0],r=0|a;if(t<2)return null;for(;i<t;)0===i||-1===e[i-1]?(r=e[i],n=2):-1===e[i]?(n=1,r=a):(r=e[i],n=2),i+=n,a>r&&(a=r);return a}},{key:"getMostRightSignaturePoint",value:function(e){if(!e)return null;var t=e.length,i=0,n=1,a=0|e[0],r=0|a;if(t<2)return null;for(;i<t;)0===i||-1===e[i-1]?(r=e[i],n=2):-1===e[i]?(n=1,r=a):(r=e[i],n=2),i+=n,a<r&&(a=r);return a}},{key:"shiftHorizontal",value:function(e,t){if(!e)return t;if(!t)return t;var i=t.length,n=0,a=1,r=0|t[0],o=0|r;if(i<2)return t;for(;n<i;)0===n||-1===t[n-1]?(t[n]+=e,a=2):-1===t[n]?a=1:(t[n]+=e,a=2),n+=a,r>o&&(r=o);return t}},{key:"init",value:function(){!function(e,t){var i=!1,n={top:0,left:0},a=[];function r(){e.tainted||(e.canvasNode.width=e.canvasNode.offsetWidth,e.canvasNode.height=e.canvasNode.offsetHeight)}function o(t){e.readOnly||e.tainted||(i=!0,n.left=t.offsetX,n.top=t.offsetY,r(),e.draw(e.getProperty("value.value")||[]),a=[n.left,n.top])}function s(t){if(!e.readOnly&&!e.tainted&&i){if(t)try{t.preventDefault()}catch(o){}if(t.offsetX<0||t.offsetY<0||t.offsetX>e.canvasNode.offsetWidth||t.offsetY>e.canvasNode.offsetHeight)l(t);else{e.clearButton.style.display="";var r=e.canvasNode.getContext("2d");r.lineWidth=2,r.lineCap="round",r.strokeStyle="#000000",r.beginPath(),r.moveTo(n.left,n.top),r.lineTo(n.left=t.offsetX,n.top=t.offsetY),a.push(n.left,n.top),r.stroke()}}}function l(t){if(!e.readOnly&&!e.tainted&&i){i=!1,a.push(-1);for(var n=e.getProperty("value.value")||[],r=0,o=a.length;r<o;r++)n.push(a[r]);e.setProperty("value.value",n.slice(0))}}function u(t){if(!t.touches||!t.touches.length)return null;var i=e.canvasNode.getBoundingClientRect();return{offsetX:~~(t.touches[0].clientX-i.left),offsetY:~~(t.touches[0].clientY-i.top)}}(je.isMobile()||ie.isTouchDevice())&&(t(e.canvasNode).on("touchstart",(function(e){e.preventDefault(),o(u(e.originalEvent))})),t(e.canvasNode).on("touchmove",(function(e){s(u(e.originalEvent))})),t(e.canvasNode).on("touchend touchcancel mouseup mouseout mouseleave",(function(e){l(u(e.originalEvent))}))),je.isMobile()||(t(e.canvasNode).on("mousedown",o),t(e.canvasNode).on("mousemove",s),t(e.canvasNode).on("mouseout mouseleave mouseup",l)),t(e.clearButton).on("click",(function(){e.readOnly||e.onReset()})),e.getForm().getEngine().on("resize",(function(){r();var t,i=e.getProperty("value.value"),n=e.getMostLeftSignaturePoint(i),a=e.getMostRightSignaturePoint(i),o=e.canvasNode.offsetWidth;o<=0||n<0||a<0||a-n<0||(null!==i&&null!==n&&null!==a&&(t=~~(o/2)-~~((a-n)/2),i=e.shiftHorizontal(t-n,i),e.setProperty("value.value",i)),e.draw(i))}))}(this,this.getForm().getEngine().getJQuery())}},{key:"onReset",value:function(){this.setProperty("value.value",null),this.canvasNode.width=this.canvasNode.offsetWidth,this.canvasNode.height=this.canvasNode.offsetHeight,this.draw([])}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_signature_name")),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"updateTaintedState",value:function(){if(this.tainted){this.warningMessageRegardingLoosingSignature=this.warningMessageRegardingLoosingSignature||document.createElement("div");var e=this.signatureValueAsString||null;e&&(/^data:image\//.test(e)?this.paintSignatureOnControlCanvas(e):(this.warningMessageRegardingLoosingSignature.textContent="This signature will be unvalidated on update submission",this.warningMessageRegardingLoosingSignature.setAttribute("data-role","tainted-signature")))}else this.warningMessageRegardingLoosingSignature&&(this.warningMessageRegardingLoosingSignature.parentNode&&this.warningMessageRegardingLoosingSignature.parentNode.removeChild(this.warningMessageRegardingLoosingSignature),this.warningMessageRegardingLoosingSignature=null);this.reRender()}},{key:"setProperty",value:function(e,i){"value.value"===e&&this.properties.value.value&&"string"===typeof this.properties.value.value&&(this.signatureValueAsString=this.properties.value.value);var n=this.getForm().getEngine().getLoader().getLoaderDependency(O.x.VIEW_FORM_CONTEXT);return"value.value"===e&&"string"===typeof i?(this.signatureValueAsString=this.signatureValueAsString||i,n===O.R.SAVE_FOR_LATER||n===O.R.EDIT_LATER?this.tainted=!1:"no"!==this.signatureValueAsString.toLowerCase()&&(this.tainted=!0,this.updateTaintedState()),n!==O.R.APPROVAL&&(this.properties.value.value=null),this):E()(_()(t.prototype),"setProperty",this).call(this,e,i)}},{key:"updateAccessibilityTabIndexes",value:function(){E()(_()(t.prototype),"updateAccessibilityTabIndexes",this).call(this),this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1)?(this.fakeInputNode.tabIndex=0,this.clearButton.tabIndex=0):(this.fakeInputNode.removeAttribute("tabindex"),this.clearButton.removeAttribute("tabindex"))}},{key:"paintSignatureOnControlCanvas",value:function(e){var t=this;setTimeout((function(){var i=document.createElement("img");i.onload=function(){t.canvasNode.width=t.canvasNode.offsetWidth,t.canvasNode.height=t.canvasNode.offsetHeight,t.canvasNode.getContext("2d").drawImage(i,0,0),t.pictureWithLoadedTaintedSignature=i},i.src=e}),100)}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"onReadonlyStateChanged",value:function(){this.readOnly=!!this.getProperty("options.readOnly")}},{key:"clearValue",value:function(){this.getForm().getEngine().getLoader().getLoaderDependency(O.x.VIEW_FORM_CONTEXT)!==O.R.APPROVAL&&this.properties&&this.properties.value&&this.setProperty("value.value",null)}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_SIGNATURE,name:"Signature",isContainer:!1,category:"advanced",keywords:"signature electronic sign",icon:"i123-edit",isVirtual:!1,i18nName:"edt_UI_control_type_signature_name",i18nKeywords:"edt_UI_control_type_signature_keywords",index:190,accessibilityFields:O.q.ROOT_NODE+O.q.ERROR_NODE+O.q.OTHER}}},{key:"drawSignaturesInPage",value:function(e){try{e.getEngine().getDocument().flatten().forEach((function(e){e.getTypeId()===C.a.CONTROL_TYPE_SIGNATURE&&e.draw([])}))}catch(t){}}}]),t}(mt);v()(Di,"attributes",{}),v()(Di,"runtime",null),v()(Di,"nodeName","signature");var Li=function(e){function t(e,i){var n;return o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0),n.input=document.createElement("div"),n.input.setAttribute("data-role","social-container"),n.rootNode.appendChild(n.input),n}return f()(t,e),l()(t,[{key:"getElementName",value:function(){return"Social"}},{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_SOCIAL}},{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"refreshButtons",value:function(){for(var e=this.getProperty("configuration.hasButtonGooglePlus"),i=this.getProperty("configuration.hasButtonTwitter"),n=this.getProperty("configuration.hasButtonLinkedin"),a=this.getProperty("configuration.hasFacebookLike"),r=this.getProperty("configuration.hasFacebookShare"),o=this.getProperty("configuration.customLink")||window.location.href,s=!!this.getProperty("options.showCount"),l=document.title,u=this.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);this.input.firstChild;)this.input.removeChild(this.input.firstChild);a&&this.input.appendChild(t.createButton("facebook-like",o,l,s,u)),r&&this.input.appendChild(t.createButton("facebook-share",o,l,s,u)),i&&this.input.appendChild(t.createButton("twitter",o,l,s,u)),n&&this.input.appendChild(t.createButton("linkedin",o,l,s,u)),e&&this.input.appendChild(t.createButton("google-plus",o,l,s,u)),a&&this.onFacebookReady().then((function(){try{FB.XFBML.parse()}catch(e){console.error("Failed to execute: FB.XFBML.parse()")}}))}},{key:"updateAlignment",value:function(){switch(this.getProperty("configuration.alignment")){case"center":this.rootNode.setAttribute("data-align","center");break;case"right":this.rootNode.setAttribute("data-align","right");break;case"left":default:this.rootNode.setAttribute("data-align","left")}}},{key:"getAllowedSocialPlatforms",value:function(){var e=[],t=this.getProperty("configuration.hasButtonGooglePlus"),i=this.getProperty("configuration.hasButtonTwitter"),n=this.getProperty("configuration.hasButtonLinkedin"),a=this.getProperty("configuration.hasFacebookLike"),r=this.getProperty("configuration.hasFacebookShare");return t&&e.push(O.I.GOOGLE_PLUS),n&&e.push(O.I.LINKEDIN),i&&e.push(O.I.TWITTER),a&&e.push(O.I.FACEBOOK_LIKE),r&&e.push(O.I.FACEBOOK_SHARE),e}},{key:"setAllowedSocialPlatforms",value:function(e){if(e)for(var t=0,i=e.length;t<i;t++)e[t]=~~e[t];e.length?(this.setProperty("configuration.hasButtonGooglePlus",e.indexOf(O.I.GOOGLE_PLUS)>-1),this.setProperty("configuration.hasButtonLinkedin",e.indexOf(O.I.LINKEDIN)>-1),this.setProperty("configuration.hasButtonTwitter",e.indexOf(O.I.TWITTER)>-1),this.setProperty("configuration.hasFacebookLike",e.indexOf(O.I.FACEBOOK_LIKE)>-1),this.setProperty("configuration.hasFacebookShare",e.indexOf(O.I.FACEBOOK_SHARE)>-1)):(this.setProperty("configuration.hasButtonGooglePlus",!0),this.setProperty("configuration.hasButtonLinkedin",!0),this.setProperty("configuration.hasButtonTwitter",!0),this.setProperty("configuration.hasFacebookLike",!0),this.setProperty("configuration.hasFacebookShare",!0))}},{key:"onCreated",value:function(){this.updateAlignment(),this.refreshButtons()}},{key:"onFacebookReady",value:function(){return function(e,i){return void 0!==t.facebookSDKPromise?t.facebookSDKPromise:e.Deferred((function(e){i.loadJavascript("//connect.facebook.net/en_US/all.js#xfbml=1&appId=157025404377057").then((function(){e.resolve(!0)})).fail((function(){e.reject(new Error("Failed loading Facebook SDK"))}))})).promise()}(this.getForm().getEngine().getJQuery(),this.getForm().getEngine().getResourceManager())}},{key:"setRendererType",value:function(e){}},{key:"onReset",value:function(){}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){return[]}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_SOCIAL,name:"Social",isContainer:!1,category:"other",keywords:"social share facebook twitter linkedin google plus",icon:"i123-social",isVirtual:!1,i18nName:"edt_UI_control_type_social_name",i18nKeywords:"edt_UI_control_type_social_keywords",index:290,accessibilityFields:O.q.OTHER}}},{key:"createButton",value:function(e,t,i,n,a){var r,o;switch((o=document.createElement("span")).appendChild(document.createTextNode(e)),o.setAttribute("id","social-".concat(e,"-button-acc")),o.style.display="none","facebook-like"!==e?((r=document.createElement("a")).setAttribute("target","_blank"),r.setAttribute("href","javascript:;"),r.setAttribute("data-button-type",e),r.setAttribute("data-role","share-button"),r.setAttribute("aria-labelledby","social-".concat(e,"-button-acc")),r.appendChild(o)):((r=document.createElement("div")).className="fb-like",r.setAttribute("data-layout",n?"button_count":"button"),r.setAttribute("data-action","like"),r.setAttribute("data-show-faces","false"),r.setAttribute("data-share","false"),a&&(r.tabIndex=0)),e){case"google-plus":r.setAttribute("href","https://plus.google.com/share?url=".concat(encodeURIComponent(t)));break;case"twitter":r.setAttribute("href","https://twitter.com/home?status=".concat(encodeURIComponent(t)));break;case"linkedin":r.setAttribute("href","https://www.linkedin.com/shareArticle?mini=true&url=".concat(encodeURIComponent(t),"&title=").concat(encodeURIComponent(i),"&summary=&source="));break;case"facebook-like":r.setAttribute("data-href",t);break;case"facebook-share":r.setAttribute("href","https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(t)))}return r}}]),t}(mt);v()(Li,"attributes",{}),v()(Li,"runtime",null),v()(Li,"nodeName","social"),v()(Li,"facebookSDKPromise",void 0);var ki=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","starrating-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","starrating-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","starrating-".concat(a,"-instr-acc")),n.input=lt.createElement(lt.ELEMENT_TYPE_STAR_RATING),n.input.withHash(a),n.input.setAttribute("data-role","i123-input"),n.rootNode.setAttribute("aria-labelledby","starrating-".concat(a,"-acc ")+"starrating-".concat(a,"-error-acc ")+"starrating-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_STAR_RATING}},{key:"getElementName",value:function(){return"Star rating"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.w.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateStarShapeType(),this.updateStarsCount(),this.updateHiddenAttribute(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.VIEW?(this.updateDefaultValue(),this.onValueChanged()):this.synchronizeValue(),this.onReadonlyStateChanged()}},{key:"onValueChanged",value:function(){var e=this.input.getValue();this.setProperty("value.value",0===e?null:e),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"int",optional:!0};default:return null}}},{key:"updateStarShapeType",value:function(){switch(this.getProperty("configuration.displayAs")){case O.J.ADULTS:this.input.withStarShapeType("adults");break;case O.J.CHILDREN:this.input.withStarShapeType("children");break;case O.J.STARS:default:this.input.withStarShapeType("stars")}}},{key:"updateStarsCount",value:function(){var e=this.getProperty("configuration.starsCount");null===e&&(e=5),e<1&&(e=1),e>10&&(e=10),this.input.withMinValue(0).withMaxValue(e),this.input.onAccessibilitySettingsChanged()}},{key:"updateDefaultValue",value:function(){this.input.setValue(this.getProperty("configuration.defaultValue"))}},{key:"onReset",value:function(){this.updateDefaultValue(),this.onValueChanged()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_star_rating_name")),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"onReadonlyStateChanged",value:function(){this.input.setReadOnly(!!this.getProperty("options.readOnly"))}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_STAR_RATING,name:"Star Rating",isContainer:!1,category:"advanced",keywords:"star rating rate opinion",icon:"i123-star_rating",isVirtual:!1,i18nName:"edt_UI_control_type_star_rating_name",i18nKeywords:"edt_UI_control_type_star_rating_keywords",index:200,accessibilityFields:O.q.ERROR_NODE+O.q.ROOT_NODE}}}]),t}(mt);v()(ki,"attributes",{}),v()(ki,"runtime",null),v()(ki,"nodeName","star-rating");var Mi=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0),v()(h()(n),"linkElement",void 0),v()(h()(n),"additionalLabelElement",void 0),v()(h()(n),"checkboxDecorator",void 0);var a="tos_".concat(String(~~(1e6*Math.random())),"_").concat(String(~~(1e6*Math.random())),"_").concat(+new Date),r=n.getHash();return n.input=document.createElement("input"),n.input.setAttribute("type","checkbox"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("data-index","0"),n.input.setAttribute("id",a),n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","tos-".concat(r,"-acc")),n.linkElement=document.createElement("a"),n.linkElement.setAttribute("data-role","tos-link"),n.linkElement.setAttribute("href","javascript:;"),n.linkElement.setAttribute("rel","nofollow"),n.additionalLabelElement=document.createElement("label"),n.additionalLabelElement.setAttribute("data-role","tos-label"),n.additionalLabelElement.setAttribute("id","tos-checkbox-".concat(r,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","tos-".concat(r,"-error-acc")),n.checkboxDecorator=document.createElement("label"),n.checkboxDecorator.setAttribute("data-role","checkbox"),n.checkboxDecorator.setAttribute("for",a),n.checkboxDecorator.setAttribute("aria-labelledby","tos-".concat(r,"-acc tos-").concat(r,"-error-acc tos-checkbox-").concat(r,"-acc")),n.checkboxDecorator.setAttribute("role","checkbox"),n.checkboxDecorator.setAttribute("aria-checked","false"),n.checkboxDecorator.tabIndex=0,n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"onCreated",value:function(){var e;this.updateLabelText(),this.updateErrorsText(),this.updateTOSAdditionalLabelText(),this.updateRequiredState(),this.updateHiddenAttribute(),this.updateDefaultValue(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.synchronizeValue():((e=this).linkElement.addEventListener("click",(function(){e.onClick()}),!1),this.onValueChanged()),this.onReadonlyStateChanged()}},{key:"getProperty",value:function(e){switch(e){case"configuration.agreementLabelAdditionalText":var i=this.getId();if(i){var n="terms_of_service_option_label_".concat(i),a=this.getForm().getEngine().getI18n().translateText(n);if(a&&a!==n)return a}return E()(_()(t.prototype),"getProperty",this).call(this,e);default:return E()(_()(t.prototype),"getProperty",this).call(this,e)}}},{key:"updateTOSAdditionalLabelText",value:function(){var e=this.getForm().getEngine().getI18n().translateText("terms_of_service_option_label_".concat(this.getId())),t=String(this.getProperty("configuration.agreementLabelAdditionalText")||""),i=e||t;this.getForm().getEngine().getLoader().getLoaderType()==O.u.EDIT&&(i=t);for(var n=/^([\s\S]+)?<link>([\s\S]+)?<\/link>([\s\S]+)?$/.exec(i);this.additionalLabelElement.firstChild;)this.additionalLabelElement.removeChild(this.additionalLabelElement.firstChild);if(this.additionalLabelElement.appendChild(this.input),this.additionalLabelElement.appendChild(this.checkboxDecorator),n)n[1]&&(this.additionalLabelElement.appendChild(document.createElement("span")).textContent=n[1]),n[2]&&(this.linkElement.textContent=n[2],this.additionalLabelElement.appendChild(this.linkElement)),n[3]&&(this.additionalLabelElement.appendChild(document.createElement("span")).textContent=n[3]);else{var a=document.createElement("label");a.textContent=String(i||""),this.additionalLabelElement.appendChild(a)}}},{key:"updateDefaultValue",value:function(){this.setProperty("value.value",!!this.getProperty("configuration.defaultValue")),this.synchronizeValue()}},{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_TERMS_OF_SERVICE}},{key:"getElementName",value:function(){return"Terms of service"}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"boolean",optional:!0};default:return null}}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.additionalLabelElement,width:O.w.FULL}]}]}},{key:"onValueChanged",value:function(){var e=this.input.checked;this.setProperty("value.value",null!==e&&e),e?this.checkboxDecorator.setAttribute("aria-checked","true"):this.checkboxDecorator.setAttribute("aria-checked","false"),this.isAttached()&&this.getForm().trigger("click",this)}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"showText",value:function(){var e=this.getForm().getEngine().getI18n().translateText("terms_of_service_html_markup_".concat(this.getId())),t=this.getProperty("configuration.agreementHTMLMarkup"),i=e||t,n=~~this.getProperty("configuration.popupWidthInPixels"),a=~~this.getProperty("configuration.popupHeightInPixels");if("string"===typeof i&&""!==i){n<=0&&(n=500),a<=0&&(a=500);var r=this.getForm().getEngine().getJQuery(),o=r(window).width(),s=r(window).height();o<n&&(n=o-20),s<a&&(a=s-20),function(e,t,r){if(e){var o=t.getForm().getEngine().getI18n().translateText("textdef_232")||"Terms of Service",s=e.createDialog(o,[{type:be.c.OK,callback:function(){s.close()}}],{width:"".concat(n,"px"),height:"".concat(a,"px")});r(s.body).addClass("html-content"),s.body.innerHTML='<div class="ui-body-inner">'.concat(i,"</div>")}}(this.getForm().getEngine().getLoader().getUI(),this,this.getForm().getEngine().getJQuery())}}},{key:"openURL",value:function(){var e=this,t=this.getProperty("configuration.url");t&&(this.linkElement.setAttribute("href",t),this.linkElement.setAttribute("target","_blank"),lt.getJQuery()(this.linkElement).trigger("click"),setTimeout((function(){e.linkElement.removeAttribute("href"),e.linkElement.removeAttribute("target")}),1e3))}},{key:"onClick",value:function(){switch(this.getProperty("configuration.linkBehaviour")){case"show_text":this.showText();break;case"open_url":this.openURL()}}},{key:"onReset",value:function(){var e=this.getProperty("configuration.defaultValue");this.input.checked=!!e,this.onValueChanged()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_terms_of_service_name")),this.updateLabelText(),this.setProperty("configuration.agreementHTMLMarkup",this.getForm().getEngine().getI18n().translateText("func_editTos")),this}},{key:"setupI18n",value:function(){return this.updateTOSAdditionalLabelText(),E()(_()(t.prototype),"setupI18n",this).call(this)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("configuration.agreementLabelAdditionalText")||"",n=this.getProperty("configuration.agreementHTMLMarkup")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"terms_of_service_option_label_".concat(this.getId()),sourceText:i}),n&&e.push({key:"terms_of_service_html_markup_".concat(this.getId()),sourceText:n}),e}},{key:"onReadonlyStateChanged",value:function(){this.input.disabled=!!this.getProperty("options.readOnly")}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_TERMS_OF_SERVICE,name:"Terms of Service",isContainer:!1,category:"advanced",keywords:"terms of service legal",icon:"i123-editor_field_termsofservice",isVirtual:!1,i18nName:"edt_UI_control_type_terms_of_service_name",i18nKeywords:"edt_UI_control_type_terms_of_service_keywords",index:210,accessibilityFields:O.q.ERROR_NODE}}}]),t}(mt);v()(Mi,"attributes",{}),v()(Mi,"runtime",null),v()(Mi,"nodeName","terms-of-service");var xi=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","textarea-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","textarea-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","textarea-".concat(a,"-instr-acc")),n.input=document.createElement("textarea"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("aria-labelledby","textarea-".concat(a,"-acc ")+"textarea-".concat(a,"-error-acc ")+"textarea-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_TEXTAREA}},{key:"getElementName",value:function(){return"Long text"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.w.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateDefaultValue(),this.updateShowInstructionsOnClick(),this.validateValue(),this.updateHiddenAttribute(),this.setHeightInRows(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.synchronizeValue():this.onValueChanged(),this.onReadonlyStateChanged()}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.validateValue(),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateDefaultValue",value:function(){var e=this.getProperty("configuration.defaultValue")||"",t=e&&e.trim();this.setProperty("value.value",""===e?null:t),this.setProperty("configuration.defaultValue",t),this.synchronizeValue()}},{key:"validateValue",value:function(){var e=this.getProperty("configuration.minLength"),t=this.getProperty("configuration.maxLength"),i=this.getProperty("configuration.minNumberOfWords"),n=this.getProperty("configuration.maxNumberOfWords"),a=this.getProperty("value.value")||"",r=yt.getTextNumberOfWords(this.getProperty("value.value"));a?(null!=t&&t>0&&(a.length>t?this.addError(it.ERR_TOO_MANY_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_71",String(t))||"You have more characters than allowed"):this.removeError(it.ERR_TOO_MANY_CHARACTERS)),null!=e&&e>0&&(a.length<e?this.addError(it.ERR_TOO_FEW_CHARACTERS,this.getForm().getEngine().getI18n().translateText("textdef_70",String(e))||"You have fewer characters than allowed"):this.removeError(it.ERR_TOO_FEW_CHARACTERS)),null!=n&&n>0&&(r>n?this.addError(it.ERR_TOO_MANY_WORDS,this.getForm().getEngine().getI18n().translateText("textdef_94",String(n))||"You have more words than allowed"):this.removeError(it.ERR_TOO_MANY_WORDS)),null!=i&&i>0&&(r<i?this.addError(it.ERR_TOO_FEW_WORDS,this.getForm().getEngine().getI18n().translateText("textdef_93",String(i))||"You have fewer words than allowed"):this.removeError(it.ERR_TOO_FEW_WORDS))):(this.removeError(it.ERR_TOO_MANY_CHARACTERS),this.removeError(it.ERR_TOO_FEW_CHARACTERS),this.removeError(it.ERR_TOO_MANY_WORDS),this.removeError(it.ERR_TOO_FEW_WORDS))}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.setValue({value:this.getProperty("configuration.defaultValue")}),this.validateValue()}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_textarea_name")),this.updateLabelText(),this}},{key:"setHeightInRows",value:function(){this.input.setAttribute("rows",this.hasProperty("size.heightInRows")&&this.getProperty("size.heightInRows")?this.getProperty("size.heightInRows"):t.DEFAULT_INPUT_HEIGHT_IN_ROWS)}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.setReadonly(e)}},{key:"isReadonly",value:function(){return this.input.readOnly}},{key:"setReadonly",value:function(e){return this.input.readOnly=e,this}},{key:"emulateUserInput",value:function(){var e=this;!function(t){t([e.input]).trigger("input")}(this.getForm().getEngine().getJQuery())}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_TEXTAREA,name:"Long Text",isContainer:!1,category:"basic",keywords:"long text input textbox open textarea",icon:"i123-editor_field_longtext",isVirtual:!1,i18nName:"edt_UI_control_type_textarea_name",i18nKeywords:"edt_UI_control_type_textarea_keywords",index:20,accessibilityFields:O.q.ERROR_NODE}}}]),t}(mt);v()(xi,"DEFAULT_INPUT_HEIGHT_IN_ROWS",3),v()(xi,"attributes",{}),v()(xi,"runtime",null),v()(xi,"nodeName","textarea");var wi=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0);var a=n.getHash(),r=n.getForm().getConfiguration().getProperty("hasAccessibilityEnabled",!1);return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","time-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","time-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","time-".concat(a,"-instr-acc")),n.input=lt.createElement(lt.ELEMENT_TYPE_TIME),n.input.setAccessibilityEnabled(r),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("aria-live","assertive"),n.input.setAttribute("role","alert"),n.rootNode.setAttribute("aria-labelledby","time-".concat(a,"-acc ")+"time-".concat(a,"-error-acc ")+"time-".concat(a,"-instr-acc ")+"time-".concat(a,"-hour ")+"time-".concat(a,"-minute ")+"time-".concat(a,"-second ")+"time-".concat(a,"-am-pm")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"setTimeControlOptions",value:function(){this.input.withHash(this.getHash()),this.input.setFormat("12"===this.getProperty("configuration.timeFormat")?re.VALIDATOR_TYPE_TIME_AMPM:re.VALIDATOR_TYPE_TIME)}},{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_TIME}},{key:"getElementName",value:function(){return"Time"}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateInstructionsText(),this.updateErrorsText(),this.updateRequiredState(),this.setTimeControlOptions(),this.updateShowInstructionsOnClick(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.synchronizeValue():this.onValueChanged(),this.updateHiddenAttribute(),this.loadDefaultTimeValueIntoForm(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){var e=this.getForm().getEngine().getValidator();return[e.getValidatorById(re.VALIDATOR_TYPE_TIME),e.getValidatorById(re.VALIDATOR_TYPE_TIME_AMPM)]}},{key:"getStringValue",value:function(){return this.input.getValue()}},{key:"setStringValue",value:function(e){try{this.input.setValue(e)}catch(t){this.input.setDateValue(null)}this.onValueChanged()}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.stringValue",type:"string",optional:!0};default:return null}}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.w.FULL}]}]}},{key:"synchronizeValue",value:function(){var e,t,i,n,a=this.getProperty("value.value");null===a?e=null:(e=new Date,a-=3600*(t=Math.floor(a/3600)),a-=60*(i=Math.floor(a/60)),n=Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?a:a-a%60,e.setDate(1),e.setMonth(0),e.setFullYear(1970),e.setHours(t),e.setMinutes(i),e.setSeconds(n),e.setMilliseconds(0)),this.input.setDateValue(e),this.updateErrorState(this.input.getInputErrorState())}},{key:"onValueChanged",value:function(){var e=this.input.getDateValue();if(null===e)this.setProperty("value.value",null);else{var t=3600*e.getHours()+60*e.getMinutes()+e.getSeconds();this.setProperty("value.value",Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?t:t-t%60)}this.isAttached()&&this.getForm().trigger("input",this),this.updateErrorState(this.input.getInputErrorState())}},{key:"loadDefaultTimeValueIntoForm",value:function(){var e="",t=this.hasProperty("configuration.defaultValue")?this.getProperty("configuration.defaultValue"):void 0;"string"!==typeof t&&(e=this.convertTimeSecondsToString(t)),t||0===t?("number"!==typeof t||Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL||(t-=t%60),this.input.setDateValue(this.getForm().getEngine().getTimeUtils().stringToTime(e||String(t))),this.onValueChanged()):this.input.setDateValue(null)}},{key:"convertTimeSecondsToString",value:function(e){var t,i=this.hasProperty("configuration.timeFormat")?this.getProperty("configuration.timeFormat"):void 0;if(i)switch(i){case"24":i=Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?"%H:%i:%S":"%H:%i";break;case"12":default:i=Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?"%h:%i:%S %p":"%h:%i %p"}return t=Ze.ALLOW_SECOND_COMPONENT_IN_UI_TIME_CONTROL?0:e%60,this.getForm().getEngine().getTimeUtils().intToTime(e-t,i)}},{key:"onReset",value:function(){this.loadDefaultTimeValueIntoForm()}},{key:"updateErrorState",value:function(e){switch(e){case O.v.ERROR:this.addError(it.ERR_TIME_NOT_COMPLETE,this.getForm().getEngine().getI18n().translateText("textdef_222")||"Please fill in both hour and minutes");break;case O.v.UNFILLED:case O.v.FILLED:default:this.removeError(it.ERR_TIME_NOT_COMPLETE)}}},{key:"onBlur",value:function(){this.updateErrorState(this.input.getInputErrorState())}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_time_name")),this.updateLabelText(),this}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.input.setReadOnly(e)}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_TIME,name:"Time",isContainer:!1,category:"advanced",keywords:"time date hour minute",icon:"i123-time",isVirtual:!1,i18nName:"edt_UI_control_type_time_name",i18nKeywords:"edt_UI_control_type_time_keywords",index:150,accessibilityFields:O.q.ERROR_NODE+O.q.ROOT_NODE}}}]),t}(mt);v()(wi,"attributes",{}),v()(wi,"runtime",null),v()(wi,"nodeName","time");var Ui=function(e){function t(e,i){var n;o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"input",void 0),v()(h()(n),"hasSuggestions",!0);var a=n.getHash();return n.labelDOMNode=document.createElement("label"),n.labelDOMNode.setAttribute("data-role","label"),n.labelDOMNode.setAttribute("id","website-".concat(a,"-acc")),n.errorDOMNode=document.createElement("label"),n.errorDOMNode.setAttribute("data-role","error"),n.errorDOMNode.setAttribute("id","website-".concat(a,"-error-acc")),n.instructionsDOMNode=document.createElement("dt"),n.instructionsDOMNode.setAttribute("data-role","instructions"),n.instructionsDOMNode.setAttribute("id","website-".concat(a,"-instr-acc")),n.input=document.createElement("input"),n.input.setAttribute("type","text"),n.input.setAttribute("data-role","i123-input"),n.input.setAttribute("aria-labelledby","website-".concat(a,"-acc ")+"website-".concat(a,"-error-acc ")+"website-".concat(a,"-instr-acc")),n.updateAccessibilityTabIndexes(),n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_WEBSITE}},{key:"getElementName",value:function(){return"Website"}},{key:"getInputDOMNodes",value:function(){return[{inputs:[{input:this.input,width:O.w.FULL}]}]}},{key:"onCreated",value:function(){this.updateLabelText(),this.updateErrorsText(),this.updateInstructionsText(),this.updateRequiredState(),this.updateShowInstructionsOnClick(),this.updateHiddenAttribute(),this.updateDefaultValue(),this.initializeSuggestions(),this.getForm().getEngine().getLoader().getLoaderType()===O.u.EDIT?this.synchronizeValue():this.onValueChanged(),this.onReadonlyStateChanged()}},{key:"getSupportedValidators",value:function(){return[this.getForm().getEngine().getValidator().getValidatorById(re.VALIDATOR_TYPE_URL_WEB_PAGE)]}},{key:"onValueChanged",value:function(){var e=this.input.value;this.setProperty("value.value",""===e?null:e),this.isAttached()&&this.getForm().trigger("input",this)}},{key:"updateDefaultValue",value:function(){var e=this.getProperty("configuration.defaultValue");this.setProperty("value.value",""===e?null:e),this.synchronizeValue()}},{key:"validateValue",value:function(){var e=this.getForm().getEngine().getValidator(),t=this.getProperty("value.value")||"";null!==t&&""!==t?t&&!e.validate(t,re.VALIDATOR_TYPE_URL_WEB_PAGE)?this.addError(it.ERR_INVALID_URL,"".concat(this.getForm().getEngine().getI18n().translateText("textdef_5"),": ").concat(this.getForm().getEngine().getI18n().translateText("textdef_50"))||"The URL is invalid."):this.hasError(it.ERR_INVALID_URL)&&this.removeError(it.ERR_INVALID_URL):this.removeError(it.ERR_INVALID_URL)}},{key:"synchronizeValue",value:function(){yt.synchronizeControlValue(this.input,this.getProperty("value.value"))}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"value.value",type:"string",optional:!0};default:return null}}},{key:"onReset",value:function(){this.setValue({value:this.getProperty("configuration.defaultValue")})}},{key:"setupDefaults",value:function(){return this.setProperty("label.labelText",this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_website_name")),this.updateLabelText(),this}},{key:"onBlur",value:function(){this.validateValue(),this.checkIfElementValueIsSynchronized()}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){var e=[],t=this.getProperty("label.labelText")||"",i=this.getProperty("instructions.text")||"";return t&&e.push({key:"control_label_".concat(this.getId()),sourceText:t}),i&&e.push({key:"control_instructions_".concat(this.getId()),sourceText:i}),e}},{key:"getSuggestionsVisibility",value:function(){return null!==(this.getProperty("options.suggestions")||null)}},{key:"setSuggestionsVisibility",value:function(e){e?this.setProperty("options.suggestions",this.getProperty("options.suggestions")||""):this.setProperty("options.suggestions",null)}},{key:"initializeSuggestions",value:function(){var e=this;this.getForm().getEngine().on("compute-form-rules-done",(function(){setTimeout((function(){e.getSuggestionsVisibility()?e.suggestionsDropDown(lt.getJQuery()):e.getForm().getEngine().getJQuery()(e.input).parent().find("[data-autocomplete-items]").remove()}),1e3)}))}},{key:"suggestionsDropDown",value:function(e){var i,n=this,a=this.getProperty("options.suggestions").split("\n"),r=this.input;!function(o){function s(t){r.value=t,o.onValueChanged(),e(r).trigger("input"),e(r).trigger("change")}function l(){for(var t=e(r).parent().find("[data-autocomplete-items]"),i=0,n=t.length;i<n;i++)t[i].parentNode.removeChild(t[i])}function u(e,t){var i=document.createElement("div"),n=document.createElement("strong");return n.appendChild(document.createTextNode(t.substr(0,e.length))),i.appendChild(n),i.appendChild(document.createTextNode(t.substr(e.length))),i.setAttribute("data-value",String(t||"")),i}function d(e){if(0===e.length)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("data-autocomplete-active")}(e),i>=e.length&&(i=0),i<0&&(i=e.length-1),e[i].setAttribute("data-autocomplete-active","")}function c(n){if(null!==o.getProperty("options.suggestions")){t.initialize(),l(),i=-1;for(var d=function(){var t=document.createElement("div");t.setAttribute("data-autocomplete-items",""),e(t).width("".concat(r.offsetWidth,"px"));var i=r.getBoundingClientRect();return e(t).css({top:"".concat(~~i.top+~~i.height,"px")}),e(t).on("mousedown","> div",(function(){s(e(this).attr("data-value")),l()})),t}(),c=!1,h=0,p=a.length;h<p;h++)if(a[h].substr(0,n.length).toUpperCase()===n.toUpperCase()){var _=u(n,a[h]);e(d).append(_),c=!0}c?e(r).parent().append(d):e(d).remove()}}e(n.input).on("input",(function(){c(this.value)})),e(n.input).on("click",(function(e){e.stopPropagation(),c(this.value)})),e(r).on("keydown",(function(t){var n=e(r).parent().find("[data-autocomplete-items]").find("div");switch(t.keyCode){case Ye.KEY_DOWN:i++,d(n),t.preventDefault();break;case Ye.KEY_UP:i--,d(n),t.preventDefault();break;case Ye.KEY_ENTER:i>-1&&n.length&&(s(n[i].getAttribute("data-value")),l()),t.preventDefault();break;case Ye.KEY_ESC:l(),t.preventDefault()}})),e(n.input).on("blur",(function(){l()}))}(this)}},{key:"onReadonlyStateChanged",value:function(){var e=this.getProperty("options.readOnly");this.setReadonly(e)}},{key:"isReadonly",value:function(){return this.input.readOnly}},{key:"setReadonly",value:function(e){return this.input.readOnly=e,this}}],[{key:"initialize",value:function(){ii.initialize()}},{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_WEBSITE,name:"Website",isContainer:!1,category:"advanced",keywords:"website url link",icon:"i123-editor_field_website",isVirtual:!1,i18nName:"edt_UI_control_type_website_name",i18nKeywords:"edt_UI_control_type_website_keywords",index:170,accessibilityFields:O.q.ERROR_NODE}}}]),t}(vt);v()(Ui,"attributes",{}),v()(Ui,"runtime",null),v()(Ui,"nodeName","website");var Yi=function(e){function t(e,i){var n;return o()(this,t),n=d()(this,_()(t).call(this,e,i)),v()(h()(n),"widgetIframeNode",void 0),v()(h()(n),"isWidgetLoaded",!1),v()(h()(n),"widgetIconNode",void 0),n.widgetIframeNode=document.createElement("iframe"),n.getRootNode().appendChild(n.widgetIframeNode),n.widgetIframeNode.setAttribute("data-widget-iframe","1"),n.widgetIframeNode.setAttribute("id","widget-iframe-"+n.getHash()),n.widgetIconNode=document.createElement("div"),n.widgetIconNode.setAttribute("data-widget-icon-container","1"),n.getRootNode().appendChild(n.widgetIconNode),n.widgetIframeNode.addEventListener("load",(function(){n.widgetIframeNode.getAttribute("src")&&(n.getRootNode().removeAttribute("data-widget-placeholder"),n.isWidgetLoaded=!0)}),!0),n}return f()(t,e),l()(t,[{key:"getPropertyDescriptorByInputIndex",value:function(e){return null}},{key:"getResizingCapability",value:function(){return this.isWidgetLoaded?O.E.ALL:O.E.LEFT_AND_RIGHT}},{key:"setRendererType",value:function(e){}},{key:"isRenderingSupported",value:function(){return!1}},{key:"onCreated",value:function(){this.generateProperLinkForIframe()}},{key:"updateIframeOptions",value:function(e){e?(this.widgetIframeNode.setAttribute("src",e),this.getRootNode().removeAttribute("data-widget-placeholder"),this.isWidgetLoaded=!0):(this.getRootNode().setAttribute("data-widget-placeholder","1"),this.isWidgetLoaded=!1),this.widgetIframeNode.setAttribute("frameborder","0")}}]),t}(mt);v()(Yi,"attributes",{}),v()(Yi,"runtime",null);var Fi=function(e){function t(e,i){var n;return o()(this,t),n=d()(this,_()(t).call(this,e,i)),t.instanceID++,n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_WIDGET_FACEBOOK}},{key:"getElementName",value:function(){return"Facebook"}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_WIDGET_FACEBOOK,name:"Facebook",isContainer:!1,category:"other",keywords:"widget facebook post page embed",icon:"i123-field_facebook",isVirtual:!1,i18nName:"edt_UI_control_type_widget_facebook_name",i18nKeywords:"edt_UI_control_type_widget_facebook_keywords",index:250,accessibilityFields:O.q.NONE}}}]),l()(t,[{key:"setupDefaults",value:function(){return this.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_facebook_name")," ").concat(t.instanceID)),this}},{key:"generateProperLinkForIframe",value:function(){var e=this.getForm().getEngine().getValidator().validateEmbeddableFacebookURL(this.getProperty("configuration.url")),i=null;null!==e&&(i=yt.getURLEmbedIframeSource(e)),i&&O.O.FACEBOOK_PAGE===e.type?this.widgetIframeNode.setAttribute("data-facebook-page","1"):this.widgetIframeNode.removeAttribute("data-facebook-page"),E()(_()(t.prototype),"updateIframeOptions",this).call(this,i)}},{key:"cloneNode",value:function(e){var i=E()(_()(t.prototype),"cloneNode",this).call(this,!!e);return i.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_facebook_name")," ").concat(t.instanceID)),i}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){return[]}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"configuration.url",type:"string",optional:!0};default:return null}}}]),t}(Yi);v()(Fi,"instanceID",0),v()(Fi,"nodeName","widget-facebook");var Vi=function(e){function t(e,i){var n;return o()(this,t),n=d()(this,_()(t).call(this,e,i)),t.instanceID++,n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_WIDGET_PDF}},{key:"getElementName",value:function(){return"PDF embed"}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_WIDGET_PDF,name:"PDF embed",isContainer:!1,category:"other",keywords:"widget pdf document embed",icon:"i123-field_pdfembed",isVirtual:!1,i18nName:"edt_UI_control_type_widget_pdf_name",i18nKeywords:"edt_UI_control_type_widget_pdf_keywords",index:260,accessibilityFields:O.q.NONE}}}]),l()(t,[{key:"setupDefaults",value:function(){return this.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_pdf_name")," ").concat(t.instanceID)),this}},{key:"generateProperLinkForIframe",value:function(){var e=this.getForm().getEngine().getValidator().validateEmbeddablePdfURL(this.getProperty("configuration.url")),i=null;je.isMobile()&&e&&(e.type=O.O.MOBILE_EMBED),null!==e&&(i=yt.getURLEmbedIframeSource(e),i=Object(ne.c)(i)),E()(_()(t.prototype),"updateIframeOptions",this).call(this,i)}},{key:"cloneNode",value:function(e){var i=E()(_()(t.prototype),"cloneNode",this).call(this,!!e);return i.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_pdf_name")," ").concat(t.instanceID)),i}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"configuration.url",type:"string",optional:!0};default:return null}}},{key:"enumerateTranslations",value:function(){return[]}}]),t}(Yi);v()(Vi,"instanceID",0),v()(Vi,"nodeName","widget-pdf");var Bi=function(e){function t(e,i){var n;return o()(this,t),n=d()(this,_()(t).call(this,e,i)),t.instanceID++,n}return f()(t,e),l()(t,[{key:"getTypeId",value:function(){return C.a.CONTROL_TYPE_WIDGET_VIDEO}},{key:"getElementName",value:function(){return"Video"}}],[{key:"getConfiguration",value:function(){return{typeId:C.a.CONTROL_TYPE_WIDGET_VIDEO,name:"Video",isContainer:!1,category:"other",keywords:"widget video movie audio music embed Youtube Vimeo TED NFB Kickstarter Dailymotion Twitch Soundcloud Mixcloud Wordpress TV",icon:"i123-field_video",isVirtual:!1,i18nName:"edt_UI_control_type_widget_video_name",i18nKeywords:"edt_UI_control_type_widget_video_keywords",index:240,accessibilityFields:O.q.NONE}}}]),l()(t,[{key:"setupDefaults",value:function(){return this.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_video_name")," ").concat(t.instanceID)),this}},{key:"generateProperLinkForIframe",value:function(){var e=this.getForm().getEngine().getValidator().validateEmbeddableVideoURL(this.getProperty("configuration.url")),i=null;null!==e&&(i=yt.getURLEmbedIframeSource(e)),E()(_()(t.prototype),"updateIframeOptions",this).call(this,i)}},{key:"cloneNode",value:function(e){var i=E()(_()(t.prototype),"cloneNode",this).call(this,!!e);return i.setProperty("configuration.fieldName","".concat(this.getForm().getEngine().getI18n().translateText("edt_UI_control_type_widget_video_name")," ").concat(t.instanceID)),i}},{key:"isCountableWhenComputingFormNumberOfControls",value:function(){return!0}},{key:"enumerateTranslations",value:function(){return[]}},{key:"getPropertyDescriptorByInputIndex",value:function(e){switch(e){case 0:return{targetPropertyFQN:"configuration.url",type:"string",optional:!0};default:return null}}}]),t}(Yi);v()(Bi,"instanceID",0),v()(Bi,"nodeName","widget-video"),window.TextControl=ii,window.SynchronizableFormControl=vt,window.FormControl=mt,window.FormElement=ft,window.ActionBarControl=Ot,window.AddressControl=Tt,window.CaptchaControl=Ct,window.CheckBoxControl=Nt,window.DateControl=Xt,window.DropDownControl=Qt,window.ElementNotSupported=ti,window.EmailControl=ai,window.FileControl=$t,window.CouponControl=qt,window.FeeControl=pi,window.FormHeaderControl=_i,window.FormulaControl=Zt,window.HeadingControl=gi,window.HTMLBlockControl=ei,window.ImageControl=Ei,window.LikertScaleControl=yi,window.MapControl=vi,window.NameControl=Ti,window.NumberControl=Ci,window.PageBreakControl=Ni,window.PasswordControl=Ai,window.PhoneControl=Ri,window.PriceControl=bi,window.RadioControl=Pi,window.SeparatorControl=Si,window.SignatureControl=Di,window.SocialControl=Li,window.StarRatingControl=ki,window.TermsOfServiceControl=Mi,window.TextAreaControl=xi,window.TimeControl=wi,window.WebsiteControl=Ui,window.WidgetFacebookControl=Fi,window.WidgetPDFControl=Vi,window.WidgetVideoControl=Bi,window.ElementVirtualProperty=D},33:function(e,t){}});